<!DOCTYPE html><html lang='en'><head><title>[basic.def.odr]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.3</a> One-definition rule <a class='abbr_ref'>[basic.def.odr]</a></h2><span class='indexparent'><a class='index' id=':object,definition'></a></span><span class='indexparent'><a class='index' id=':function,definition'></a></span><span class='indexparent'><a class='index' id=':class,definition'></a></span><span class='indexparent'><a class='index' id=':enumerator,definition'></a></span><span class='indexparent'><a class='index' id=':one-definition_rule'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L291'>#</a></div><div id='1.sentence-1' class='sentence'>No translation unit shall contain more than one definition of any
variable, function, class type, enumeration type, template,
default argument for a parameter (for a function in a given scope), or
default template argument<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L297'>#</a></div><div id='2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':expression,potentially_evaluated'></a></span>An expression or conversion is <a class='hidden_link' href='#def:potentially_evaluated' id='def:potentially_evaluated'><i >potentially evaluated</i></a> unless it is
an unevaluated operand (<a href='expr.prop'>[expr.prop]</a>),
a subexpression thereof, or
a conversion in an initialization or conversion sequence in such a context<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The set of <a class='hidden_link' href='#def:potential_results' id='def:potential_results'><i >potential results</i></a> of an expression <span class='math'><span class='mathalpha'>E</span></span> is
defined as follows:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div>If <span class='math'><span class='mathalpha'>E</span></span> is an
<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>, the set
contains only <span class='math'><span class='mathalpha'>E</span></span>.</li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div>If <span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.sub'>subscripting</a> operation with
an array operand, the set contains the potential results of that operand.</li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div>If <span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.ref'>class member access</a> expression of the form
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span> <span class='texttt'><span class='operator'>.</span></span> <span class='texttt'><span class='keyword'>template</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>
naming a non-static data member,
the set contains the potential results of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>.</li><li id='2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.4'>(2.4)</a></div>If <span class='math'><span class='mathalpha'>E</span></span> is a class member access expression
naming a static data member,
the set contains the <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> designating the data member.</li><li id='2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.5'>(2.5)</a></div>If <span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.mptr.oper'>pointer-to-member expression</a> of the form
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span> <span class='texttt'><span class='operator'>.</span><span class='operator'>*</span></span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>,
the set contains the potential results of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>.</li><li id='2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.6'>(2.6)</a></div>If <span class='math'><span class='mathalpha'>E</span></span> has the form <span class='texttt'><span class='parenthesis'>(</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span><span class='parenthesis'>)</span></span>, the set contains the
potential results of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>.</li><li id='2.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.7'>(2.7)</a></div>If <span class='math'><span class='mathalpha'>E</span></span> is a glvalue <a href='expr.cond'>conditional expression</a>,
the set is the union of the sets of
potential results of the second and third operands.</li><li id='2.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.8'>(2.8)</a></div>If <span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.comma'>comma expression</a>, the set
contains the potential results of the right operand.</li><li id='2.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.9'>(2.9)</a></div>Otherwise, the set is empty.</li></ul></div> <div id='2.note-1' class='note'>[&nbsp;<a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-3' class='sentence'>This set is a (possibly-empty) set of <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a><span class='textit'>s</span>,
each of which is either <span class='math'><span class='mathalpha'>E</span></span> or a subexpression of <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.example-1' class='example'>[&nbsp;<a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='2.sentence-4' class='sentence'>In the following example, the set of potential results of the initializer
of <span class='texttt'>n</span> contains the first <span class='texttt'>S<span class='operator'>&#x200b;::&#x200b;</span>x</span> subexpression, but not the second
<span class='texttt'>S<span class='operator'>&#x200b;::&#x200b;</span>x</span> subexpression<a class='hidden_link' href='#2.sentence-4'>.</a></div> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span>f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span>r<span class='parenthesis'>)</span>;
<span class='keyword'>int</span> n <span class='operator'>=</span> b <span class='operator'>?</span> <span class='parenthesis'>(</span><span class='literal'>1</span>, S<span class='operator'>::</span>x<span class='parenthesis'>)</span>           <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;x</span> is not odr-used here</span>
          <span class='operator'>:</span> f<span class='parenthesis'>(</span>S<span class='operator'>::</span>x<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;x</span> is odr-used here, so a definition is required</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L346'>#</a></div><div id='3.sentence-1' class='sentence'>A function is <a class='hidden_link' href='#def:function,named_by_expression_or_conversion' id='def:function,named_by_expression_or_conversion'><i >named by</i></a>
an expression or conversion as follows:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div>A function is named by an expression or conversion
  if it is the selected member
  of an overload set (<a href='basic.lookup'>[basic.lookup]</a>, <a href='over.match'>[over.match]</a>, <a href='over.over'>[over.over]</a>)
  in an overload resolution performed
  as part of forming that expression or conversion,
  unless it is a pure virtual function and either
  the expression is not an <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> naming the function with
  an explicitly qualified name or
  the expression forms a pointer to member (<a href='expr.unary.op'>[expr.unary.op]</a>). <div id='3.1.note-1' class='note'>[&nbsp;<a class='note_link' href='#3.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> This covers
  taking the address of functions (<a href='conv.func'>[conv.func]</a>, <a href='expr.unary.op'>[expr.unary.op]</a>),
  calls to named functions (<a href='expr.call'>[expr.call]</a>),
  operator overloading (<a href='over'>[over]</a>),
  user-defined conversions (<a href='class.conv.fct'>[class.conv.fct]</a>),
  allocation functions for <a class='grammarterm' href='expr.new#nt:new-expression'>new-expression</a><span class='textit'>s</span>, as well as
  non-default initialization (<a href='dcl.init'>[dcl.init]</a>). A constructor selected to copy or move an object of class type
  is considered to be named by an expression or conversion
  even if the call is actually elided by the implementation (<a href='class.copy.elision'>[class.copy.elision]</a>). —&nbsp;<i>end note</i></div>&nbsp;]</div> </li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div>A deallocation function for a class
  is named by a <a class='grammarterm' href='expr.new#nt:new-expression'>new-expression</a>
  if it is the single matching deallocation function
  for the allocation function selected by overload resolution,
  as specified in <a href='expr.new'>[expr.new]</a>.</li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div>A deallocation function for a class
  is named by a <a class='grammarterm' href='expr.delete#nt:delete-expression'>delete-expression</a>
  if it is the selected usual deallocation function
  as specified in <a href='expr.delete'>[expr.delete]</a> and <a href='class.free'>[class.free]</a>.</li></ul></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L385'>#</a></div><div id='4.sentence-1' class='sentence'>A variable <span class='texttt'>x</span> whose name appears as a
potentially-evaluated expression <span class='math'><span class='mathalpha'>E</span></span>
is <a class='hidden_link' href='#def:odr-use' id='def:odr-use'><i >odr-used</i></a> by <span class='math'><span class='mathalpha'>E</span></span> unless
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><span class='texttt'>x</span> is a reference that is
  usable in constant expressions (<a href='expr.const'>[expr.const]</a>), or</li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><span class='texttt'>x</span> is a variable of non-reference type that is
  usable in constant expressions and has no mutable subobjects, and
  <span class='math'><span class='mathalpha'>E</span></span> is an element of the set of potential results of an expression
  of non-volatile-qualified non-class type
  to which the lvalue-to-rvalue conversion (<a href='conv.lval'>[conv.lval]</a>) is applied, or</li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div><span class='texttt'>x</span> is a variable of non-reference type, and
  <span class='math'><span class='mathalpha'>E</span></span> is an element of the set of potential results
  of a discarded-value expression (<a href='expr.prop'>[expr.prop]</a>)
  to which the lvalue-to-rvalue conversion is not applied<a class='hidden_link' href='#4.sentence-1'>.</a></li></ul></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L406'>#</a></div><div id='5.sentence-1' class='sentence'>A structured binding is odr-used if it appears as a potentially-evaluated expression<a class='hidden_link' href='#5.sentence-1'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L409'>#</a></div><div id='6.sentence-1' class='sentence'><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> is odr-used if <span class='texttt'><span class='keyword'>this</span></span> appears as a potentially-evaluated expression
(including as the result of the implicit transformation in the body of a non-static
member function (<a href='class.mfct.non-static'>[class.mfct.non-static]</a>))<a class='hidden_link' href='#6.sentence-1'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L414'>#</a></div><div id='7.sentence-1' class='sentence'>A virtual member
function is odr-used if it is not pure<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>A function is odr-used if it is named by
a potentially-evaluated expression or conversion<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>A non-placement allocation or deallocation
function for a class is odr-used by the definition of a constructor of that
class<a class='hidden_link' href='#7.sentence-3'>.</a></div> <div id='7.sentence-4' class='sentence'>A non-placement deallocation function for a class is odr-used by the
definition of the destructor of that class, or by being selected by the
lookup at the point of definition of a virtual
destructor (<a href='class.dtor'>[class.dtor]</a>)<a class='hidden_link' href='#7.sentence-4'>.</a><a class='footnotenum' href='#footnote-20' id='footnoteref-20'>20</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L429'>#</a></div><div id='8.sentence-1' class='sentence'>An assignment operator function in a class is odr-used by an
implicitly-defined
copy-assignment or move-assignment function for another class as specified
in <a href='class.copy.assign'>[class.copy.assign]</a><a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>A constructor for a class is odr-used as specified
in <a href='dcl.init'>[dcl.init]</a><a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>A destructor for a class is odr-used if it is
<a href='class.dtor#def:potentially_invoked'>potentially invoked</a><a class='hidden_link' href='#8.sentence-3'>.</a></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L438'>#</a></div><div id='9.sentence-1' class='sentence'>A <a href='basic.pre#def:entity,local'>local entity</a>
is <a class='hidden_link' href='#def:odr-usable' id='def:odr-usable'><i >odr-usable</i></a> in a <a href='basic.scope.declarative#def:declarative_region'>declarative region</a> if:
<ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.1'>(9.1)</a></div>either the local entity is not <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>, or
an enclosing class or non-lambda function parameter scope exists and,
if the innermost such scope is a function parameter scope,
it corresponds to a non-static member function, and</li><li id='9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.2'>(9.2)</a></div>for each intervening declarative region (<a href='basic.scope.declarative'>[basic.scope.declarative]</a>)
between the point at which the entity is introduced and the region
(where <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> is considered to be introduced
within the innermost enclosing class or non-lambda function definition scope),
either:
<ul class='itemize'><li id='9.2.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#9.2.1'>(9.2.1)</a></div>the intervening declarative region is a block scope, or</li><li id='9.2.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#9.2.2'>(9.2.2)</a></div>the intervening declarative region is the function parameter scope of a <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a>
that has a <a class='grammarterm' href='expr.prim.lambda.capture#nt:simple-capture'>simple-capture</a>
naming the entity or has a <a class='grammarterm' href='expr.prim.lambda.capture#nt:capture-default'>capture-default</a>, and
the block scope of the <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a>
is also an intervening declarative region<a class='hidden_link' href='#9.sentence-1'>.</a></li></ul></li></ul></div><div id='9.sentence-2' class='sentence'>If a local entity is odr-used
in a declarative region in which it is not odr-usable,
the program is ill-formed<a class='hidden_link' href='#9.sentence-2'>.</a></div> <div id='9.example-1' class='example'>[&nbsp;<a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> n <span class='operator'>=</span> <span class='literal'>1</span>; <span class='curlybracket'>}</span>;                <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is not odr-usable due to intervening lambda-expression</span>
  <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> n <span class='operator'>=</span> <span class='literal'>2</span>; <span class='curlybracket'>}</span>         <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is not odr-usable due to intervening function definition scope</span>
  <span class='curlybracket'>}</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> n<span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is not odr-usable due to intervening function parameter scope</span>
  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> k <span class='operator'>=</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;            <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is not odr-usable due to being</span>
                                <span class='comment'>// outside the block scope of the <span class='grammarterm'>lambda-expression</span></span>
  <span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='squarebracket'>[</span>n<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> n; <span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>;    <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L480'>#</a></div><div id='10.sentence-1' class='sentence'>Every program shall contain exactly one definition of every non-inline
function or variable that is odr-used in that program
outside of a <a href='stmt.if#def:discarded_statement'>discarded statement</a>; no diagnostic required<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>The definition can appear explicitly in the program, it can be found in
the standard or a user-defined library, or (when appropriate) it is
implicitly defined (see <a href='class.default.ctor'>[class.default.ctor]</a>, <a href='class.copy.ctor'>[class.copy.ctor]</a>,
<a href='class.dtor'>[class.dtor]</a>, and <a href='class.copy.assign'>[class.copy.assign]</a>)<a class='hidden_link' href='#10.sentence-2'>.</a></div> <div id='10.example-1' class='example'>[&nbsp;<a class='example_link' href='#10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>return</span> A<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>decltype</span><span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>auto</span> x <span class='operator'>=</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre> <div id='10.sentence-3' class='sentence'>
A program containing this translation unit is ill-formed
because <span class='texttt'>g</span> is odr-used but not defined,
and cannot be defined in any other translation unit
because the local class <span class='texttt'>A</span> cannot be named outside this
translation unit<a class='hidden_link' href='#10.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L504'>#</a></div><div id='11.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:definition_domain' id='def:definition_domain'><i >definition domain</i></a> is
a <a class='grammarterm' href='module.private.frag#nt:private-module-fragment'>private-module-fragment</a> or
the portion of a translation unit
excluding its <a class='grammarterm' href='module.private.frag#nt:private-module-fragment'>private-module-fragment</a> (if any)<a class='hidden_link' href='#11.sentence-1'>.</a></div> <div id='11.sentence-2' class='sentence'>A definition of an inline function or variable shall be reachable
from the end of every definition domain
in which it is odr-used outside of a discarded statement<a class='hidden_link' href='#11.sentence-2'>.</a></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L513'>#</a></div><div id='12.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':type,incomplete'></a></span>A definition of a class is required to be reachable in every context in which
the class is used in a way that requires the class type to be complete<a class='hidden_link' href='#12.sentence-1'>.</a></div> <div id='12.example-1' class='example'>[&nbsp;<a class='example_link' href='#12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='12.sentence-2' class='sentence'>The following complete translation unit is well-formed,
even though it never defines <span class='texttt'>X</span>:
<pre class='codeblock'>
<span class='keyword'>struct</span> X;                       <span class='comment'>// declare <span class='tcode_in_codeblock'>X</span> as a struct type</span>
<span class='keyword'>struct</span> X<span class='operator'>*</span> x1;                   <span class='comment'>// use <span class='tcode_in_codeblock'>X</span> in pointer formation</span>
X<span class='operator'>*</span> x2;                          <span class='comment'>// use <span class='tcode_in_codeblock'>X</span> in pointer formation</span>
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='12.note-1' class='note'>[&nbsp;<a class='note_link' href='#12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='12.sentence-3' class='sentence'>The rules for declarations and expressions
describe in which contexts complete class types are required<a class='hidden_link' href='#12.sentence-3'>.</a></div> <div id='12.sentence-4' class='sentence'>A class
type <span class='texttt'>T</span> must be complete if:
<ul class='itemize'><li id='12.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.1'>(12.1)</a></div>an object of type <span class='texttt'>T</span> is <a href='basic.def'>defined</a>, or</li><li id='12.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.2'>(12.2)</a></div>a non-static class <a href='class.mem#def:data_member'>data member</a> of
type <span class='texttt'>T</span> is declared, or</li><li id='12.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.3'>(12.3)</a></div><span class='texttt'>T</span> is used as the allocated type or array element type in a
<a class='grammarterm' href='expr.new#nt:new-expression'>new-expression</a>, or</li><li id='12.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.4'>(12.4)</a></div>an lvalue-to-rvalue conversion is applied to
a glvalue referring
to an object of type <span class='texttt'>T</span> (<a href='conv.lval'>[conv.lval]</a>), or</li><li id='12.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.5'>(12.5)</a></div>an expression is converted (either implicitly or explicitly) to
type <span class='texttt'>T</span> (<a href='conv'>[conv]</a>, <a href='expr.type.conv'>[expr.type.conv]</a>,
<a href='expr.dynamic.cast'>[expr.dynamic.cast]</a>, <a href='expr.static.cast'>[expr.static.cast]</a>, <a href='expr.cast'>[expr.cast]</a>), or</li><li id='12.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.6'>(12.6)</a></div>an expression that is not a null pointer constant, and has type
other than <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span>, is converted to the type pointer to <span class='texttt'>T</span>
or reference to <span class='texttt'>T</span> using a <a href='conv'>standard conversion</a>,
a <a href='expr.dynamic.cast'><span class='texttt'>dynamic_&shy;cast</span></a> or
a <a href='expr.static.cast'><span class='texttt'>static_&shy;cast</span></a>, or</li><li id='12.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.7'>(12.7)</a></div>a <a href='expr.ref'>class member access</a> operator is applied to an expression of type
<span class='texttt'>T</span>, or</li><li id='12.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.8'>(12.8)</a></div>the <a href='expr.typeid'><span class='texttt'>typeid</span> operator</a> or the
<a href='expr.sizeof'><span class='texttt'>sizeof</span> operator</a> is applied to an operand of
type <span class='texttt'>T</span>, or</li><li id='12.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.9'>(12.9)</a></div>a function with a return type or argument type of type <span class='texttt'>T</span>
is defined (<a href='basic.def'>[basic.def]</a>) or <a href='expr.call'>called</a>, or</li><li id='12.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.10'>(12.10)</a></div>a class with a base class of type <span class='texttt'>T</span> is
defined (<a href='class.derived'>[class.derived]</a>), or</li><li id='12.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.11'>(12.11)</a></div>an lvalue of type <span class='texttt'>T</span> is <a href='expr.ass'>assigned to</a>, or</li><li id='12.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.12'>(12.12)</a></div>the type <span class='texttt'>T</span> is the subject of an
<a href='expr.alignof'><span class='texttt'>alignof</span> expression</a>, or</li><li id='12.13'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#12.13'>(12.13)</a></div>an <a class='grammarterm' href='except.pre#nt:exception-declaration'>exception-declaration</a> has type <span class='texttt'>T</span>, reference to
<span class='texttt'>T</span>, or pointer to <span class='texttt'>T</span> (<a href='except.handle'>[except.handle]</a>)<a class='hidden_link' href='#12.sentence-4'>.</a></li></ul></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L564'>#</a></div><div id='13.sentence-1' class='sentence'>There can be more than one definition of a
<ul class='itemize'><li id='13.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.1'>(13.1)</a></div>class type (<a href='class'>[class]</a>),</li><li id='13.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.2'>(13.2)</a></div>enumeration type (<a href='dcl.enum'>[dcl.enum]</a>),</li><li id='13.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.3'>(13.3)</a></div>inline function or variable (<a href='dcl.inline'>[dcl.inline]</a>),</li><li id='13.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.4'>(13.4)</a></div>templated entity (<a href='temp.pre'>[temp.pre]</a>),</li><li id='13.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.5'>(13.5)</a></div>default argument for a parameter (for a function in a given scope) (<a href='dcl.fct.default'>[dcl.fct.default]</a>), or</li><li id='13.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.6'>(13.6)</a></div>default template argument (<a href='temp.param'>[temp.param]</a>)</li></ul>
in a program provided that
each definition appears in a different translation unit and
the definitions satisfy the following requirements<a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='13.sentence-2' class='sentence'>Given such an entity <span class='texttt'>D</span> defined in more than one translation unit,
for all definitions of <span class='texttt'>D</span>, or,
if <span class='texttt'>D</span> is an unnamed enumeration,
for all definitions of <span class='texttt'>D</span> that are reachable at any given program point,
the following requirements shall be satisfied<a class='hidden_link' href='#13.sentence-2'>.</a></div> <ul class='itemize'><li id='13.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.7'>(13.7)</a></div><div id='13.7.sentence-1' class='sentence'>Each such definition
shall not be attached to a named module (<a href='module.unit'>[module.unit]</a>)<a class='hidden_link' href='#13.7.sentence-1'>.</a></div></li><li id='13.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.8'>(13.8)</a></div><div id='13.8.sentence-1' class='sentence'>Each such definition shall consist of
the same sequence of tokens,
where the definition of a closure type
is considered to consist of the sequence of tokens of
the corresponding <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a><a class='hidden_link' href='#13.8.sentence-1'>.</a></div></li><li id='13.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.9'>(13.9)</a></div><div id='13.9.sentence-1' class='sentence'>In each such definition, corresponding names, looked up
according to <a href='basic.lookup'>[basic.lookup]</a>, shall refer to the same entity, after
overload resolution (<a href='over.match'>[over.match]</a>) and after matching of partial
template specialization (<a href='temp.over'>[temp.over]</a>), except that a name can refer to
<ul class='itemize'><li id='13.9.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#13.9.1'>(13.9.1)</a></div>a non-volatile const object with internal or no linkage if the object
<ul class='itemize'><li id='13.9.1.1'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#13.9.1.1'>(13.9.1.1)</a></div>has the same literal type in all definitions of <span class='texttt'>D</span>,</li><li id='13.9.1.2'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#13.9.1.2'>(13.9.1.2)</a></div>is initialized with a <a href='expr.const'>constant expression</a>,</li><li id='13.9.1.3'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#13.9.1.3'>(13.9.1.3)</a></div>is not odr-used in any definition of <span class='texttt'>D</span>, and</li><li id='13.9.1.4'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#13.9.1.4'>(13.9.1.4)</a></div>has the same value in all definitions of <span class='texttt'>D</span>,</li></ul>
or</li><li id='13.9.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#13.9.2'>(13.9.2)</a></div>a reference with internal or no linkage
initialized with a constant expression such that
the reference refers to the same entity in all definitions of <span class='texttt'>D</span><a class='hidden_link' href='#13.9.sentence-1'>.</a></li></ul></div></li><li id='13.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.10'>(13.10)</a></div><div id='13.10.sentence-1' class='sentence'>In each such definition, except within
the default arguments and default template arguments of <span class='texttt'>D</span>,
corresponding <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a><span class='textit'>s</span> shall have
the same closure type (see below)<a class='hidden_link' href='#13.10.sentence-1'>.</a></div></li><li id='13.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.11'>(13.11)</a></div><div id='13.11.sentence-1' class='sentence'>In each such definition, corresponding entities shall have the
same language linkage<a class='hidden_link' href='#13.11.sentence-1'>.</a></div></li><li id='13.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.12'>(13.12)</a></div><div id='13.12.sentence-1' class='sentence'>In each such definition, the overloaded operators referred
to, the implicit calls to conversion functions, constructors, operator
new functions and operator delete functions, shall refer to the same
function<a class='hidden_link' href='#13.12.sentence-1'>.</a></div></li><li id='13.13'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.13'>(13.13)</a></div><div id='13.13.sentence-1' class='sentence'>In each such definition,
a default argument used by an (implicit or explicit) function call or
a default template argument used by an (implicit or explicit)
<a class='grammarterm' href='temp.names#nt:template-id'>template-id</a> or <a class='grammarterm' href='temp.names#nt:simple-template-id'>simple-template-id</a>
is treated as if its token sequence
were present in the definition of <span class='texttt'>D</span>;
that is, the default argument or default template argument
is subject to the requirements described in this paragraph (recursively)<a class='hidden_link' href='#13.13.sentence-1'>.</a></div></li><li id='13.14'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.14'>(13.14)</a></div><div id='13.14.sentence-1' class='sentence'>If <span class='texttt'>D</span> is a class with an implicitly-declared
constructor (<a href='class.default.ctor'>[class.default.ctor]</a>, <a href='class.copy.ctor'>[class.copy.ctor]</a>),
it is as if the constructor was
implicitly defined in every translation unit where it is odr-used, and the
implicit definition in every translation unit shall call the same
constructor for a subobject of <span class='texttt'>D</span><a class='hidden_link' href='#13.14.sentence-1'>.</a></div> <div id='13.14.example-1' class='example'>[&nbsp;<a class='example_link' href='#13.14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// translation unit 1:</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
X<span class='operator'>::</span>X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>class</span> D <span class='curlybracket'>{</span>
  X x <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='curlybracket'>}</span>;
D d1;                           <span class='comment'>// <span class='tcode_in_codeblock'>X(int, int)</span> called by <span class='tcode_in_codeblock'>D()</span></span>

<span class='comment'>// translation unit 2:</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
X<span class='operator'>::</span>X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>class</span> D <span class='curlybracket'>{</span>
  X x <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='curlybracket'>}</span>;
D d2;                           <span class='comment'>// <span class='tcode_in_codeblock'>X(int, int, int)</span> called by <span class='tcode_in_codeblock'>D()</span>;</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>D()</span>'s implicit definition violates the ODR</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='13.15'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.15'>(13.15)</a></div><div id='13.15.sentence-1' class='sentence'>If <span class='texttt'>D</span> is a class with
a defaulted three-way comparison operator function (<a href='class.spaceship'>[class.spaceship]</a>),
it is as if the operator was
implicitly defined in every translation unit where it is odr-used, and the
implicit definition in every translation unit shall call the same
comparison operators for each subobject of <span class='texttt'>D</span><a class='hidden_link' href='#13.15.sentence-1'>.</a></div></li></ul></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L674'>#</a></div><div id='14.sentence-1' class='sentence'>If <span class='texttt'>D</span> is a template and is defined in more than one
translation unit, then the preceding requirements
shall apply both to names from the template's enclosing scope used in the
template definition (<a href='temp.nondep'>[temp.nondep]</a>), and also to dependent names at
the point of instantiation (<a href='temp.dep'>[temp.dep]</a>)<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='14.sentence-2' class='sentence'>These requirements also apply to corresponding entities
defined within each definition of <span class='texttt'>D</span>
(including the closure types of <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a><span class='textit'>s</span>,
but excluding entities defined within default arguments or
default template arguments of either <span class='texttt'>D</span> or
an entity not defined within <span class='texttt'>D</span>)<a class='hidden_link' href='#14.sentence-2'>.</a></div> <div id='14.sentence-3' class='sentence'>For each such entity and for <span class='texttt'>D</span> itself,
the behavior is as if there is a single entity with a single definition,
including in the application of these requirements to other entities<a class='hidden_link' href='#14.sentence-3'>.</a></div> <div id='14.note-1' class='note'>[&nbsp;<a class='note_link' href='#14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='14.sentence-4' class='sentence'>The entity is still declared in multiple translation units, and <a href='basic.link'>[basic.link]</a>
still applies to these declarations<a class='hidden_link' href='#14.sentence-4'>.</a></div> <div id='14.sentence-5' class='sentence'>In particular,
<a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a><span class='textit'>s</span>
appearing in the type of <span class='texttt'>D</span> may result
in the different declarations having distinct types, and
<a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a><span class='textit'>s</span> appearing in a default argument of <span class='texttt'>D</span>
may still denote different types in different translation units<a class='hidden_link' href='#14.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L699'>#</a></div><div id='15.sentence-1' class='sentence'>If these definitions do not satisfy these requirements,
then the program is ill-formed;
a diagnostic is required only if
the entity is attached to a named module and
a prior definition is reachable at the point where a later definition occurs<a class='hidden_link' href='#15.sentence-1'>.</a></div></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L706'>#</a></div><div id='16.example-1' class='example'>[&nbsp;<a class='example_link' href='#16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>inline</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>bool</span> cond, <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>cond<span class='parenthesis'>)</span> f<span class='parenthesis'>(</span><span class='literal'>false</span>, <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>inline</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>bool</span> cond, <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>cond<span class='parenthesis'>)</span> g<span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>bool</span> cond, <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>if</span> <span class='parenthesis'>(</span>cond<span class='parenthesis'>)</span> h<span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre><div id='16.sentence-1' class='sentence'>If the definition of <span class='texttt'>f</span> appears in multiple translation units,
the behavior of the program is as if
there is only one definition of <span class='texttt'>f</span><a class='hidden_link' href='#16.sentence-1'>.</a></div> <div id='16.sentence-2' class='sentence'>If the definition of <span class='texttt'>g</span> appears in multiple translation units,
the program is ill-formed (no diagnostic required) because
each such definition uses a default argument that
refers to a distinct <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a> closure type<a class='hidden_link' href='#16.sentence-2'>.</a></div> <div id='16.sentence-3' class='sentence'>The definition of <span class='texttt'>X</span> can appear
in multiple translation units of a valid program;
the <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a><span class='textit'>s</span> defined within
the default argument of <span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>h</span> within the definition of <span class='texttt'>X</span>
denote the same closure type in each translation unit<a class='hidden_link' href='#16.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L736'>#</a></div><div id='17.sentence-1' class='sentence'>If, at any point in the program,
there is more than one
reachable unnamed enumeration definition in the same scope
that have the same first enumerator name and
do not have typedef names for linkage purposes (<a href='dcl.enum'>[dcl.enum]</a>),
those unnamed enumeration types shall be the same; no diagnostic required<a class='hidden_link' href='#17.sentence-1'>.</a></div> </div><div class='footnote' id='footnote-20'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-20'>20)</a></div><div id='footnote-20.sentence-1' class='sentence'>An implementation is not required
to call allocation and
deallocation functions from constructors or destructors; however, this
is a permissible implementation technique<a class='hidden_link' href='#footnote-20.sentence-1'>.</a></div> <a href='#footnoteref-20'>⮥</a></div></div></body></html>