<!DOCTYPE html><html lang='en'><head><title>[util.smartptr.shared]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>20</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>20.11</a> Smart pointers <a class='abbr_ref' href='smartptr#util.smartptr.shared'>[smartptr]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>20.11.3</a> Class template <span class='texttt'>shared_&shy;ptr</span> <a class='abbr_ref'>[util.smartptr.shared]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9645'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:shared_ptr'></a></span>The <span class='texttt'>shared_&shy;ptr</span> class template stores a pointer, usually obtained
via <span class='texttt'><span class='keyword'>new</span></span><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'><span class='texttt'>shared_&shy;ptr</span> implements semantics of shared ownership;
the last remaining owner of the pointer is responsible for destroying
the object, or otherwise releasing the resources associated with the stored pointer<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>A
<span class='texttt'>shared_&shy;ptr</span> is said to be empty if it does not own a pointer<a class='hidden_link' href='#1.sentence-3'>.</a></div><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> shared_ptr <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> element_type <span class='operator'>=</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
    <span class='keyword'>using</span> weak_type    <span class='operator'>=</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;

    <span class='comment'>// <a href='#const' title='20.11.3.1&emsp;Constructors'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>const]</a>, constructors</span>
    <span class='keyword'>constexpr</span> shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> shared_ptr<span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>:</span> shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      <span class='keyword'>explicit</span> shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d, A a<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>nullptr_t p, D d<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>nullptr_t p, D d, A a<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r, element_type<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r, element_type<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      <span class='keyword'>explicit</span> shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#dest' title='20.11.3.2&emsp;Destructor'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>dest]</a>, destructor</span>
    <span class='operator'>~</span>shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#assign' title='20.11.3.3&emsp;Assignment'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>assign]</a>, assignment</span>
    shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#mod' title='20.11.3.4&emsp;Modifiers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>mod]</a>, modifiers</span>
    <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d, A a<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#obs' title='20.11.3.5&emsp;Observers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>obs]</a>, observers</span>
    element_type<span class='operator'>*</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    element_type<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>ptrdiff_t i<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    <span class='keyword'>long</span> use_count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9731'>#</a></div><div id='2.sentence-1' class='sentence'>Specializations of <span class='texttt'>shared_&shy;ptr</span> shall be <span class='textit'>Cpp17CopyConstructible</span>,
<span class='textit'>Cpp17CopyAssignable</span>, and <span class='textit'>Cpp17LessThanComparable</span>, allowing their use in standard
containers<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Specializations of <span class='texttt'>shared_&shy;ptr</span> shall be
contextually convertible to <span class='texttt'><span class='keyword'>bool</span></span>,
allowing their use in boolean expressions and declarations in conditions<a class='hidden_link' href='#2.sentence-2'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9738'>#</a></div><div id='3.sentence-1' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>shared_&shy;ptr</span>
may be an incomplete type<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.note-1' class='note'>[<a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'><span class='texttt'>T</span> may be a function type<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9745'>#</a></div><div id='4.example-1' class='example'>[<a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>if</span> <span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> px <span class='operator'>=</span> dynamic_pointer_cast<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>py<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='comment'>// do something with <span class='tcode_in_codeblock'>px</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9754'>#</a></div><div id='5.sentence-1' class='sentence'>For purposes of determining the presence of a data race, member functions shall
access and modify only the <span class='texttt'>shared_&shy;ptr</span> and <span class='texttt'>weak_&shy;ptr</span> objects
themselves and not objects they refer to<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Changes in <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> do not
reflect modifications that can introduce data races<a class='hidden_link' href='#5.sentence-2'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9760'>#</a></div><div id='6.sentence-1' class='sentence'>For the purposes of subclause <a href='smartptr' title='20.11&emsp;Smart pointers'>[smartptr]</a>,
a pointer type <span class='texttt'>Y<span class='operator'>*</span></span> is said to be
<a class='hidden_link' href='#def:compatible_with,shared_ptr' title='20.11.3&emsp;Class template shared_&shy;ptr&emsp;[util.smartptr.shared]'><span id='def:compatible_with,shared_ptr'><span class='textit'>compatible with</span></span></a>
a pointer type <span class='texttt'>T<span class='operator'>*</span></span> when either
<span class='texttt'>Y<span class='operator'>*</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span> or
<span class='texttt'>Y</span> is <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> and <span class='texttt'>T</span> is <span class='mathit'>cv</span> <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#6.sentence-1'>.</a></div></div><div id='const' class='section'><h4 ><a class='secnum' href='#const' style='min-width:118pt'>20.11.3.1</a> Constructors <a class='abbr_ref' href='util.smartptr.shared.const'>[util.smartptr.shared.const]</a></h4><div class='para' id='const-1'><div class='marginalizedparent'><a class='marginalized' href='#const-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9770'>#</a></div><div id='const-1.sentence-1' class='sentence'>In the constructor definitions below,
enables <span class='texttt'>shared_&shy;from_&shy;this</span> with <span class='texttt'>p</span>,
for a pointer <span class='texttt'>p</span> of type <span class='texttt'>Y<span class='operator'>*</span></span>,
means that if <span class='texttt'>Y</span> has an unambiguous and accessible base class
that is a specialization of <a href='util.smartptr.enab' title='20.11.6&emsp;Class template enable_&shy;shared_&shy;from_&shy;this&emsp;[util.smartptr.enab]'><span class='texttt'>enable_&shy;shared_&shy;from_&shy;this</span></a>,
then <span class='texttt'>remove_&shy;cv_&shy;t<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>*</span></span> shall be implicitly convertible to <span class='texttt'>T<span class='operator'>*</span></span> and
the constructor evaluates the statement:
<pre class='codeblock'>
<span class='keyword'>if</span> <span class='parenthesis'>(</span>p <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>weak_this<span class='operator'>.</span>expired<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>weak_this <span class='operator'>=</span> shared_ptr<span class='anglebracket'>&lt;</span>remove_cv_t<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span>, <span class='keyword'>const_cast</span><span class='anglebracket'>&lt;</span>remove_cv_t<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre></div> <div id='const-1.sentence-2' class='sentence'>
The assignment to the <span class='texttt'>weak_&shy;this</span> member is not atomic and
conflicts with any potentially concurrent access to the same object (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#const-1.sentence-2'>.</a></div></div><div id='lib:shared_ptr,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='const-2'><div class='marginalizedparent'><a class='marginalized' href='#const-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9791'>#</a></div><div id='const-2.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#const-2.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>explicit</span> shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
</code></div></div><div class='para' id='const-3'><div class='marginalizedparent'><a class='marginalized' href='#const-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9802'>#</a></div><div id='const-3.sentence-1' class='sentence'><span class='textit'>Mandates:</span> <span class='texttt'>Y</span> is a complete type<a class='hidden_link' href='#const-3.sentence-1'>.</a></div></div></div><div class='para' id='const-4'><div class='marginalizedparent'><a class='marginalized' href='#const-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9806'>#</a></div><div id='const-4.sentence-1' class='sentence'><span class='textit'>Constraints:</span> When <span class='texttt'>T</span> is an array type,
the expression <span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> p</span> is well-formed and either
<span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> and <span class='texttt'>Y<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span>, or
<span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> and <span class='texttt'>Y<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#const-4.sentence-1'>.</a></div> <div id='const-4.sentence-2' class='sentence'>When <span class='texttt'>T</span> is not an array type,
the expression <span class='texttt'><span class='keyword'>delete</span> p</span> is well-formed and
<span class='texttt'>Y<span class='operator'>*</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#const-4.sentence-2'>.</a></div></div></div><div class='para' id='const-5'><div class='marginalizedparent'><a class='marginalized' href='#const-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9816'>#</a></div><div id='const-5.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> The expression
<span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> p</span>, when <span class='texttt'>T</span> is an array type, or
<span class='texttt'><span class='keyword'>delete</span> p</span>, when <span class='texttt'>T</span> is not an array type,
has well-defined behavior, and
does not throw exceptions<a class='hidden_link' href='#const-5.sentence-1'>.</a></div></div></div><div class='para' id='const-6'><div class='marginalizedparent'><a class='marginalized' href='#const-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9824'>#</a></div><div id='const-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> When <span class='texttt'>T</span> is not an array type,
constructs a <span class='texttt'>shared_&shy;ptr</span> object
that owns the pointer <span class='texttt'>p</span><a class='hidden_link' href='#const-6.sentence-1'>.</a></div> <div id='const-6.sentence-2' class='sentence'>Otherwise, constructs a <span class='texttt'>shared_&shy;ptr</span>
that owns <span class='texttt'>p</span> and a deleter of an
unspecified type that calls <span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> p</span><a class='hidden_link' href='#const-6.sentence-2'>.</a></div> <div id='const-6.sentence-3' class='sentence'>When <span class='texttt'>T</span> is not an array type,
enables <span class='texttt'>shared_&shy;from_&shy;this</span> with <span class='texttt'>p</span><a class='hidden_link' href='#const-6.sentence-3'>.</a></div> <div id='const-6.sentence-4' class='sentence'>If an exception is thrown, <span class='texttt'><span class='keyword'>delete</span> p</span> is called
when <span class='texttt'>T</span> is not an array type, <span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> p</span> otherwise<a class='hidden_link' href='#const-6.sentence-4'>.</a></div></div></div><div class='para' id='const-7'><div class='marginalizedparent'><a class='marginalized' href='#const-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9837'>#</a></div><div id='const-7.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#const-7.sentence-1'>.</a></div></div></div><div class='para' id='const-8'><div class='marginalizedparent'><a class='marginalized' href='#const-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9841'>#</a></div><div id='const-8.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>bad_&shy;alloc</span>, or an <span class='indexparent'><a class='index' id=':exception_type_when_shared_ptr_constructor_fails'></a></span>implementation-defined exception when a resource other than memory could not be obtained<a class='hidden_link' href='#const-8.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,constructor__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d, A a<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>nullptr_t p, D d<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>nullptr_t p, D d, A a<span class='parenthesis'>)</span>;
</code></div></div><div class='para' id='const-9'><div class='marginalizedparent'><a class='marginalized' href='#const-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9856'>#</a></div><div id='const-9.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>is_&shy;move_&shy;constructible_&shy;v<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>, and
<span class='texttt'>d<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> is a well-formed expression<a class='hidden_link' href='#const-9.sentence-1'>.</a></div> <div id='const-9.sentence-2' class='sentence'>For the first two overloads:
<ul class='itemize'><li id='const-9.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#const-9.1'>(9.1)</a></div><div id='const-9.1.sentence-1' class='sentence'>If <span class='texttt'>T</span> is an array type, then either
<span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> and <span class='texttt'>Y<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span>, or
<span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> and <span class='texttt'>Y<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#const-9.1.sentence-1'>.</a></div></li><li id='const-9.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#const-9.2'>(9.2)</a></div><div id='const-9.2.sentence-1' class='sentence'>If <span class='texttt'>T</span> is not an array type, then <span class='texttt'>Y<span class='operator'>*</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#const-9.2.sentence-1'>.</a></div></li></ul></div></div></div><div class='para' id='const-10'><div class='marginalizedparent'><a class='marginalized' href='#const-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9871'>#</a></div><div id='const-10.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> Construction of <span class='texttt'>d</span> and a deleter of type <span class='texttt'>D</span>
initialized with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>d<span class='parenthesis'>)</span></span> do not throw exceptions<a class='hidden_link' href='#const-10.sentence-1'>.</a></div> <div id='const-10.sentence-2' class='sentence'>The expression <span class='texttt'>d<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span>
has well-defined behavior and does not throw exceptions<a class='hidden_link' href='#const-10.sentence-2'>.</a></div> <div id='const-10.sentence-3' class='sentence'><span class='texttt'>A</span> meets the <span class='textit'>Cpp17Allocator</span> requirements (Table <a href='allocator.requirements#tab:cpp17.allocator' title='Table 36: Cpp17Allocator requirements &emsp;&ensp;[tab:cpp17.allocator]'>36</a>)<a class='hidden_link' href='#const-10.sentence-3'>.</a></div></div></div><div class='para' id='const-11'><div class='marginalizedparent'><a class='marginalized' href='#const-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9879'>#</a></div><div id='const-11.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>shared_&shy;ptr</span> object that owns the
object <span class='texttt'>p</span> and the deleter <span class='texttt'>d</span><a class='hidden_link' href='#const-11.sentence-1'>.</a></div> <div id='const-11.sentence-2' class='sentence'>When <span class='texttt'>T</span> is not an array type,
the first and second constructors enable <span class='texttt'>shared_&shy;from_&shy;this</span> with <span class='texttt'>p</span><a class='hidden_link' href='#const-11.sentence-2'>.</a></div> <div id='const-11.sentence-3' class='sentence'>The second and fourth constructors shall use a copy of <span class='texttt'>a</span> to
allocate memory for internal use<a class='hidden_link' href='#const-11.sentence-3'>.</a></div> <div id='const-11.sentence-4' class='sentence'>If an exception is thrown, <span class='texttt'>d<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> is called<a class='hidden_link' href='#const-11.sentence-4'>.</a></div></div></div><div class='para' id='const-12'><div class='marginalizedparent'><a class='marginalized' href='#const-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9889'>#</a></div><div id='const-12.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#const-12.sentence-1'>.</a></div></div></div><div class='para' id='const-13'><div class='marginalizedparent'><a class='marginalized' href='#const-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9893'>#</a></div><div id='const-13.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>bad_&shy;alloc</span>, or an <span class='indexparent'><a class='index' id=':exception_type_when_shared_ptr_constructor_fails_'></a></span>implementation-defined exception
when a resource other than memory could not be obtained<a class='hidden_link' href='#const-13.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,constructor___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r, element_type<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r, element_type<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='const-14'><div class='marginalizedparent'><a class='marginalized' href='#const-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9907'>#</a></div><div id='const-14.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>shared_&shy;ptr</span> instance that
stores <span class='texttt'>p</span> and shares ownership with
the initial value of <span class='texttt'>r</span><a class='hidden_link' href='#const-14.sentence-1'>.</a></div></div></div><div class='para' id='const-15'><div class='marginalizedparent'><a class='marginalized' href='#const-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9913'>#</a></div><div id='const-15.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#const-15.sentence-1'>.</a></div> <div id='const-15.sentence-2' class='sentence'>For the second overload,
<span class='texttt'>r</span> is empty and <span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#const-15.sentence-2'>.</a></div></div></div><div class='para' id='const-16'><div class='marginalizedparent'><a class='marginalized' href='#const-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9919'>#</a></div><div id='const-16.note-1' class='note'>[<a class='note_link' href='#const-16.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='const-16.sentence-1' class='sentence'>To avoid the possibility of a dangling pointer, the
user of this constructor should ensure that <span class='texttt'>p</span> remains valid at
least until the ownership group of <span class='texttt'>r</span> is destroyed<a class='hidden_link' href='#const-16.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div class='para' id='const-17'><div class='marginalizedparent'><a class='marginalized' href='#const-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9926'>#</a></div><div id='const-17.note-1' class='note'>[<a class='note_link' href='#const-17.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='const-17.sentence-1' class='sentence'>This constructor allows creation of an empty
<span class='texttt'>shared_&shy;ptr</span> instance with a non-null stored pointer<a class='hidden_link' href='#const-17.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='lib:shared_ptr,constructor____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor____'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='const-18'><div class='marginalizedparent'><a class='marginalized' href='#const-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9940'>#</a></div><div id='const-18.sentence-1' class='sentence'><span class='textit'>Constraints:</span> For the second constructor, <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#const-18.sentence-1'>.</a></div></div></div><div class='para' id='const-19'><div class='marginalizedparent'><a class='marginalized' href='#const-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9944'>#</a></div><div id='const-19.sentence-1' class='sentence'><span class='textit'>Effects:</span> If <span class='texttt'>r</span> is empty, constructs
an empty <span class='texttt'>shared_&shy;ptr</span> object; otherwise, constructs
a <span class='texttt'>shared_&shy;ptr</span> object that shares ownership with <span class='texttt'>r</span><a class='hidden_link' href='#const-19.sentence-1'>.</a></div></div></div><div class='para' id='const-20'><div class='marginalizedparent'><a class='marginalized' href='#const-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9950'>#</a></div><div id='const-20.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> r<span class='operator'>.</span>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#const-20.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,constructor_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor_____'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='const-21'><div class='marginalizedparent'><a class='marginalized' href='#const-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9962'>#</a></div><div id='const-21.sentence-1' class='sentence'><span class='textit'>Constraints:</span> For the second constructor, <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#const-21.sentence-1'>.</a></div></div></div><div class='para' id='const-22'><div class='marginalizedparent'><a class='marginalized' href='#const-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9966'>#</a></div><div id='const-22.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move constructs a <span class='texttt'>shared_&shy;ptr</span> instance from <span class='texttt'>r</span><a class='hidden_link' href='#const-22.sentence-1'>.</a></div></div></div><div class='para' id='const-23'><div class='marginalizedparent'><a class='marginalized' href='#const-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9970'>#</a></div><div id='const-23.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> shall contain the old value of
<span class='texttt'>r</span><a class='hidden_link' href='#const-23.sentence-1'>.</a></div> <div id='const-23.sentence-2' class='sentence'><span class='texttt'>r</span> shall be empty<a class='hidden_link' href='#const-23.sentence-2'>.</a></div> <div id='const-23.sentence-3' class='sentence'><span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#const-23.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor______'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr'></a></span><div class='itemdecl' id='const-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#const-itemdecl:7'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>explicit</span> shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
</code></div><div class='para' id='const-24'><div class='marginalizedparent'><a class='marginalized' href='#const-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9983'>#</a></div><div id='const-24.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#const-24.sentence-1'>.</a></div></div></div><div class='para' id='const-25'><div class='marginalizedparent'><a class='marginalized' href='#const-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9987'>#</a></div><div id='const-25.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>shared_&shy;ptr</span> object that shares ownership with
<span class='texttt'>r</span> and stores a copy of the pointer stored in <span class='texttt'>r</span><a class='hidden_link' href='#const-25.sentence-1'>.</a></div> <div id='const-25.sentence-2' class='sentence'>If an exception is thrown, the constructor has no effect<a class='hidden_link' href='#const-25.sentence-2'>.</a></div></div></div><div class='para' id='const-26'><div class='marginalizedparent'><a class='marginalized' href='#const-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9993'>#</a></div><div id='const-26.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> r<span class='operator'>.</span>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#const-26.sentence-1'>.</a></div></div></div><div class='para' id='const-27'><div class='marginalizedparent'><a class='marginalized' href='#const-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L9997'>#</a></div><div id='const-27.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>bad_&shy;weak_&shy;ptr</span> when <span class='texttt'>r<span class='operator'>.</span>expired<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#const-27.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor_______'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr'></a></span><div class='itemdecl' id='const-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#const-itemdecl:8'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
</code></div><div class='para' id='const-28'><div class='marginalizedparent'><a class='marginalized' href='#const-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10009'>#</a></div><div id='const-28.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span> and
<span class='texttt'>unique_&shy;ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is convertible to <span class='texttt'>element_&shy;type<span class='operator'>*</span></span><a class='hidden_link' href='#const-28.sentence-1'>.</a></div></div></div><div class='para' id='const-29'><div class='marginalizedparent'><a class='marginalized' href='#const-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10014'>#</a></div><div id='const-29.sentence-1' class='sentence'><span class='textit'>Effects:</span> If <span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span>, equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#const-29.sentence-1'>.</a></div> <div id='const-29.sentence-2' class='sentence'>Otherwise, if <span class='texttt'>D</span> is not a reference type,
equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span>r<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, r<span class='operator'>.</span>get_&shy;deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#const-29.sentence-2'>.</a></div> <div id='const-29.sentence-3' class='sentence'>Otherwise, equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span>r<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, ref<span class='parenthesis'>(</span>r<span class='operator'>.</span>get_&shy;deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#const-29.sentence-3'>.</a></div> <div id='const-29.sentence-4' class='sentence'>If an exception is thrown, the constructor has no effect<a class='hidden_link' href='#const-29.sentence-4'>.</a></div></div></div></div><div id='dest' class='section'><h4 ><a class='secnum' href='#dest' style='min-width:118pt'>20.11.3.2</a> Destructor <a class='abbr_ref' href='util.smartptr.shared.dest'>[util.smartptr.shared.dest]</a></h4><div id='lib:shared_ptr,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,destructor'>🔗</a></div><code class='itemdeclcode'><span class='operator'>~</span>shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div><div class='para' id='dest-1'><div class='marginalizedparent'><a class='marginalized' href='#dest-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10031'>#</a></div><div id='dest-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> <ul class='itemize'><li id='dest-1.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#dest-1.1'>(1.1)</a></div><div id='dest-1.1.sentence-1' class='sentence'>If <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> is empty or shares ownership with another
<span class='texttt'>shared_&shy;ptr</span> instance (<span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>1</span></span>), there are no side effects<a class='hidden_link' href='#dest-1.1.sentence-1'>.</a></div></li><li id='dest-1.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#dest-1.2'>(1.2)</a></div><div id='dest-1.2.sentence-1' class='sentence'>Otherwise, if <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> owns an object
<span class='texttt'>p</span> and a deleter <span class='texttt'>d</span>, <span class='texttt'>d<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> is called<a class='hidden_link' href='#dest-1.2.sentence-1'>.</a></div></li><li id='dest-1.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#dest-1.3'>(1.3)</a></div><div id='dest-1.3.sentence-1' class='sentence'>Otherwise, <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> owns a pointer <span class='texttt'>p</span>,
and <span class='texttt'><span class='keyword'>delete</span> p</span> is called<a class='hidden_link' href='#dest-1.3.sentence-1'>.</a></div></li></ul></div></div></div><div class='para' id='dest-2'><div class='marginalizedparent'><a class='marginalized' href='#dest-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10046'>#</a></div><div id='dest-2.note-1' class='note'>[<a class='note_link' href='#dest-2.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='dest-2.sentence-1' class='sentence'>Since the destruction of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
decreases the number of instances that share ownership with <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
by one,
after <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> has been destroyed
all <span class='texttt'>shared_&shy;ptr</span> instances that shared ownership with
<span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> will report a <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> that is one less
than its previous value<a class='hidden_link' href='#dest-2.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='assign' class='section'><h4 ><a class='secnum' href='#assign' style='min-width:118pt'>20.11.3.3</a> Assignment <a class='abbr_ref' href='util.smartptr.shared.assign'>[util.smartptr.shared.assign]</a></h4><div id='lib:shared_ptr,operator='><div id='lib:operator=,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,shared_ptr'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='assign-1'><div class='marginalizedparent'><a class='marginalized' href='#assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10066'>#</a></div><div id='assign-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#assign-1.sentence-1'>.</a></div></div></div><div class='para' id='assign-2'><div class='marginalizedparent'><a class='marginalized' href='#assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10070'>#</a></div><div id='assign-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#assign-2.sentence-1'>.</a></div></div></div><div class='para' id='assign-3'><div class='marginalizedparent'><a class='marginalized' href='#assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10074'>#</a></div><div id='assign-3.note-1' class='note'>[<a class='note_link' href='#assign-3.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='assign-3.sentence-1' class='sentence'>The use count updates caused by the temporary object
construction and destruction are not observable side
effects, so the implementation may meet the effects (and the
implied guarantees) via different means, without creating a
temporary<a class='hidden_link' href='#assign-3.sentence-1'>.</a></div> <div id='assign-3.sentence-2' class='sentence'>In particular, in the example:
<pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> p<span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span><span class='parenthesis'>)</span>;
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> q<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;
p <span class='operator'>=</span> p;
q <span class='operator'>=</span> p;
</pre>
both assignments may be no-ops<a class='hidden_link' href='#assign-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='lib:shared_ptr,operator=_'><div id='lib:operator=,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,shared_ptr_'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='assign-4'><div class='marginalizedparent'><a class='marginalized' href='#assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10098'>#</a></div><div id='assign-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#assign-4.sentence-1'>.</a></div></div></div><div class='para' id='assign-5'><div class='marginalizedparent'><a class='marginalized' href='#assign-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10102'>#</a></div><div id='assign-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#assign-5.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,operator=__'><div id='lib:operator=,shared_ptr__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,shared_ptr__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='assign-6'><div class='marginalizedparent'><a class='marginalized' href='#assign-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10113'>#</a></div><div id='assign-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#assign-6.sentence-1'>.</a></div></div></div><div class='para' id='assign-7'><div class='marginalizedparent'><a class='marginalized' href='#assign-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10117'>#</a></div><div id='assign-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#assign-7.sentence-1'>.</a></div></div></div></div><div id='mod' class='section'><h4 ><a class='secnum' href='#mod' style='min-width:118pt'>20.11.3.4</a> Modifiers <a class='abbr_ref' href='util.smartptr.shared.mod'>[util.smartptr.shared.mod]</a></h4><div id='lib:shared_ptr,swap'><div id='lib:swap,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> swap<span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='mod-1'><div class='marginalizedparent'><a class='marginalized' href='#mod-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10131'>#</a></div><div id='mod-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Exchanges the contents of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> and <span class='texttt'>r</span><a class='hidden_link' href='#mod-1.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,reset'><div id='lib:reset,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='mod-2'><div class='marginalizedparent'><a class='marginalized' href='#mod-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10142'>#</a></div><div id='mod-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#mod-2.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,reset_'><div id='lib:reset,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,shared_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='mod-3'><div class='marginalizedparent'><a class='marginalized' href='#mod-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10153'>#</a></div><div id='mod-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#mod-3.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,reset__'><div id='lib:reset,shared_ptr__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,shared_ptr__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='mod-4'><div class='marginalizedparent'><a class='marginalized' href='#mod-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10164'>#</a></div><div id='mod-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span>p, d<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#mod-4.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,reset___'><div id='lib:reset,shared_ptr___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,shared_ptr___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d, A a<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='mod-5'><div class='marginalizedparent'><a class='marginalized' href='#mod-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10175'>#</a></div><div id='mod-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr<span class='parenthesis'>(</span>p, d, a<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#mod-5.sentence-1'>.</a></div></div></div></div><div id='obs' class='section'><h4 ><a class='secnum' href='#obs' style='min-width:118pt'>20.11.3.5</a> Observers <a class='abbr_ref' href='util.smartptr.shared.obs'>[util.smartptr.shared.obs]</a></h4><span class='indexparent'><a class='index' id='lib:get,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,get'></a></span><div class='itemdecl' id='obs-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#obs-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>element_type<span class='operator'>*</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='para' id='obs-1'><div class='marginalizedparent'><a class='marginalized' href='#obs-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10187'>#</a></div><div id='obs-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> The stored pointer<a class='hidden_link' href='#obs-1.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,operator*'><div id='lib:operator*,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator*,shared_ptr'>🔗</a></div><code class='itemdeclcode'>T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='obs-2'><div class='marginalizedparent'><a class='marginalized' href='#obs-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10198'>#</a></div><div id='obs-2.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>0</span></span><a class='hidden_link' href='#obs-2.sentence-1'>.</a></div></div></div><div class='para' id='obs-3'><div class='marginalizedparent'><a class='marginalized' href='#obs-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10202'>#</a></div><div id='obs-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'><span class='operator'>*</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#obs-3.sentence-1'>.</a></div></div></div><div class='para' id='obs-4'><div class='marginalizedparent'><a class='marginalized' href='#obs-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10206'>#</a></div><div id='obs-4.sentence-1' class='sentence'><span class='textit'>Remarks:</span> When <span class='texttt'>T</span> is an array type or <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>void</span></span>,
it is unspecified whether this
member function is declared<a class='hidden_link' href='#obs-4.sentence-1'>.</a></div> <div id='obs-4.sentence-2' class='sentence'>If it is declared, it is unspecified what its
return type is, except that the declaration (although not necessarily the
definition) of the function shall be well-formed<a class='hidden_link' href='#obs-4.sentence-2'>.</a></div></div></div><div id='lib:shared_ptr,operator->'><div id='lib:operator->,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator-%3e,shared_ptr'>🔗</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='obs-5'><div class='marginalizedparent'><a class='marginalized' href='#obs-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10221'>#</a></div><div id='obs-5.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>0</span></span><a class='hidden_link' href='#obs-5.sentence-1'>.</a></div></div></div><div class='para' id='obs-6'><div class='marginalizedparent'><a class='marginalized' href='#obs-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10225'>#</a></div><div id='obs-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#obs-6.sentence-1'>.</a></div></div></div><div class='para' id='obs-7'><div class='marginalizedparent'><a class='marginalized' href='#obs-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10229'>#</a></div><div id='obs-7.sentence-1' class='sentence'><span class='textit'>Remarks:</span> When <span class='texttt'>T</span> is an array type,
it is unspecified whether this member function is declared<a class='hidden_link' href='#obs-7.sentence-1'>.</a></div> <div id='obs-7.sentence-2' class='sentence'>If it is declared, it is unspecified what its return type is,
except that the declaration (although not necessarily the definition)
of the function shall be well-formed<a class='hidden_link' href='#obs-7.sentence-2'>.</a></div></div></div><div id='lib:shared_ptr,operator[]'><div id='lib:operator[],shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%5b%5d,shared_ptr'>🔗</a></div><code class='itemdeclcode'>element_type<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>ptrdiff_t i<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div><div class='para' id='obs-8'><div class='marginalizedparent'><a class='marginalized' href='#obs-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10244'>#</a></div><div id='obs-8.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>0</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> i <span class='anglebracket'>&gt;</span><span class='operator'>=</span> <span class='literal'>0</span></span><a class='hidden_link' href='#obs-8.sentence-1'>.</a></div> <div id='obs-8.sentence-2' class='sentence'>If <span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>, <span class='texttt'>i <span class='anglebracket'>&lt;</span> N</span><a class='hidden_link' href='#obs-8.sentence-2'>.</a></div></div></div><div class='para' id='obs-9'><div class='marginalizedparent'><a class='marginalized' href='#obs-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10249'>#</a></div><div id='obs-9.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span></span><a class='hidden_link' href='#obs-9.sentence-1'>.</a></div></div></div><div class='para' id='obs-10'><div class='marginalizedparent'><a class='marginalized' href='#obs-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10253'>#</a></div><div id='obs-10.sentence-1' class='sentence'><span class='textit'>Throws:</span> Nothing<a class='hidden_link' href='#obs-10.sentence-1'>.</a></div></div></div><div class='para' id='obs-11'><div class='marginalizedparent'><a class='marginalized' href='#obs-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10257'>#</a></div><div id='obs-11.sentence-1' class='sentence'><span class='textit'>Remarks:</span> When <span class='texttt'>T</span> is not an array type,
it is unspecified whether this member function is declared<a class='hidden_link' href='#obs-11.sentence-1'>.</a></div> <div id='obs-11.sentence-2' class='sentence'>If it is declared, it is unspecified what its return type is,
except that the declaration (although not necessarily the definition)
of the function shall be well-formed<a class='hidden_link' href='#obs-11.sentence-2'>.</a></div></div></div><div id='lib:shared_ptr,use_count'><div id='lib:use_count,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:use_count,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>long</span> use_count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='obs-12'><div class='marginalizedparent'><a class='marginalized' href='#obs-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10272'>#</a></div><div id='obs-12.sentence-1' class='sentence'><span class='textit'>Returns:</span> The number of <span class='texttt'>shared_&shy;ptr</span> objects, <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> included,
that share ownership with <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>, or <span class='texttt'><span class='literal'>0</span></span> when <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> is
empty<a class='hidden_link' href='#obs-12.sentence-1'>.</a></div></div></div><div class='para' id='obs-13'><div class='marginalizedparent'><a class='marginalized' href='#obs-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10278'>#</a></div><div id='obs-13.sentence-1' class='sentence'><span class='textit'>Synchronization:</span> None<a class='hidden_link' href='#obs-13.sentence-1'>.</a></div></div></div><div class='para' id='obs-14'><div class='marginalizedparent'><a class='marginalized' href='#obs-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10282'>#</a></div><div id='obs-14.note-1' class='note'>[<a class='note_link' href='#obs-14.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='obs-14.sentence-1' class='sentence'><span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span>
does not imply a specific return value of <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#obs-14.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div class='para' id='obs-15'><div class='marginalizedparent'><a class='marginalized' href='#obs-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10288'>#</a></div><div id='obs-15.note-1' class='note'>[<a class='note_link' href='#obs-15.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='obs-15.sentence-1' class='sentence'><span class='texttt'>weak_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>lock<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
can affect the return value of <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#obs-15.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div class='para' id='obs-16'><div class='marginalizedparent'><a class='marginalized' href='#obs-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10294'>#</a></div><div id='obs-16.note-1' class='note'>[<a class='note_link' href='#obs-16.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='obs-16.sentence-1' class='sentence'>When multiple threads
can affect the return value of <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
the result should be treated as approximate<a class='hidden_link' href='#obs-16.sentence-1'>.</a></div> <div id='obs-16.sentence-2' class='sentence'>In particular, <span class='texttt'>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span> does not imply that accesses through
a previously destroyed <span class='texttt'>shared_&shy;ptr</span> have in any sense completed<a class='hidden_link' href='#obs-16.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='lib:shared_ptr,operator_bool'><div id='lib:operator_bool,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_bool,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='obs-17'><div class='marginalizedparent'><a class='marginalized' href='#obs-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10310'>#</a></div><div id='obs-17.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>0</span></span><a class='hidden_link' href='#obs-17.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,owner_before'><div id='lib:owner_before,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:owner_before,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='obs-18'><div class='marginalizedparent'><a class='marginalized' href='#obs-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10322'>#</a></div><div id='obs-18.sentence-1' class='sentence'><span class='textit'>Returns:</span> An unspecified value such that
<ul class='itemize'><li id='obs-18.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#obs-18.1'>(18.1)</a></div><span class='texttt'>x<span class='operator'>.</span>owner_&shy;before<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span></span> defines a strict weak ordering as defined in <a href='alg.sorting' title='25.8&emsp;Sorting and related operations'>[alg.<span class='shy'></span>sorting]</a>;</li><li id='obs-18.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#obs-18.2'>(18.2)</a></div>under the equivalence relation defined by <span class='texttt'>owner_&shy;before</span>,
<span class='texttt'><span class='operator'>!</span>a<span class='operator'>.</span>owner_&shy;before<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>b<span class='operator'>.</span>owner_&shy;before<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span></span>, two <span class='texttt'>shared_&shy;ptr</span> or
<span class='texttt'>weak_&shy;ptr</span> instances are equivalent if and only if they share ownership or
are both empty<a class='hidden_link' href='#obs-18.sentence-1'>.</a></li></ul></div></div></div></div><div id='create' class='section'><h4 ><a class='secnum' href='#create' style='min-width:118pt'>20.11.3.6</a> Creation <a class='abbr_ref' href='util.smartptr.shared.create'>[util.smartptr.shared.create]</a></h4><div class='para' id='create-1'><div class='marginalizedparent'><a class='marginalized' href='#create-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10337'>#</a></div><div id='create-1.sentence-1' class='sentence'>The common requirements that apply to all
<span class='texttt'>make_&shy;shared</span>,
<span class='texttt'>allocate_&shy;shared</span>,
<span class='texttt'>make_&shy;shared_&shy;for_&shy;overwrite</span>, and
<span class='texttt'>allocate_&shy;shared_&shy;for_&shy;overwrite</span> overloads,
unless specified otherwise, are described below<a class='hidden_link' href='#create-1.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id='lib:make_shared'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared'></a></span></div><div class='itemdecl' id='create-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#create-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='textit'>args</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, <span class='textit'>args</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span><span class='textit'>args</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, <span class='textit'>args</span><span class='parenthesis'>)</span>;
</code></div><div class='para' id='create-2'><div class='marginalizedparent'><a class='marginalized' href='#create-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10359'>#</a></div><div id='create-2.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> <span class='texttt'>A</span> meets the <span class='textit'>Cpp17Allocator</span> requirements (Table <a href='allocator.requirements#tab:cpp17.allocator' title='Table 36: Cpp17Allocator requirements &emsp;&ensp;[tab:cpp17.allocator]'>36</a>)<a class='hidden_link' href='#create-2.sentence-1'>.</a></div></div></div><div class='para' id='create-3'><div class='marginalizedparent'><a class='marginalized' href='#create-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10363'>#</a></div><div id='create-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Allocates memory for an object of type <span class='texttt'>T</span>
(or <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> when <span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
where <span class='texttt'>N</span> is determined from <span class='textit'>args</span> as specified by the concrete overload)<a class='hidden_link' href='#create-3.sentence-1'>.</a></div> <div id='create-3.sentence-2' class='sentence'>The object is initialized from <span class='textit'>args</span> as specified by the concrete overload<a class='hidden_link' href='#create-3.sentence-2'>.</a></div> <div id='create-3.sentence-3' class='sentence'>The <span class='texttt'>allocate_&shy;shared</span> and <span class='texttt'>allocate_&shy;shared_&shy;for_&shy;overwrite</span> templates
use a copy of <span class='texttt'>a</span>
(rebound for an unspecified <span class='texttt'>value_&shy;type</span>) to allocate memory<a class='hidden_link' href='#create-3.sentence-3'>.</a></div> <div id='create-3.sentence-4' class='sentence'>If an exception is thrown, the functions have no effect<a class='hidden_link' href='#create-3.sentence-4'>.</a></div></div></div><div class='para' id='create-4'><div class='marginalizedparent'><a class='marginalized' href='#create-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10374'>#</a></div><div id='create-4.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> <span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>0</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='operator'>.</span>use_&shy;count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span>,
where <span class='texttt'>r</span> is the return value<a class='hidden_link' href='#create-4.sentence-1'>.</a></div></div></div><div class='para' id='create-5'><div class='marginalizedparent'><a class='marginalized' href='#create-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10379'>#</a></div><div id='create-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> instance that stores and owns the address of
the newly constructed object<a class='hidden_link' href='#create-5.sentence-1'>.</a></div></div></div><div class='para' id='create-6'><div class='marginalizedparent'><a class='marginalized' href='#create-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10384'>#</a></div><div id='create-6.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>bad_&shy;alloc</span>, or
an exception thrown from <span class='texttt'>allocate</span> or from the initialization of the object<a class='hidden_link' href='#create-6.sentence-1'>.</a></div></div></div><div class='para' id='create-7'><div class='marginalizedparent'><a class='marginalized' href='#create-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10389'>#</a></div><div id='create-7.sentence-1' class='sentence'><span class='textit'>Remarks:</span> <ul class='itemize'><li id='create-7.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.1'>(7.1)</a></div><div id='create-7.1.sentence-1' class='sentence'>Implementations should perform no more than one memory allocation<a class='hidden_link' href='#create-7.1.sentence-1'>.</a></div> <div id='create-7.1.note-1' class='note'>[<a class='note_link' href='#create-7.1.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='create-7.1.sentence-2' class='sentence'>This provides efficiency equivalent to an intrusive smart pointer<a class='hidden_link' href='#create-7.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </li><li id='create-7.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.2'>(7.2)</a></div><div id='create-7.2.sentence-1' class='sentence'>When an object of an array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>u</span> (of the same type),
  this shall be interpreted to mean that
  each array element of the object has as its initial value
  the corresponding element from <span class='texttt'>u</span><a class='hidden_link' href='#create-7.2.sentence-1'>.</a></div></li><li id='create-7.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.3'>(7.3)</a></div><div id='create-7.3.sentence-1' class='sentence'>When an object of an array type is specified to have
  a default initial value,
  this shall be interpreted to mean that each array element of the object
  has a default initial value<a class='hidden_link' href='#create-7.3.sentence-1'>.</a></div></li><li id='create-7.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.4'>(7.4)</a></div><div id='create-7.4.sentence-1' class='sentence'>When a (sub)object of a non-array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>v</span>, or <span class='texttt'>U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is a list of constructor arguments,
  <span class='texttt'>make_&shy;shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span></span> or <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span> respectively,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and points to storage
  suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#create-7.4.sentence-1'>.</a></div></li><li id='create-7.5'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.5'>(7.5)</a></div><div id='create-7.5.sentence-1' class='sentence'>When a (sub)object of a non-array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>v</span>, or <span class='texttt'>U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is a list of constructor arguments,
  <span class='texttt'>allocate_&shy;shared</span> shall initialize this (sub)object
  via the expression
  <ul class='itemize'><li id='create-7.5.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#create-7.5.1'>(7.5.1)</a></div><span class='texttt'>allocator_&shy;traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pv, v<span class='parenthesis'>)</span></span> or</li><li id='create-7.5.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#create-7.5.2'>(7.5.2)</a></div><span class='texttt'>allocator_&shy;traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pv, l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span></li></ul>
  respectively,
  where <span class='texttt'>pv</span> points to storage
  suitable to hold an object of type <span class='texttt'>U</span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_&shy;shared</span>
  such that its <span class='texttt'>value_&shy;type</span> is <span class='texttt'>remove_&shy;cv_&shy;t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#create-7.5.sentence-1'>.</a></div></li><li id='create-7.6'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.6'>(7.6)</a></div><div id='create-7.6.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is specified to have
  a default initial value,
  <span class='texttt'>make_&shy;shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and points to storage
  suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#create-7.6.sentence-1'>.</a></div></li><li id='create-7.7'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.7'>(7.7)</a></div><div id='create-7.7.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is specified to have
  a default initial value,
  <span class='texttt'>allocate_&shy;shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'>allocator_&shy;traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pv<span class='parenthesis'>)</span></span>,
  where <span class='texttt'>pv</span> points to storage
  suitable to hold an object of type <span class='texttt'>U</span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_&shy;shared</span>
  such that its <span class='texttt'>value_&shy;type</span> is <span class='texttt'>remove_&shy;cv_&shy;t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#create-7.7.sentence-1'>.</a></div></li><li id='create-7.8'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.8'>(7.8)</a></div><div id='create-7.8.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is initialized by
  <span class='texttt'>make_&shy;shared_&shy;for_&shy;overwrite</span> or<br/>  <span class='texttt'>allocate_&shy;shared_&shy;for_&shy;overwrite</span>,
  it is initialized via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U</span>,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and
  points to storage suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#create-7.8.sentence-1'>.</a></div></li><li id='create-7.9'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.9'>(7.9)</a></div><div id='create-7.9.sentence-1' class='sentence'>Array elements are initialized in ascending order of their addresses<a class='hidden_link' href='#create-7.9.sentence-1'>.</a></div></li><li id='create-7.10'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.10'>(7.10)</a></div><div id='create-7.10.sentence-1' class='sentence'>When the lifetime of the object managed by the return value ends, or
  when the initialization of an array element throws an exception,
  the initialized elements are destroyed in the reverse order
  of their original construction<a class='hidden_link' href='#create-7.10.sentence-1'>.</a></div></li><li id='create-7.11'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.11'>(7.11)</a></div><div id='create-7.11.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span>
  that was initialized by <span class='texttt'>make_&shy;shared</span> is to be destroyed,
  it is destroyed via the expression <span class='texttt'>pv<span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='operator'>~</span>U<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> where
  <span class='texttt'>pv</span> points to that object of type <span class='texttt'>U</span><a class='hidden_link' href='#create-7.11.sentence-1'>.</a></div></li><li id='create-7.12'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#create-7.12'>(7.12)</a></div><div id='create-7.12.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span>
  that was initialized by <span class='texttt'>allocate_&shy;shared</span> is to be destroyed,
  it is destroyed via the expression
  <span class='texttt'>allocator_&shy;traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>destroy<span class='parenthesis'>(</span>a2, pv<span class='parenthesis'>)</span></span> where
  <span class='texttt'>pv</span> points to that object of type <span class='texttt'>remove_&shy;cv_&shy;t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_&shy;shared</span>
  such that its <span class='texttt'>value_&shy;type</span> is <span class='texttt'>remove_&shy;cv_&shy;t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#create-7.12.sentence-1'>.</a></div></li></ul></div> <div id='create-7.note-2' class='note'>[<a class='note_link' href='#create-7.note-2'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='create-7.sentence-2' class='sentence'>These functions will typically allocate more memory than <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> to
allow for internal bookkeeping structures such as reference counts<a class='hidden_link' href='#create-7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared_'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared_'></a></span><div class='itemdecl' id='create-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#create-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;                    <span class='comment'>// <span class='texttt'>T</span> is not array</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;    <span class='comment'>// <span class='texttt'>T</span> is not array</span>
</code></div><div class='para' id='create-8'><div class='marginalizedparent'><a class='marginalized' href='#create-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10494'>#</a></div><div id='create-8.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>T</span> is not an array type<a class='hidden_link' href='#create-8.sentence-1'>.</a></div></div></div><div class='para' id='create-9'><div class='marginalizedparent'><a class='marginalized' href='#create-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10498'>#</a></div><div id='create-9.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>T</span>
with an initial value <span class='texttt'>T<span class='parenthesis'>(</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#create-9.sentence-1'>.</a></div></div></div><div class='para' id='create-10'><div class='marginalizedparent'><a class='marginalized' href='#create-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10503'>#</a></div><div id='create-10.sentence-1' class='sentence'><span class='textit'>Remarks:</span> The <span class='texttt'>shared_&shy;ptr</span> constructors called by these functions
enable <span class='texttt'>shared_&shy;from_&shy;this</span>
with the address of the newly constructed object of type <span class='texttt'>T</span><a class='hidden_link' href='#create-10.sentence-1'>.</a></div></div></div><div class='para' id='create-11'><div class='marginalizedparent'><a class='marginalized' href='#create-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10509'>#</a></div><div id='create-11.example-1' class='example'>[<a class='example_link' href='#create-11.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to <span class='tcode_in_codeblock'>int()</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>16</span>, <span class='literal'>1</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to vector of <span class='tcode_in_codeblock'>16</span> elements with value <span class='tcode_in_codeblock'>1</span></span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared__'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared__'></a></span><div class='itemdecl' id='create-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#create-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>
  make_shared<span class='parenthesis'>(</span>size_t N<span class='parenthesis'>)</span>;                                        <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N<span class='parenthesis'>)</span>;          <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
</code></div><div class='para' id='create-12'><div class='marginalizedparent'><a class='marginalized' href='#create-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10529'>#</a></div><div id='create-12.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#create-12.sentence-1'>.</a></div></div></div><div class='para' id='create-13'><div class='marginalizedparent'><a class='marginalized' href='#create-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10533'>#</a></div><div id='create-13.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>
with a default initial value,
where <span class='texttt'>U</span> is <span class='texttt'>remove_&shy;extent_&shy;t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#create-13.sentence-1'>.</a></div></div></div><div class='para' id='create-14'><div class='marginalizedparent'><a class='marginalized' href='#create-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10539'>#</a></div><div id='create-14.example-1' class='example'>[<a class='example_link' href='#create-14.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[1024]</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>6</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[6][2][2]</span></span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared___'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared___'></a></span><div class='itemdecl' id='create-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#create-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                  <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;                    <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
</code></div><div class='para' id='create-15'><div class='marginalizedparent'><a class='marginalized' href='#create-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10560'>#</a></div><div id='create-15.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span><a class='hidden_link' href='#create-15.sentence-1'>.</a></div></div></div><div class='para' id='create-16'><div class='marginalizedparent'><a class='marginalized' href='#create-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10564'>#</a></div><div id='create-16.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>T</span>
with a default initial value<a class='hidden_link' href='#create-16.sentence-1'>.</a></div></div></div><div class='para' id='create-17'><div class='marginalizedparent'><a class='marginalized' href='#create-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10569'>#</a></div><div id='create-17.example-1' class='example'>[<a class='example_link' href='#create-17.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[1024]</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[6][2][2]</span></span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared____'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared____'></a></span><div class='itemdecl' id='create-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#create-itemdecl:5'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>size_t N,
                            <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;       <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N,
                                <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
</code></div><div class='para' id='create-18'><div class='marginalizedparent'><a class='marginalized' href='#create-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10592'>#</a></div><div id='create-18.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#create-18.sentence-1'>.</a></div></div></div><div class='para' id='create-19'><div class='marginalizedparent'><a class='marginalized' href='#create-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10596'>#</a></div><div id='create-19.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>,
where <span class='texttt'>U</span> is <span class='texttt'>remove_&shy;extent_&shy;t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> and
each array element has an initial value of <span class='texttt'>u</span><a class='hidden_link' href='#create-19.sentence-1'>.</a></div></div></div><div class='para' id='create-20'><div class='marginalizedparent'><a class='marginalized' href='#create-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10602'>#</a></div><div id='create-20.example-1' class='example'>[<a class='example_link' href='#create-20.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span>, <span class='literal'>1.0</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>double[1024]</span>, where each element is <span class='tcode_in_codeblock'>1.0</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>6</span>, <span class='curlybracket'>{</span><span class='literal'>1.0</span>, <span class='literal'>0.0</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>double[6][2]</span>, where each <span class='tcode_in_codeblock'>double[2]</span> element is <span class='tcode_in_codeblock'>{1.0, 0.0}</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> r <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>4</span>, <span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>vector&lt;int&gt;[4]</span>, where each vector has contents <span class='tcode_in_codeblock'>{1, 2}</span></span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared_____'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared_____'></a></span><div class='itemdecl' id='create-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#create-itemdecl:6'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;       <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a,
                                <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
</code></div><div class='para' id='create-21'><div class='marginalizedparent'><a class='marginalized' href='#create-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10626'>#</a></div><div id='create-21.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span><a class='hidden_link' href='#create-21.sentence-1'>.</a></div></div></div><div class='para' id='create-22'><div class='marginalizedparent'><a class='marginalized' href='#create-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10630'>#</a></div><div id='create-22.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>T</span>,
where each array element of type <span class='texttt'>remove_&shy;extent_&shy;t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
has an initial value of <span class='texttt'>u</span><a class='hidden_link' href='#create-22.sentence-1'>.</a></div></div></div><div class='para' id='create-23'><div class='marginalizedparent'><a class='marginalized' href='#create-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10636'>#</a></div><div id='create-23.example-1' class='example'>[<a class='example_link' href='#create-23.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1.0</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>double[1024]</span>, where each element is <span class='tcode_in_codeblock'>1.0</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1.0</span>, <span class='literal'>0.0</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>double[6][2]</span>, where each double[2] element is <span class='tcode_in_codeblock'>{1.0, 0.0}</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> r <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>vector&lt;int&gt;[4]</span>, where each vector has contents <span class='tcode_in_codeblock'>{1, 2}</span></span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared______'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared______'></a></span><div class='itemdecl' id='create-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#create-itemdecl:7'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;
</code></div><div class='para' id='create-24'><div class='marginalizedparent'><a class='marginalized' href='#create-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10659'>#</a></div><div id='create-24.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>T</span> is not an array of unknown bound<a class='hidden_link' href='#create-24.sentence-1'>.</a></div></div></div><div class='para' id='create-25'><div class='marginalizedparent'><a class='marginalized' href='#create-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10663'>#</a></div><div id='create-25.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>T</span><a class='hidden_link' href='#create-25.sentence-1'>.</a></div></div></div><div class='para' id='create-26'><div class='marginalizedparent'><a class='marginalized' href='#create-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10667'>#</a></div><div id='create-26.example-1' class='example'>[<a class='example_link' href='#create-26.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>double</span> data<span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
shared_ptr<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a default-initialized <span class='tcode_in_codeblock'>X</span>, where each element in <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;data</span> has an indeterminate value</span>

shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a default-initialized <span class='tcode_in_codeblock'>double[1024]</span>, where each element has an indeterminate value</span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared_______'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared_______'></a></span><div class='itemdecl' id='create-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#create-itemdecl:8'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span>size_t N<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N<span class='parenthesis'>)</span>;
</code></div><div class='para' id='create-27'><div class='marginalizedparent'><a class='marginalized' href='#create-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10690'>#</a></div><div id='create-27.sentence-1' class='sentence'><span class='textit'>Constraints:</span> <span class='texttt'>T</span> is an array of unknown bound<a class='hidden_link' href='#create-27.sentence-1'>.</a></div></div></div><div class='para' id='create-28'><div class='marginalizedparent'><a class='marginalized' href='#create-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10694'>#</a></div><div id='create-28.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>,
where <span class='texttt'>U</span> is <span class='texttt'>remove_&shy;extent_&shy;t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#create-28.sentence-1'>.</a></div></div></div><div class='para' id='create-29'><div class='marginalizedparent'><a class='marginalized' href='#create-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10699'>#</a></div><div id='create-29.example-1' class='example'>[<a class='example_link' href='#create-29.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a default-initialized <span class='tcode_in_codeblock'>double[1024]</span>, where each element has an indeterminate value</span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div></div><div id='cmp' class='section'><h4 ><a class='secnum' href='#cmp' style='min-width:118pt'>20.11.3.7</a> Comparison <a class='abbr_ref' href='util.smartptr.shared.cmp'>[util.smartptr.shared.cmp]</a></h4><div id='lib:shared_ptr,operator=='><div id='lib:operator==,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='cmp-1'><div class='marginalizedparent'><a class='marginalized' href='#cmp-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10717'>#</a></div><div id='cmp-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>a<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> b<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cmp-1.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,operator==_'><div id='lib:operator==,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,shared_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='cmp-2'><div class='marginalizedparent'><a class='marginalized' href='#cmp-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10729'>#</a></div><div id='cmp-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'><span class='operator'>!</span>a</span><a class='hidden_link' href='#cmp-2.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,operator<=>'><div id='lib:operator<=>,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c=%3e,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  strong_ordering <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='cmp-3'><div class='marginalizedparent'><a class='marginalized' href='#cmp-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10741'>#</a></div><div id='cmp-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>compare_&shy;three_&shy;way<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>a<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, b<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cmp-3.sentence-1'>.</a></div></div></div><div class='para' id='cmp-4'><div class='marginalizedparent'><a class='marginalized' href='#cmp-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10745'>#</a></div><div id='cmp-4.note-1' class='note'>[<a class='note_link' href='#cmp-4.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='cmp-4.sentence-1' class='sentence'>Defining a comparison function allows <span class='texttt'>shared_&shy;ptr</span> objects
to be used as keys in associative containers<a class='hidden_link' href='#cmp-4.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='lib:shared_ptr,operator<=>_'><div id='lib:operator<=>,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c=%3e,shared_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  strong_ordering <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='cmp-5'><div class='marginalizedparent'><a class='marginalized' href='#cmp-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10759'>#</a></div><div id='cmp-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>compare_&shy;three_&shy;way<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>a<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, <span class='literal'>nullptr</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cmp-5.sentence-1'>.</a></div></div></div></div><div id='spec' class='section'><h4 ><a class='secnum' href='#spec' style='min-width:118pt'>20.11.3.8</a> Specialized algorithms <a class='abbr_ref' href='util.smartptr.shared.spec'>[util.smartptr.shared.spec]</a></h4><div id='lib:shared_ptr,swap_'><div id='lib:swap,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap,shared_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='spec-1'><div class='marginalizedparent'><a class='marginalized' href='#spec-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10773'>#</a></div><div id='spec-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>a<span class='operator'>.</span>swap<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span></span><a class='hidden_link' href='#spec-1.sentence-1'>.</a></div></div></div></div><div id='cast' class='section'><h4 ><a class='secnum' href='#cast' style='min-width:118pt'>20.11.3.9</a> Casts <a class='abbr_ref' href='util.smartptr.shared.cast'>[util.smartptr.shared.cast]</a></h4><div id='lib:shared_ptr,static_pointer_cast'><div id='lib:static_pointer_cast,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:static_pointer_cast,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> static_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> static_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='cast-1'><div class='marginalizedparent'><a class='marginalized' href='#cast-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10789'>#</a></div><div id='cast-1.sentence-1' class='sentence'><span class='textit'>Mandates:</span> The expression <span class='texttt'><span class='keyword'>static_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>U<span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#cast-1.sentence-1'>.</a></div></div></div><div class='para' id='cast-2'><div class='marginalizedparent'><a class='marginalized' href='#cast-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10793'>#</a></div><div id='cast-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='textit'>R</span>, <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>element_type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</pre>
where <span class='texttt'><span class='textit'>R</span></span> is <span class='texttt'>r</span> for the first overload, and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> for the second<a class='hidden_link' href='#cast-2.sentence-1'>.</a></div></div></div><div class='para' id='cast-3'><div class='marginalizedparent'><a class='marginalized' href='#cast-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10801'>#</a></div><div id='cast-3.note-1' class='note'>[<a class='note_link' href='#cast-3.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='cast-3.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>static_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
will eventually result in undefined behavior, attempting to delete the
same object twice<a class='hidden_link' href='#cast-3.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='lib:shared_ptr,dynamic_pointer_cast'><div id='lib:dynamic_pointer_cast,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:dynamic_pointer_cast,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> dynamic_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> dynamic_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='cast-4'><div class='marginalizedparent'><a class='marginalized' href='#cast-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10819'>#</a></div><div id='cast-4.sentence-1' class='sentence'><span class='textit'>Mandates:</span> The expression <span class='texttt'><span class='keyword'>dynamic_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>U<span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#cast-4.sentence-1'>.</a></div> <div id='cast-4.sentence-2' class='sentence'>The expression <span class='texttt'><span class='keyword'>dynamic_&shy;cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>element_&shy;type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> is well formed<a class='hidden_link' href='#cast-4.sentence-2'>.</a></div></div></div><div class='para' id='cast-5'><div class='marginalizedparent'><a class='marginalized' href='#cast-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10824'>#</a></div><div id='cast-5.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> The expression <span class='texttt'><span class='keyword'>dynamic_&shy;cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>element_&shy;type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> has well-defined behavior<a class='hidden_link' href='#cast-5.sentence-1'>.</a></div></div></div><div class='para' id='cast-6'><div class='marginalizedparent'><a class='marginalized' href='#cast-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10828'>#</a></div><div id='cast-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> <ul class='itemize'><li id='cast-6.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cast-6.1'>(6.1)</a></div><div id='cast-6.1.sentence-1' class='sentence'>When <span class='texttt'><span class='keyword'>dynamic_&shy;cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>element_&shy;type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
  returns a non-null value <span class='texttt'>p</span>,
  <span class='texttt'>shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='textit'>R</span>, p<span class='parenthesis'>)</span></span>,
  where <span class='texttt'><span class='textit'>R</span></span> is <span class='texttt'>r</span> for the first overload, and
  <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> for the second<a class='hidden_link' href='#cast-6.1.sentence-1'>.</a></div></li><li id='cast-6.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cast-6.2'>(6.2)</a></div><div id='cast-6.2.sentence-1' class='sentence'>Otherwise, <span class='texttt'>shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cast-6.2.sentence-1'>.</a></div></li></ul></div></div></div><div class='para' id='cast-7'><div class='marginalizedparent'><a class='marginalized' href='#cast-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10839'>#</a></div><div id='cast-7.note-1' class='note'>[<a class='note_link' href='#cast-7.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='cast-7.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>dynamic_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#cast-7.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='lib:shared_ptr,const_pointer_cast'><div id='lib:const_pointer_cast,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:const_pointer_cast,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> const_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> const_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='cast-8'><div class='marginalizedparent'><a class='marginalized' href='#cast-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10856'>#</a></div><div id='cast-8.sentence-1' class='sentence'><span class='textit'>Mandates:</span> The expression <span class='texttt'><span class='keyword'>const_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>U<span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#cast-8.sentence-1'>.</a></div></div></div><div class='para' id='cast-9'><div class='marginalizedparent'><a class='marginalized' href='#cast-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10860'>#</a></div><div id='cast-9.sentence-1' class='sentence'><span class='textit'>Returns:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='textit'>R</span>, <span class='keyword'>const_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>element_type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</pre>
where <span class='texttt'><span class='textit'>R</span></span> is <span class='texttt'>r</span> for the first overload, and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> for the second<a class='hidden_link' href='#cast-9.sentence-1'>.</a></div></div></div><div class='para' id='cast-10'><div class='marginalizedparent'><a class='marginalized' href='#cast-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10868'>#</a></div><div id='cast-10.note-1' class='note'>[<a class='note_link' href='#cast-10.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='cast-10.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#cast-10.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='lib:shared_ptr,reinterpret_pointer_cast'><div id='lib:reinterpret_pointer_cast,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reinterpret_pointer_cast,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> reinterpret_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> reinterpret_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='cast-11'><div class='marginalizedparent'><a class='marginalized' href='#cast-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10885'>#</a></div><div id='cast-11.sentence-1' class='sentence'><span class='textit'>Mandates:</span> The expression <span class='texttt'><span class='keyword'>reinterpret_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>U<span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#cast-11.sentence-1'>.</a></div></div></div><div class='para' id='cast-12'><div class='marginalizedparent'><a class='marginalized' href='#cast-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10889'>#</a></div><div id='cast-12.sentence-1' class='sentence'><span class='textit'>Returns:</span> <pre class='codeblock'>
shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='textit'>R</span>, <span class='keyword'>reinterpret_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>element_type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</pre>
where <span class='texttt'><span class='textit'>R</span></span> is <span class='texttt'>r</span> for the first overload, and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> for the second<a class='hidden_link' href='#cast-12.sentence-1'>.</a></div></div></div><div class='para' id='cast-13'><div class='marginalizedparent'><a class='marginalized' href='#cast-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10897'>#</a></div><div id='cast-13.note-1' class='note'>[<a class='note_link' href='#cast-13.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='cast-13.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_&shy;ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>reinterpret_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#cast-13.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div></div><div id='util.smartptr.getdeleter' class='section'><h4 ><a class='secnum' href='#util.smartptr.getdeleter' style='min-width:118pt'>20.11.3.10</a> <span class='texttt'>get_&shy;deleter</span> <a class='abbr_ref' href='util.smartptr.getdeleter'>[util.smartptr.getdeleter]</a></h4><div id='lib:shared_ptr,get_deleter'><div id='lib:get_deleter,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get_deleter,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  D<span class='operator'>*</span> get_deleter<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.getdeleter-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.getdeleter-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10914'>#</a></div><div id='util.smartptr.getdeleter-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> If <span class='texttt'>p</span> owns a deleter <span class='texttt'>d</span> of type cv-unqualified
<span class='texttt'>D</span>, returns <span class='texttt'>addressof<span class='parenthesis'>(</span>d<span class='parenthesis'>)</span></span>; otherwise returns <span class='texttt'><span class='literal'>nullptr</span></span><a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-1'>.</a></div> <div id='util.smartptr.getdeleter-1.sentence-2' class='sentence'>The returned
pointer remains valid as long as there exists a <span class='texttt'>shared_&shy;ptr</span> instance
that owns <span class='texttt'>d</span><a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-2'>.</a></div> <div id='util.smartptr.getdeleter-1.note-1' class='note'>[<a class='note_link' href='#util.smartptr.getdeleter-1.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='util.smartptr.getdeleter-1.sentence-3' class='sentence'>It is unspecified whether the pointer
remains valid longer than that<a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-3'>.</a></div> <div id='util.smartptr.getdeleter-1.sentence-4' class='sentence'>This can happen if the implementation doesn't destroy
the deleter until all <span class='texttt'>weak_&shy;ptr</span> instances that share ownership with
<span class='texttt'>p</span> have been destroyed<a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div></div><div id='io' class='section'><h4 ><a class='secnum' href='#io' style='min-width:118pt'>20.11.3.11</a> I/O <a class='abbr_ref' href='util.smartptr.shared.io'>[util.smartptr.shared.io]</a></h4><div id='lib:shared_ptr,operator<<'><div id='lib:operator<<,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c%3c,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E, <span class='keyword'>class</span> T, <span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
  basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span>basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> os, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='io-1'><div class='marginalizedparent'><a class='marginalized' href='#io-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10938'>#</a></div><div id='io-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> As if by: <span class='texttt'>os <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> p<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div><div class='para' id='io-2'><div class='marginalizedparent'><a class='marginalized' href='#io-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/utilities.tex#L10942'>#</a></div><div id='io-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>os</span><a class='hidden_link' href='#io-2.sentence-1'>.</a></div></div></div></div></div></body></html>