<!DOCTYPE html><html lang='en'><head><title>[expr.pre]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.1</a> Preamble <a class='abbr_ref'>[expr.pre]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/expressions.tex#L18'>#</a></div><span class='indexparent'><a class='index' id=':expression'></a></span><div id='1.note-1' class='note'>[&nbsp;<a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-1' class='sentence'><a href='expr'>[expr]</a> defines the syntax, order of evaluation, and meaning
of expressions<a class='hidden_link' href='#1.sentence-1'>.</a><a class='footnotenum' href='#footnote-48' id='footnoteref-48'>48</a></div> <div id='1.sentence-2' class='sentence'>
An expression is a sequence of operators and operands that specifies a
computation<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>An expression can result in a value and can cause side
effects<a class='hidden_link' href='#1.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/expressions.tex#L29'>#</a></div><span class='indexparent'><a class='index' id=':operator,overloaded'></a></span><div id='2.note-1' class='note'>[&nbsp;<a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-1' class='sentence'>Operators can be overloaded, that is, given meaning when applied to
expressions of <a href='class'>class</a> type or
<a href='dcl.enum'>enumeration</a> type<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Uses of overloaded operators are transformed into
function calls as described in <a href='over.oper'>[over.oper]</a><a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Overloaded operators
obey the rules for syntax and evaluation order specified in <a href='expr.compound'>[expr.compound]</a>,
but the requirements of operand type and value category are replaced
by the rules for function call<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>Relations between operators, such as
<span class='texttt'><span class='operator'>+</span><span class='operator'>+</span>a</span> meaning <span class='texttt'>a<span class='operator'>+</span><span class='operator'>=</span><span class='literal'>1</span></span>, are not guaranteed for <a href='over.oper'>overloaded
operators</a><a class='hidden_link' href='#2.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/expressions.tex#L43'>#</a></div><div id='3.sentence-1' class='sentence'>Subclause <a href='expr.compound'>[expr.compound]</a> defines the effects of operators when applied to types
for which they have not been overloaded<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>Operator overloading shall not
modify the rules for the <a class='hidden_link' href='#def:operators,built-in' id='def:operators,built-in'><i >built-in operators</i></a>,
that is, for operators applied to types for which they are defined by this
Standard<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>However, these built-in operators participate in overload
resolution, and as part of that process user-defined conversions will be
considered where necessary to convert the operands to types appropriate
for the built-in operator<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>If a built-in operator is selected, such
conversions will be applied to the operands before the operation is
considered further according to the rules in subclause <a href='expr.compound'>[expr.compound]</a>;
see <a href='over.match.oper'>[over.match.oper]</a>, <a href='over.built'>[over.built]</a><a class='hidden_link' href='#3.sentence-4'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/expressions.tex#L56'>#</a></div><div id='4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception,arithmetic'></a></span><span class='indexparent'><a class='index' id=':exception,undefined_arithmetic'></a></span><span class='indexparent'><a class='index' id=':overflow,undefined'></a></span><span class='indexparent'><a class='index' id=':zero,division_by_undefined'></a></span><span class='indexparent'><a class='index' id=':zero,remainder_undefined'></a></span>If during the evaluation of an expression, the result is not
mathematically defined or not in the range of representable values for
its type, the behavior is undefined<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':overflow'></a></span>Treatment of division by zero, forming a remainder using a zero divisor,
and all floating-point exceptions varies among machines, and is sometimes
adjustable by a library function<a class='hidden_link' href='#4.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/expressions.tex#L72'>#</a></div><span class='indexparent'><a class='index' id=':operator,precedence_of'></a></span><span class='indexparent'><a class='index' id=':expression,order_of_evaluation_of'></a></span><div id='5.note-1' class='note'>[&nbsp;<a class='note_link' href='#5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='5.sentence-1' class='sentence'>The implementation may regroup operators according to
the usual mathematical rules only
where the operators really are associative or commutative<a class='hidden_link' href='#5.sentence-1'>.</a><a class='footnotenum' href='#footnote-49' id='footnoteref-49'>49</a></div> <div id='5.sentence-2' class='sentence'>
For example, in the following fragment
<pre class='codeblock'>
<span class='keyword'>int</span> a, b;
<span class='comment'>/* ... */</span>
a <span class='operator'>=</span> a <span class='operator'>+</span> <span class='literal'>32760</span> <span class='operator'>+</span> b <span class='operator'>+</span> <span class='literal'>5</span>;
</pre>
the expression statement behaves exactly the same as
<pre class='codeblock'>
a <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>a <span class='operator'>+</span> <span class='literal'>32760</span><span class='parenthesis'>)</span> <span class='operator'>+</span> b<span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>5</span><span class='parenthesis'>)</span>;
</pre>
due to the associativity and precedence of these operators<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>Thus, the
result of the sum <span class='texttt'><span class='parenthesis'>(</span>a <span class='operator'>+</span> <span class='literal'>32760</span><span class='parenthesis'>)</span></span> is next added to <span class='texttt'>b</span>, and
that result is then added to 5 which results in the value assigned to
<span class='texttt'>a</span><a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.sentence-4' class='sentence'>On a machine in which overflows produce an exception and in
which the range of values representable by an <span class='texttt'><span class='keyword'>int</span></span> is
<span class='texttt'>[</span><span class='texttt'><span class='operator'>-</span><span class='literal'>32768</span>, <span class='operator'>+</span><span class='literal'>32767</span></span><span class='texttt'>]</span>, the implementation cannot rewrite this
expression as
<pre class='codeblock'>
a <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span>a <span class='operator'>+</span> b<span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>32765</span><span class='parenthesis'>)</span>;
</pre>
since if the values for <span class='texttt'>a</span> and <span class='texttt'>b</span> were, respectively,
-32754 and -15, the sum <span class='texttt'>a <span class='operator'>+</span> b</span> would produce an exception while
the original expression would not; nor can the expression be rewritten
as either
<pre class='codeblock'>
a <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span>a <span class='operator'>+</span> <span class='literal'>32765</span><span class='parenthesis'>)</span> <span class='operator'>+</span> b<span class='parenthesis'>)</span>;
</pre>
or
<pre class='codeblock'>
a <span class='operator'>=</span> <span class='parenthesis'>(</span>a <span class='operator'>+</span> <span class='parenthesis'>(</span>b <span class='operator'>+</span> <span class='literal'>32765</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre>
since the values for <span class='texttt'>a</span> and <span class='texttt'>b</span> might have been,
respectively, 4 and -8 or -17 and 12<a class='hidden_link' href='#5.sentence-4'>.</a></div> <div id='5.sentence-5' class='sentence'>However on a machine in which
overflows do not produce an exception and in which the results of
overflows are reversible, the above expression statement can be
rewritten by the implementation in any of the above ways because the
same result will occur<a class='hidden_link' href='#5.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/expressions.tex#L119'>#</a></div><div id='6.sentence-1' class='sentence'>The values of the floating-point operands and
the results of floating-point expressions
may be represented in greater precision and range than that
required by the type; the types are not changed
thereby<a class='hidden_link' href='#6.sentence-1'>.</a><a class='footnotenum' href='#footnote-50' id='footnoteref-50'>50</a></div></div><div class='footnote' id='footnote-48'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-48'>48)</a></div><div id='footnote-48.sentence-1' class='sentence'>The precedence of operators is not directly specified, but it can be
derived from the syntax<a class='hidden_link' href='#footnote-48.sentence-1'>.</a></div> <a href='#footnoteref-48'>⮥</a></div><div class='footnote' id='footnote-49'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-49'>49)</a></div><div id='footnote-49.sentence-1' class='sentence'>Overloaded
operators are never assumed to be associative or commutative<a class='hidden_link' href='#footnote-49.sentence-1'>.</a></div> <a href='#footnoteref-49'>⮥</a></div><div class='footnote' id='footnote-50'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-50'>50)</a></div><div id='footnote-50.sentence-1' class='sentence'>The cast and assignment operators must still perform their specific
conversions as described in <a href='expr.type.conv'>[expr.type.conv]</a>, <a href='expr.cast'>[expr.cast]</a>,
<a href='expr.static.cast'>[expr.static.cast]</a> and <a href='expr.ass'>[expr.ass]</a><a class='hidden_link' href='#footnote-50.sentence-1'>.</a></div> <a href='#footnoteref-50'>⮥</a></div></div></body></html>