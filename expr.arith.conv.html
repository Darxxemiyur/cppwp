<!DOCTYPE html><html lang='en'><head><title>[expr.arith.conv]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.4</a> Usual arithmetic conversions <a class='abbr_ref'>[expr.arith.conv]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/expressions.tex#L1098'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Many binary operators that expect operands of arithmetic or enumeration
type cause conversions and yield result types in a similar way<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The
purpose is to yield a common type, which is also the type of the result<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>This pattern is called the <a class='hidden_link' href='#def:conversion,usual_arithmetic' title='7.4&emsp;Usual arithmetic conversions&emsp;[expr.arith.conv]'><span id='def:conversion,usual_arithmetic'><i >usual arithmetic conversions</i></span></a>,
which are defined as follows:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div><div class='texpara'><div id='1.1.sentence-1' class='sentence'>If either operand is of <a href='dcl.enum#def:enumeration,scoped' title='9.7.1&emsp;Enumeration declarations&emsp;[dcl.enum]'>scoped enumeration type</a>, no conversions
are performed; if the other operand does not have the same type, the expression is
ill-formed<a class='hidden_link' href='#1.1.sentence-1'>.</a></div></div></li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div><div class='texpara'><div id='1.2.sentence-1' class='sentence'>If either operand is of type <span class='texttt'><span id=':long'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':double'><span class='texttt'><span class='keyword'>double</span></span></span></span>, the
other shall be converted to <span class='texttt'><span id=':long_'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':double_'><span class='texttt'><span class='keyword'>double</span></span></span></span><a class='hidden_link' href='#1.2.sentence-1'>.</a></div></div></li><li id='1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.3'>(1.3)</a></div><div class='texpara'><div id='1.3.sentence-1' class='sentence'>Otherwise, if either operand is <span id=':double__'><span class='texttt'><span class='keyword'>double</span></span></span>, the other shall be
converted to <span id=':double___'><span class='texttt'><span class='keyword'>double</span></span></span><a class='hidden_link' href='#1.3.sentence-1'>.</a></div></div></li><li id='1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.4'>(1.4)</a></div><div class='texpara'><div id='1.4.sentence-1' class='sentence'>Otherwise, if either operand is <span id=':float'><span class='texttt'><span class='keyword'>float</span></span></span>, the other shall be
converted to <span id=':float_'><span class='texttt'><span class='keyword'>float</span></span></span><a class='hidden_link' href='#1.4.sentence-1'>.</a></div></div></li><li id='1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.5'>(1.5)</a></div><div class='texpara'><div id='1.5.sentence-1' class='sentence'>Otherwise, the integral promotions (<a href='conv.prom' title='7.3.7&emsp;Integral promotions'>[conv.<span class='shy'></span>prom]</a>) shall be
performed on both operands<a class='hidden_link' href='#1.5.sentence-1'>.</a><a class='footnoteref' href='#footnote-52' id='footnoteref-52' title='As a consequence, operands of type bool, char8_&shy;t, char16_&shy;t, char32_&shy;t, wchar_&shy;t, or an enumerated type are converted to some integral type.'>52</a></div> <div id='1.5.sentence-2' class='sentence'>
Then the following rules shall be applied to the promoted operands:
<ul class='itemize'><li id='1.5.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#1.5.1'>(1.5.1)</a></div><div class='texpara'><div id='1.5.1.sentence-1' class='sentence'>If both operands have the same type, no further conversion is
needed<a class='hidden_link' href='#1.5.1.sentence-1'>.</a></div></div></li><li id='1.5.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#1.5.2'>(1.5.2)</a></div><div class='texpara'><div id='1.5.2.sentence-1' class='sentence'>Otherwise, if both operands have signed integer types or both have
unsigned integer types, the operand with the type of lesser integer
conversion rank shall be converted to the type of the operand with
greater rank<a class='hidden_link' href='#1.5.2.sentence-1'>.</a></div></div></li><li id='1.5.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#1.5.3'>(1.5.3)</a></div><div class='texpara'><div id='1.5.3.sentence-1' class='sentence'>Otherwise, if the operand that has unsigned integer type has rank
greater than or equal to the rank of the type of the other operand, the
operand with signed integer type shall be converted to the type of the
operand with unsigned integer type<a class='hidden_link' href='#1.5.3.sentence-1'>.</a></div></div></li><li id='1.5.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#1.5.4'>(1.5.4)</a></div><div class='texpara'><div id='1.5.4.sentence-1' class='sentence'>Otherwise, if the type of the operand with signed integer type can
represent all of the values of the type of the operand with unsigned
integer type, the operand with unsigned integer type shall be converted
to the type of the operand with signed integer type<a class='hidden_link' href='#1.5.4.sentence-1'>.</a></div></div></li><li id='1.5.5'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#1.5.5'>(1.5.5)</a></div><div class='texpara'><div id='1.5.5.sentence-1' class='sentence'>Otherwise, both operands shall be converted to the unsigned
integer type corresponding to the type of the operand with signed
integer type<a class='hidden_link' href='#1.5.5.sentence-1'>.</a></div></div></li></ul></div></div></li></ul></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/expressions.tex#L1152'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>If one operand is of enumeration type
and the other operand is of
a different enumeration type or
a floating-point type,
this behavior is deprecated (<a href='depr.arith.conv.enum' title='D.2&emsp;Arithmetic conversion on enumerations'>[depr.<span class='shy'></span>arith.<span class='shy'></span>conv.<span class='shy'></span>enum]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-52'><div class='texpara'><a class='footnotenum' href='#footnote-52'>52)</a><a class='footnoteBacklink' href='#footnoteref-52'>52)</a> <div id='footnote-52.sentence-1' class='sentence'>As a consequence, operands of type <span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span>, <span id=':char8_t'><span class='texttt'><span class='keyword'>char8_&shy;t</span></span></span>, <span id=':char16_t'><span class='texttt'><span class='keyword'>char16_&shy;t</span></span></span>,
<span id=':char32_t'><span class='texttt'><span class='keyword'>char32_&shy;t</span></span></span>, <span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_&shy;t</span></span></span>, or an enumerated type are converted
to some integral type<a class='hidden_link' href='#footnote-52.sentence-1'>.</a></div></div></div></div></body></html>