<!DOCTYPE html><html lang='en'><head><title>[expr.arith.conv]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.4</a> Usual arithmetic conversions <a class='abbr_ref'>[expr.arith.conv]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L1077'>#</a></div><div id='1.sentence-1' class='sentence'>Many binary operators that expect operands of arithmetic or enumeration
type cause conversions and yield result types in a similar way<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The
purpose is to yield a common type, which is also the type of the result<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>This pattern is called the <a class='hidden_link' href='#def:conversion,usual_arithmetic' id='def:conversion,usual_arithmetic'><i >usual arithmetic conversions</i></a>,
which are defined as follows:</div><ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><div id='1.1.sentence-1' class='sentence'>If either operand is of <a href='dcl.enum#def:enumeration,scoped'>scoped enumeration type</a>, no conversions
are performed; if the other operand does not have the same type, the expression is
ill-formed<a class='hidden_link' href='#1.1.sentence-1'>.</a></div></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><div id='1.2.sentence-1' class='sentence'>If either operand is of type <span class='texttt'><span class='keyword'>long</span> <span class='keyword'>double</span></span>, the
other shall be converted to <span class='texttt'><span class='keyword'>long</span> <span class='keyword'>double</span></span><a class='hidden_link' href='#1.2.sentence-1'>.</a></div></li><li id='1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.3'>(1.3)</a></div><div id='1.3.sentence-1' class='sentence'>Otherwise, if either operand is <span class='texttt'><span class='keyword'>double</span></span>, the other shall be
converted to <span class='texttt'><span class='keyword'>double</span></span><a class='hidden_link' href='#1.3.sentence-1'>.</a></div></li><li id='1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.4'>(1.4)</a></div><div id='1.4.sentence-1' class='sentence'>Otherwise, if either operand is <span class='texttt'><span class='keyword'>float</span></span>, the other shall be
converted to <span class='texttt'><span class='keyword'>float</span></span><a class='hidden_link' href='#1.4.sentence-1'>.</a></div></li><li id='1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.5'>(1.5)</a></div><div id='1.5.sentence-1' class='sentence'>Otherwise, the integral promotions (<a href='conv.prom'>[conv.prom]</a>) shall be
performed on both operands<a class='hidden_link' href='#1.5.sentence-1'>.</a><a class='footnotenum' href='#footnote-56' id='footnoteref-56'>56</a></div> <div id='1.5.sentence-2' class='sentence'>
Then the following rules shall be applied to the promoted operands:</div><ul class='itemize'><li id='1.5.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#1.5.1'>(1.5.1)</a></div><div id='1.5.1.sentence-1' class='sentence'>If both operands have the same type, no further conversion is
needed<a class='hidden_link' href='#1.5.1.sentence-1'>.</a></div></li><li id='1.5.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#1.5.2'>(1.5.2)</a></div><div id='1.5.2.sentence-1' class='sentence'>Otherwise, if both operands have signed integer types or both have
unsigned integer types, the operand with the type of lesser integer
conversion rank shall be converted to the type of the operand with
greater rank<a class='hidden_link' href='#1.5.2.sentence-1'>.</a></div></li><li id='1.5.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#1.5.3'>(1.5.3)</a></div><div id='1.5.3.sentence-1' class='sentence'>Otherwise, if the operand that has unsigned integer type has rank
greater than or equal to the rank of the type of the other operand, the
operand with signed integer type shall be converted to the type of the
operand with unsigned integer type<a class='hidden_link' href='#1.5.3.sentence-1'>.</a></div></li><li id='1.5.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#1.5.4'>(1.5.4)</a></div><div id='1.5.4.sentence-1' class='sentence'>Otherwise, if the type of the operand with signed integer type can
represent all of the values of the type of the operand with unsigned
integer type, the operand with unsigned integer type shall be converted
to the type of the operand with signed integer type<a class='hidden_link' href='#1.5.4.sentence-1'>.</a></div></li><li id='1.5.5'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#1.5.5'>(1.5.5)</a></div><div id='1.5.5.sentence-1' class='sentence'>Otherwise, both operands shall be converted to the unsigned
integer type corresponding to the type of the operand with signed
integer type<a class='hidden_link' href='#1.5.5.sentence-1'>.</a></div></li></ul></li></ul></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L1130'>#</a></div><div id='2.sentence-1' class='sentence'>If one operand is of enumeration type
and the other operand is of
a different enumeration type or
a floating-point type,
this behavior is deprecated (<a href='depr.arith.conv.enum'>[depr.arith.conv.enum]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='footnote' id='footnote-56'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-56'>56)</a></div><div id='footnote-56.sentence-1' class='sentence'>As a consequence, operands of type <span class='texttt'><span class='keyword'>bool</span></span>, <span class='texttt'><span class='keyword'>char8_&shy;t</span></span>, <span class='texttt'><span class='keyword'>char16_&shy;t</span></span>,
<span class='texttt'><span class='keyword'>char32_&shy;t</span></span>, <span class='texttt'><span class='keyword'>wchar_&shy;t</span></span>, or an enumerated type are converted
to some integral type<a class='hidden_link' href='#footnote-56.sentence-1'>.</a></div> <a href='#footnoteref-56'>тое</a></div></div></body></html>