<!DOCTYPE html><html lang='en'><head><title>[except]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>14</a> Exception handling <a class='abbr_ref' href='./#except'>[except]</a></h1><span class='indexparent'><a class='index' id=':exception_handling'></a></span><div id='pre' class='section'><h2 ><a class='secnum' href='#pre' style='min-width:65pt'>14.1</a> Preamble <a class='abbr_ref' href='except.pre'>[except.pre]</a></h2><div class='para' id='pre-1'><div class='marginalizedparent'><a class='marginalized' href='#pre-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L12'>#</a></div><div id='pre-1.sentence-1' class='sentence'>Exception handling provides a way of transferring control and information
from a point in the execution of a thread to an exception handler
associated with a point previously passed by the execution<a class='hidden_link' href='#pre-1.sentence-1'>.</a></div> <div id='pre-1.sentence-2' class='sentence'>A handler will be invoked only by throwing an exception
in code executed in the handler's try block
or in functions called from the handler's try block<a class='hidden_link' href='#pre-1.sentence-2'>.</a></div><div class='bnf' id='nt:try-block'>
<a class='hidden_link' href='#nt:try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='nt:try-block'><span id=':try-block'>try-block<span class='textnormal'>:</span></span></span></a><br/><span id=':try'><span class='texttt'><span class='keyword'>try</span></span></span> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a> <a href='#nt:handler-seq' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler-seq'><span class='textsf'><span class='textit'>handler-seq</span></span></span></a>
</div><div class='bnf' id='nt:function-try-block'>
<a class='hidden_link' href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='nt:function-try-block'><span id=':function-try-block'>function-try-block<span class='textnormal'>:</span></span></span></a><br/><span id=':try_'><span class='texttt'><span class='keyword'>try</span></span></span> <a href='class.base.init#nt:ctor-initializer' title='11.10.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer'><span class='textsf'><span class='textit'>ctor-initializer</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a> <a href='#nt:handler-seq' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler-seq_'><span class='textsf'><span class='textit'>handler-seq</span></span></span></a>
</div><div class='bnf' id='nt:handler-seq'>
<a class='hidden_link' href='#nt:handler-seq' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='nt:handler-seq'><span id=':handler-seq'>handler-seq<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler'><span class='textsf'><span class='textit'>handler</span></span></span></a> <a href='#nt:handler-seq' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler-seq__'><span class='textsf'><span class='textit'>handler-seq</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</div><div class='bnf' id='nt:handler'>
<a class='hidden_link' href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='nt:handler'><span id=':handler'>handler<span class='textnormal'>:</span></span></span></a><br/><span id=':catch'><span class='texttt'><span class='keyword'>catch</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement__'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a>
</div><div class='bnf' id='nt:exception-declaration'>
<a class='hidden_link' href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='nt:exception-declaration'><span id=':exception-declaration'>exception-declaration<span class='textnormal'>:</span></span></span></a><br/><a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><span class='textit'>attribute-specifier-seq</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='dcl.type.general#nt:type-specifier-seq' title='9.2.9.1&emsp;General&emsp;[dcl.type.general]'><span id='ntref:type-specifier-seq'><span class='textsf'><span class='textit'>type-specifier-seq</span></span></span></a> <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator'><span class='textsf'><span class='textit'>declarator</span></span></span></a><br/><a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_'><span class='textsf'><span class='textit'>attribute-specifier-seq</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='dcl.type.general#nt:type-specifier-seq' title='9.2.9.1&emsp;General&emsp;[dcl.type.general]'><span id='ntref:type-specifier-seq_'><span class='textsf'><span class='textit'>type-specifier-seq</span></span></span></a> <a href='dcl.name#nt:abstract-declarator' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:abstract-declarator'><span class='textsf'><span class='textit'>abstract-declarator</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>
</div><div id='pre-1.sentence-3' class='sentence'>The optional <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq__'><span class='textsf'><span class='textit'>attribute-specifier-seq</span></span></span></a> in an <a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration_'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a>
appertains to the parameter of the catch clause (<a href='#handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)<a class='hidden_link' href='#pre-1.sentence-3'>.</a></div></div><div class='para' id='pre-2'><div class='marginalizedparent'><a class='marginalized' href='#pre-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L50'>#</a></div><div id='pre-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,try_block'></a></span><span class='indexparent'><a class='index' id=':exception_handling,handler'></a></span>A <a href='#nt:try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:try-block'><span class='textsf'><span class='textit'>try-block</span></span></span></a> is a <a href='stmt.pre#nt:statement' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:statement'><span class='textsf'><span class='textit'>statement</span></span></span></a> (<a href='stmt.pre' title='8.1&emsp;Preamble'>[stmt.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#pre-2.sentence-1'>.</a></div> <div id='pre-note-1' class='note'>[<a class='note_link' href='#pre-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='pre-2.sentence-2' class='sentence'>Within this Clause
“try block” is taken to mean both <a href='#nt:try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:try-block_'><span class='textsf'><span class='textit'>try-block</span></span></span></a> and
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a><a class='hidden_link' href='#pre-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='pre-3'><div class='marginalizedparent'><a class='marginalized' href='#pre-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L62'>#</a></div><div id='pre-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,goto'></a></span><span class='indexparent'><a class='index' id=':exception_handling,switch'></a></span><span class='indexparent'><a class='index' id=':goto,and_try_block'></a></span><span class='indexparent'><a class='index' id=':switch,and_try_block'></a></span><span class='indexparent'><a class='index' id=':goto,and_handler'></a></span><span class='indexparent'><a class='index' id=':switch,and_handler'></a></span>A <span class='texttt'><span class='keyword'>goto</span></span> or <span class='texttt'><span class='keyword'>switch</span></span> statement shall not be used to transfer control
into a try block or into a handler<a class='hidden_link' href='#pre-3.sentence-1'>.</a></div> <div id='pre-example-1' class='example'>[<a class='example_link' href='#pre-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>goto</span> l1;          <span class='comment'>// error</span>
  <span class='keyword'>goto</span> l2;          <span class='comment'>// error</span>
  <span class='keyword'>try</span> <span class='curlybracket'>{</span>
    <span class='keyword'>goto</span> l1;        <span class='comment'>// OK</span>
    <span class='keyword'>goto</span> l2;        <span class='comment'>// error</span>
    l1<span class='operator'>:</span> ;
  <span class='curlybracket'>}</span> <span class='keyword'>catch</span> <span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    l2<span class='operator'>:</span> ;
    <span class='keyword'>goto</span> l1;        <span class='comment'>// error</span>
    <span class='keyword'>goto</span> l2;        <span class='comment'>// OK</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div>  <div id='pre-3.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':goto,and_try_block_'></a></span><span class='indexparent'><a class='index' id=':switch,and_try_block_'></a></span><span class='indexparent'><a class='index' id=':return,and_try_block'></a></span><span class='indexparent'><a class='index' id=':continue,and_try_block'></a></span><span class='indexparent'><a class='index' id=':goto,and_handler_'></a></span><span class='indexparent'><a class='index' id=':switch,and_handler_'></a></span><span class='indexparent'><a class='index' id=':return,and_handler'></a></span><span class='indexparent'><a class='index' id=':continue,and_handler'></a></span>A
<span class='texttt'><span class='keyword'>goto</span></span>,
<span class='texttt'><span class='keyword'>break</span></span>,
<span class='texttt'><span class='keyword'>return</span></span>,
or
<span class='texttt'><span class='keyword'>continue</span></span>
statement can be used to transfer control out of
a try block or handler<a class='hidden_link' href='#pre-3.sentence-2'>.</a></div> <div id='pre-3.sentence-3' class='sentence'>When this happens, each variable declared in the try block
will be destroyed in the context that
directly contains its declaration<a class='hidden_link' href='#pre-3.sentence-3'>.</a></div> <div id='pre-example-2' class='example'>[<a class='example_link' href='#pre-example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <span class='codeblock'>lab<span class='operator'>:</span>  <span class='keyword'>try</span> <span class='curlybracket'>{</span>
  T1 t1;
  <span class='keyword'>try</span> <span class='curlybracket'>{</span>
    T2 t2;
    <span class='keyword'>if</span> <span class='parenthesis'>(</span><a href='stmt.pre#nt:condition' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:condition'><span class='textsf'><span class='textit'>condition</span></span></span></a><span class='parenthesis'>)</span>
      <span class='keyword'>goto</span> lab;
    <span class='curlybracket'>}</span> <span class='keyword'>catch</span><span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* handler 2 */</span> <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span> <span class='keyword'>catch</span><span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* handler 1 */</span> <span class='curlybracket'>}</span>
</span><div id='pre-3.sentence-4' class='sentence'>Here, executing
<span class='texttt'><span class='keyword'>goto</span> lab;</span>
will destroy first
<span class='texttt'>t2</span>,
then
<span class='texttt'>t1</span>,
assuming the
<a href='stmt.pre#nt:condition' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:condition_'><span class='textsf'><span class='textit'>condition</span></span></span></a>
does not declare a variable<a class='hidden_link' href='#pre-3.sentence-4'>.</a></div> <div id='pre-3.sentence-5' class='sentence'>Any exception thrown while destroying
<span class='texttt'>t2</span>
will result in executing
<span class='texttt'>handler 2</span>;
any exception thrown while destroying
<span class='texttt'>t1</span>
will result in executing
<span class='texttt'>handler 1</span><a class='hidden_link' href='#pre-3.sentence-5'>.</a></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='pre-4'><div class='marginalizedparent'><a class='marginalized' href='#pre-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L138'>#</a></div><div id='pre-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,function_try_block'></a></span>A
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block_'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a>
associates a
<a href='#nt:handler-seq' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler-seq___'><span class='textsf'><span class='textit'>handler-seq</span></span></span></a>
with the
<a href='class.base.init#nt:ctor-initializer' title='11.10.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer_'><span class='textsf'><span class='textit'>ctor-initializer</span></span></span></a>,
if present, and the
<a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement___'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a><a class='hidden_link' href='#pre-4.sentence-1'>.</a></div> <div id='pre-4.sentence-2' class='sentence'>An exception
thrown during the execution of the
<a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement____'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a>
or, for constructors and destructors, during the initialization or
destruction, respectively, of the class's subobjects,
transfers control to a handler in a
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block__'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a>
in the same way as an exception thrown during the execution of a
<a href='#nt:try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:try-block__'><span class='textsf'><span class='textit'>try-block</span></span></span></a>
transfers control to other handlers<a class='hidden_link' href='#pre-4.sentence-2'>.</a></div> <div id='pre-example-3' class='example'>[<a class='example_link' href='#pre-example-3'><span class='textit'>Example&nbsp;3</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>class</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>double</span> d;
<span class='keyword'>public</span><span class='operator'>:</span>
  C<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

C<span class='operator'>::</span>C<span class='parenthesis'>(</span><span class='keyword'>int</span> ii, <span class='keyword'>double</span> id<span class='parenthesis'>)</span>
<span class='keyword'>try</span> <span class='operator'>:</span> i<span class='parenthesis'>(</span>f<span class='parenthesis'>(</span>ii<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, d<span class='parenthesis'>(</span>id<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// constructor statements</span>
<span class='curlybracket'>}</span> <span class='keyword'>catch</span> <span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// handles exceptions thrown from the ctor-initializer and from the constructor statements</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='pre-5'><div class='marginalizedparent'><a class='marginalized' href='#pre-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L178'>#</a></div><div id='pre-5.sentence-1' class='sentence'>In this Clause, “before” and “after” refer to the
<a href='intro.execution#def:sequenced_before' title='6.9.1&emsp;Sequential execution&emsp;[intro.execution]'>“sequenced before”</a> relation<a class='hidden_link' href='#pre-5.sentence-1'>.</a></div></div></div><div id='throw' class='section'><h2 ><a class='secnum' href='#throw' style='min-width:65pt'>14.2</a> Throwing an exception <a class='abbr_ref' href='except.throw'>[except.throw]</a></h2><span class='indexparent'><a class='index' id=':exception_handling,throwing'></a></span><div class='para' id='throw-1'><div class='marginalizedparent'><a class='marginalized' href='#throw-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L186'>#</a></div><div id='throw-1.sentence-1' class='sentence'>Throwing an exception transfers control to a handler<a class='hidden_link' href='#throw-1.sentence-1'>.</a></div> <div id='throw-note-1' class='note'>[<a class='note_link' href='#throw-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='throw-1.sentence-2' class='sentence'>An exception can be thrown from one of the following contexts:
<a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression'><span class='textsf'><span class='textit'>throw-expression</span></span></span></a><span class='textit'>s</span> (<a href='expr.throw' title='7.6.18&emsp;Throwing an exception'>[expr.<span class='shy'></span>throw]</a>),
<a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions&emsp;[basic.stc.dynamic.allocation]'>allocation functions</a>,
<a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast&emsp;[expr.dynamic.cast]'><span class='texttt'>dynamic_&shy;cast</span></a>,
<a href='expr.typeid' title='7.6.1.8&emsp;Type identification&emsp;[expr.typeid]'><span class='texttt'>typeid</span></a>,
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><span class='textit'>new-expression</span></span></span></a><span class='textit'>s</span> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>), and standard library
functions (<a href='structure.specifications' title='16.3.2.4&emsp;Detailed specifications'>[structure.<span class='shy'></span>specifications]</a>)<a class='hidden_link' href='#throw-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div>  <div id='throw-1.sentence-3' class='sentence'>
An object is passed and the type of that object determines which handlers
can catch it<a class='hidden_link' href='#throw-1.sentence-3'>.</a></div> <div id='throw-example-1' class='example'>[<a class='example_link' href='#throw-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <div id='throw-1.sentence-4' class='sentence'><span class='codeblock'><span class='keyword'>throw</span> <span class='literal'>"Help!"</span>;
</span>
can be caught by a
<a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler_'><span class='textsf'><span class='textit'>handler</span></span></span></a>
of
<span class='texttt'><span class='keyword'>const</span></span>
<span class='texttt'><span class='keyword'>char</span><span class='operator'>*</span></span>
type:
<span class='codeblock'><span class='keyword'>try</span> <span class='curlybracket'>{</span>
    <span class='comment'>// ...</span>
<span class='curlybracket'>}</span> <span class='keyword'>catch</span><span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// handle character string exceptions here</span>
<span class='curlybracket'>}</span>
</span>
and
<span class='codeblock'><span class='keyword'>class</span> Overflow <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
    Overflow<span class='parenthesis'>(</span><span class='keyword'>char</span>,<span class='keyword'>double</span>,<span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>double</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>throw</span> Overflow<span class='parenthesis'>(</span><span class='literal'>'+'</span>,x,<span class='literal'>3.45e107</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span>
can be caught by a handler for exceptions of type
<span class='texttt'>Overflow</span>:
<span class='codeblock'><span class='keyword'>try</span> <span class='curlybracket'>{</span>
    f<span class='parenthesis'>(</span><span class='literal'>1.2</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> <span class='keyword'>catch</span><span class='parenthesis'>(</span>Overflow<span class='operator'>&amp;</span> oo<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// handle exceptions of type <span class='tcode_in_codeblock'>Overflow</span> here</span>
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='throw-2'><div class='marginalizedparent'><a class='marginalized' href='#throw-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L238'>#</a></div><div id='throw-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,throwing_'></a></span><span class='indexparent'><a class='index' id=':exception_handling,handler_'></a></span><span class='indexparent'><a class='index' id=':exception_handling,nearest_handler'></a></span>When an exception is thrown, control is transferred to the nearest handler with
a matching type (<a href='#handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>); “nearest” means the handler
for which the
<a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_____'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a> or
<a href='class.base.init#nt:ctor-initializer' title='11.10.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer__'><span class='textsf'><span class='textit'>ctor-initializer</span></span></span></a>
following the
<span class='texttt'><span class='keyword'>try</span></span>
keyword was most recently entered by the thread of control and not yet exited<a class='hidden_link' href='#throw-2.sentence-1'>.</a></div></div><div class='para' id='throw-3'><div class='marginalizedparent'><a class='marginalized' href='#throw-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L251'>#</a></div><div id='throw-3.sentence-1' class='sentence'>Throwing an exception
copy-initializes (<a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>, <a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>) a temporary object,
called the
<a class='hidden_link' href='#def:exception_handling,exception_object' title='14.2&emsp;Throwing an exception&emsp;[except.throw]'><span id='def:exception_handling,exception_object'><span class='textit'>exception object</span></span></a><a class='hidden_link' href='#throw-3.sentence-1'>.</a></div> <div id='throw-3.sentence-2' class='sentence'>An lvalue denoting the temporary is used to initialize the
variable declared in the matching
<a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler__'><span class='textsf'><span class='textit'>handler</span></span></span></a> (<a href='#handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)<a class='hidden_link' href='#throw-3.sentence-2'>.</a></div> <div id='throw-3.sentence-3' class='sentence'>If the type of the exception object would be
an incomplete type,
an abstract class type (<a href='class.abstract' title='11.7.4&emsp;Abstract classes'>[class.<span class='shy'></span>abstract]</a>),
or a pointer to an incomplete type other than <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>void</span></span>
the program is ill-formed<a class='hidden_link' href='#throw-3.sentence-3'>.</a></div></div><div class='para' id='throw-4'><div class='marginalizedparent'><a class='marginalized' href='#throw-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L265'>#</a></div><div id='throw-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,memory'></a></span><span class='indexparent'><a class='index' id=':exception_handling,rethrowing'></a></span><span class='indexparent'><a class='index' id=':exception_handling,exception_object'></a></span>The memory for the exception object is
allocated in an unspecified way, except as noted in <a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a><a class='hidden_link' href='#throw-4.sentence-1'>.</a></div> <div id='throw-4.sentence-2' class='sentence'>If a handler exits by rethrowing, control is passed to another handler for
the same exception object<a class='hidden_link' href='#throw-4.sentence-2'>.</a></div> <div id='throw-4.sentence-3' class='sentence'>The points of potential destruction for the exception object are:
<ul class='itemize'><li id='throw-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#throw-4.1'>(4.1)</a></div>when an active handler for the exception exits by
any means other than
rethrowing,
immediately after the destruction of the object (if any)
declared in the <a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration__'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a> in the handler;</li><li id='throw-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#throw-4.2'>(4.2)</a></div>when an object of type <a href='propagation#lib:exception_ptr' title='17.9.7&emsp;Exception propagation&emsp;[propagation]'><span class='texttt'>std&#x200b;::&#x200b;exception_&shy;ptr</span></a>
that refers to the exception object is destroyed,
before the destructor of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>exception_&shy;ptr</span> returns<a class='hidden_link' href='#throw-4.sentence-3'>.</a></li></ul></div><div style='height:0.6em;display:block'></div><div id='throw-4.sentence-4' class='sentence'>Among all points of potential destruction for the exception object,
there is an unspecified last one
where the exception object is destroyed<a class='hidden_link' href='#throw-4.sentence-4'>.</a></div> <div id='throw-4.sentence-5' class='sentence'>All other points <a href='intro.races#def:happens_before' title='6.9.2.2&emsp;Data races&emsp;[intro.races]'>happen before</a> that last one<a class='hidden_link' href='#throw-4.sentence-5'>.</a></div> <div id='throw-note-2' class='note'>[<a class='note_link' href='#throw-note-2'><span class='textit'>Note&nbsp;2</span></a><span class='textit'>:</span> <div id='throw-4.sentence-6' class='sentence'>No other thread synchronization is implied in exception handling<a class='hidden_link' href='#throw-4.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div>  <div id='throw-4.sentence-7' class='sentence'>
The implementation may then
deallocate the memory for the exception object; any such deallocation
is done in an unspecified way<a class='hidden_link' href='#throw-4.sentence-7'>.</a></div> <div id='throw-note-3' class='note'>[<a class='note_link' href='#throw-note-3'><span class='textit'>Note&nbsp;3</span></a><span class='textit'>:</span> <div id='throw-4.sentence-8' class='sentence'>A thrown exception does not
propagate to other threads unless caught, stored, and rethrown using
appropriate library functions; see <a href='propagation' title='17.9.7&emsp;Exception propagation'>[propagation]</a> and <a href='futures' title='32.9&emsp;Futures'>[futures]</a><a class='hidden_link' href='#throw-4.sentence-8'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='throw-5'><div class='marginalizedparent'><a class='marginalized' href='#throw-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L304'>#</a></div><div id='throw-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,exception_object,constructor'></a></span><span class='indexparent'><a class='index' id=':exception_handling,exception_object,destructor'></a></span>When the thrown object is a class object, the constructor selected for
the copy-initialization as well as the constructor selected for
a copy-initialization considering the thrown object as an lvalue
shall be non-deleted and accessible, even if the copy/move operation is
elided (<a href='class.copy.elision' title='11.10.6&emsp;Copy/move elision'>[class.<span class='shy'></span>copy.<span class='shy'></span>elision]</a>)<a class='hidden_link' href='#throw-5.sentence-1'>.</a></div> <div id='throw-5.sentence-2' class='sentence'>The destructor is potentially invoked (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#throw-5.sentence-2'>.</a></div></div><div class='para' id='throw-6'><div class='marginalizedparent'><a class='marginalized' href='#throw-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L314'>#</a></div><div id='throw-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,rethrow'></a></span>An exception is considered caught when a handler for that exception
becomes <a href='#def:exception_handling,handler,active' title='14.4&emsp;Handling an exception&emsp;[except.handle]'>active</a><a class='hidden_link' href='#throw-6.sentence-1'>.</a></div> <div id='throw-note-4' class='note'>[<a class='note_link' href='#throw-note-4'><span class='textit'>Note&nbsp;4</span></a><span class='textit'>:</span> <div id='throw-6.sentence-2' class='sentence'>An exception can have active handlers and still be considered uncaught if
it is rethrown<a class='hidden_link' href='#throw-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='throw-7'><div class='marginalizedparent'><a class='marginalized' href='#throw-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L324'>#</a></div><div id='throw-7.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,terminate_called'></a></span><span class='indexparent'><a class='index' id=':terminate,called'></a></span>If the exception handling mechanism
handling an <a href='#uncaught' title='14.6.3&emsp;The std&#x200b;::&#x200b;uncaught_&shy;exceptions function&emsp;[except.uncaught]'>uncaught exception</a>
directly invokes a function that exits via an
exception, the function <a href='#terminate' title='14.6.2&emsp;The std&#x200b;::&#x200b;terminate function&emsp;[except.terminate]'><span class='texttt'>std&#x200b;::&#x200b;terminate</span></a> is called<a class='hidden_link' href='#throw-7.sentence-1'>.</a></div> <div id='throw-example-2' class='example'>[<a class='example_link' href='#throw-example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  C<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
  C<span class='parenthesis'>(</span><span class='keyword'>const</span> C<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>if</span> <span class='parenthesis'>(</span>std<span class='operator'>::</span>uncaught_exceptions<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='keyword'>throw</span> <span class='literal'>0</span>;      <span class='comment'>// throw during copy to handler's <a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration___'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a> object (<a href='#handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)</span>
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>try</span> <span class='curlybracket'>{</span>
    <span class='keyword'>throw</span> C<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;      <span class='comment'>// calls <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;terminate</span> if construction of the handler's</span>
                    <span class='comment'>// <a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration____'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a> object is not elided (<a href='class.copy.elision' title='11.10.6&emsp;Copy/move elision'>[class.<span class='shy'></span>copy.<span class='shy'></span>elision]</a>)</span>
  <span class='curlybracket'>}</span> <span class='keyword'>catch</span><span class='parenthesis'>(</span>C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div>  <div id='throw-note-5' class='note'>[<a class='note_link' href='#throw-note-5'><span class='textit'>Note&nbsp;5</span></a><span class='textit'>:</span> <div id='throw-7.sentence-2' class='sentence'>
Consequently, destructors should generally catch exceptions and not let them propagate<a class='hidden_link' href='#throw-7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='ctor' class='section'><h2 ><a class='secnum' href='#ctor' style='min-width:65pt'>14.3</a> Constructors and destructors <a class='abbr_ref' href='except.ctor'>[except.ctor]</a></h2><span class='indexparent'><a class='index' id=':exception_handling,constructors_and_destructors'></a></span><div class='para' id='ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L361'>#</a></div><div id='ctor-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':unwinding,stack'></a></span>As control passes from the point where an exception is thrown
to a handler,
objects with automatic storage duration are destroyed by a process,
specified in this subclause, called <a class='hidden_link' href='#def:stack_unwinding' title='14.3&emsp;Constructors and destructors&emsp;[except.ctor]'><span id='def:stack_unwinding'><span class='textit'>stack unwinding</span></span></a><a class='hidden_link' href='#ctor-1.sentence-1'>.</a></div></div><div class='para' id='ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#ctor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L368'>#</a></div><div id='ctor-2.sentence-1' class='sentence'>Each object with automatic storage duration is destroyed if it has been
constructed, but not yet destroyed,
since the try block was entered<a class='hidden_link' href='#ctor-2.sentence-1'>.</a></div> <div id='ctor-2.sentence-2' class='sentence'>If an exception is thrown during the destruction of temporaries or
local variables for a <a href='stmt.return' title='8.7.4&emsp;The return statement&emsp;[stmt.return]'><span class='texttt'>return</span> statement</a>,
the destructor for the returned object (if any) is also invoked<a class='hidden_link' href='#ctor-2.sentence-2'>.</a></div> <div id='ctor-2.sentence-3' class='sentence'>The objects are destroyed in the reverse order of the completion
of their construction<a class='hidden_link' href='#ctor-2.sentence-3'>.</a></div> <div id='ctor-example-1' class='example'>[<a class='example_link' href='#ctor-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='operator'>~</span>Y<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>throw</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;

A f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>try</span> <span class='curlybracket'>{</span>
    A a;
    Y y;
    A b;
    <span class='keyword'>return</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;      <span class='comment'>// #1</span>
  <span class='curlybracket'>}</span> <span class='keyword'>catch</span> <span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>return</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;        <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>
</span> <div id='ctor-2.sentence-4' class='sentence'>
At #1, the returned object of type <span class='texttt'>A</span> is constructed<a class='hidden_link' href='#ctor-2.sentence-4'>.</a></div> <div id='ctor-2.sentence-5' class='sentence'>Then, the local variable <span class='texttt'>b</span> is destroyed (<a href='stmt.jump' title='8.7&emsp;Jump statements'>[stmt.<span class='shy'></span>jump]</a>)<a class='hidden_link' href='#ctor-2.sentence-5'>.</a></div> <div id='ctor-2.sentence-6' class='sentence'>Next, the local variable <span class='texttt'>y</span> is destroyed,
causing stack unwinding,
resulting in the destruction of the returned object,
followed by the destruction of the local variable <span class='texttt'>a</span><a class='hidden_link' href='#ctor-2.sentence-6'>.</a></div> <div id='ctor-2.sentence-7' class='sentence'>Finally, the returned object is constructed again at #2<a class='hidden_link' href='#ctor-2.sentence-7'>.</a></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#ctor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L403'>#</a></div><div id='ctor-3.sentence-1' class='sentence'>If the initialization or destruction of an object
other than by delegating constructor
is terminated by an exception,
the destructor is invoked for
each of the object's direct subobjects
and, for a complete object, virtual base class subobjects,
whose initialization has completed (<a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)
and whose destructor has not yet begun execution,
except that in the case of destruction, the variant members of a
union-like class are not destroyed<a class='hidden_link' href='#ctor-3.sentence-1'>.</a></div> <div id='ctor-note-1' class='note'>[<a class='note_link' href='#ctor-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='ctor-3.sentence-2' class='sentence'>If such an object has a reference member
that extends the lifetime of a temporary object,
this ends the lifetime of the reference member,
so the lifetime of the temporary object is effectively not extended<a class='hidden_link' href='#ctor-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div>  <div id='ctor-3.sentence-3' class='sentence'>
The subobjects are destroyed in the reverse order of the completion of
their construction<a class='hidden_link' href='#ctor-3.sentence-3'>.</a></div> <div id='ctor-3.sentence-4' class='sentence'>Such destruction is sequenced before entering a
handler of the <a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block___'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a> of the constructor or destructor,
if any<a class='hidden_link' href='#ctor-3.sentence-4'>.</a></div></div><div class='para' id='ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#ctor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L425'>#</a></div><div id='ctor-4.sentence-1' class='sentence'>If the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement______'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a>
of the <a href='dcl.fct.def.general#nt:function-body' title='9.5.1&emsp;In general&emsp;[dcl.fct.def.general]'><span id='ntref:function-body'><span class='textsf'><span class='textit'>function-body</span></span></span></a>
of a delegating constructor
for an object exits via
an exception, the object's destructor is invoked<a class='hidden_link' href='#ctor-4.sentence-1'>.</a></div> <div id='ctor-4.sentence-2' class='sentence'>Such destruction is sequenced before entering a handler of the
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block____'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a> of a delegating constructor for that object, if any<a class='hidden_link' href='#ctor-4.sentence-2'>.</a></div></div><div class='para' id='ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#ctor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L434'>#</a></div><div id='ctor-note-2' class='note'>[<a class='note_link' href='#ctor-note-2'><span class='textit'>Note&nbsp;2</span></a><span class='textit'>:</span> <div id='ctor-5.sentence-1' class='sentence'>If the object was allocated by a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_'><span class='textsf'><span class='textit'>new-expression</span></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>),
the matching <a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions&emsp;[basic.stc.dynamic.deallocation]'>deallocation function</a>,
if any, is called to free the storage occupied by the object<a class='hidden_link' href='#ctor-5.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div> </div></div><div id='handle' class='section'><h2 ><a class='secnum' href='#handle' style='min-width:65pt'>14.4</a> Handling an exception <a class='abbr_ref' href='except.handle'>[except.handle]</a></h2><span class='indexparent'><a class='index' id=':exception_handling,handler__'></a></span><div class='para' id='handle-1'><div class='marginalizedparent'><a class='marginalized' href='#handle-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L445'>#</a></div><div id='handle-1.sentence-1' class='sentence'>The
<a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration_____'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a>
in a
<a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler___'><span class='textsf'><span class='textit'>handler</span></span></span></a>
describes the type(s) of exceptions that can cause
that
<a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler____'><span class='textsf'><span class='textit'>handler</span></span></span></a>
to be entered<a class='hidden_link' href='#handle-1.sentence-1'>.</a></div> <div id='handle-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,handler,incomplete_type_in'></a></span><span class='indexparent'><a class='index' id=':exception_handling,handler,rvalue_reference_in'></a></span><span class='indexparent'><a class='index' id=':exception_handling,handler,array_in'></a></span><span class='indexparent'><a class='index' id=':exception_handling,handler,pointer_to_function_in'></a></span>The
<a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration______'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a>
shall not denote an incomplete type, an abstract class type, or an rvalue reference type<a class='hidden_link' href='#handle-1.sentence-2'>.</a></div> <div id='handle-1.sentence-3' class='sentence'>The
<a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration_______'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a>
shall not denote a pointer or reference to an
incomplete type, other than “pointer to <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>void</span></span>”<a class='hidden_link' href='#handle-1.sentence-3'>.</a></div></div><div class='para' id='handle-2'><div class='marginalizedparent'><a class='marginalized' href='#handle-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L466'>#</a></div><div id='handle-2.sentence-1' class='sentence'>A handler of type
<span class='indexparent'><a class='index' id=':array,handler_of_type'></a></span>“array of <span class='texttt'>T</span>” or
<span class='indexparent'><a class='index' id=':function,handler_of_type'></a></span>function type <span class='texttt'>T</span>
is adjusted to be of type
“pointer to <span class='texttt'>T</span>”<a class='hidden_link' href='#handle-2.sentence-1'>.</a></div></div><div class='para' id='handle-3'><div class='marginalizedparent'><a class='marginalized' href='#handle-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L475'>#</a></div><div id='handle-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,handler,match'></a></span>A
<a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler_____'><span class='textsf'><span class='textit'>handler</span></span></span></a>
is a match for
an exception object
of type
<span class='texttt'>E</span>
if
<ul class='itemize'><li id='handle-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#handle-3.1'>(3.1)</a></div>The <a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler______'><span class='textsf'><span class='textit'>handler</span></span></span></a> is of type <span class='mathit'>cv</span> <span class='texttt'>T</span> or
<span class='mathit'>cv</span> <span class='texttt'>T<span class='operator'>&amp;</span></span> and
<span class='texttt'>E</span> and <span class='texttt'>T</span>
are the same type (ignoring the top-level <a href='dcl.decl.general#nt:cv-qualifier' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:cv-qualifier'><span class='textsf'><span class='textit'>cv-qualifier</span></span></span></a><span class='textit'>s</span>), or</li><li id='handle-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#handle-3.2'>(3.2)</a></div>the <a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler_______'><span class='textsf'><span class='textit'>handler</span></span></span></a> is of type <span class='mathit'>cv</span> <span class='texttt'>T</span> or
<span class='mathit'>cv</span> <span class='texttt'>T<span class='operator'>&amp;</span></span> and
<span class='texttt'>T</span> is an unambiguous public base class of <span class='texttt'>E</span>, or</li><li id='handle-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#handle-3.3'>(3.3)</a></div>the <a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler________'><span class='textsf'><span class='textit'>handler</span></span></span></a> is of type <span class='mathit'>cv</span> <span class='texttt'>T</span> or <span class='texttt'><span class='keyword'>const</span> T<span class='operator'>&amp;</span></span>
where <span class='texttt'>T</span> is a pointer or pointer-to-member type and
<span class='texttt'>E</span> is a pointer or pointer-to-member type
that can be converted to <span class='texttt'>T</span> by one or more of
<ul class='itemize'><li id='handle-3.3.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#handle-3.3.1'>(3.3.1)</a></div>a standard <a href='conv.ptr' title='7.3.12&emsp;Pointer conversions&emsp;[conv.ptr]'>pointer conversion</a> not involving conversions
to pointers to private or protected or ambiguous classes</li><li id='handle-3.3.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#handle-3.3.2'>(3.3.2)</a></div>a <a href='conv.fctptr' title='7.3.14&emsp;Function pointer conversions&emsp;[conv.fctptr]'>function pointer conversion</a></li><li id='handle-3.3.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#handle-3.3.3'>(3.3.3)</a></div>a <a href='conv.qual' title='7.3.6&emsp;Qualification conversions&emsp;[conv.qual]'>qualification conversion</a>, or</li></ul></li><li id='handle-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#handle-3.4'>(3.4)</a></div>the <a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler_________'><span class='textsf'><span class='textit'>handler</span></span></span></a> is of type <span class='mathit'>cv</span> <span class='texttt'>T</span> or <span class='texttt'><span class='keyword'>const</span> T<span class='operator'>&amp;</span></span> where <span class='texttt'>T</span> is a pointer or pointer-to-member type and <span class='texttt'>E</span> is <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span><a class='hidden_link' href='#handle-3.sentence-1'>.</a></li></ul></div><div style='height:0.6em;display:block'></div><div id='handle-note-1' class='note'>[<a class='note_link' href='#handle-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='handle-3.sentence-2' class='sentence'>A
<a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression_'><span class='textsf'><span class='textit'>throw-expression</span></span></span></a>
whose operand is an integer literal with value zero does not match a handler of
pointer or pointer-to-member type<a class='hidden_link' href='#handle-3.sentence-2'>.</a></div> <div id='handle-3.sentence-3' class='sentence'>A handler of reference to array or function type
is never a match for any exception object (<a href='expr.throw' title='7.6.18&emsp;Throwing an exception'>[expr.<span class='shy'></span>throw]</a>)<a class='hidden_link' href='#handle-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div> <div id='handle-example-1' class='example'>[<a class='example_link' href='#handle-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>class</span> Matherr <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='keyword'>virtual</span> <span class='keyword'>void</span> vf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> Overflow<span class='operator'>:</span> <span class='keyword'>public</span> Matherr <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> Underflow<span class='operator'>:</span> <span class='keyword'>public</span> Matherr <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> Zerodivide<span class='operator'>:</span> <span class='keyword'>public</span> Matherr <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>try</span> <span class='curlybracket'>{</span>
    g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span> <span class='keyword'>catch</span> <span class='parenthesis'>(</span>Overflow oo<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// ...</span>
  <span class='curlybracket'>}</span> <span class='keyword'>catch</span> <span class='parenthesis'>(</span>Matherr mm<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// ...</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> <div id='handle-3.sentence-4' class='sentence'>
Here, the
<span class='texttt'>Overflow</span>
handler will catch exceptions of type
<span class='texttt'>Overflow</span>
and the
<span class='texttt'>Matherr</span>
handler will catch exceptions of type
<span class='texttt'>Matherr</span>
and of all types publicly derived from
<span class='texttt'>Matherr</span>
including exceptions of type
<span class='texttt'>Underflow</span>
and
<span class='texttt'>Zerodivide</span><a class='hidden_link' href='#handle-3.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='handle-4'><div class='marginalizedparent'><a class='marginalized' href='#handle-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L556'>#</a></div><div id='handle-4.sentence-1' class='sentence'>The handlers for a try block are tried in order of appearance<a class='hidden_link' href='#handle-4.sentence-1'>.</a></div> <div id='handle-note-2' class='note'>[<a class='note_link' href='#handle-note-2'><span class='textit'>Note&nbsp;2</span></a><span class='textit'>:</span> <div id='handle-4.sentence-2' class='sentence'>This makes it possible to write handlers that can never be
executed, for example by placing a handler for a final derived class after
a handler for a corresponding unambiguous public base class<a class='hidden_link' href='#handle-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='handle-5'><div class='marginalizedparent'><a class='marginalized' href='#handle-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L564'>#</a></div><div id='handle-5.sentence-1' class='sentence'>A
<span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>
in a handler's
<a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration________'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a>
functions similarly to
<span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>
in a function parameter declaration;
it specifies a match for any exception<a class='hidden_link' href='#handle-5.sentence-1'>.</a></div> <div id='handle-5.sentence-2' class='sentence'>If present, a
<span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>
handler shall be the last handler for its try block<a class='hidden_link' href='#handle-5.sentence-2'>.</a></div></div><div class='para' id='handle-6'><div class='marginalizedparent'><a class='marginalized' href='#handle-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L577'>#</a></div><div id='handle-6.sentence-1' class='sentence'>If no match is found among the handlers for a try block,
the search for a matching
handler continues in a dynamically surrounding try block
of the same thread<a class='hidden_link' href='#handle-6.sentence-1'>.</a></div></div><div class='para' id='handle-7'><div class='marginalizedparent'><a class='marginalized' href='#handle-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L583'>#</a></div><div id='handle-7.sentence-1' class='sentence'>A handler is considered <a class='hidden_link' href='#def:exception_handling,handler,active' title='14.4&emsp;Handling an exception&emsp;[except.handle]'><span id='def:exception_handling,handler,active'><span class='textit'>active</span></span></a> when
initialization is complete for the parameter (if any) of the catch clause<a class='hidden_link' href='#handle-7.sentence-1'>.</a></div> <div id='handle-note-3' class='note'>[<a class='note_link' href='#handle-note-3'><span class='textit'>Note&nbsp;3</span></a><span class='textit'>:</span> <div id='handle-7.sentence-2' class='sentence'>The stack will have been unwound at that point<a class='hidden_link' href='#handle-7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div>  <div id='handle-7.sentence-3' class='sentence'>
Also, an implicit handler is considered active when
the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span>
is entered due to a throw<a class='hidden_link' href='#handle-7.sentence-3'>.</a></div> <div id='handle-7.sentence-4' class='sentence'>A handler is no longer considered active when the
catch clause exits<a class='hidden_link' href='#handle-7.sentence-4'>.</a></div></div><div class='para' id='handle-8'><div class='marginalizedparent'><a class='marginalized' href='#handle-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L594'>#</a></div><div id='handle-8.sentence-1' class='sentence'>The exception with the most recently activated handler that is
still active is called the
<a class='hidden_link' href='#def:exception_handling,currently_handled_exception' title='14.4&emsp;Handling an exception&emsp;[except.handle]'><span id='def:exception_handling,currently_handled_exception'><span class='textit'>currently handled exception</span></span></a><a class='hidden_link' href='#handle-8.sentence-1'>.</a></div></div><div class='para' id='handle-9'><div class='marginalizedparent'><a class='marginalized' href='#handle-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L600'>#</a></div><div id='handle-9.sentence-1' class='sentence'>If no matching handler is found,
the function
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span>
is called;
whether or not the stack is unwound before this call to
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span>
is <span class='indexparent'><a class='index' id=':stack_unwinding_before_call_to_std::terminate'></a></span>implementation-defined (<a href='#terminate' title='14.6.2&emsp;The std&#x200b;::&#x200b;terminate function'>[except.<span class='shy'></span>terminate]</a>)<a class='hidden_link' href='#handle-9.sentence-1'>.</a></div></div><div class='para' id='handle-10'><div class='marginalizedparent'><a class='marginalized' href='#handle-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L610'>#</a></div><div id='handle-10.sentence-1' class='sentence'>Referring to any non-static member or base class of an object
in the handler for a
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block_____'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a>
of a constructor or destructor for that object results in undefined behavior<a class='hidden_link' href='#handle-10.sentence-1'>.</a></div></div><div class='para' id='handle-11'><div class='marginalizedparent'><a class='marginalized' href='#handle-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L616'>#</a></div><div id='handle-11.sentence-1' class='sentence'>The scope and lifetime of the parameters of a function or constructor
extend into the handlers of a
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block______'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a><a class='hidden_link' href='#handle-11.sentence-1'>.</a></div></div><div class='para' id='handle-12'><div class='marginalizedparent'><a class='marginalized' href='#handle-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L621'>#</a></div><div id='handle-12.sentence-1' class='sentence'>Exceptions thrown in destructors of objects with static storage duration or in
constructors of namespace-scope objects with static storage duration are not caught by a
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block_______'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a>
on
the <a href='basic.start.main' title='6.9.3.1&emsp;main function&emsp;[basic.start.main]'><span class='texttt'>main</span> function</a><a class='hidden_link' href='#handle-12.sentence-1'>.</a></div> <div id='handle-12.sentence-2' class='sentence'>Exceptions thrown in destructors of objects with thread storage duration or in constructors of namespace-scope objects with thread storage duration are not caught by a
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block________'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a>
on the initial function of the thread<a class='hidden_link' href='#handle-12.sentence-2'>.</a></div></div><div class='para' id='handle-13'><div class='marginalizedparent'><a class='marginalized' href='#handle-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L631'>#</a></div><div id='handle-13.sentence-1' class='sentence'>If a <span class='texttt'><span class='keyword'>return</span></span> statement (<a href='stmt.return' title='8.7.4&emsp;The return statement'>[stmt.<span class='shy'></span>return]</a>) appears in a handler of the
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block_________'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a>
of a
constructor, the program is ill-formed<a class='hidden_link' href='#handle-13.sentence-1'>.</a></div></div><div class='para' id='handle-14'><div class='marginalizedparent'><a class='marginalized' href='#handle-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L637'>#</a></div><div id='handle-14.sentence-1' class='sentence'>The currently handled exception
is rethrown if control reaches the end of a handler of the
<a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block__________'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a>
of a constructor or destructor<a class='hidden_link' href='#handle-14.sentence-1'>.</a></div> <div id='handle-14.sentence-2' class='sentence'>Otherwise, flowing off the end of
the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_______'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a>
of a <a href='#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler__________'><span class='textsf'><span class='textit'>handler</span></span></span></a>
of a <a href='#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block___________'><span class='textsf'><span class='textit'>function-try-block</span></span></span></a>
is equivalent to flowing off the end of
the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement________'><span class='textsf'><span class='textit'>compound-statement</span></span></span></a>
of that function (see <a href='stmt.return' title='8.7.4&emsp;The return statement'>[stmt.<span class='shy'></span>return]</a>)<a class='hidden_link' href='#handle-14.sentence-2'>.</a></div></div><div class='para' id='handle-15'><div class='marginalizedparent'><a class='marginalized' href='#handle-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L650'>#</a></div><div id='handle-15.sentence-1' class='sentence'>The variable declared by the <a href='#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration_________'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a>, of type
<span class='mathit'>cv</span> <span class='texttt'>T</span> or <span class='mathit'>cv</span> <span class='texttt'>T<span class='operator'>&amp;</span></span>, is initialized from the exception object,
of type <span class='texttt'>E</span>, as follows:
<ul class='itemize'><li id='handle-15.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#handle-15.1'>(15.1)</a></div>if <span class='texttt'>T</span> is a base class of <span class='texttt'>E</span>, the variable is
<a href='dcl.init#def:copy-initialization' title='9.4&emsp;Initializers&emsp;[dcl.init]'>copy-initialized</a>
from the corresponding base class subobject
of the exception object;</li><li id='handle-15.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#handle-15.2'>(15.2)</a></div>otherwise, the variable is
<a href='dcl.init#def:copy-initialization' title='9.4&emsp;Initializers&emsp;[dcl.init]'>copy-initialized</a>
from the exception object<a class='hidden_link' href='#handle-15.sentence-1'>.</a></li></ul></div><div style='height:0.6em;display:block'></div><div id='handle-15.sentence-2' class='sentence'>The lifetime of the variable ends
when the handler exits, after the
destruction of any objects with automatic storage duration initialized
within the handler<a class='hidden_link' href='#handle-15.sentence-2'>.</a></div></div><div class='para' id='handle-16'><div class='marginalizedparent'><a class='marginalized' href='#handle-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L670'>#</a></div><div id='handle-16.sentence-1' class='sentence'>When the handler declares an object,
any changes to that object will not affect the exception object<a class='hidden_link' href='#handle-16.sentence-1'>.</a></div> <div id='handle-16.sentence-2' class='sentence'>When the handler declares a reference to an object,
any changes to the referenced object are changes to the
exception object and will have effect should that object be rethrown<a class='hidden_link' href='#handle-16.sentence-2'>.</a></div> </div></div><div id='spec' class='section'><h2 ><a class='secnum' href='#spec' style='min-width:65pt'>14.5</a> Exception specifications <a class='abbr_ref' href='except.spec'>[except.spec]</a></h2><span class='indexparent'><a class='index' id=':exception_specification'></a></span><div class='para' id='spec-1'><div class='marginalizedparent'><a class='marginalized' href='#spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L682'>#</a></div><div id='spec-1.sentence-1' class='sentence'>The predicate indicating whether a function cannot exit via an exception
is called the <a class='hidden_link' href='#def:exception_specification' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='def:exception_specification'><span class='textit'>exception specification</span></span></a> of the function<a class='hidden_link' href='#spec-1.sentence-1'>.</a></div> <div id='spec-1.sentence-2' class='sentence'>If the predicate is false,
the function has a
<span class='indexparent'><a class='index' id=':exception_specification,potentially-throwing'></a></span><a class='hidden_link' href='#def:potentially-throwing,exception_specification' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='def:potentially-throwing,exception_specification'><span class='textit'>potentially-throwing exception specification</span></span></a>,
otherwise it has a
<span class='indexparent'><a class='index' id=':exception_specification,non-throwing'></a></span><a class='hidden_link' href='#def:non-throwing_exception_specification' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='def:non-throwing_exception_specification'><span class='textit'>non-throwing exception specification</span></span></a><a class='hidden_link' href='#spec-1.sentence-2'>.</a></div> <div id='spec-1.sentence-3' class='sentence'>The exception specification is either defined implicitly,
or defined explicitly
by using a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>
as a suffix of a <a href='dcl.fct' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'>function declarator</a><a class='hidden_link' href='#spec-1.sentence-3'>.</a></div><div class='bnf' id='nt:noexcept-specifier'>
<a class='hidden_link' href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='nt:noexcept-specifier'><span id=':noexcept-specifier'>noexcept-specifier<span class='textnormal'>:</span></span></span></a><br/><span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression'><span class='textsf'><span class='textit'>constant-expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span class='terminal'><span class='keyword'>noexcept</span></span><br/></div></div><div class='para' id='spec-2'><div class='marginalizedparent'><a class='marginalized' href='#spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L704'>#</a></div><div id='spec-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_specification,noexcept,constant_expression_and'></a></span>In a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>, the <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression_'><span class='textsf'><span class='textit'>constant-expression</span></span></span></a>,
if supplied, shall be a
<a href='expr.const#def:contextually_converted_constant_expression_of_type_bool' title='7.7&emsp;Constant expressions&emsp;[expr.const]'>contextually converted constant expression of type <span class='texttt'>bool</span></a>;
that constant expression is the exception specification of
the function type in which the <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier__'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> appears<a class='hidden_link' href='#spec-2.sentence-1'>.</a></div> <div id='spec-2.sentence-2' class='sentence'>A <span class='texttt'><span class='parenthesis'>(</span></span> token that follows <span class='texttt'><span class='keyword'>noexcept</span></span> is part of the
<a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier___'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> and does not commence an
<a href='dcl.init' title='9.4&emsp;Initializers&emsp;[dcl.init]'>initializer</a><a class='hidden_link' href='#spec-2.sentence-2'>.</a></div> <div id='spec-2.sentence-3' class='sentence'>The <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier____'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> <span class='texttt'><span class='keyword'>noexcept</span></span>
without a <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression__'><span class='textsf'><span class='textit'>constant-expression</span></span></span></a>
is
equivalent to the <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_____'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>
<span class='texttt'><span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='literal'>true</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#spec-2.sentence-3'>.</a></div></div><div class='para' id='spec-3'><div class='marginalizedparent'><a class='marginalized' href='#spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L720'>#</a></div><div id='spec-3.sentence-1' class='sentence'>If a declaration of a function
does not have a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier______'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>,
the declaration has a potentially throwing exception specification
unless it is a destructor or a deallocation function
or is defaulted on its first declaration,
in which cases the exception specification
is as specified below
and no other declaration for that function
shall have a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_______'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a><a class='hidden_link' href='#spec-3.sentence-1'>.</a></div> <div id='spec-3.sentence-2' class='sentence'>In an <a href='temp.explicit' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'>explicit instantiation</a>
a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> may be specified,
but is not required<a class='hidden_link' href='#spec-3.sentence-2'>.</a></div> <div id='spec-3.sentence-3' class='sentence'>If a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> is specified
in an explicit instantiation directive,
the exception specification shall be the same as
the exception specification of all other declarations of that function<a class='hidden_link' href='#spec-3.sentence-3'>.</a></div> <div id='spec-3.sentence-4' class='sentence'>A diagnostic is required only if the
exception specifications are not the same
within a single translation unit<a class='hidden_link' href='#spec-3.sentence-4'>.</a></div></div><div class='para' id='spec-4'><div class='marginalizedparent'><a class='marginalized' href='#spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L741'>#</a></div><div id='spec-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_specification,virtual_function_and'></a></span>If a virtual function has a
non-throwing exception specification,
all declarations, including the definition, of any function
that overrides that virtual function in any derived class
shall have a non-throwing
exception specification,
unless the overriding function is defined as deleted<a class='hidden_link' href='#spec-4.sentence-1'>.</a></div> <div id='spec-example-1' class='example'>[<a class='example_link' href='#spec-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D<span class='operator'>:</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                     <span class='comment'>// error</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;            <span class='comment'>// OK</span>
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;            <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</span><div id='spec-4.sentence-2' class='sentence'>The declaration of
<span class='texttt'>D<span class='operator'>&#x200b;::&#x200b;</span>f</span>
is ill-formed because it
has a potentially-throwing exception specification,
whereas
<span class='texttt'>B<span class='operator'>&#x200b;::&#x200b;</span>f</span>
has a non-throwing exception specification<a class='hidden_link' href='#spec-4.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='spec-5'><div class='marginalizedparent'><a class='marginalized' href='#spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L774'>#</a></div><div id='spec-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exception_handling,terminate_called_'></a></span><span class='indexparent'><a class='index' id=':terminate,called_'></a></span>Whenever an exception is thrown
and the search for a handler (<a href='#handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)
encounters the outermost block of a function with a
non-throwing exception specification,
the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span> is called (<a href='#terminate' title='14.6.2&emsp;The std&#x200b;::&#x200b;terminate function'>[except.<span class='shy'></span>terminate]</a>)<a class='hidden_link' href='#spec-5.sentence-1'>.</a></div> <div id='spec-note-1' class='note'>[<a class='note_link' href='#spec-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='spec-5.sentence-2' class='sentence'>An implementation is not permitted to reject an expression merely because, when
executed, it throws or might
throw an exception from a function with a non-throwing exception specification<a class='hidden_link' href='#spec-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div>  <div id='spec-example-2' class='example'>[<a class='example_link' href='#spec-example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>extern</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                <span class='comment'>// potentially-throwing</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                          <span class='comment'>// valid, even if <span class='tcode_in_codeblock'>f</span> throws</span>
  <span class='keyword'>throw</span> <span class='literal'>42</span>;                     <span class='comment'>// valid, effectively a call to <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;terminate</span></span>
<span class='curlybracket'>}</span>
</span> <div id='spec-5.sentence-3' class='sentence'>
The call to
<span class='texttt'>f</span>
is well-formed even though, when called,
<span class='texttt'>f</span>
might throw an exception<a class='hidden_link' href='#spec-5.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='spec-6'><div class='marginalizedparent'><a class='marginalized' href='#spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L803'>#</a></div><div id='spec-6.sentence-1' class='sentence'>An expression <span class='math'><span class='mathalpha'>E</span></span> is
<a class='hidden_link' href='#def:potentially-throwing,expression' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='def:potentially-throwing,expression'><span class='textit'>potentially-throwing</span></span></a> if
<ul class='itemize'><li id='spec-6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-6.1'>(6.1)</a></div><span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.call' title='7.6.1.3&emsp;Function call&emsp;[expr.call]'>function call</a>
whose <a href='expr.post.general#nt:postfix-expression' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:postfix-expression'><span class='textsf'><span class='textit'>postfix-expression</span></span></span></a>
has a function type,
or a pointer-to-function type,
with a potentially-throwing exception specification,
or</li><li id='spec-6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-6.2'>(6.2)</a></div><span class='math'><span class='mathalpha'>E</span></span> implicitly invokes a function
(such as an overloaded operator,
an allocation function in a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__'><span class='textsf'><span class='textit'>new-expression</span></span></span></a>,
a constructor for a function argument,
or a destructor if <span class='math'><span class='mathalpha'>E</span></span> is a <a href='intro.execution#def:full-expression' title='6.9.1&emsp;Sequential execution&emsp;[intro.execution]'>full-expression</a>)
that is potentially-throwing,
or</li><li id='spec-6.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-6.3'>(6.3)</a></div><span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression__'><span class='textsf'><span class='textit'>throw-expression</span></span></span></a> (<a href='expr.throw' title='7.6.18&emsp;Throwing an exception'>[expr.<span class='shy'></span>throw]</a>),
or</li><li id='spec-6.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-6.4'>(6.4)</a></div><span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast&emsp;[expr.dynamic.cast]'><span class='texttt'>dynamic_&shy;cast</span></a> expression that casts to a reference type and
requires a runtime check,
or</li><li id='spec-6.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-6.5'>(6.5)</a></div><span class='math'><span class='mathalpha'>E</span></span> is a <span class='texttt'><span class='keyword'>typeid</span></span> expression applied to a
(possibly parenthesized) built-in unary <span class='texttt'><span class='operator'>*</span></span> operator
applied to a pointer to a
polymorphic class type (<a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a>),
or</li><li id='spec-6.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-6.6'>(6.6)</a></div>any of the <a href='intro.execution#def:immediate_subexpression' title='6.9.1&emsp;Sequential execution&emsp;[intro.execution]'>immediate subexpressions</a>
of <span class='math'><span class='mathalpha'>E</span></span> is potentially-throwing<a class='hidden_link' href='#spec-6.sentence-1'>.</a></li></ul></div></div><div class='para' id='spec-7'><div class='marginalizedparent'><a class='marginalized' href='#spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L840'>#</a></div><div id='spec-7.sentence-1' class='sentence'>An implicitly-declared constructor for a class <span class='texttt'>X</span>,
or a constructor without a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier__________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>
that is defaulted on its first declaration,
has a potentially-throwing exception specification
if and only if
any of the following constructs is potentially-throwing:
<ul class='itemize'><li id='spec-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-7.1'>(7.1)</a></div>a constructor selected by overload resolution
in the implicit definition of the constructor
for class <span class='texttt'>X</span>
to initialize a potentially constructed subobject, or</li><li id='spec-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-7.2'>(7.2)</a></div>a subexpression of such an initialization,
such as a default argument expression, or,</li><li id='spec-7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-7.3'>(7.3)</a></div>for a default constructor, a default member initializer<a class='hidden_link' href='#spec-7.sentence-1'>.</a></li></ul></div> <div id='spec-note-2' class='note'>[<a class='note_link' href='#spec-note-2'><span class='textit'>Note&nbsp;2</span></a><span class='textit'>:</span> <div id='spec-7.sentence-2' class='sentence'>Even though destructors for fully-constructed subobjects
are invoked when an exception is thrown
during the execution of a constructor (<a href='#ctor' title='14.3&emsp;Constructors and destructors'>[except.<span class='shy'></span>ctor]</a>),
their exception specifications do not contribute
to the exception specification of the constructor,
because an exception thrown from such a destructor
would call the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span>
rather than escape the constructor (<a href='#throw' title='14.2&emsp;Throwing an exception'>[except.<span class='shy'></span>throw]</a>, <a href='#terminate' title='14.6.2&emsp;The std&#x200b;::&#x200b;terminate function'>[except.<span class='shy'></span>terminate]</a>)<a class='hidden_link' href='#spec-7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='spec-8'><div class='marginalizedparent'><a class='marginalized' href='#spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L870'>#</a></div><div id='spec-8.sentence-1' class='sentence'>The exception specification for an implicitly-declared destructor,
or a destructor without a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier___________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>,
is potentially-throwing if and only if
any of the destructors
for any of its potentially constructed subobjects
is potentially-throwing or
the destructor is virtual and the destructor of any virtual base class
is potentially-throwing<a class='hidden_link' href='#spec-8.sentence-1'>.</a></div></div><div class='para' id='spec-9'><div class='marginalizedparent'><a class='marginalized' href='#spec-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L880'>#</a></div><div id='spec-9.sentence-1' class='sentence'>The exception specification for an implicitly-declared assignment operator,
or an assignment-operator without a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier____________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>
that is defaulted on its first declaration,
is potentially-throwing if and only if
the invocation of any assignment operator
in the implicit definition is potentially-throwing<a class='hidden_link' href='#spec-9.sentence-1'>.</a></div></div><div class='para' id='spec-10'><div class='marginalizedparent'><a class='marginalized' href='#spec-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L888'>#</a></div><div id='spec-10.sentence-1' class='sentence'>A <a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions&emsp;[basic.stc.dynamic.deallocation]'>deallocation function</a>
with no explicit <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_____________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>
has a non-throwing exception specification<a class='hidden_link' href='#spec-10.sentence-1'>.</a></div></div><div class='para' id='spec-11'><div class='marginalizedparent'><a class='marginalized' href='#spec-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L893'>#</a></div><div id='spec-11.sentence-1' class='sentence'>The exception specification for a comparison operator function (<a href='over.binary' title='12.6.3&emsp;Binary operators'>[over.<span class='shy'></span>binary]</a>)
without a <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier______________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a>
that is defaulted on its first declaration
is potentially-throwing if and only if
any expression
in the implicit definition is potentially-throwing<a class='hidden_link' href='#spec-11.sentence-1'>.</a></div></div><div class='para' id='spec-12'><div class='marginalizedparent'><a class='marginalized' href='#spec-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L901'>#</a></div><div id='spec-example-3' class='example'>[<a class='example_link' href='#spec-example-3'><span class='textit'>Example&nbsp;3</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  A<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span>A<span class='parenthesis'>(</span><span class='literal'>5</span><span class='parenthesis'>)</span>, <span class='literal'>0</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  A<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  A<span class='parenthesis'>(</span>A<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='operator'>~</span>A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  B<span class='parenthesis'>(</span><span class='keyword'>const</span> B<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;        <span class='comment'>// implicit exception specification is <span class='tcode_in_codeblock'>noexcept(true)</span></span>
  B<span class='parenthesis'>(</span>B<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>throw</span> <span class='literal'>42</span>, <span class='literal'>0</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='operator'>~</span>B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> n <span class='operator'>=</span> <span class='literal'>7</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>public</span> A, <span class='keyword'>public</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> <span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>int</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span>;
    <span class='comment'>// <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;D()</span> potentially-throwing, as the <span class='tcode_in_codeblock'>new</span> operator may throw <span class='tcode_in_codeblock'>bad_&shy;alloc</span> or <span class='tcode_in_codeblock'>bad_&shy;array_&shy;new_&shy;length</span></span>
    <span class='comment'>// <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;D(const D&amp;)</span> non-throwing</span>
    <span class='comment'>// <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;D(D&amp;&amp;)</span> potentially-throwing, as the default argument for <span class='tcode_in_codeblock'>B</span>'s constructor may throw</span>
    <span class='comment'>// <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;~D()</span> potentially-throwing</span>
<span class='curlybracket'>}</span>;
</span> <div id='spec-12.sentence-1' class='sentence'>
Furthermore, if
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>A<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
were virtual,
the program would be ill-formed since a function that overrides a virtual
function from a base class
shall not have a potentially-throwing exception specification
if the base class function has a non-throwing exception specification<a class='hidden_link' href='#spec-12.sentence-1'>.</a></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='spec-13'><div class='marginalizedparent'><a class='marginalized' href='#spec-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L934'>#</a></div><div id='spec-13.sentence-1' class='sentence'>An exception specification is considered to be <a class='hidden_link' href='#def:needed,exception_specification' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='def:needed,exception_specification'><span class='textit'>needed</span></span></a> when:
<ul class='itemize'><li id='spec-13.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-13.1'>(13.1)</a></div>in an expression, the function is the unique lookup result or the selected
member of a set of overloaded functions (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>, <a href='over.match' title='12.4&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>, <a href='over.over' title='12.5&emsp;Address of overloaded function'>[over.<span class='shy'></span>over]</a>);</li><li id='spec-13.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-13.2'>(13.2)</a></div>the function is <a href='basic.def.odr' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'>odr-used</a> or, if it appears in an
unevaluated operand, would be odr-used if the expression were
potentially-evaluated;</li><li id='spec-13.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-13.3'>(13.3)</a></div>the exception specification is compared to that of another
declaration (e.g., an explicit specialization or an overriding virtual
function);</li><li id='spec-13.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-13.4'>(13.4)</a></div>the function is defined; or</li><li id='spec-13.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-13.5'>(13.5)</a></div>the exception specification is needed for a defaulted
function that calls the function<a class='hidden_link' href='#spec-13.sentence-1'>.</a> <div id='spec-note-3' class='note'>[<a class='note_link' href='#spec-note-3'><span class='textit'>Note&nbsp;3</span></a><span class='textit'>:</span> <div id='spec-13.5.sentence-2' class='sentence'>A defaulted declaration does not require the
exception specification of a base member function to be evaluated
until the implicit exception specification of the derived
function is needed, but an explicit <a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_______________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> needs
the implicit exception specification to compare against<a class='hidden_link' href='#spec-13.5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </li></ul></div> <div id='spec-13.sentence-2' class='sentence'>
The exception specification of a defaulted
function is evaluated as described above only when needed; similarly, the
<a href='#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier________________'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> of a specialization of a function
template or member function of a class template is instantiated only when
needed<a class='hidden_link' href='#spec-13.sentence-2'>.</a></div> </div></div><div id='special' class='section'><h2 ><a class='secnum' href='#special' style='min-width:65pt'>14.6</a> Special functions <a class='abbr_ref' href='except.special'>[except.special]</a></h2><div id='special.general' class='section'><h3 ><a class='secnum' href='#special.general' style='min-width:80pt'>14.6.1</a> General <a class='abbr_ref' href='except.special.general'>[except.special.general]</a></h3><div class='para' id='special.general-1'><div class='marginalizedparent'><a class='marginalized' href='#special.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L972'>#</a></div><div id='special.general-1.sentence-1' class='sentence'>The function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span> (<a href='#terminate' title='14.6.2&emsp;The std&#x200b;::&#x200b;terminate function'>[except.<span class='shy'></span>terminate]</a>)
is used by the exception
handling mechanism for coping with errors related to the exception handling
mechanism itself<a class='hidden_link' href='#special.general-1.sentence-1'>.</a></div> <div id='special.general-1.sentence-2' class='sentence'>The function
<a href='propagation' title='17.9.7&emsp;Exception propagation&emsp;[propagation]'><span class='texttt'>std&#x200b;::&#x200b;current_&shy;exception()</span></a> and the class
<a href='except.nested' title='17.9.8&emsp;nested_&shy;exception&emsp;[except.nested]'><span class='texttt'>std&#x200b;::&#x200b;nested_&shy;exception</span></a> can be used by a program to
capture the currently handled exception<a class='hidden_link' href='#special.general-1.sentence-2'>.</a></div></div></div><div id='terminate' class='section'><h3 ><a class='secnum' href='#terminate' style='min-width:80pt'>14.6.2</a> The <span class='texttt'>std&#x200b;::&#x200b;terminate</span> function <a class='abbr_ref' href='except.terminate'>[except.terminate]</a></h3><div class='para' id='terminate-1'><div class='marginalizedparent'><a class='marginalized' href='#terminate-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L983'>#</a></div><div id='terminate-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':terminate'></a></span>In some situations exception handling must be abandoned
for less subtle error handling techniques<a class='hidden_link' href='#terminate-1.sentence-1'>.</a></div> <div id='terminate-note-1' class='note'>[<a class='note_link' href='#terminate-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='terminate-1.sentence-2' class='sentence'>These situations are:
<span class='indexparent'><a class='index' id=':terminate,called__'></a></span><ul class='itemize'><li id='terminate-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.1'>(1.1)</a></div>when the exception handling mechanism, after completing
the initialization of the exception object
but before
activation of a handler for the exception (<a href='#throw' title='14.2&emsp;Throwing an exception'>[except.<span class='shy'></span>throw]</a>),
calls a function that exits
via an exception, or</li><li id='terminate-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.2'>(1.2)</a></div>when the exception handling mechanism cannot find a handler for a thrown exception (<a href='#handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>), or</li><li id='terminate-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.3'>(1.3)</a></div>when the search for a <a href='#handle' title='14.4&emsp;Handling an exception&emsp;[except.handle]'>handler</a> encounters the
outermost block of a function
with a non-throwing <a href='#spec' title='14.5&emsp;Exception specifications&emsp;[except.spec]'>exception specification</a>, or</li><li id='terminate-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.4'>(1.4)</a></div>when the destruction of an object during <a href='#def:stack_unwinding' title='14.3&emsp;Constructors and destructors&emsp;[except.ctor]'>stack unwinding</a>
terminates by throwing an exception, or</li><li id='terminate-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.5'>(1.5)</a></div>when initialization of a non-local
variable with static or thread storage duration (<a href='basic.start.dynamic' title='6.9.3.3&emsp;Dynamic initialization of non-local variables'>[basic.<span class='shy'></span>start.<span class='shy'></span>dynamic]</a>)
exits via an exception, or</li><li id='terminate-1.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.6'>(1.6)</a></div>when destruction of an object with static or thread storage duration exits
via an exception (<a href='basic.start.term' title='6.9.3.4&emsp;Termination'>[basic.<span class='shy'></span>start.<span class='shy'></span>term]</a>), or</li><li id='terminate-1.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.7'>(1.7)</a></div>when execution of a function registered with
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>atexit</span> or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>at_&shy;quick_&shy;exit</span>
exits via an exception (<a href='support.start.term' title='17.5&emsp;Startup and termination'>[support.<span class='shy'></span>start.<span class='shy'></span>term]</a>), or</li><li id='terminate-1.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.8'>(1.8)</a></div>when a
<a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression___'><span class='textsf'><span class='textit'>throw-expression</span></span></span></a> (<a href='expr.throw' title='7.6.18&emsp;Throwing an exception'>[expr.<span class='shy'></span>throw]</a>)
with no operand attempts to rethrow an exception and no exception is being
handled (<a href='#throw' title='14.2&emsp;Throwing an exception'>[except.<span class='shy'></span>throw]</a>), or</li><li id='terminate-1.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.9'>(1.9)</a></div>when the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nested_&shy;exception<span class='operator'>&#x200b;::&#x200b;</span>rethrow_&shy;nested</span> is called for an object
that has captured no exception (<a href='except.nested' title='17.9.8&emsp;nested_&shy;exception'>[except.<span class='shy'></span>nested]</a>), or</li><li id='terminate-1.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.10'>(1.10)</a></div>when execution of the initial function of a thread exits via
an exception (<a href='thread.thread.constr' title='32.4.3.3&emsp;Constructors'>[thread.<span class='shy'></span>thread.<span class='shy'></span>constr]</a>), or</li><li id='terminate-1.11'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.11'>(1.11)</a></div>for a parallel algorithm whose <span class='texttt'>ExecutionPolicy</span> specifies such
behavior (<a href='execpol.seq' title='20.18.4&emsp;Sequenced execution policy'>[execpol.<span class='shy'></span>seq]</a>, <a href='execpol.par' title='20.18.5&emsp;Parallel execution policy'>[execpol.<span class='shy'></span>par]</a>, <a href='execpol.parunseq' title='20.18.6&emsp;Parallel and unsequenced execution policy'>[execpol.<span class='shy'></span>parunseq]</a>),
when execution of an element access function (<a href='algorithms.parallel.defns' title='25.3.1&emsp;Preamble'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>defns]</a>)
of the parallel algorithm exits via an exception (<a href='algorithms.parallel.exceptions' title='25.3.4&emsp;Parallel algorithm exceptions'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>exceptions]</a>), or</li><li id='terminate-1.12'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.12'>(1.12)</a></div>when the destructor or the move assignment operator is invoked on an object
of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>thread</span> that refers to a joinable thread
(<a href='thread.thread.destr' title='32.4.3.4&emsp;Destructor'>[thread.<span class='shy'></span>thread.<span class='shy'></span>destr]</a>, <a href='thread.thread.assign' title='32.4.3.5&emsp;Assignment'>[thread.<span class='shy'></span>thread.<span class='shy'></span>assign]</a>), or</li><li id='terminate-1.13'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#terminate-1.13'>(1.13)</a></div>when a call to a <span class='texttt'>wait<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>wait_&shy;until<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, or <span class='texttt'>wait_&shy;for<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
function on a condition variable (<a href='thread.condition.condvar' title='32.6.4&emsp;Class condition_&shy;variable'>[thread.<span class='shy'></span>condition.<span class='shy'></span>condvar]</a>, <a href='thread.condition.condvarany' title='32.6.5&emsp;Class condition_&shy;variable_&shy;any'>[thread.<span class='shy'></span>condition.<span class='shy'></span>condvarany]</a>)
fails to meet a postcondition<a class='hidden_link' href='#terminate-1.sentence-2'>.</a></li></ul></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='terminate-2'><div class='marginalizedparent'><a class='marginalized' href='#terminate-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L1056'>#</a></div><div id='terminate-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':terminate_'></a></span>In such cases,
the function <a href='exception.terminate' title='17.9.5&emsp;Abnormal termination&emsp;[exception.terminate]'><span class='texttt'>std&#x200b;::&#x200b;terminate</span></a>
is called<a class='hidden_link' href='#terminate-2.sentence-1'>.</a></div> <div id='terminate-2.sentence-2' class='sentence'>In the situation where no matching handler is found, it is
<span class='indexparent'><a class='index' id=':stack_unwinding_before_call_to_std::terminate'></a></span>implementation-defined whether or not the
stack is unwound
before
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span>
is called<a class='hidden_link' href='#terminate-2.sentence-2'>.</a></div> <div id='terminate-2.sentence-3' class='sentence'>In the situation where the search for a <a href='#handle' title='14.4&emsp;Handling an exception&emsp;[except.handle]'>handler</a> encounters the
outermost block of a function
with a non-throwing <a href='#spec' title='14.5&emsp;Exception specifications&emsp;[except.spec]'>exception specification</a>, it is
<span class='indexparent'><a class='index' id=':whether_stack_is_unwound_before_calling_the_function_std::terminate_when_a_noexcept_specification_is_violated'></a></span>implementation-defined
whether the stack is unwound, unwound partially, or not unwound at all
before the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span> is called<a class='hidden_link' href='#terminate-2.sentence-3'>.</a></div> <div id='terminate-2.sentence-4' class='sentence'>In all other situations, the stack shall not be unwound before
the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span>
is called<a class='hidden_link' href='#terminate-2.sentence-4'>.</a></div> <div id='terminate-2.sentence-5' class='sentence'>An implementation is not permitted to finish stack unwinding
prematurely based on a determination that the unwind process
will eventually cause a call to the function
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span><a class='hidden_link' href='#terminate-2.sentence-5'>.</a></div></div></div><div id='uncaught' class='section'><h3 ><a class='secnum' href='#uncaught' style='min-width:80pt'>14.6.3</a> The <span class='texttt'>std&#x200b;::&#x200b;uncaught_&shy;exceptions</span> function <a class='abbr_ref' href='except.uncaught'>[except.uncaught]</a></h3><span class='indexparent'><a class='index' id='lib:uncaught_exceptions'></a></span><div class='para' id='uncaught-1'><div class='marginalizedparent'><a class='marginalized' href='#uncaught-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/d10a1132472f18bbfec269bdb3169a306d622caa/source/exceptions.tex#L1086'>#</a></div><div id='uncaught-1.sentence-1' class='sentence'>An exception is considered uncaught
after completing the initialization of the <a href='#def:exception_handling,exception_object' title='14.2&emsp;Throwing an exception&emsp;[except.throw]'>exception object</a>
until completing the activation of a handler for the exception (<a href='#handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)<a class='hidden_link' href='#uncaught-1.sentence-1'>.</a></div> <div id='uncaught-note-1' class='note'>[<a class='note_link' href='#uncaught-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='uncaught-1.sentence-2' class='sentence'>As a consequence, an exception is considered uncaught
during any stack unwinding resulting from it being thrown<a class='hidden_link' href='#uncaught-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div>  <div id='uncaught-1.sentence-3' class='sentence'>
If an exception is rethrown (<a href='expr.throw' title='7.6.18&emsp;Throwing an exception'>[expr.<span class='shy'></span>throw]</a>, <a href='propagation' title='17.9.7&emsp;Exception propagation'>[propagation]</a>),
it is considered uncaught from the point of rethrow
until the rethrown exception is caught<a class='hidden_link' href='#uncaught-1.sentence-3'>.</a></div> <div id='uncaught-1.sentence-4' class='sentence'>The function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>uncaught_&shy;exceptions</span> (<a href='uncaught.exceptions' title='17.9.6&emsp;uncaught_&shy;exceptions'>[uncaught.<span class='shy'></span>exceptions]</a>)
returns the number of uncaught exceptions in the current thread<a class='hidden_link' href='#uncaught-1.sentence-4'>.</a></div> </div></div></div></div></body></html>