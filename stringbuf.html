<!DOCTYPE html><html lang='en'><head><title>[stringbuf]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>29</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>29.8</a> String-based streams <a class='abbr_ref' href='string.streams#stringbuf'>[string.streams]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>29.8.2</a> Class template <span class='texttt'>basic_&shy;stringbuf</span> <a class='abbr_ref'>[stringbuf]</a></h3><span class='indexparent'><a class='index' id='lib:basic_stringbuf'></a></span><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> charT, <span class='keyword'>class</span> traits <span class='operator'>=</span> char_traits<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span>,
           <span class='keyword'>class</span> Allocator <span class='operator'>=</span> allocator<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> basic_stringbuf <span class='operator'>:</span> <span class='keyword'>public</span> basic_streambuf<span class='anglebracket'>&lt;</span>charT, traits<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> char_type      <span class='operator'>=</span> charT;
    <span class='keyword'>using</span> int_type       <span class='operator'>=</span> <span class='keyword'>typename</span> traits<span class='operator'>::</span>int_type;
    <span class='keyword'>using</span> pos_type       <span class='operator'>=</span> <span class='keyword'>typename</span> traits<span class='operator'>::</span>pos_type;
    <span class='keyword'>using</span> off_type       <span class='operator'>=</span> <span class='keyword'>typename</span> traits<span class='operator'>::</span>off_type;
    <span class='keyword'>using</span> traits_type    <span class='operator'>=</span> traits;
    <span class='keyword'>using</span> allocator_type <span class='operator'>=</span> Allocator;

    <span class='comment'>// <a href='#cons'>[stringbuf.cons]</a>, constructors</span>
    basic_stringbuf<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> basic_stringbuf<span class='parenthesis'>(</span>ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span>ios_base<span class='operator'>::</span>openmode which<span class='parenthesis'>)</span>;
    <span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span>
      <span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s,
      ios_base<span class='operator'>::</span>openmode which <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span>;
    <span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span><span class='keyword'>const</span> Allocator<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>
      <span class='operator'>:</span> basic_stringbuf<span class='parenthesis'>(</span>ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out, a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    basic_stringbuf<span class='parenthesis'>(</span>ios_base<span class='operator'>::</span>openmode which, <span class='keyword'>const</span> Allocator<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;
    <span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span>
      basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> s,
      ios_base<span class='operator'>::</span>openmode which <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
      basic_stringbuf<span class='parenthesis'>(</span>
        <span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s, <span class='keyword'>const</span> Allocator<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>
        <span class='operator'>:</span> basic_stringbuf<span class='parenthesis'>(</span>s, ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out, a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
      basic_stringbuf<span class='parenthesis'>(</span>
        <span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s,
        ios_base<span class='operator'>::</span>openmode which, <span class='keyword'>const</span> Allocator<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
      <span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span>
        <span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s,
        ios_base<span class='operator'>::</span>openmode which <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span>;
    basic_stringbuf<span class='parenthesis'>(</span><span class='keyword'>const</span> basic_stringbuf<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    basic_stringbuf<span class='parenthesis'>(</span>basic_stringbuf<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
    basic_stringbuf<span class='parenthesis'>(</span>basic_stringbuf<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs, <span class='keyword'>const</span> Allocator<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#assign'>[stringbuf.assign]</a>, assign and swap</span>
    basic_stringbuf<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> basic_stringbuf<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    basic_stringbuf<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>basic_stringbuf<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>basic_stringbuf<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='textit'><span class='texttt'>see below</span></span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#members'>[stringbuf.members]</a>, getters and setters</span>
    allocator_type get_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span> str<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
      basic_string<span class='anglebracket'>&lt;</span>charT,traits,SAlloc<span class='anglebracket'>&gt;</span> str<span class='parenthesis'>(</span><span class='keyword'>const</span> SAlloc<span class='operator'>&amp;</span> sa<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span> str<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    basic_string_view<span class='anglebracket'>&lt;</span>charT, traits<span class='anglebracket'>&gt;</span> view<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> str<span class='parenthesis'>(</span><span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> str<span class='parenthesis'>(</span><span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> str<span class='parenthesis'>(</span>basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span>;

  <span class='keyword'>protected</span><span class='operator'>:</span>
    <span class='comment'>// <a href='#virtuals'>[stringbuf.virtuals]</a>, overridden virtual functions</span>
    int_type underflow<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>override</span>;
    int_type pbackfail<span class='parenthesis'>(</span>int_type c <span class='operator'>=</span> traits<span class='operator'>::</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>override</span>;
    int_type overflow <span class='parenthesis'>(</span>int_type c <span class='operator'>=</span> traits<span class='operator'>::</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>override</span>;
    basic_streambuf<span class='anglebracket'>&lt;</span>charT, traits<span class='anglebracket'>&gt;</span><span class='operator'>*</span> setbuf<span class='parenthesis'>(</span>charT<span class='operator'>*</span>, streamsize<span class='parenthesis'>)</span> <span class='keyword'>override</span>;

    pos_type seekoff<span class='parenthesis'>(</span>off_type off, ios_base<span class='operator'>::</span>seekdir way,
                     ios_base<span class='operator'>::</span>openmode which
                      <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
    pos_type seekpos<span class='parenthesis'>(</span>pos_type sp,
                     ios_base<span class='operator'>::</span>openmode which
                      <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span> <span class='keyword'>override</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    ios_base<span class='operator'>::</span>openmode mode;                        <span class='comment'>// <span class='textit'>exposition only</span></span>
    basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span> buf;     <span class='comment'>// <span class='textit'>exposition only</span></span>
    <span class='keyword'>void</span> init_buf_ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                           <span class='comment'>// <span class='textit'>exposition only</span></span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> charT, <span class='keyword'>class</span> traits, <span class='keyword'>class</span> Allocator<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>basic_stringbuf<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x,
              basic_stringbuf<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='keyword'>noexcept</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>swap<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7495'>#</a></div><div id='1.sentence-1' class='sentence'>The class
<span class='texttt'>basic_&shy;stringbuf</span>
is derived from
<span class='texttt'>basic_&shy;streambuf</span>
to associate possibly the input sequence and possibly
the output sequence with a sequence of arbitrary
<a class='hidden_link' href='#def:characters' id='def:characters'><i>characters</i></a><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The sequence can be initialized from, or made available as, an object of class
<span class='texttt'>basic_&shy;string</span><a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7506'>#</a></div><div id='2.sentence-1' class='sentence'>For the sake of exposition,
the maintained data and internal pointer initialization is presented here as:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>openmode mode</span>, has
  <span class='texttt'>in</span> set if the input sequence can be read, and
  <span class='texttt'>out</span> set if the output sequence can be written.</li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><span class='texttt'>basic_&shy;string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span> buf</span>
  contains the underlying character sequence.</li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div><span class='texttt'>init_&shy;buf_&shy;ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> sets the base class'
  get area (<a href='streambuf.get.area'>[streambuf.get.area]</a>) and
  put area (<a href='streambuf.put.area'>[streambuf.put.area]</a>) pointers
  after initializing, moving from, or assigning to <span class='texttt'>buf</span> accordingly.</li></ul></div></div><div id='cons' class='section'><h4 ><a class='secnum' href='#cons' style='min-width:118pt'>29.8.2.1</a> Constructors <a class='abbr_ref' href='stringbuf.cons'>[stringbuf.cons]</a></h4><span class='indexparent'><a class='index' id='lib:basic_stringbuf,constructor'></a></span><div class='itemdecl' id='cons-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#cons-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span>ios_base<span class='operator'>::</span>openmode which<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7532'>#</a></div><div id='cons-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the base class with
<span class='texttt'>basic_&shy;streambuf<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='streambuf.cons'>[streambuf.cons]</a>), and
<span class='texttt'>mode</span>
with <span class='texttt'>which</span><a class='hidden_link' href='#cons-1.sentence-1'>.</a></div> <div id='cons-1.sentence-2' class='sentence'>It is
<span class='indexparent'><a class='index' id=':whether_sequence_pointers_are_initialized_to_null_pointers'></a></span>implementation-defined
whether the sequence pointers
(<span class='texttt'>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
<span class='texttt'>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>)
are initialized to null pointers<a class='hidden_link' href='#cons-1.sentence-2'>.</a></div></div></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7545'>#</a></div><div id='cons-2.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
<span class='texttt'>str<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>empty<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#cons-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_stringbuf,constructor_'></a></span><div class='itemdecl' id='cons-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#cons-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span>
  <span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s,
  ios_base<span class='operator'>::</span>openmode which <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7558'>#</a></div><div id='cons-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the base class with
<span class='texttt'>basic_&shy;streambuf<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='streambuf.cons'>[streambuf.cons]</a>),
<span class='texttt'>mode</span> with <span class='texttt'>which</span>, and
<span class='texttt'>buf</span> with <span class='texttt'>s</span>,
then calls <span class='texttt'>init_&shy;buf_&shy;ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cons-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_stringbuf,constructor__'></a></span><div class='itemdecl' id='cons-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#cons-itemdecl:3'>🔗</a></div><code class='itemdeclcode'>basic_stringbuf<span class='parenthesis'>(</span>ios_base<span class='operator'>::</span>openmode which, <span class='keyword'>const</span> Allocator <span class='operator'>&amp;</span>a<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7573'>#</a></div><div id='cons-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the base class with
<span class='texttt'>basic_&shy;streambuf<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='streambuf.cons'>[streambuf.cons]</a>),
<span class='texttt'>mode</span> with <span class='texttt'>which</span>, and
<span class='texttt'>buf</span> with <span class='texttt'>a</span>,
then calls <span class='texttt'>init_&shy;buf_&shy;ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cons-4.sentence-1'>.</a></div></div></div><div class='para' id='cons-5'><div class='marginalizedparent'><a class='marginalized' href='#cons-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7581'>#</a></div><div id='cons-5.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
<span class='texttt'>str<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>empty<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#cons-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_stringbuf,constructor___'></a></span><div class='itemdecl' id='cons-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#cons-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span>
  basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> s,
  ios_base<span class='operator'>::</span>openmode which <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='cons-6'><div class='marginalizedparent'><a class='marginalized' href='#cons-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7594'>#</a></div><div id='cons-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the base class with <span class='texttt'>basic_&shy;streambuf<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='streambuf.cons'>[streambuf.cons]</a>),
<span class='texttt'>mode</span> with <span class='texttt'>which</span>, and
<span class='texttt'>buf</span> with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>s<span class='parenthesis'>)</span></span>,
then calls <span class='texttt'>init_&shy;buf_&shy;ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cons-6.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_stringbuf,constructor____'></a></span><div class='itemdecl' id='cons-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#cons-itemdecl:5'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
  basic_stringbuf<span class='parenthesis'>(</span>
    <span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s,
    ios_base<span class='operator'>::</span>openmode which, <span class='keyword'>const</span> Allocator <span class='operator'>&amp;</span>a<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='cons-7'><div class='marginalizedparent'><a class='marginalized' href='#cons-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7611'>#</a></div><div id='cons-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the base class with <span class='texttt'>basic_&shy;streambuf<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='streambuf.cons'>[streambuf.cons]</a>),
<span class='texttt'>mode</span> with <span class='texttt'>which</span>, and
<span class='texttt'>buf</span> with <span class='texttt'><span class='curlybracket'>{</span>s,a<span class='curlybracket'>}</span></span>,
then calls <span class='texttt'>init_&shy;buf_&shy;ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cons-7.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_stringbuf,constructor_____'></a></span><div class='itemdecl' id='cons-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#cons-itemdecl:6'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
  <span class='keyword'>explicit</span> basic_stringbuf<span class='parenthesis'>(</span>
    <span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s,
    ios_base<span class='operator'>::</span>openmode which <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='cons-8'><div class='marginalizedparent'><a class='marginalized' href='#cons-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7628'>#</a></div><div id='cons-8.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
<span class='texttt'>is_&shy;same_&shy;v<span class='anglebracket'>&lt;</span>SAlloc,Allocator<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#cons-8.sentence-1'>.</a></div></div></div><div class='para' id='cons-9'><div class='marginalizedparent'><a class='marginalized' href='#cons-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7632'>#</a></div><div id='cons-9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the base class with <span class='texttt'>basic_&shy;streambuf<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='streambuf.cons'>[streambuf.cons]</a>),
<span class='texttt'>mode</span> with <span class='texttt'>which</span>, and
<span class='texttt'>buf</span> with <span class='texttt'>s</span>,
then calls <span class='texttt'>init_&shy;buf_&shy;ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cons-9.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:basic_stringbuf,constructor______'></a></span><div class='itemdecl' id='cons-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#cons-itemdecl:7'>🔗</a></div><code class='itemdeclcode'>basic_stringbuf<span class='parenthesis'>(</span>basic_stringbuf<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
basic_stringbuf<span class='parenthesis'>(</span>basic_stringbuf<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs, <span class='keyword'>const</span> Allocator<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='cons-10'><div class='marginalizedparent'><a class='marginalized' href='#cons-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7647'>#</a></div><div id='cons-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Copy constructs the base class from <span class='texttt'>rhs</span> and
initializes <span class='texttt'>mode</span> with <span class='texttt'>rhs<span class='operator'>.</span>mode</span><a class='hidden_link' href='#cons-10.sentence-1'>.</a></div> <div id='cons-10.sentence-2' class='sentence'>In the first form <span class='texttt'>buf</span> is initialized
from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span><span class='operator'>.</span>str<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cons-10.sentence-2'>.</a></div> <div id='cons-10.sentence-3' class='sentence'>In the second form <span class='texttt'>buf</span> is initialized
from <span class='texttt'><span class='curlybracket'>{</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span><span class='operator'>.</span>str<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, a<span class='curlybracket'>}</span></span><a class='hidden_link' href='#cons-10.sentence-3'>.</a></div> <div id='cons-10.sentence-4' class='sentence'>It is
<span class='indexparent'><a class='index' id=':whether_sequence_pointers_are_copied_by_basic_stringbuf_move_constructor'></a></span>implementation-defined whether the sequence pointers in <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
(<span class='texttt'>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
<span class='texttt'>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>) obtain
the values which <span class='texttt'>rhs</span> had<a class='hidden_link' href='#cons-10.sentence-4'>.</a></div></div></div><div class='para' id='cons-11'><div class='marginalizedparent'><a class='marginalized' href='#cons-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7662'>#</a></div><div id='cons-11.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
Let <span class='texttt'>rhs_&shy;p</span> refer to the state of
<span class='texttt'>rhs</span> just prior to this construction and let <span class='texttt'>rhs_&shy;a</span>
refer to the state of <span class='texttt'>rhs</span> just after this construction<a class='hidden_link' href='#cons-11.sentence-1'>.</a></div><ul class='itemize'><li id='cons-11.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.1'>(11.1)</a></div><div id='cons-11.1.sentence-1' class='sentence'><span class='texttt'>str<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> rhs_&shy;p<span class='operator'>.</span>str<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.2'>(11.2)</a></div><div id='cons-11.2.sentence-1' class='sentence'><span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> rhs_&shy;p<span class='operator'>.</span>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> rhs_&shy;p<span class='operator'>.</span>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.3'>(11.3)</a></div><div id='cons-11.3.sentence-1' class='sentence'><span class='texttt'>egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> rhs_&shy;p<span class='operator'>.</span>egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> rhs_&shy;p<span class='operator'>.</span>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.4'>(11.4)</a></div><div id='cons-11.4.sentence-1' class='sentence'><span class='texttt'>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> rhs_&shy;p<span class='operator'>.</span>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> rhs_&shy;p<span class='operator'>.</span>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.5'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.5'>(11.5)</a></div><div id='cons-11.5.sentence-1' class='sentence'><span class='texttt'>epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> rhs_&shy;p<span class='operator'>.</span>epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> rhs_&shy;p<span class='operator'>.</span>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.6'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.6'>(11.6)</a></div><div id='cons-11.6.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>if</span> <span class='parenthesis'>(</span>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> rhs_&shy;a<span class='operator'>.</span>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.7'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.7'>(11.7)</a></div><div id='cons-11.7.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>if</span> <span class='parenthesis'>(</span>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> rhs_&shy;a<span class='operator'>.</span>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.8'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.8'>(11.8)</a></div><div id='cons-11.8.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>if</span> <span class='parenthesis'>(</span>egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> rhs_&shy;a<span class='operator'>.</span>egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.9'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.9'>(11.9)</a></div><div id='cons-11.9.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>if</span> <span class='parenthesis'>(</span>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> rhs_&shy;a<span class='operator'>.</span>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.10'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.10'>(11.10)</a></div><div id='cons-11.10.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>if</span> <span class='parenthesis'>(</span>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> rhs_&shy;a<span class='operator'>.</span>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.11'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.11'>(11.11)</a></div><div id='cons-11.11.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>if</span> <span class='parenthesis'>(</span>epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> rhs_&shy;a<span class='operator'>.</span>epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.12'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.12'>(11.12)</a></div><div id='cons-11.12.sentence-1' class='sentence'><span class='texttt'>getloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> rhs_&shy;p<span class='operator'>.</span>getloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></li><li id='cons-11.13'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#cons-11.13'>(11.13)</a></div><div id='cons-11.13.sentence-1' class='sentence'><span class='texttt'>rhs</span> is empty but usable,
  as if <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span><span class='operator'>.</span>str<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> was called<a class='hidden_link' href='#cons-11.13.sentence-1'>.</a></div></li></ul></div></div></div><div id='assign' class='section'><h4 ><a class='secnum' href='#assign' style='min-width:118pt'>29.8.2.2</a> Assignment and swap <a class='abbr_ref' href='stringbuf.assign'>[stringbuf.assign]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,operator='></a></span><div class='itemdecl' id='assign-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#assign-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>basic_stringbuf<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>basic_stringbuf<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='assign-1'><div class='marginalizedparent'><a class='marginalized' href='#assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7694'>#</a></div><div id='assign-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
After the move assignment <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> has the observable state it would
have had if it had been move constructed from <span class='texttt'>rhs</span> (see <a href='#cons'>[stringbuf.cons]</a>)<a class='hidden_link' href='#assign-1.sentence-1'>.</a></div></div></div><div class='para' id='assign-2'><div class='marginalizedparent'><a class='marginalized' href='#assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7699'>#</a></div><div id='assign-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#assign-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,swap'></a></span><div class='itemdecl' id='assign-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#assign-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> swap<span class='parenthesis'>(</span>basic_stringbuf<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='textit'><span class='texttt'>see below</span></span><span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='assign-3'><div class='marginalizedparent'><a class='marginalized' href='#assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7710'>#</a></div><div id='assign-3.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>allocator_&shy;traits<span class='anglebracket'>&lt;</span>Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>propagate_&shy;on_&shy;container_&shy;swap<span class='operator'>&#x200b;::&#x200b;</span>value</span>
is <span class='texttt'><span class='literal'>true</span></span> or
<span class='texttt'>get_&shy;allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> s<span class='operator'>.</span>get_&shy;allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#assign-3.sentence-1'>.</a></div></div></div><div class='para' id='assign-4'><div class='marginalizedparent'><a class='marginalized' href='#assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7716'>#</a></div><div id='assign-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Exchanges the state of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
and <span class='texttt'>rhs</span><a class='hidden_link' href='#assign-4.sentence-1'>.</a></div></div></div><div class='para' id='assign-5'><div class='marginalizedparent'><a class='marginalized' href='#assign-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7721'>#</a></div><div id='assign-5.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The expression inside <span class='texttt'><span class='keyword'>noexcept</span></span> is equivalent to:<br/></div> <div id='assign-5.sentence-2' class='sentence'><span class='texttt'>allocator_&shy;traits<span class='anglebracket'>&lt;</span>Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>propagate_&shy;on_&shy;container_&shy;swap<span class='operator'>&#x200b;::&#x200b;</span>value <span class='operator'>|</span><span class='operator'>|</span></span><br/></div> <div id='assign-5.sentence-3' class='sentence'><span class='texttt'>allocator_&shy;traits<span class='anglebracket'>&lt;</span>Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>is_&shy;always_&shy;equal<span class='operator'>&#x200b;::&#x200b;</span>value</span><a class='hidden_link' href='#assign-5.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:swap,basic_stringbuf_'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,swap_'></a></span><div class='itemdecl' id='assign-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#assign-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> charT, <span class='keyword'>class</span> traits, <span class='keyword'>class</span> Allocator<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>basic_stringbuf<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x,
            basic_stringbuf<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='keyword'>noexcept</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>swap<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='assign-6'><div class='marginalizedparent'><a class='marginalized' href='#assign-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7736'>#</a></div><div id='assign-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'>x<span class='operator'>.</span>swap<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span></span><a class='hidden_link' href='#assign-6.sentence-1'>.</a></div></div></div></div><div id='members' class='section'><h4 ><a class='secnum' href='#members' style='min-width:118pt'>29.8.2.3</a> Member functions <a class='abbr_ref' href='stringbuf.members'>[stringbuf.members]</a></h4><div class='para' id='members-1'><div class='marginalizedparent'><a class='marginalized' href='#members-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7743'>#</a></div><div id='members-1.sentence-1' class='sentence'>The member functions getting the underlying character sequence
all refer to a <span class='texttt'>high_&shy;mark</span> value,
where <span class='texttt'>high_&shy;mark</span> represents the position
one past the highest initialized character in the buffer<a class='hidden_link' href='#members-1.sentence-1'>.</a></div> <div id='members-1.sentence-2' class='sentence'>Characters can be initialized by writing to the stream,
by constructing the <span class='texttt'>basic_&shy;stringbuf</span>
passing a <span class='texttt'>basic_&shy;string</span> argument, or
by calling one of the <span class='texttt'>str</span> member functions
passing a <span class='texttt'>basic_&shy;string</span> as an argument<a class='hidden_link' href='#members-1.sentence-2'>.</a></div> <div id='members-1.sentence-3' class='sentence'>In the latter case, all characters initialized prior to the call
are now considered uninitialized
(except for those characters re-initialized by the new <span class='texttt'>basic_&shy;string</span>)<a class='hidden_link' href='#members-1.sentence-3'>.</a></div></div><div class='itemdecl' id='members-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> init_buf_ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='comment'>// <span class='textit'>exposition only</span></span>
</code></div><div class='itemdescr'></div><div class='para' id='members-2'><div class='marginalizedparent'><a class='marginalized' href='#members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7762'>#</a></div><div id='members-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the input and output sequences from <span class='texttt'>buf</span>
according to <span class='texttt'>mode</span><a class='hidden_link' href='#members-2.sentence-1'>.</a></div></div></div><div class='para' id='members-3'><div class='marginalizedparent'><a class='marginalized' href='#members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7767'>#</a></div><div id='members-3.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
<ul class='itemize'><li id='members-3.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#members-3.1'>(3.1)</a></div>If <span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>out</span> is set in <span class='texttt'>mode</span>,
  <span class='texttt'>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> points to <span class='texttt'>buf<span class='operator'>.</span>front<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and
  <span class='texttt'>epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span><span class='operator'>=</span> pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> buf<span class='operator'>.</span>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span>;
  <ul class='itemize'><li id='members-3.1.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#members-3.1.1'>(3.1.1)</a></div>in addition, if <span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>ate</span> is set in <span class='texttt'>mode</span>,
    <span class='texttt'>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> buf<span class='operator'>.</span>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span>,</li><li id='members-3.1.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#members-3.1.2'>(3.1.2)</a></div>otherwise <span class='texttt'>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span>.</li></ul></li><li id='members-3.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#members-3.2'>(3.2)</a></div>If <span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>in</span> is set in <span class='texttt'>mode</span>,
  <span class='texttt'>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> points to <span class='texttt'>buf<span class='operator'>.</span>front<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, and
  <span class='texttt'><span class='parenthesis'>(</span>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> buf<span class='operator'>.</span>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
  is <span class='texttt'><span class='literal'>true</span></span>.</li></ul></div></div></div><div class='para' id='members-4'><div class='marginalizedparent'><a class='marginalized' href='#members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7784'>#</a></div><div id='members-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#members-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='members-4.sentence-1' class='sentence'>For efficiency reasons,
stream buffer operations might violate invariants of <span class='texttt'>buf</span>
while it is held encapsulated in the <span class='texttt'>basic_&shy;stringbuf</span>,
e.g., by writing to characters in the range
<span class='texttt'>[</span><span class='texttt'><span class='texttt'>buf<span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> buf<span class='operator'>.</span>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>buf<span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> buf<span class='operator'>.</span>capacity<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></span><span class='texttt'>)</span><a class='hidden_link' href='#members-4.sentence-1'>.</a></div> <div id='members-4.sentence-2' class='sentence'>All operations retrieving a <span class='texttt'>basic_&shy;string</span> from <span class='texttt'>buf</span>
ensure that the <span class='texttt'>basic_&shy;string</span> invariants hold on the returned value<a class='hidden_link' href='#members-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:get_allocator,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,get_allocator'></a></span><div class='itemdecl' id='members-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>allocator_type get_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='members-5'><div class='marginalizedparent'><a class='marginalized' href='#members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7802'>#</a></div><div id='members-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>buf<span class='operator'>.</span>get_&shy;allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#members-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:str,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,str'></a></span><div class='itemdecl' id='members-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:3'>🔗</a></div><code class='itemdeclcode'>basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span> str<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
</code></div><div class='itemdescr'></div><div class='para' id='members-6'><div class='marginalizedparent'><a class='marginalized' href='#members-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7813'>#</a></div><div id='members-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
<span class='keyword'>return</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>view<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, get_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre></div></div></div><span class='indexparent'><a class='index' id='lib:str,basic_stringbuf_'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,str_'></a></span><div class='itemdecl' id='members-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
  basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span> str<span class='parenthesis'>(</span><span class='keyword'>const</span> SAlloc<span class='operator'>&amp;</span> sa<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div><div class='itemdescr'></div><div class='para' id='members-7'><div class='marginalizedparent'><a class='marginalized' href='#members-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7828'>#</a></div><div id='members-7.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
<span class='texttt'>SAlloc</span> is a type that
qualifies as an allocator (<a href='container.requirements.general'>[container.requirements.general]</a>)<a class='hidden_link' href='#members-7.sentence-1'>.</a></div></div></div><div class='para' id='members-8'><div class='marginalizedparent'><a class='marginalized' href='#members-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7833'>#</a></div><div id='members-8.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
<span class='keyword'>return</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>view<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, sa<span class='parenthesis'>)</span>;
</pre></div></div></div><div class='itemdecl' id='members-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:5'>🔗</a></div><code class='itemdeclcode'>basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span> str<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
</code></div><div class='itemdescr'></div><div class='para' id='members-9'><div class='marginalizedparent'><a class='marginalized' href='#members-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7846'>#</a></div><div id='members-9.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
A <span class='texttt'>basic_&shy;string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span></span> object
move constructed from
the <span class='texttt'>basic_&shy;stringbuf</span>'s underlying character sequence in <span class='texttt'>buf</span><a class='hidden_link' href='#members-9.sentence-1'>.</a></div> <div id='members-9.sentence-2' class='sentence'>This can be achieved by first adjusting <span class='texttt'>buf</span> to have
the same content as <span class='texttt'>view<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#members-9.sentence-2'>.</a></div></div></div><div class='para' id='members-10'><div class='marginalizedparent'><a class='marginalized' href='#members-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7854'>#</a></div><div id='members-10.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
The underlying character sequence <span class='texttt'>buf</span> is empty and
<span class='texttt'>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>epptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, <span class='texttt'>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
<span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, and <span class='texttt'>egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
are initialized as if by calling <span class='texttt'>init_&shy;buf_&shy;ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
with an empty <span class='texttt'>buf</span><a class='hidden_link' href='#members-10.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:view,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,view'></a></span><div class='itemdecl' id='members-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:6'>🔗</a></div><code class='itemdeclcode'>basic_string_view<span class='anglebracket'>&lt;</span>charT, traits<span class='anglebracket'>&gt;</span> view<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='members-11'><div class='marginalizedparent'><a class='marginalized' href='#members-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7869'>#</a></div><div id='members-11.sentence-1' class='sentence'>Let <span class='texttt'>sv</span> be <span class='texttt'>basic_&shy;string_&shy;view<span class='anglebracket'>&lt;</span>charT, traits<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#members-11.sentence-1'>.</a></div></div></div><div class='para' id='members-12'><div class='marginalizedparent'><a class='marginalized' href='#members-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7872'>#</a></div><div id='members-12.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
A <span class='texttt'>sv</span> object referring to
the <span class='texttt'>basic_&shy;stringbuf</span>'s underlying character sequence in <span class='texttt'>buf</span>:
<ul class='itemize'><li id='members-12.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#members-12.1'>(12.1)</a></div>If <span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>out</span> is set in <span class='texttt'>mode</span>,
  then <span class='texttt'>sv<span class='parenthesis'>(</span>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, high_&shy;mark<span class='operator'>-</span>pbase<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> is returned.</li><li id='members-12.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#members-12.2'>(12.2)</a></div>Otherwise, if <span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>in</span> is set in <span class='texttt'>mode</span>,
  then <span class='texttt'>sv<span class='parenthesis'>(</span>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span>eback<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> is returned.</li><li id='members-12.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#members-12.3'>(12.3)</a></div>Otherwise, <span class='texttt'>sv<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is returned.</li></ul></div></div></div><div class='para' id='members-13'><div class='marginalizedparent'><a class='marginalized' href='#members-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7884'>#</a></div><div id='members-13.note-1' class='note'>[&nbsp;<a class='note_link' href='#members-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='members-13.sentence-1' class='sentence'>Using the returned <span class='texttt'>sv</span> object after
destruction or invalidation of the character sequence underlying <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
is undefined behavior, unless <span class='texttt'>sv<span class='operator'>.</span>empty<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#members-13.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:str,basic_stringbuf__'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,str__'></a></span><div class='itemdecl' id='members-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:7'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> str<span class='parenthesis'>(</span><span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='members-14'><div class='marginalizedparent'><a class='marginalized' href='#members-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7898'>#</a></div><div id='members-14.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
buf <span class='operator'>=</span> s;
init_buf_ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre></div></div></div><span class='indexparent'><a class='index' id='lib:str,basic_stringbuf___'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,str___'></a></span><div class='itemdecl' id='members-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:8'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> SAlloc<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> str<span class='parenthesis'>(</span><span class='keyword'>const</span> basic_string<span class='anglebracket'>&lt;</span>charT, traits, SAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='members-15'><div class='marginalizedparent'><a class='marginalized' href='#members-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7914'>#</a></div><div id='members-15.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
<span class='texttt'>is_&shy;same_&shy;v<span class='anglebracket'>&lt;</span>SAlloc,Allocator<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#members-15.sentence-1'>.</a></div></div></div><div class='para' id='members-16'><div class='marginalizedparent'><a class='marginalized' href='#members-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7918'>#</a></div><div id='members-16.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
buf <span class='operator'>=</span> s;
init_buf_ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre></div></div></div><span class='indexparent'><a class='index' id='lib:str,basic_stringbuf____'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,str____'></a></span><div class='itemdecl' id='members-itemdecl:9'><div class='marginalizedparent'><a class='itemDeclLink' href='#members-itemdecl:9'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> str<span class='parenthesis'>(</span>basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='members-17'><div class='marginalizedparent'><a class='marginalized' href='#members-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7933'>#</a></div><div id='members-17.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
buf <span class='operator'>=</span> std<span class='operator'>::</span>move<span class='parenthesis'>(</span>s<span class='parenthesis'>)</span>;
init_buf_ptrs<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre></div></div></div></div><div id='virtuals' class='section'><h4 ><a class='secnum' href='#virtuals' style='min-width:118pt'>29.8.2.4</a> Overridden virtual functions <a class='abbr_ref' href='stringbuf.virtuals'>[stringbuf.virtuals]</a></h4><span class='indexparent'><a class='index' id='lib:underflow,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,underflow'></a></span><div class='itemdecl' id='virtuals-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#virtuals-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>int_type underflow<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div><div class='itemdescr'></div><div class='para' id='virtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7950'>#</a></div><div id='virtuals-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
If the input sequence has a read position available,
returns
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>to_&shy;int_&shy;type<span class='parenthesis'>(</span><span class='operator'>*</span>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#virtuals-1.sentence-1'>.</a></div> <div id='virtuals-1.sentence-2' class='sentence'>Otherwise, returns
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#virtuals-1.sentence-2'>.</a></div> <div id='virtuals-1.sentence-3' class='sentence'>Any character in the underlying buffer which has been initialized is considered
to be part of the input sequence<a class='hidden_link' href='#virtuals-1.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:pbackfail,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,pbackfail'></a></span><div class='itemdecl' id='virtuals-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#virtuals-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>int_type pbackfail<span class='parenthesis'>(</span>int_type c <span class='operator'>=</span> traits<span class='operator'>::</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div><div class='itemdescr'></div><div class='para' id='virtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L7967'>#</a></div><div id='virtuals-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Puts back the character designated by <span class='texttt'>c</span> to the input
sequence, if possible, in one of three ways:
<ul class='itemize'><li id='virtuals-2.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#virtuals-2.1'>(2.1)</a></div>If
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eq_&shy;int_&shy;type<span class='parenthesis'>(</span>c, traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
returns
<span class='texttt'><span class='literal'>false</span></span>
and
if the input sequence has a putback position available, and
if
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eq<span class='parenthesis'>(</span>to_&shy;char_&shy;type<span class='parenthesis'>(</span>c<span class='parenthesis'>)</span>, gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='operator'>-</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span></span>
returns
<span class='texttt'><span class='literal'>true</span></span>,
assigns
<span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> <span class='literal'>1</span></span>
to
<span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>.<div style='height:0.6em;display:block'></div>Returns:
<span class='texttt'>c</span>.</li><li id='virtuals-2.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#virtuals-2.2'>(2.2)</a></div>If
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eq_&shy;int_&shy;type<span class='parenthesis'>(</span>c, traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
returns
<span class='texttt'><span class='literal'>false</span></span>
and if the input sequence
has a putback position available, and
if <span class='texttt'>mode</span>
<span class='texttt'><span class='operator'>&amp;</span></span>
<span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>out</span> is
nonzero,
assigns <span class='texttt'>c</span> to
<span class='texttt'><span class='operator'>*</span><span class='operator'>-</span>-gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>.<div style='height:0.6em;display:block'></div>Returns:
<span class='texttt'>c</span>.</li><li id='virtuals-2.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#virtuals-2.3'>(2.3)</a></div>If
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eq_&shy;int_&shy;type<span class='parenthesis'>(</span>c, traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
returns
<span class='texttt'><span class='literal'>true</span></span>
and if the input sequence has a putback position available,
assigns
<span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> <span class='literal'>1</span></span>
to
<span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>.<div style='height:0.6em;display:block'></div>Returns:
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>not_&shy;eof<span class='parenthesis'>(</span>c<span class='parenthesis'>)</span></span>.</li></ul></div></div></div><div class='para' id='virtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8021'>#</a></div><div id='virtuals-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
As specified above, or
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
to indicate failure<a class='hidden_link' href='#virtuals-3.sentence-1'>.</a></div></div></div><div class='para' id='virtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8027'>#</a></div><div id='virtuals-4.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
If the function can succeed in more than one of these ways, it is
unspecified which way is chosen<a class='hidden_link' href='#virtuals-4.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id=':unspecified'></a></span></div></div><span class='indexparent'><a class='index' id='lib:overflow,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,overflow'></a></span><div class='itemdecl' id='virtuals-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#virtuals-itemdecl:3'>🔗</a></div><code class='itemdeclcode'>int_type overflow<span class='parenthesis'>(</span>int_type c <span class='operator'>=</span> traits<span class='operator'>::</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div><div class='itemdescr'></div><div class='para' id='virtuals-5'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8040'>#</a></div><div id='virtuals-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Appends the character designated by <span class='texttt'>c</span> to the output
sequence, if possible, in one of two ways:
<ul class='itemize'><li id='virtuals-5.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#virtuals-5.1'>(5.1)</a></div>If
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eq_&shy;int_&shy;type<span class='parenthesis'>(</span>c, traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
returns
<span class='texttt'><span class='literal'>false</span></span>
and if either
the output sequence has a write position available or
the function makes a write position available
(as described below),
the function calls
<span class='texttt'>sputc<span class='parenthesis'>(</span>c<span class='parenthesis'>)</span></span>.<div style='height:0.6em;display:block'></div>Signals success by returning <span class='texttt'>c</span>.</li><li id='virtuals-5.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#virtuals-5.2'>(5.2)</a></div>If
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eq_&shy;int_&shy;type<span class='parenthesis'>(</span>c, traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
returns
<span class='texttt'><span class='literal'>true</span></span>,
there is no character to append.<div style='height:0.6em;display:block'></div>Signals success by returning a value other than
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>.</li></ul></div></div></div><div class='para' id='virtuals-6'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8070'>#</a></div><div id='virtuals-6.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The function can alter the number of write positions available as a
result of any call<a class='hidden_link' href='#virtuals-6.sentence-1'>.</a></div></div></div><div class='para' id='virtuals-7'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8075'>#</a></div><div id='virtuals-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
As specified above, or
<span class='texttt'>traits<span class='operator'>&#x200b;::&#x200b;</span>eof<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
to indicate failure<a class='hidden_link' href='#virtuals-7.sentence-1'>.</a></div></div></div><div class='para' id='virtuals-8'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8081'>#</a></div><div id='virtuals-8.sentence-1' class='sentence'>The function can make a write position available only if
<span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>out</span> is set in <span class='texttt'>mode</span><a class='hidden_link' href='#virtuals-8.sentence-1'>.</a></div> <div id='virtuals-8.sentence-2' class='sentence'>To make a write position available,
the function reallocates (or initially allocates) an array object
with a sufficient number of elements to hold
the current array object (if any), plus
at least
one additional write position<a class='hidden_link' href='#virtuals-8.sentence-2'>.</a></div> <div id='virtuals-8.sentence-3' class='sentence'>If <span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>in</span> is set in <span class='texttt'>mode</span>,
the function alters the read end pointer
<span class='texttt'>egptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
to point just past the new write position<a class='hidden_link' href='#virtuals-8.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:seekoff,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,seekoff'></a></span><div class='itemdecl' id='virtuals-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#virtuals-itemdecl:4'>🔗</a></div><code class='itemdeclcode'>pos_type seekoff<span class='parenthesis'>(</span>off_type off, ios_base<span class='operator'>::</span>seekdir way,
                 ios_base<span class='operator'>::</span>openmode which
                   <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div><div class='itemdescr'></div><div class='para' id='virtuals-9'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8104'>#</a></div><div id='virtuals-9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Alters the stream position within one of the
controlled sequences, if possible, as indicated in Table <a href='#tab:stringbuf.seekoff.pos'>124</a><a class='hidden_link' href='#virtuals-9.sentence-1'>.</a></div><div class='numberedTable' id='tab:stringbuf.seekoff.pos'>Table <a href='#tab:stringbuf.seekoff.pos'>124</a>: <span class='texttt'>seekoff</span> positioning &emsp;&ensp;[tab:stringbuf.seekoff.pos]<br><table ><tr class='rowsep'><td class='center'><div id='virtuals-9.sentence-2' class='sentence'><b>Conditions</b></div></td><td class='center'><div id='virtuals-9.sentence-3' class='sentence'><b>Result</b></div></td></tr><tr class='capsep'><td class='justify'><div id='virtuals-9.sentence-4' class='sentence'><span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>in</span> is set in <span class='texttt'>which</span></div></td><td class='left'><div id='virtuals-9.sentence-5' class='sentence'>positions the input sequence</div></td></tr><tr class='rowsep'><td class='justify'><div id='virtuals-9.sentence-6' class='sentence'><span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>out</span> is set in <span class='texttt'>which</span></div></td><td class='left'><div id='virtuals-9.sentence-7' class='sentence'>positions the output sequence</div></td></tr><tr class='rowsep'><td class='justify'><div id='virtuals-9.sentence-8' class='sentence'>both <span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>in</span> and <span class='texttt'>ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>out</span> are
set in <span class='texttt'>which</span> and either<br/>
<span class='texttt'>way <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>beg</span> or<br/>
<span class='texttt'>way <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>end</span></div></td><td class='left'><div id='virtuals-9.sentence-9' class='sentence'>positions both the input and the output sequences</div></td></tr><tr class='rowsep'><td class='justify'><div id='virtuals-9.sentence-10' class='sentence'>Otherwise</div></td><td class='left'><div id='virtuals-9.sentence-11' class='sentence'>the positioning operation fails<a class='hidden_link' href='#virtuals-9.sentence-11'>.</a></div></td></tr></table></div></div></div><div class='para' id='virtuals-10'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8124'>#</a></div><div id='virtuals-10.sentence-1' class='sentence'>For a sequence to be positioned,
the function determines <span class='texttt'>newoff</span> as indicated in
Table <a href='#tab:stringbuf.seekoff.newoff'>125</a><a class='hidden_link' href='#virtuals-10.sentence-1'>.</a></div> <div id='virtuals-10.sentence-2' class='sentence'>If the sequence's next pointer
(either
<span class='texttt'>gptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
or
<span class='texttt'>pptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>)
is a null pointer and <span class='texttt'>newoff</span> is nonzero,
the positioning operation fails<a class='hidden_link' href='#virtuals-10.sentence-2'>.</a></div><div class='numberedTable' id='tab:stringbuf.seekoff.newoff'>Table <a href='#tab:stringbuf.seekoff.newoff'>125</a>: <span class='texttt'>newoff</span> values &emsp;&ensp;[tab:stringbuf.seekoff.newoff]<br><table ><tr class='rowsep'><td class='center'><div id='virtuals-10.sentence-3' class='sentence'><b>Condition</b></div></td><td class='center'><div id='virtuals-10.sentence-4' class='sentence'><b><span class='texttt'>newoff</span> Value</b></div></td></tr><tr class='capsep'><td class='left'><div id='virtuals-10.sentence-5' class='sentence'><span class='texttt'>way <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>beg</span></div></td><td class='justify'><div id='virtuals-10.sentence-6' class='sentence'>0</div></td></tr><tr class='rowsep'><td class='left'><div id='virtuals-10.sentence-7' class='sentence'><span class='texttt'>way <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>cur</span></div></td><td class='justify'><div id='virtuals-10.sentence-8' class='sentence'>the next pointer minus the beginning pointer (<span class='texttt'>xnext <span class='operator'>-</span> xbeg</span>)<a class='hidden_link' href='#virtuals-10.sentence-8'>.</a></div></td></tr><tr class='rowsep'><td class='left'><div id='virtuals-10.sentence-9' class='sentence'><span class='texttt'>way <span class='operator'>=</span><span class='operator'>=</span> ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>end</span></div></td><td class='justify'><div id='virtuals-10.sentence-10' class='sentence'>the high mark pointer minus the beginning pointer (<span class='texttt'>high_&shy;mark <span class='operator'>-</span> xbeg</span>)<a class='hidden_link' href='#virtuals-10.sentence-10'>.</a></div></td></tr></table></div></div></div><div class='para' id='virtuals-11'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8146'>#</a></div><div id='virtuals-11.sentence-1' class='sentence'>If
<span class='texttt'><span class='parenthesis'>(</span>newoff <span class='operator'>+</span> off<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> <span class='literal'>0</span></span>,
or if <span class='texttt'>newoff <span class='operator'>+</span> off</span> refers to an uninitialized
character (<a href='#members'>[stringbuf.members]</a>),
the positioning operation fails<a class='hidden_link' href='#virtuals-11.sentence-1'>.</a></div> <div id='virtuals-11.sentence-2' class='sentence'>Otherwise, the function assigns
<span class='texttt'>xbeg <span class='operator'>+</span> newoff <span class='operator'>+</span> off</span>
to the next pointer <span class='texttt'>xnext</span><a class='hidden_link' href='#virtuals-11.sentence-2'>.</a></div></div></div><div class='para' id='virtuals-12'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8156'>#</a></div><div id='virtuals-12.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>pos_&shy;type<span class='parenthesis'>(</span>newoff<span class='parenthesis'>)</span></span>,
constructed from the resultant offset <span class='texttt'>newoff</span>
(of type
<span class='texttt'>off_&shy;type</span>),
that stores the resultant stream position, if possible<a class='hidden_link' href='#virtuals-12.sentence-1'>.</a></div> <div id='virtuals-12.sentence-2' class='sentence'>If the positioning operation fails, or
if the constructed object cannot represent the resultant stream position,
the return value is
<span class='texttt'>pos_&shy;type<span class='parenthesis'>(</span>off_&shy;type<span class='parenthesis'>(</span><span class='operator'>-</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#virtuals-12.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:seekpos,basic_stringbuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_stringbuf,seekpos'></a></span><div class='itemdecl' id='virtuals-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#virtuals-itemdecl:5'>🔗</a></div><code class='itemdeclcode'>pos_type seekpos<span class='parenthesis'>(</span>pos_type sp,
                 ios_base<span class='operator'>::</span>openmode which
                   <span class='operator'>=</span> ios_base<span class='operator'>::</span>in <span class='operator'>|</span> ios_base<span class='operator'>::</span>out<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div><div class='itemdescr'></div><div class='para' id='virtuals-13'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8177'>#</a></div><div id='virtuals-13.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to <span class='texttt'>seekoff<span class='parenthesis'>(</span>off_&shy;type<span class='parenthesis'>(</span>sp<span class='parenthesis'>)</span>, ios_&shy;base<span class='operator'>&#x200b;::&#x200b;</span>beg, which<span class='parenthesis'>)</span></span><a class='hidden_link' href='#virtuals-13.sentence-1'>.</a></div></div></div><div class='para' id='virtuals-14'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8181'>#</a></div><div id='virtuals-14.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>sp</span>
to indicate success, or
<span class='texttt'>pos_&shy;type<span class='parenthesis'>(</span>off_&shy;type<span class='parenthesis'>(</span><span class='operator'>-</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
to indicate failure<a class='hidden_link' href='#virtuals-14.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:setbuf,basic_streambuf'></a></span><span class='indexparent'><a class='index' id='lib:basic_streambuf,setbuf'></a></span><div class='itemdecl' id='virtuals-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#virtuals-itemdecl:6'>🔗</a></div><code class='itemdeclcode'>basic_streambuf<span class='anglebracket'>&lt;</span>charT, traits<span class='anglebracket'>&gt;</span><span class='operator'>*</span> setbuf<span class='parenthesis'>(</span>charT<span class='operator'>*</span> s, streamsize n<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='virtuals-15'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8195'>#</a></div><div id='virtuals-15.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
<span class='indexparent'><a class='index' id=':effect_of_calling_basic_streambuf::setbuf_with_nonzero_arguments'></a></span>implementation-defined,
except that
<span class='texttt'>setbuf<span class='parenthesis'>(</span><span class='literal'>0</span>, <span class='literal'>0</span><span class='parenthesis'>)</span></span>
has no effect<a class='hidden_link' href='#virtuals-15.sentence-1'>.</a></div></div></div><div class='para' id='virtuals-16'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L8202'>#</a></div><div id='virtuals-16.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'><span class='keyword'>this</span></span><a class='hidden_link' href='#virtuals-16.sentence-1'>.</a></div></div></div></div></div></body></html>