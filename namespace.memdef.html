<!DOCTYPE html><html lang='en'><head><title>[namespace.memdef]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>9.8</a> Namespaces <a class='abbr_ref' href='basic.namespace#namespace.memdef'>[basic.namespace]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>9.8.2</a> Namespace definition <a class='abbr_ref' href='namespace.def#namespace.memdef'>[namespace.def]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>9.8.2.3</a> Namespace member definitions <a class='abbr_ref'>[namespace.memdef]</a></h4><div class='texpara'><a class='index' id=':namespace,member_definition'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/38b6811b6cf552b1af1ed5e6f2b2ae11c0e30668/source/declarations.tex#L7277'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>A declaration in a namespace <span class='texttt'>N</span> (excluding declarations in nested scopes)
whose <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> is an <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><i >unqualified-id</i></span></span></a> (<a href='dcl.meaning' title='9.3.4&emsp;Meaning of declarators'>[dcl.<span class='shy'></span>meaning]</a>),
whose <a href='class.pre#nt:class-head-name' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-head-name'><span class='textsf'><i >class-head-name</i></span></span></a> (<a href='class.pre' title='11.1&emsp;Preamble'>[class.<span class='shy'></span>pre]</a>) or
<a href='dcl.enum#nt:enum-head-name' title='9.7.1&emsp;Enumeration declarations&emsp;[dcl.enum]'><span id='ntref:enum-head-name'><span class='textsf'><i >enum-head-name</i></span></span></a> (<a href='dcl.enum' title='9.7.1&emsp;Enumeration declarations'>[dcl.<span class='shy'></span>enum]</a>) is an <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a>, or
whose <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> is of the form <a href='class.pre#nt:class-key' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-key'><span class='textsf'><i >class-key</i></span></span></a>
<a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_'><span class='textsf'><i >identifier</i></span></span></a> (<a href='dcl.type.elab' title='9.2.9.4&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>), or
that is an <a href='dcl.enum#nt:opaque-enum-declaration' title='9.7.1&emsp;Enumeration declarations&emsp;[dcl.enum]'><span id='ntref:opaque-enum-declaration'><span class='textsf'><i >opaque-enum-declaration</i></span></span></a>,
declares (or redeclares) its <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id_'><span class='textsf'><i >unqualified-id</i></span></span></a> or
<a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier__'><span class='textsf'><i >identifier</i></span></span></a> as a member of <span class='texttt'>N</span><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='1.sentence-2' class='sentence'>An explicit instantiation (<a href='temp.explicit' title='13.9.3&emsp;Explicit instantiation'>[temp.<span class='shy'></span>explicit]</a>) or
explicit specialization (<a href='temp.expl.spec' title='13.9.4&emsp;Explicit specialization'>[temp.<span class='shy'></span>expl.<span class='shy'></span>spec]</a>) of a template
does not introduce a name and thus can be declared using an
<a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id__'><span class='textsf'><i >unqualified-id</i></span></span></a> in a member of the enclosing namespace set,
if the primary template is declared in an inline namespace<a class='hidden_link' href='#1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>namespace</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>        <span class='comment'>// OK: introduces <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f()</span></span>

  <span class='keyword'>namespace</span> M <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                   <span class='comment'>// OK: introduces <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;M&#x200b;::&#x200b;g()</span></span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>using</span> M<span class='operator'>::</span>g;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                     <span class='comment'>// error: conflicts with <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;M&#x200b;::&#x200b;g()</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/38b6811b6cf552b1af1ed5e6f2b2ae11c0e30668/source/declarations.tex#L7308'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>Members of a named namespace can also be
defined outside that namespace by explicit
qualification (<a href='namespace.qual' title='6.5.4.3&emsp;Namespace members'>[namespace.<span class='shy'></span>qual]</a>) of the name being defined, provided
that the entity being defined was already declared in the namespace and
the definition appears after the point of declaration in a namespace
that encloses the declaration's namespace<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>namespace</span> Q <span class='curlybracket'>{</span>
  <span class='keyword'>namespace</span> V <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>void</span> V<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>     <span class='comment'>// OK</span>
  <span class='keyword'>void</span> V<span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>     <span class='comment'>// error: <span class='tcode_in_codeblock'>g()</span> is not yet a member of <span class='tcode_in_codeblock'>V</span></span>
  <span class='keyword'>namespace</span> V <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>

<span class='keyword'>namespace</span> R <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> Q<span class='operator'>::</span>V<span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>  <span class='comment'>// error: <span class='tcode_in_codeblock'>R</span> doesn't enclose <span class='tcode_in_codeblock'>Q</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/38b6811b6cf552b1af1ed5e6f2b2ae11c0e30668/source/declarations.tex#L7334'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>If a friend declaration in a non-local class first declares a
class, function, class template or function template<a class='footnotenum' href='#footnote-99' id='footnoteref-99' title='this implies that the name of the class or function is unqualified.'>99</a>
the friend is a member of the innermost enclosing
namespace<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>The friend declaration does not by itself make the name
visible to <a href='basic.lookup.unqual' title='6.5.2&emsp;Unqualified name lookup&emsp;[basic.lookup.unqual]'>unqualified lookup</a> or <a href='basic.lookup.qual' title='6.5.4&emsp;Qualified name lookup&emsp;[basic.lookup.qual]'>qualified
lookup</a><a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='3.sentence-3' class='sentence'>The name of the friend will be
visible in its namespace if a matching declaration is provided at namespace
scope (either before or after the class definition granting friendship)<a class='hidden_link' href='#3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='3.sentence-4' class='sentence'>
If a friend
function or function template is called, its name may be found by the
name lookup that considers functions from namespaces and classes
associated with the types of the function
arguments (<a href='basic.lookup.argdep' title='6.5.3&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a>)<a class='hidden_link' href='#3.sentence-4'>.</a></div> <div id='3.sentence-5' class='sentence'>If the
name in a friend declaration is neither qualified nor a
<a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><i >template-id</i></span></span></a> and the declaration is a function or an
<a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier_'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a>, the lookup to determine whether
the entity has been previously declared shall not consider any scopes
outside the innermost enclosing namespace<a class='hidden_link' href='#3.sentence-5'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='3.sentence-6' class='sentence'>The other forms of
friend declarations cannot declare a new member of the innermost
enclosing namespace and thus follow the usual lookup rules<a class='hidden_link' href='#3.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>: <span class='codeblock'><span class='comment'>// Assume <span class='tcode_in_codeblock'>f</span> and <span class='tcode_in_codeblock'>g</span> have not yet been declared.</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>namespace</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
    <span class='keyword'>friend</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f(X)</span> is a friend</span>
    <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> is a friend</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> is a friend</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;h</span> not considered</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> f2<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;    <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;f2&lt;&gt;(int)</span> is a friend</span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;

  <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> and <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> are not visible here</span>
  X x;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>            <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span></span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>       <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span></span>
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>     <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span></span>
  <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> and <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> are visible here and known to be friends</span>
<span class='curlybracket'>}</span>

<span class='keyword'>using</span> A<span class='operator'>::</span>x;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='operator'>::</span>f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;
  A<span class='operator'>::</span>X<span class='operator'>::</span>f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                   <span class='comment'>// error: <span class='tcode_in_codeblock'>f</span> is not a member of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span></span>
  A<span class='operator'>::</span>X<span class='operator'>::</span>Y<span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                 <span class='comment'>// error: <span class='tcode_in_codeblock'>g</span> is not a member of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X&#x200b;::&#x200b;Y</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnote' id='footnote-99'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-99'>99)</a></div><div class='texpara'><div id='footnote-99.sentence-1' class='sentence'>this implies that the name of the class or function is unqualified<a class='hidden_link' href='#footnote-99.sentence-1'>.</a></div>&nbsp;<a href='#footnoteref-99'>⮥</a></div></div></div></body></html>