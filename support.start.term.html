<!DOCTYPE html><html lang='en'><head><title>[support.start.term]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Language support library <a class='abbr_ref' href='./#support'>[support]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>17.5</a> Startup and termination <a class='abbr_ref'>[support.start.term]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1790'>#</a></div><div id='1.note-1' class='note'>[&nbsp;<a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-1' class='sentence'>The header <span class='indexparent'><a class='index' id=':<cstdlib>_'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>cstdlib<span class='anglebracket'>&gt;</span></span> (<a href='cstdlib.syn'>[cstdlib.syn]</a>)
declares the functions described in this subclause<a class='hidden_link' href='#1.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div>  <span class='indexparent'><a class='index' id='lib:_Exit'></a></span></div><div class='itemdecl' id='itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span> _Exit<span class='parenthesis'>(</span><span class='keyword'>int</span> status<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1802'>#</a></div><div id='2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
This function has the semantics specified in the C standard library<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1806'>#</a></div><div id='3.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The program is terminated without executing destructors for objects of automatic,
thread, or static storage duration and without calling functions passed to
<span class='texttt'>atexit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='basic.start.term'>[basic.start.term]</a>)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':signal-safe,_Exit'></a></span>The function <span class='texttt'>_&shy;Exit</span> is <a href='support.signal#def:evaluation,signal-safe'>signal-safe</a><a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:abort'></a></span><div class='itemdecl' id='itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span> abort<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1821'>#</a></div><div id='4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
This function has the semantics specified in the C standard library<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1825'>#</a></div><div id='5.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The program is terminated without executing destructors for objects of
automatic, thread, or static storage
duration and without calling functions passed to
<span class='texttt'>atexit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='basic.start.term'>[basic.start.term]</a>)<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':signal-safe,abort'></a></span>The function <span class='texttt'>abort</span> is <a href='support.signal#def:evaluation,signal-safe'>signal-safe</a><a class='hidden_link' href='#5.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atexit'></a></span><div class='itemdecl' id='itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>int</span> atexit<span class='parenthesis'>(</span><span class='textit'>c-atexit-handler</span><span class='operator'>*</span> f<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>int</span> atexit<span class='parenthesis'>(</span><span class='textit'>atexit-handler</span><span class='operator'>*</span> f<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1842'>#</a></div><div id='6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
The
<span class='texttt'>atexit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
functions register the function pointed to by <span class='texttt'>f</span>
to be called without arguments at normal program termination<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>It is unspecified whether a call to <span class='texttt'>atexit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> that does not
<a href='intro.multithread#def:happens_before'>happen before</a>
a call to <span class='texttt'>exit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> will succeed<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.note-1' class='note'>[&nbsp;<a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-3' class='sentence'>The <span class='texttt'>atexit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> functions do not introduce a data
race (<a href='res.on.data.races'>[res.on.data.races]</a>)<a class='hidden_link' href='#6.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1856'>#</a></div><div id='7.sentence-1' class='sentence'><span class='textit'>Implementation limits:</span> 
The implementation shall support the registration of at least 32 functions<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1860'>#</a></div><div id='8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The
<span class='texttt'>atexit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
function returns zero if the registration succeeds,
nonzero if it fails<a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div><div id='lib:exit'>
<div class='itemdecl' id='itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span> exit<span class='parenthesis'>(</span><span class='keyword'>int</span> status<span class='parenthesis'>)</span>;
</code></div>
</div><div class='itemdescr'></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1875'>#</a></div><div id='9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
<ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.1'>(9.1)</a></div>First, objects with thread storage duration and associated with the current thread
are destroyed. Next, objects with static storage duration are destroyed
and functions registered by calling
<span class='texttt'>atexit</span>
are called.<a class='footnotenum' href='#footnote-211' id='footnoteref-211'>211</a> 
See <a href='basic.start.term'>[basic.start.term]</a> for the order of destructions and calls. (Objects with automatic storage duration are not destroyed as a result of calling
<span class='texttt'>exit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>.)<a class='footnotenum' href='#footnote-212' id='footnoteref-212'>212</a><div style='height:0.6em;display:block'></div>If control leaves a registered function called by <span class='texttt'>exit</span> because the function does
not provide a handler for a thrown exception, the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span> shall be called (<a href='except.terminate'>[except.terminate]</a>). <span class='indexparent'><a class='index' id='lib:terminate'></a></span></li><li id='9.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.2'>(9.2)</a></div>Next, all open C streams (as mediated by the function
signatures declared in <span class='indexparent'><a class='index' id=':<cstdio>'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>cstdio<span class='anglebracket'>&gt;</span></span> (<a href='cstdio.syn'>[cstdio.syn]</a>))
with unwritten buffered data are flushed, all open C
streams are closed, and all files created by calling
<span class='texttt'>tmpfile<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> are removed.</li><li id='9.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.3'>(9.3)</a></div>Finally, control is returned to the host environment. If <span class='texttt'>status</span> is zero or
<span class='texttt'>EXIT_&shy;SUCCESS</span>,
an <span class='indexparent'><a class='index' id=':exit_status'></a></span>implementation-defined
form of the status
<a class='hidden_link' href='#def:successful_termination' id='def:successful_termination'><i>successful termination</i></a>
is returned. If <span class='texttt'>status</span> is
<span class='texttt'>EXIT_&shy;FAILURE</span>,
an <span class='indexparent'><a class='index' id=':exit_status_'></a></span>implementation-defined form of the status
<a class='hidden_link' href='#def:unsuccessful_termination' id='def:unsuccessful_termination'><i>unsuccessful termination</i></a>
is returned. Otherwise the status returned is <span class='indexparent'><a class='index' id=':exit_status__'></a></span>implementation-defined.<a class='footnotenum' href='#footnote-213' id='footnoteref-213'>213</a></li></ul></div></div></div><span class='indexparent'><a class='index' id='lib:at_quick_exit'></a></span><div class='itemdecl' id='itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>int</span> at_quick_exit<span class='parenthesis'>(</span><span class='textit'>c-atexit-handler</span><span class='operator'>*</span> f<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>int</span> at_quick_exit<span class='parenthesis'>(</span><span class='textit'>atexit-handler</span><span class='operator'>*</span> f<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1932'>#</a></div><div id='10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
The <span class='texttt'>at_&shy;quick_&shy;exit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> functions register the function pointed to by <span class='texttt'>f</span>
to be called without arguments when <span class='texttt'>quick_&shy;exit</span> is called<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>It is unspecified whether a call to <span class='texttt'>at_&shy;quick_&shy;exit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> that does not
<a href='intro.multithread#def:happens_before'>happen before</a>
all calls to <span class='texttt'>quick_&shy;exit</span> will succeed<a class='hidden_link' href='#10.sentence-2'>.</a></div> <div id='10.note-1' class='note'>[&nbsp;<a class='note_link' href='#10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-3' class='sentence'>The
<span class='texttt'>at_&shy;quick_&shy;exit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> functions do not introduce a
data race (<a href='res.on.data.races'>[res.on.data.races]</a>)<a class='hidden_link' href='#10.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='10.note-2' class='note'>[&nbsp;<a class='note_link' href='#10.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-4' class='sentence'>The order of registration may be indeterminate if <span class='texttt'>at_&shy;quick_&shy;exit</span> was called from more
than one thread<a class='hidden_link' href='#10.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='10.note-3' class='note'>[&nbsp;<a class='note_link' href='#10.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-5' class='sentence'>The
<span class='texttt'>at_&shy;quick_&shy;exit</span> registrations are distinct from the <span class='texttt'>atexit</span> registrations,
and applications may need to call both registration functions with the same argument<a class='hidden_link' href='#10.sentence-5'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1954'>#</a></div><div id='11.sentence-1' class='sentence'><span class='textit'>Implementation limits:</span> 
The implementation shall support the registration of at least 32 functions<a class='hidden_link' href='#11.sentence-1'>.</a></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1958'>#</a></div><div id='12.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Zero if the registration succeeds, nonzero if it fails<a class='hidden_link' href='#12.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:quick_exit'></a></span><div class='itemdecl' id='itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:6'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span> quick_exit<span class='parenthesis'>(</span><span class='keyword'>int</span> status<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1969'>#</a></div><div id='13.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Functions registered by calls to <span class='texttt'>at_&shy;quick_&shy;exit</span> are called in the
reverse order of their registration, except that a function shall be called after any
previously registered functions that had already been called at the time it was
registered<a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='13.sentence-2' class='sentence'>Objects shall not be destroyed as a result of calling <span class='texttt'>quick_&shy;exit</span><a class='hidden_link' href='#13.sentence-2'>.</a></div> <div id='13.sentence-3' class='sentence'>If control leaves a registered function called by <span class='texttt'>quick_&shy;exit</span> because the
function does not provide a handler for a thrown exception, the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span> shall
be called<a class='hidden_link' href='#13.sentence-3'>.</a></div> <div id='13.sentence-5' class='sentence'><span class='indexparent'><a class='index' id='lib:terminate_'></a></span>
<div id='13.note-1' class='note'>[&nbsp;<a class='note_link' href='#13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> A function registered via <span class='texttt'>at_&shy;quick_&shy;exit</span>
is invoked by the thread that calls <span class='texttt'>quick_&shy;exit</span>,
which can be a different thread
than the one that registered it, so registered functions should not rely on the identity
of objects with thread storage duration. â€”&nbsp;<i>end note</i></div>&nbsp;]</div> 
After calling registered functions, <span class='texttt'>quick_&shy;exit</span> shall call <span class='texttt'>_&shy;Exit<span class='parenthesis'>(</span>status<span class='parenthesis'>)</span></span><a class='hidden_link' href='#13.sentence-5'>.</a></div></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/support.tex#L1987'>#</a></div><div id='14.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
<span class='indexparent'><a class='index' id=':signal-safe,quick_exit'></a></span>The function <span class='texttt'>quick_&shy;exit</span> is <a href='support.signal#def:evaluation,signal-safe'>signal-safe</a>
when the functions registered with <span class='texttt'>at_&shy;quick_&shy;exit</span> are<a class='hidden_link' href='#14.sentence-1'>.</a></div></div></div><div id='sentence-1' class='sentence'><span class='textsc'>See also:</span>  ISO C 7.22.4</div><div class='footnote' id='footnote-211'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-211'>211)</a></div><div id='footnote-211.sentence-1' class='sentence'>A function is called for every time it is registered<a class='hidden_link' href='#footnote-211.sentence-1'>.</a></div> <a href='#footnoteref-211'>â®¥</a></div><div class='footnote' id='footnote-212'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-212'>212)</a></div><div id='footnote-212.sentence-1' class='sentence'>Objects with automatic storage duration are all destroyed in a program whose
<span class='texttt'>main</span> function (<a href='basic.start.main'>[basic.start.main]</a>)
contains no objects with automatic storage duration and executes the call to
<span class='texttt'>exit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#footnote-212.sentence-1'>.</a></div> <div id='footnote-212.sentence-2' class='sentence'>Control can be transferred directly to such a
<span class='texttt'>main</span> function
by throwing an exception that is caught in
<span class='texttt'>main</span><a class='hidden_link' href='#footnote-212.sentence-2'>.</a></div> <a href='#footnoteref-212'>â®¥</a></div><div class='footnote' id='footnote-213'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-213'>213)</a></div><div id='footnote-213.sentence-1' class='sentence'>The macros <span class='texttt'>EXIT_&shy;FAILURE</span> and <span class='texttt'>EXIT_&shy;SUCCESS</span>
are defined in <span class='indexparent'><a class='index' id=':<cstdlib>'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>cstdlib<span class='anglebracket'>&gt;</span></span> (<a href='cstdlib.syn'>[cstdlib.syn]</a>)<a class='hidden_link' href='#footnote-213.sentence-1'>.</a></div> <a href='#footnoteref-213'>â®¥</a></div></div></body></html>