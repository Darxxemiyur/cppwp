<!DOCTYPE html><html lang='en'><head><title>[dcl.align]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>9.12</a> Attributes <a class='abbr_ref' href='dcl.attr#dcl.align'>[dcl.attr]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>9.12.2</a> Alignment specifier <a class='abbr_ref'>[dcl.align]</a></h3><span class='indexparent'><a class='index' id=':attribute,alignment'></a></span>
<span class='indexparent'><a class='index' id=':alignas'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/declarations.tex#L8570'>#</a></div><div id='1.sentence-1' class='sentence'>An <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a>
may be applied to a variable
or to a class data member, but it shall not be applied to a bit-field, a function
parameter, or an <a href='except.pre#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration'><span class='textsf'><span class='textit'>exception-declaration</span></span></span></a> (<a href='except.handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>An <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier_'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a> may also be applied to the declaration
of a class (in an
<a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.8.3&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><span class='textit'>elaborated-type-specifier</span></span></span></a> (<a href='dcl.type.elab' title='9.2.8.3&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>) or
<a href='class.pre#nt:class-head' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-head'><span class='textsf'><span class='textit'>class-head</span></span></span></a> (<a href='class' title='11&emsp;Classes'>[class]</a>), respectively)<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>An <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier__'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a> with an ellipsis is a pack expansion (<a href='temp.variadic' title='13.7.3&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/declarations.tex#L8581'>#</a></div><div id='2.sentence-1' class='sentence'>When the <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier___'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a> is of the form
<span class='texttt'><span class='keyword'>alignas</span><span class='parenthesis'>(</span></span> <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression'><span class='textsf'><span class='textit'>constant-expression</span></span></span></a> <span class='texttt'><span class='parenthesis'>)</span></span>:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div>the <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression_'><span class='textsf'><span class='textit'>constant-expression</span></span></span></a> shall be an integral constant expression</li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div>if the constant expression does not evaluate to an alignment
value (<a href='basic.align' title='6.7.6&emsp;Alignment'>[basic.<span class='shy'></span>align]</a>), or evaluates to an extended alignment and
the implementation does not support that alignment in the context of the
declaration, the program is ill-formed<a class='hidden_link' href='#2.sentence-1'>.</a></li></ul></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/declarations.tex#L8593'>#</a></div><div id='3.sentence-1' class='sentence'>An <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier____'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a> of the form
<span class='texttt'><span class='keyword'>alignas</span><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.1&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='texttt'><span class='parenthesis'>)</span></span> has the same
effect as <span class='texttt'><span class='keyword'>alignas</span><span class='parenthesis'>(</span>&#x200b;<a href='expr.alignof' title='7.6.2.5&emsp;Alignof&emsp;[expr.alignof]'>alignof</a><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.1&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='texttt'><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#3.sentence-1'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/declarations.tex#L8598'>#</a></div><div id='4.sentence-1' class='sentence'>The alignment requirement of an entity is the strictest nonzero alignment
specified by its <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier_____'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a><span class='textit'>s</span>, if any;
otherwise, the <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier______'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a><span class='textit'>s</span> have no effect<a class='hidden_link' href='#4.sentence-1'>.</a></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/declarations.tex#L8603'>#</a></div><div id='5.sentence-1' class='sentence'>The combined effect of all <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier_______'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a><span class='textit'>s</span> in a declaration shall not
specify an alignment that is less strict than the alignment that would
be required for the entity being declared if all <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier________'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a><span class='textit'>s</span>
appertaining to that entity
were omitted<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.example-1' class='example'>[<a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> <span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='literal'>8</span><span class='parenthesis'>)</span> S <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> <span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> U <span class='curlybracket'>{</span>
  S s;
<span class='curlybracket'>}</span>;  <span class='comment'>// error: <span class='tcode_in_codeblock'>U</span> specifies an alignment that is less strict than if the <span class='tcode_in_codeblock'>alignas(1)</span> were omitted.</span>
</pre> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/declarations.tex#L8618'>#</a></div><div id='6.sentence-1' class='sentence'>If the defining declaration of an entity has an
<a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier_________'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a>, any non-defining
declaration of that entity shall either specify equivalent alignment or have no
<a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier__________'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a><a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>Conversely, if any declaration of an entity has an
<a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier___________'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a>,
every defining
declaration of that entity shall specify an equivalent alignment<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>No diagnostic is required if declarations of an entity have
different <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier____________'><span class='textsf'><span class='textit'>alignment-specifier</span></span></span></a><span class='textit'>s</span>
in different translation units<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.example-1' class='example'>[<a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// Translation unit #1:</span>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>int</span> x; <span class='curlybracket'>}</span> s, <span class='operator'>*</span>p <span class='operator'>=</span> <span class='operator'>&amp;</span>s;

<span class='comment'>// Translation unit #2:</span>
<span class='keyword'>struct</span> <span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='literal'>16</span><span class='parenthesis'>)</span> S;           <span class='comment'>// ill-formed, no diagnostic required: definition of <span class='tcode_in_codeblock'>S</span> lacks alignment</span>
<span class='keyword'>extern</span> S<span class='operator'>*</span> p;
</pre> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/declarations.tex#L8641'>#</a></div><div id='7.example-1' class='example'>[<a class='example_link' href='#7.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <div id='7.sentence-1' class='sentence'>An aligned buffer with an alignment requirement
of <span class='texttt'>A</span> and holding <span class='texttt'>N</span> elements of type <span class='texttt'>T</span>
can be declared as:
<pre class='codeblock'>
<span class='keyword'>alignas</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>alignas</span><span class='parenthesis'>(</span>A<span class='parenthesis'>)</span> T buffer<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>;
</pre></div> <div id='7.sentence-2' class='sentence'>
Specifying <span class='texttt'><span class='keyword'>alignas</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> ensures
that the final requested alignment will not be weaker than <span class='texttt'><span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span>,
and therefore the program will not be ill-formed<a class='hidden_link' href='#7.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/declarations.tex#L8654'>#</a></div><div id='8.example-1' class='example'>[<a class='example_link' href='#8.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                           <span class='comment'>// error: alignment applied to function</span>
<span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> c<span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;    <span class='comment'>// array of characters, suitably aligned for a <span class='tcode_in_codeblock'>double</span></span>
<span class='keyword'>extern</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> c<span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;             <span class='comment'>// no <span class='tcode_in_codeblock'>alignas</span> necessary</span>
<span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='keyword'>float</span><span class='parenthesis'>)</span>
  <span class='keyword'>extern</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> c<span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;           <span class='comment'>// error: different alignment in declaration</span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div></body></html>