<!DOCTYPE html><html lang='en'><head><title>[temp.explicit]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>13.9</a> Template instantiation and specialization <a class='abbr_ref' href='temp.spec#temp.explicit'>[temp.spec]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>13.9.3</a> Explicit instantiation <a class='abbr_ref'>[temp.explicit]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6517'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':instantiation,explicit'></a>A class, function, variable, or member template specialization can be explicitly
instantiated from its template<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A member function, member class or static data member of a class template can
be explicitly instantiated from the member definition associated with its class
template<a class='hidden_link' href='#1.sentence-2'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6526'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The syntax for explicit instantiation is:
<div class='bnf' id='nt:explicit-instantiation'>
<a class='hidden_link' href='#nt:explicit-instantiation' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'><span id='nt:explicit-instantiation'><span id=':explicit-instantiation'>explicit-instantiation<span class='textnormal'>:</span></span></span></a><br/><span id=':extern'><span class='texttt'><span class='keyword'>extern</span></span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span id=':template'><span class='texttt'><span class='keyword'>template</span></span></span> <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration'><span class='textsf'><span class='textit'>declaration</span></span></span></a>
</div></div></div><div class='texpara'><div id='2.sentence-2' class='sentence'>There are two forms of explicit instantiation: an explicit instantiation
definition and an explicit instantiation declaration<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>An explicit instantiation
declaration begins with the <span class='texttt'><span class='keyword'>extern</span></span> keyword<a class='hidden_link' href='#2.sentence-3'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6537'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>An explicit instantiation shall not use
a <a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier'><span class='textsf'><span class='textit'>storage-class-specifier</span></span></span></a> (<a href='dcl.stc' title='9.2.2&emsp;Storage class specifiers'>[dcl.<span class='shy'></span>stc]</a>)
other than <span id=':thread_local'><span class='texttt'><span class='keyword'>thread_&shy;local</span></span></span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>An explicit instantiation of a
function template,
member function of a class template, or
variable template
shall not
use the <span class='texttt'><span class='keyword'>inline</span></span>, <span class='texttt'><span class='keyword'>constexpr</span></span>, or <span class='texttt'><span class='keyword'>consteval</span></span> specifiers<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>No <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><span class='textit'>attribute-specifier-seq</span></span></span></a> (<a href='dcl.attr.grammar' title='9.12.1&emsp;Attribute syntax and semantics'>[dcl.<span class='shy'></span>attr.<span class='shy'></span>grammar]</a>)
shall appertain to an explicit instantiation<a class='hidden_link' href='#3.sentence-3'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6550'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>If the explicit instantiation is for a class or member class, the
<a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><span class='textit'>elaborated-type-specifier</span></span></span></a> in the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration_'><span class='textsf'><span class='textit'>declaration</span></span></span></a>
shall include a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><span class='textit'>simple-template-id</span></span></span></a>;
otherwise, the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration__'><span class='textsf'><span class='textit'>declaration</span></span></span></a>
shall be a <a href='dcl.pre#nt:simple-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:simple-declaration'><span class='textsf'><span class='textit'>simple-declaration</span></span></span></a> whose <a href='dcl.decl.general#nt:init-declarator-list' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:init-declarator-list'><span class='textsf'><span class='textit'>init-declarator-list</span></span></span></a>
comprises a single <a href='dcl.decl.general#nt:init-declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:init-declarator'><span class='textsf'><span class='textit'>init-declarator</span></span></span></a>
that does not have an <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer'><span class='textsf'><span class='textit'>initializer</span></span></span></a><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If the explicit instantiation is for
a function or member function,
the
<a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><span class='textit'>unqualified-id</span></span></span></a>
in the
<a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator'><span class='textsf'><span class='textit'>declarator</span></span></span></a>
shall be either a
<a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><span class='textit'>template-id</span></span></span></a>
or, where all template arguments can be deduced, a
<a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><span class='textit'>template-name</span></span></span></a> or <a href='over.oper.general#nt:operator-function-id' title='12.6.1&emsp;General&emsp;[over.oper.general]'><span id='ntref:operator-function-id'><span class='textsf'><span class='textit'>operator-function-id</span></span></span></a><a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<a class='note_link' href='#note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='4.sentence-3' class='sentence'>The declaration can declare a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>,
in which case the
<a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id_'><span class='textsf'><span class='textit'>unqualified-id</span></span></span></a>
of the
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>
must be a
<a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id_'><span class='textsf'><span class='textit'>template-id</span></span></span></a><a class='hidden_link' href='#4.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='4.sentence-4' class='sentence'>
If the explicit instantiation is for a member function, a member class or
a static data member of a class template specialization,
the name of the class template specialization in the
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>
for the member name shall be a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><span class='textit'>simple-template-id</span></span></span></a><a class='hidden_link' href='#4.sentence-4'>.</a></div> <div id='4.sentence-5' class='sentence'>If the explicit instantiation is for a variable template specialization,
the <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id__'><span class='textsf'><span class='textit'>unqualified-id</span></span></span></a> in the <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator_'><span class='textsf'><span class='textit'>declarator</span></span></span></a>
shall be a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id__'><span class='textsf'><span class='textit'>simple-template-id</span></span></span></a><a class='hidden_link' href='#4.sentence-5'>.</a></div> <div id='4.sentence-6' class='sentence'>An explicit instantiation shall appear in an enclosing namespace
of its template<a class='hidden_link' href='#4.sentence-6'>.</a></div> <div id='4.sentence-7' class='sentence'>If the name declared in the explicit
instantiation is an unqualified name, the explicit instantiation
shall appear in the namespace where its template is declared or, if that
namespace is inline (<a href='namespace.def' title='9.8.2&emsp;Namespace definition'>[namespace.<span class='shy'></span>def]</a>), any namespace from its enclosing
namespace set<a class='hidden_link' href='#4.sentence-7'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<a class='note_link' href='#note-2'><span class='textit'>Note&nbsp;2</span></a><span class='textit'>:</span> <div id='4.sentence-8' class='sentence'>Regarding qualified names in declarators, see <a href='dcl.meaning' title='9.3.4&emsp;Meaning of declarators'>[dcl.<span class='shy'></span>meaning]</a><a class='hidden_link' href='#4.sentence-8'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-1' class='example'><div class='texpara'>[<a class='example_link' href='#example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>class</span> Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='keyword'>void</span> Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;       <span class='comment'>// argument is deduced here</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> N<span class='operator'>::</span>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6611'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>A declaration of a function template, a variable template, a member function
or static data member
of a class template, or a member function template of a class or class
template shall precede an explicit instantiation of that entity<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>A definition
of a class template, a member class of a class template, or a member class
template of a class or class template shall precede an explicit instantiation
of that entity unless the explicit instantiation is preceded by an explicit
specialization of the entity with the same template arguments<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>If the
<a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration___'><span class='textsf'><span class='textit'>declaration</span></span></span></a>
of the explicit instantiation names an implicitly-declared <a href='special' title='11.4.4&emsp;Special member functions&emsp;[special]'>special member
function</a>, the program is ill-formed<a class='hidden_link' href='#5.sentence-3'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6625'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>The <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration____'><span class='textsf'><span class='textit'>declaration</span></span></span></a> in an <a href='#nt:explicit-instantiation' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'><span id='ntref:explicit-instantiation'><span class='textsf'><span class='textit'>explicit-instantiation</span></span></span></a> and
the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration_____'><span class='textsf'><span class='textit'>declaration</span></span></span></a> produced by the corresponding substitution
into the templated function, variable, or class
are two declarations of the same entity<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<a class='note_link' href='#note-3'><span class='textit'>Note&nbsp;3</span></a><span class='textit'>:</span> <div id='6.sentence-2' class='sentence'>These declarations are required to have matching types as specified in <a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>, except as specified in <a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a><a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<a class='example_link' href='#example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> T var <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>float</span> var<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='anglebracket'>&gt;</span>;      <span class='comment'>// OK, instantiated variable has type <span class='tcode_in_codeblock'>float</span></span>
<span class='keyword'>template</span> <span class='keyword'>int</span> var<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>16</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span>;    <span class='comment'>// OK, absence of major array bound is permitted</span>
<span class='keyword'>template</span> <span class='keyword'>int</span> <span class='operator'>*</span>var<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;         <span class='comment'>// error: instantiated variable has type <span class='tcode_in_codeblock'>int</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> av <span class='operator'>=</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='keyword'>int</span> av<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;           <span class='comment'>// OK, variable with type <span class='tcode_in_codeblock'>int</span> can be redeclared with type <span class='tcode_in_codeblock'>auto</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// error: function with deduced return type</span>
                                <span class='comment'>// redeclared with non-deduced return type (<a href='dcl.spec.auto' title='9.2.9.6&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>)</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div> <div id='6.sentence-3' class='sentence'>
Despite its syntactic form, the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration______'><span class='textsf'><span class='textit'>declaration</span></span></span></a> in an <a href='#nt:explicit-instantiation' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'><span id='ntref:explicit-instantiation_'><span class='textsf'><span class='textit'>explicit-instantiation</span></span></span></a> for a variable is not itself a definition and does not conflict with the definition instantiated by an explicit instantiation definition for that variable<a class='hidden_link' href='#6.sentence-3'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6650'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>For a given set of template arguments, if an explicit
instantiation of a template appears after a declaration of
an explicit specialization for that template, the explicit
instantiation has no effect<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>Otherwise, for an explicit instantiation
definition, the definition of a
function template, a variable template, a member
function template, or a member function or static
data member of a class template shall be present in every
translation unit in which it is explicitly instantiated<a class='hidden_link' href='#7.sentence-2'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6661'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>An explicit instantiation of a class, function template, or variable template
specialization is
placed in the namespace in which the template is defined<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>An explicit instantiation for a member of a class template is placed in
the namespace where the enclosing class template is defined<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>An explicit instantiation for a member template is placed in the namespace
where the enclosing class or class template is defined<a class='hidden_link' href='#8.sentence-3'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<a class='example_link' href='#example-3'><span class='textit'>Example&nbsp;3</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>template</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;          <span class='comment'>// error: class template <span class='tcode_in_codeblock'>Y</span> not visible in the global namespace</span>

<span class='keyword'>using</span> N<span class='operator'>::</span>Y;
<span class='keyword'>template</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;          <span class='comment'>// error: explicit instantiation outside of the namespace of the template</span>

<span class='keyword'>template</span> <span class='keyword'>class</span> N<span class='operator'>::</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span>;             <span class='comment'>// OK: explicit instantiation in namespace <span class='tcode_in_codeblock'>N</span></span>
<span class='keyword'>template</span> <span class='keyword'>void</span> N<span class='operator'>::</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK: explicit instantiation in namespace <span class='tcode_in_codeblock'>N</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6685'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>A trailing
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument'><span class='textsf'><span class='textit'>template-argument</span></span></span></a>
can be left unspecified in an explicit instantiation of a function template
specialization or of a member function template specialization provided
it can be deduced from the type of a function parameter (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>)<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='example-4' class='example'><div class='texpara'>[<a class='example_link' href='#example-4'><span class='textit'>Example&nbsp;4</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='comment'>// instantiate <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span> -- template-argument deduced</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6701'>#</a></div><div class='texpara'><div id='note-4' class='note'><div class='texpara'>[<a class='note_link' href='#note-4'><span class='textit'>Note&nbsp;4</span></a><span class='textit'>:</span> <div id='10.sentence-1' class='sentence'>An explicit instantiation of a constrained template is required
to satisfy that template's associated constraints (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>)<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>The satisfaction of constraints is determined
when forming the template name of an explicit instantiation
in which all template arguments are specified (<a href='temp.names' title='13.3&emsp;Names of template specializations'>[temp.<span class='shy'></span>names]</a>),
or, for explicit instantiations of function templates,
during template argument deduction (<a href='temp.deduct.decl' title='13.10.3.7&emsp;Deducing template arguments from a function declaration'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>decl]</a>)
when one or more trailing template arguments are left unspecified<a class='hidden_link' href='#10.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6714'>#</a></div><div class='texpara'><div id='11.sentence-1' class='sentence'>An explicit instantiation that names a class
template specialization is also an explicit
instantiation of the same kind (declaration or definition) of each
of its members (not including members inherited from base classes and members
that are templates) that has not been previously explicitly specialized in
the translation unit containing the explicit instantiation,
provided that the associated constraints, if any,
of that member are satisfied by the template arguments of the explicit
instantiation (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>, <a href='temp.constr.constr' title='13.5.2&emsp;Constraints'>[temp.<span class='shy'></span>constr.<span class='shy'></span>constr]</a>),
except as described below<a class='hidden_link' href='#11.sentence-1'>.</a></div> <div id='note-5' class='note'><div class='texpara'>[<a class='note_link' href='#note-5'><span class='textit'>Note&nbsp;5</span></a><span class='textit'>:</span> <div id='11.sentence-2' class='sentence'>In addition, it will typically be an explicit instantiation of certain
<a class='index' id=':implementation-dependent'></a>implementation-dependent data about the class<a class='hidden_link' href='#11.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6731'>#</a></div><div class='texpara'><div id='12.sentence-1' class='sentence'>An explicit instantiation definition that names a class template
specialization explicitly instantiates the class template specialization
and is an explicit instantiation definition of only those
members that have been defined at the point of instantiation<a class='hidden_link' href='#12.sentence-1'>.</a></div></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6737'>#</a></div><div class='texpara'><div id='13.sentence-1' class='sentence'>An explicit instantiation of a prospective destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)
shall name the selected destructor of the class<a class='hidden_link' href='#13.sentence-1'>.</a></div></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6741'>#</a></div><div class='texpara'><div id='14.sentence-1' class='sentence'>If an entity is the subject of both an explicit instantiation declaration
and an explicit instantiation definition in the same translation unit, the
definition shall follow the declaration<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='14.sentence-2' class='sentence'>An entity that is the subject of an
explicit instantiation declaration and that is also used
in a way that would otherwise cause an <a href='temp.inst' title='13.9.2&emsp;Implicit instantiation&emsp;[temp.inst]'>implicit instantiation</a>
in the translation unit
shall be the subject of an explicit instantiation definition somewhere in the
program; otherwise the program is ill-formed, no diagnostic required<a class='hidden_link' href='#14.sentence-2'>.</a></div> <div id='note-6' class='note'><div class='texpara'>[<a class='note_link' href='#note-6'><span class='textit'>Note&nbsp;6</span></a><span class='textit'>:</span> <div id='14.sentence-3' class='sentence'>This rule does apply to inline functions even though an
explicit instantiation declaration of such an entity has no other normative
effect<a class='hidden_link' href='#14.sentence-3'>.</a></div> <div id='14.sentence-4' class='sentence'>This is needed to ensure that if the address of an inline function is
taken in a translation unit in which the implementation chose to suppress the
out-of-line body, another translation unit will supply the body<a class='hidden_link' href='#14.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='14.sentence-5' class='sentence'>
An explicit instantiation declaration shall not name a specialization of a
template with internal linkage<a class='hidden_link' href='#14.sentence-5'>.</a></div></div></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L6760'>#</a></div><div class='texpara'><div id='15.sentence-1' class='sentence'>An explicit instantiation does not constitute a use of a default argument,
so default argument instantiation is not done<a class='hidden_link' href='#15.sentence-1'>.</a></div> <div id='example-5' class='example'><div class='texpara'>[<a class='example_link' href='#example-5'><span class='textit'>Example&nbsp;5</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>char</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T g<span class='parenthesis'>(</span>T x <span class='operator'>=</span> <span class='operator'>&amp;</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>int</span> g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK even though <span class='tcode_in_codeblock'>&amp;p</span> isn't an <span class='tcode_in_codeblock'>int</span>.</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>