<!DOCTYPE html><html lang='en'><head><title>[temp.res]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>13.8</a> Name resolution <a class='abbr_ref'>[temp.res]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>13.8.1</a> General <a class='abbr_ref' href='temp.res.general'>[temp.res.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4274'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':overloading,resolution,template_name'></a><a class='index' id=':lookup,template_name'></a>Three kinds of names can be used within a template definition:
<ul class='itemize'><li id='general-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.1'>(1.1)</a></div><div class='texpara'><div id='general-1.1.sentence-1' class='sentence'>The name of the template itself,
and names declared within the template itself<a class='hidden_link' href='#general-1.1.sentence-1'>.</a></div></div></li><li id='general-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.2'>(1.2)</a></div><div class='texpara'><div id='general-1.2.sentence-1' class='sentence'>Names dependent on a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a> (<a href='#temp.dep' title='13.8.3&emsp;Dependent names'>[temp.<span class='shy'></span>dep]</a>)<a class='hidden_link' href='#general-1.2.sentence-1'>.</a></div></div></li><li id='general-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.3'>(1.3)</a></div><div class='texpara'><div id='general-1.3.sentence-1' class='sentence'>Names from scopes which are visible within the template definition<a class='hidden_link' href='#general-1.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4289'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>A name used in a template declaration or definition and that is
dependent on a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
is assumed not to name a type unless
the applicable name lookup finds a type name or the name
is qualified by the keyword
<span class='texttt'><span class='keyword'>typename</span></span><a class='hidden_link' href='#general-2.sentence-1'>.</a></div> <div id='general-example-1' class='example'><div class='texpara'>[<a class='example_link' href='#general-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='comment'>// no <span class='tcode_in_codeblock'>B</span> declared here</span>

<span class='keyword'>class</span> X;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> Z;                      <span class='comment'>// forward declaration of member class</span>

  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    X<span class='operator'>*</span> a1;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>X</span></span>
    T<span class='operator'>*</span> a2;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span></span>
    Y<span class='operator'>*</span> a3;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>Y&lt;T&gt;</span></span>
    Z<span class='operator'>*</span> a4;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>Z</span></span>
    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>A TA;
    TA<span class='operator'>*</span> a5;                     <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>'s <span class='tcode_in_codeblock'>A</span></span>
    <span class='keyword'>typename</span> T<span class='operator'>::</span>A<span class='operator'>*</span> a6;          <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>'s <span class='tcode_in_codeblock'>A</span></span>
    T<span class='operator'>::</span>A<span class='operator'>*</span> a7;                   <span class='comment'>// error: no visible declaration of <span class='tcode_in_codeblock'>a7</span></span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;A</span> is not a type name; multiplication of <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;A</span> by <span class='tcode_in_codeblock'>a7</span></span>
    B<span class='operator'>*</span> a8;                      <span class='comment'>// error: no visible declarations of <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>a8</span></span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is not a type name; multiplication of <span class='tcode_in_codeblock'>B</span> by <span class='tcode_in_codeblock'>a8</span></span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div class='bnf' id='nt:typename-specifier'>
<a class='hidden_link' href='#nt:typename-specifier' title='13.8.1&emsp;General&emsp;[temp.res.general]'><span id='nt:typename-specifier'><span id=':typename-specifier'>typename-specifier<span class='textnormal'>:</span></span></span></a><br/><span id=':typename'><span class='texttt'><span class='keyword'>typename</span></span></span> <a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><span class='textit'>identifier</span></span></span></a><br/><span id=':typename_'><span class='texttt'><span class='keyword'>typename</span></span></span> <a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a> <span class='terminal'><span class='keyword'>template</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><span class='textit'>simple-template-id</span></span></span></a>
</div></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4329'>#</a></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'>A <a href='#nt:typename-specifier' title='13.8.1&emsp;General&emsp;[temp.res.general]'><span id='ntref:typename-specifier'><span class='textsf'><span class='textit'>typename-specifier</span></span></span></a>
denotes the type or class template
denoted by the <a href='dcl.type.simple#nt:simple-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:simple-type-specifier'><span class='textsf'><span class='textit'>simple-type-specifier</span></span></span></a> (<a href='dcl.type.simple' title='9.2.9.3&emsp;Simple type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>simple]</a>)
formed by omitting the keyword <span class='texttt'><span class='keyword'>typename</span></span><a class='hidden_link' href='#general-3.sentence-1'>.</a></div> <div id='general-3.sentence-2' class='sentence'>The usual qualified name lookup (<a href='basic.lookup.qual' title='6.5.4&emsp;Qualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>qual]</a>) is used to find the
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>
even in the presence of
<span class='texttt'><span class='keyword'>typename</span></span><a class='hidden_link' href='#general-3.sentence-2'>.</a></div> <div id='general-example-2' class='example'><div class='texpara'>[<a class='example_link' href='#general-example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> X;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='operator'>::</span>X x;
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A a;
  B b;
  f<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;             <span class='comment'>// OK: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> refers to <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;X</span></span>
  f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;             <span class='comment'>// error: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> refers to the data member <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span> not the struct <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4359'>#</a></div><div class='texpara'><div id='general-4.sentence-1' class='sentence'>A qualified name used as the name in a
<a href='class.derived.general#nt:class-or-decltype' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:class-or-decltype'><span class='textsf'><span class='textit'>class-or-decltype</span></span></span></a> (<a href='class.derived' title='11.7&emsp;Derived classes'>[class.<span class='shy'></span>derived]</a>)
or an
<a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><span class='textit'>elaborated-type-specifier</span></span></span></a>
is implicitly assumed to name a type, without the use of the
<span class='texttt'><span class='keyword'>typename</span></span>
keyword<a class='hidden_link' href='#general-4.sentence-1'>.</a></div> <div id='general-4.sentence-2' class='sentence'>In a <a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier__'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a> that immediately contains a <a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier___'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a>
that depends on a template parameter, the <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_'><span class='textsf'><span class='textit'>identifier</span></span></span></a> or <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><span class='textit'>simple-template-id</span></span></span></a>
is implicitly assumed to name a type, without the use of the <span class='texttt'><span class='keyword'>typename</span></span> keyword<a class='hidden_link' href='#general-4.sentence-2'>.</a></div> <div id='general-note-1' class='note'><div class='texpara'>[<a class='note_link' href='#general-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='general-4.sentence-3' class='sentence'>The
<span class='texttt'><span class='keyword'>typename</span></span>
keyword is not permitted by the syntax of these constructs<a class='hidden_link' href='#general-4.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-5'><div class='marginalizedparent'><a class='marginalized' href='#general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4376'>#</a></div><div class='texpara'><div id='general-5.sentence-1' class='sentence'>A <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>
is assumed to name a type if
<ul class='itemize'><li id='general-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-5.1'>(5.1)</a></div>it is a qualified name in a type-id-only context (see below), or</li><li id='general-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-5.2'>(5.2)</a></div>it is a <a href='dcl.spec.general#nt:decl-specifier' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier'><span class='textsf'><span class='textit'>decl-specifier</span></span></span></a> of the <a href='dcl.spec.general#nt:decl-specifier-seq' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier-seq'><span class='textsf'><span class='textit'>decl-specifier-seq</span></span></span></a> of a
<ul class='itemize'><li id='general-5.2.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-5.2.1'>(5.2.1)</a></div><a href='dcl.pre#nt:simple-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:simple-declaration'><span class='textsf'><span class='textit'>simple-declaration</span></span></span></a> or a <a href='dcl.fct.def.general#nt:function-definition' title='9.5.1&emsp;In general&emsp;[dcl.fct.def.general]'><span id='ntref:function-definition'><span class='textsf'><span class='textit'>function-definition</span></span></span></a> in namespace scope,</li><li id='general-5.2.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-5.2.2'>(5.2.2)</a></div><a href='class.mem.general#nt:member-declaration' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-declaration'><span class='textsf'><span class='textit'>member-declaration</span></span></span></a>,</li><li id='general-5.2.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-5.2.3'>(5.2.3)</a></div><a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration'><span class='textsf'><span class='textit'>parameter-declaration</span></span></span></a> in a <a href='class.mem.general#nt:member-declaration' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-declaration_'><span class='textsf'><span class='textit'>member-declaration</span></span></span></a><a class='footnotenum' href='#footnote-140' id='footnoteref-140' title='This includes friend function declarations.'>140</a>,
unless that <a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration_'><span class='textsf'><span class='textit'>parameter-declaration</span></span></span></a> appears in a default argument,</li><li id='general-5.2.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-5.2.4'>(5.2.4)</a></div><a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration__'><span class='textsf'><span class='textit'>parameter-declaration</span></span></span></a> in a <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator'><span class='textsf'><span class='textit'>declarator</span></span></span></a>
of a function or function template declaration
whose <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><span class='textit'>declarator-id</span></span></span></a> is qualified,
unless that <a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration___'><span class='textsf'><span class='textit'>parameter-declaration</span></span></span></a>
appears in a default argument,</li><li id='general-5.2.5'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-5.2.5'>(5.2.5)</a></div><a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration____'><span class='textsf'><span class='textit'>parameter-declaration</span></span></span></a> in a <a href='expr.prim.lambda.general#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator'><span class='textsf'><span class='textit'>lambda-declarator</span></span></span></a>
or <a href='expr.prim.req.general#nt:requirement-parameter-list' title='7.5.7.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement-parameter-list'><span class='textsf'><span class='textit'>requirement-parameter-list</span></span></span></a>,
unless that <a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration_____'><span class='textsf'><span class='textit'>parameter-declaration</span></span></span></a> appears in a default argument, or</li><li id='general-5.2.6'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-5.2.6'>(5.2.6)</a></div><a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration______'><span class='textsf'><span class='textit'>parameter-declaration</span></span></span></a> of a (non-type) <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter__'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a><a class='hidden_link' href='#general-5.sentence-1'>.</a></li></ul></li></ul></div> <div id='general-5.sentence-2' class='sentence'>
A qualified name is said to be in a <a class='hidden_link' href='#def:type-id-only_context' title='13.8.1&emsp;General&emsp;[temp.res.general]'><span id='def:type-id-only_context'><span class='textit'>type-id-only context</span></span></a>
if it appears in a
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id'><span class='textsf'><span class='textit'>type-id</span></span></span></a>,
<a href='expr.new#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id'><span class='textsf'><span class='textit'>new-type-id</span></span></span></a>, or
<a href='dcl.name#nt:defining-type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:defining-type-id'><span class='textsf'><span class='textit'>defining-type-id</span></span></span></a>
and the smallest enclosing
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_'><span class='textsf'><span class='textit'>type-id</span></span></span></a>,
<a href='expr.new#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id_'><span class='textsf'><span class='textit'>new-type-id</span></span></span></a>, or
<a href='dcl.name#nt:defining-type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:defining-type-id_'><span class='textsf'><span class='textit'>defining-type-id</span></span></span></a>
is a
<a href='expr.new#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id__'><span class='textsf'><span class='textit'>new-type-id</span></span></span></a>,
<a href='dcl.name#nt:defining-type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:defining-type-id__'><span class='textsf'><span class='textit'>defining-type-id</span></span></span></a>,
<a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type'><span class='textsf'><span class='textit'>trailing-return-type</span></span></span></a>,
default argument of a <a href='temp.param#nt:type-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-parameter'><span class='textsf'><span class='textit'>type-parameter</span></span></span></a> of a template, or
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id__'><span class='textsf'><span class='textit'>type-id</span></span></span></a> of a
<span class='texttt'><span class='keyword'>static_&shy;cast</span></span>,
<span class='texttt'><span class='keyword'>const_&shy;cast</span></span>,
<span class='texttt'><span class='keyword'>reinterpret_&shy;cast</span></span>, or
<span class='texttt'><span class='keyword'>dynamic_&shy;cast</span></span><a class='hidden_link' href='#general-5.sentence-2'>.</a></div> <div id='general-example-3' class='example'><div class='texpara'>[<a class='example_link' href='#general-example-3'><span class='textit'>Example&nbsp;3</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T<span class='operator'>::</span>R f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK, return type of a function declaration at global scope</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>::</span>R<span class='parenthesis'>)</span>;         <span class='comment'>// ill-formed, no diagnostic required: attempt to declare</span>
                                        <span class='comment'>// a <span class='tcode_in_codeblock'>void</span> variable template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> Ptr <span class='operator'>=</span> PtrTraits<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>Ptr;        <span class='comment'>// OK, in a <a href='dcl.name#nt:defining-type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:defining-type-id___'><span class='textsf'><span class='textit'>defining-type-id</span></span></span></a></span>
  T<span class='operator'>::</span>R f<span class='parenthesis'>(</span>T<span class='operator'>::</span>P p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>                      <span class='comment'>// OK, class scope</span>
    <span class='keyword'>return</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>::</span>R<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;        <span class='comment'>// OK, <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id___'><span class='textsf'><span class='textit'>type-id</span></span></span></a> of a <span class='tcode_in_codeblock'>static_&shy;cast</span></span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>auto</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> S<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>Ptr;               <span class='comment'>// OK, <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type_'><span class='textsf'><span class='textit'>trailing-return-type</span></span></span></a></span>
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>pf<span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='operator'>::</span>X<span class='parenthesis'>)</span>;                     <span class='comment'>// variable <span class='tcode_in_codeblock'>pf</span> of type <span class='tcode_in_codeblock'>void*</span> initialized with <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span></span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='operator'>::</span>X<span class='parenthesis'>)</span>;                         <span class='comment'>// error: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> at block scope does not denote a type</span>
                                        <span class='comment'>// (attempt to declare a <span class='tcode_in_codeblock'>void</span> variable)</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-6'><div class='marginalizedparent'><a class='marginalized' href='#general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4438'>#</a></div><div class='texpara'><div id='general-6.sentence-1' class='sentence'>A <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> that refers to a member of an unknown specialization,
that is not prefixed by <span class='texttt'><span class='keyword'>typename</span></span>,
and that is not otherwise assumed to name a type (see above)
denotes a non-type<a class='hidden_link' href='#general-6.sentence-1'>.</a></div> <div id='general-example-4' class='example'><div class='texpara'>[<a class='example_link' href='#general-example-4'><span class='textit'>Example&nbsp;4</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  T<span class='operator'>::</span>x <span class='operator'>*</span> i;         <span class='comment'>// expression, not the declaration of a variable <span class='tcode_in_codeblock'>i</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> Foo <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Bar <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> <span class='keyword'>const</span> x <span class='operator'>=</span> <span class='literal'>5</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span>Bar<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK</span>
  f<span class='anglebracket'>&lt;</span>Foo<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>Foo&#x200b;::&#x200b;x</span> is a type</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-7'><div class='marginalizedparent'><a class='marginalized' href='#general-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4464'>#</a></div><div class='texpara'><div id='general-7.sentence-1' class='sentence'>Within the definition of a class template or within the definition of a
member of a class template following the <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id_'><span class='textsf'><span class='textit'>declarator-id</span></span></span></a>, the keyword
<span class='texttt'><span class='keyword'>typename</span></span>
is not required when referring to
a member of the current instantiation (<a href='#temp.dep.type' title='13.8.3.2&emsp;Dependent types'>[temp.<span class='shy'></span>dep.<span class='shy'></span>type]</a>)<a class='hidden_link' href='#general-7.sentence-1'>.</a></div> <div id='general-example-5' class='example'><div class='texpara'>[<a class='example_link' href='#general-example-5'><span class='textit'>Example&nbsp;5</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> B;
  B b;              <span class='comment'>// OK, no <span class='tcode_in_codeblock'>typename</span> required</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-8'><div class='marginalizedparent'><a class='marginalized' href='#general-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4479'>#</a></div><div class='texpara'><div id='general-8.sentence-1' class='sentence'><a class='index' id=':checking,syntax'></a><a class='index' id=':checking,point_of_error'></a>The validity of a template may be checked prior to any instantiation<a class='hidden_link' href='#general-8.sentence-1'>.</a></div> <div id='general-note-2' class='note'><div class='texpara'>[<a class='note_link' href='#general-note-2'><span class='textit'>Note&nbsp;2</span></a><span class='textit'>:</span> <div id='general-8.sentence-2' class='sentence'>Knowing which names are type names allows the syntax of every template
to be checked in this way<a class='hidden_link' href='#general-8.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='general-8.sentence-3' class='sentence'>
The program is ill-formed, no diagnostic required, if:
<ul class='itemize'><li id='general-8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-8.1'>(8.1)</a></div>no valid specialization can be generated for a template
or a substatement of a <a href='stmt.if#def:constexpr_if' title='8.5.2&emsp;The if statement&emsp;[stmt.if]'>constexpr if</a> statement within a template
and the template is not instantiated, or</li><li id='general-8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-8.2'>(8.2)</a></div>no substitution of template arguments
into a <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint'><span class='textsf'><span class='textit'>type-constraint</span></span></span></a> or <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause'><span class='textsf'><span class='textit'>requires-clause</span></span></span></a>
would result in a valid expression, or</li><li id='general-8.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-8.3'>(8.3)</a></div>every valid specialization of a variadic template requires an empty template
parameter pack, or</li><li id='general-8.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-8.4'>(8.4)</a></div>a hypothetical instantiation of a template
immediately following its definition
would be ill-formed
due to a construct that does not depend on a template parameter, or</li><li id='general-8.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-8.5'>(8.5)</a></div>the interpretation of such a construct
in the hypothetical instantiation
is different from
the interpretation of the corresponding construct
in any actual instantiation of the template<a class='hidden_link' href='#general-8.sentence-3'>.</a> <div class='texpara'><div id='general-note-3' class='note'><div class='texpara'>[<a class='note_link' href='#general-note-3'><span class='textit'>Note&nbsp;3</span></a><span class='textit'>:</span> <div id='general-8.5.sentence-2' class='sentence'>This can happen in situations including the following:
<ul class='itemize'><li id='general-8.5.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-8.5.1'>(8.5.1)</a></div>a type used in a non-dependent name is incomplete at the point at which a
template is defined but is complete at the point at which an instantiation is
performed, or</li><li id='general-8.5.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-8.5.2'>(8.5.2)</a></div>lookup for a name in the template definition found a <a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><span class='textit'>using-declaration</span></span></span></a>,
but the lookup in the corresponding scope in the instantiation
does not find any declarations because the <a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration_'><span class='textsf'><span class='textit'>using-declaration</span></span></span></a>
was a pack expansion and the corresponding pack is empty, or</li><li id='general-8.5.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-8.5.3'>(8.5.3)</a></div>an instantiation uses a default argument or default template argument
that had not been defined at the point at which the template was defined, or</li><li id='general-8.5.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-8.5.4'>(8.5.4)</a></div><a href='expr.const' title='7.7&emsp;Constant expressions&emsp;[expr.const]'>constant expression evaluation</a> within the template
instantiation uses
  <ul class='itemize'><li id='general-8.5.4.1'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#general-8.5.4.1'>(8.5.4.1)</a></div>the value of a const object of integral or unscoped enumeration type or</li><li id='general-8.5.4.2'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#general-8.5.4.2'>(8.5.4.2)</a></div>the value of a <span class='texttt'><span class='keyword'>constexpr</span></span> object or</li><li id='general-8.5.4.3'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#general-8.5.4.3'>(8.5.4.3)</a></div>the value of a reference or</li><li id='general-8.5.4.4'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#general-8.5.4.4'>(8.5.4.4)</a></div>the definition of a constexpr function,</li></ul>
and that entity was not defined when the template was defined, or</li><li id='general-8.5.5'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#general-8.5.5'>(8.5.5)</a></div>a class template specialization or variable template specialization that
is specified by a non-dependent <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id__'><span class='textsf'><span class='textit'>simple-template-id</span></span></span></a> is used by
the template, and either it is instantiated from a partial specialization that
was not defined when the template was defined or it names an explicit
specialization that was not declared when the template was defined<a class='hidden_link' href='#general-8.5.sentence-2'>.</a></li></ul></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul></div></div><div class='texpara'><div id='general-8.sentence-4' class='sentence'>Otherwise, no diagnostic shall be issued for a template
for which a valid specialization can be generated<a class='hidden_link' href='#general-8.sentence-4'>.</a></div> <div id='general-note-4' class='note'><div class='texpara'>[<a class='note_link' href='#general-note-4'><span class='textit'>Note&nbsp;4</span></a><span class='textit'>:</span> <div id='general-8.sentence-5' class='sentence'>If a template is instantiated, errors will be diagnosed according
to the other rules in this document<a class='hidden_link' href='#general-8.sentence-5'>.</a></div> <div id='general-8.sentence-6' class='sentence'>Exactly when these errors are diagnosed is a quality of implementation issue<a class='hidden_link' href='#general-8.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='general-example-6' class='example'><div class='texpara'>[<a class='example_link' href='#general-example-6'><span class='textit'>Example&nbsp;6</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>int</span> j;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t, <span class='keyword'>int</span> i, <span class='keyword'>char</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    t <span class='operator'>=</span> i;          <span class='comment'>// diagnosed if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is instantiated, and the assignment to <span class='tcode_in_codeblock'>t</span> is an error</span>
    p <span class='operator'>=</span> i;          <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is not instantiated</span>
    p <span class='operator'>=</span> j;          <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is not instantiated</span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='operator'>+</span>;              <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;g</span> is not instantiated</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span>, T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> t<span class='parenthesis'>)</span>;                     <span class='comment'>// error: too many parameters</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>union</span> X <span class='operator'>:</span> T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;            <span class='comment'>// error: union with base class</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='operator'>:</span> T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>,  T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// error: duplicate base class</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-9'><div class='marginalizedparent'><a class='marginalized' href='#general-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4574'>#</a></div><div class='texpara'><div id='general-9.sentence-1' class='sentence'>When looking for the declaration of a name used in a template definition,
the usual lookup rules (<a href='basic.lookup.unqual' title='6.5.2&emsp;Unqualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>unqual]</a>, <a href='basic.lookup.argdep' title='6.5.3&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a>)
are used for non-dependent names<a class='hidden_link' href='#general-9.sentence-1'>.</a></div> <div id='general-9.sentence-2' class='sentence'>The lookup of names dependent on the template parameters
is postponed until the actual template argument is known (<a href='#temp.dep' title='13.8.3&emsp;Dependent names'>[temp.<span class='shy'></span>dep]</a>)<a class='hidden_link' href='#general-9.sentence-2'>.</a></div> <div id='general-example-7' class='example'><div class='texpara'>[<a class='example_link' href='#general-example-7'><span class='textit'>Example&nbsp;7</span></a><span class='textit'>:</span> <span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>iostream<span class='anglebracket'>&gt;</span>
<span class='keyword'>using</span> <span class='keyword'>namespace</span> std;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Set <span class='curlybracket'>{</span>
  T<span class='operator'>*</span> p;
  <span class='keyword'>int</span> cnt;
<span class='keyword'>public</span><span class='operator'>:</span>
  Set<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  Set<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> Set<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> printall<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>for</span> <span class='parenthesis'>(</span><span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>0</span>; i<span class='anglebracket'>&lt;</span>cnt; i<span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>)</span>
      cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> p<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>'\n'</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='general-9.sentence-3' class='sentence'>In the example,
<span class='texttt'>i</span>
is the local variable
<span class='texttt'>i</span>
declared in
<span class='texttt'>printall</span>,
<span class='texttt'>cnt</span>
is the member
<span class='texttt'>cnt</span>
declared in
<span class='texttt'>Set</span>,
and
<span class='texttt'>cout</span>
is the standard output stream declared in
<span class='texttt'>iostream</span><a class='hidden_link' href='#general-9.sentence-3'>.</a></div> <div id='general-9.sentence-4' class='sentence'>However, not every declaration can be found this way; the resolution of
some names is postponed
until the actual
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument'><span class='textsf'><span class='textit'>template-argument</span></span></span></a><span class='textit'>s</span>
are known<a class='hidden_link' href='#general-9.sentence-4'>.</a></div> <div id='general-9.sentence-5' class='sentence'>For example, even though the name
<span class='texttt'><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span>
is known within the definition of
<span class='texttt'>printall<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
and a declaration of it can be found in
<a href='iostream.syn#header:%3ciostream%3e' title='29.4.1&emsp;Header &lt;iostream&gt; synopsis&emsp;[iostream.syn]'><span id='headerref:<iostream>'><span id=':<iostream>'><span class='texttt'>&lt;iostream&gt;</span></span></span></a>,
the actual declaration of
<span class='texttt'><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span>
needed to print
<span class='texttt'>p<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span></span>
cannot be known until it is known what type
<span class='texttt'>T</span>
is (<a href='#temp.dep' title='13.8.3&emsp;Dependent names'>[temp.<span class='shy'></span>dep]</a>)<a class='hidden_link' href='#general-9.sentence-5'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-10'><div class='marginalizedparent'><a class='marginalized' href='#general-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4633'>#</a></div><div class='texpara'><div id='general-10.sentence-1' class='sentence'>If a name does not depend on a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter___'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
(as defined in <a href='#temp.dep' title='13.8.3&emsp;Dependent names'>[temp.<span class='shy'></span>dep]</a>), a declaration (or set of declarations) for that
name shall be in scope at the point where the name appears in the template
definition; the name is bound to the declaration (or declarations) found
at that point and this binding is not affected by declarations that are
visible at the point of instantiation<a class='hidden_link' href='#general-10.sentence-1'>.</a></div> <div id='general-example-8' class='example'><div class='texpara'>[<a class='example_link' href='#general-example-8'><span class='textit'>Example&nbsp;8</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>f(char)</span></span>
  f<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// dependent</span>
  f<span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>;             <span class='comment'>// dependent</span>
  dd<span class='operator'>+</span><span class='operator'>+</span>;             <span class='comment'>// not dependent; error: declaration for <span class='tcode_in_codeblock'>dd</span> not found</span>
<span class='curlybracket'>}</span>

<span class='keyword'>enum</span> E <span class='curlybracket'>{</span> e <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>E<span class='parenthesis'>)</span>;

<span class='keyword'>double</span> dd;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='parenthesis'>(</span>e<span class='parenthesis'>)</span>;             <span class='comment'>// will cause one call of <span class='tcode_in_codeblock'>f(char)</span> followed by two calls of <span class='tcode_in_codeblock'>f(E)</span></span>
  g<span class='parenthesis'>(</span><span class='literal'>'a'</span><span class='parenthesis'>)</span>;           <span class='comment'>// will cause three calls of <span class='tcode_in_codeblock'>f(char)</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-11'><div class='marginalizedparent'><a class='marginalized' href='#general-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4663'>#</a></div><div class='texpara'><div id='general-note-5' class='note'><div class='texpara'>[<a class='note_link' href='#general-note-5'><span class='textit'>Note&nbsp;5</span></a><span class='textit'>:</span> <div id='general-11.sentence-1' class='sentence'>For purposes of name lookup, default arguments and
<a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a><span class='textit'>s</span> of function templates and default
arguments and <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a><span class='textit'>s</span> of
member functions of class templates are considered definitions (<a href='temp.decls' title='13.7&emsp;Template declarations'>[temp.<span class='shy'></span>decls]</a>)<a class='hidden_link' href='#general-11.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnote' id='footnote-140'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-140'>140)</a></div><div class='texpara'><div id='footnote-140.sentence-1' class='sentence'>This includes friend function declarations<a class='hidden_link' href='#footnote-140.sentence-1'>.</a></div>&nbsp;<a href='#footnoteref-140'>⮥</a></div></div></div><div id='temp.local' class='section'><h3 ><a class='secnum' href='#temp.local' style='min-width:80pt'>13.8.2</a> Locally declared names <a class='abbr_ref' href='temp.local'>[temp.local]</a></h3><div class='para' id='temp.local-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4673'>#</a></div><div class='texpara'><div id='temp.local-1.sentence-1' class='sentence'>Like normal (non-template) classes, class templates have an
injected-class-name (<a href='class.pre' title='11.1&emsp;Preamble'>[class.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#temp.local-1.sentence-1'>.</a></div> <div id='temp.local-1.sentence-2' class='sentence'>The
injected-class-name can be used
as a <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><span class='textit'>template-name</span></span></span></a> or a <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name'><span class='textsf'><span class='textit'>type-name</span></span></span></a><a class='hidden_link' href='#temp.local-1.sentence-2'>.</a></div> <div id='temp.local-1.sentence-3' class='sentence'>When it is used with a
<a href='temp.names#nt:template-argument-list' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument-list'><span class='textsf'><span class='textit'>template-argument-list</span></span></span></a>,
as a <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_'><span class='textsf'><span class='textit'>template-argument</span></span></span></a> for a template <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter____'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>,
or as the final identifier in the <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier_'><span class='textsf'><span class='textit'>elaborated-type-specifier</span></span></span></a> of
a friend class template declaration,
it is a <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name_'><span class='textsf'><span class='textit'>template-name</span></span></span></a> that refers to the
class template itself<a class='hidden_link' href='#temp.local-1.sentence-3'>.</a></div> <div id='temp.local-1.sentence-4' class='sentence'>Otherwise, it is a <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name_'><span class='textsf'><span class='textit'>type-name</span></span></span></a>
equivalent to the <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name__'><span class='textsf'><span class='textit'>template-name</span></span></span></a>
followed by the <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_____'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a><span class='textit'>s</span> of the class template
enclosed in <span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#temp.local-1.sentence-4'>.</a></div></div></div><div class='para' id='temp.local-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4691'>#</a></div><div class='texpara'><div id='temp.local-2.sentence-1' class='sentence'>Within the scope of a class template specialization or
partial specialization, when the injected-class-name is
used as a <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name__'><span class='textsf'><span class='textit'>type-name</span></span></span></a>,
it is equivalent to the <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name___'><span class='textsf'><span class='textit'>template-name</span></span></span></a> followed by the
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument__'><span class='textsf'><span class='textit'>template-argument</span></span></span></a><span class='textit'>s</span>
of the class template specialization or partial
specialization enclosed in
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#temp.local-2.sentence-1'>.</a></div> <div id='temp.local-example-1' class='example'><div class='texpara'>[<a class='example_link' href='#temp.local-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  Y<span class='operator'>*</span> p;                                 <span class='comment'>// meaning <span class='tcode_in_codeblock'>Y&lt;int&gt;</span></span>
  Y<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> q;                           <span class='comment'>// meaning <span class='tcode_in_codeblock'>Y&lt;char&gt;</span></span>
  A<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>*</span> a;                              <span class='comment'>// meaning <span class='tcode_in_codeblock'>A&lt;&#x200b;::&#x200b;Y&gt;</span></span>
  <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>class</span> Y;     <span class='comment'>// meaning <span class='tcode_in_codeblock'>&#x200b;::&#x200b;Y</span></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.local-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4715'>#</a></div><div class='texpara'><div id='temp.local-3.sentence-1' class='sentence'>The injected-class-name of a class template or class
template specialization can be used as either
a <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name____'><span class='textsf'><span class='textit'>template-name</span></span></span></a> or a <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name___'><span class='textsf'><span class='textit'>type-name</span></span></span></a>
wherever it is in scope<a class='hidden_link' href='#temp.local-3.sentence-1'>.</a></div> <div id='temp.local-example-2' class='example'><div class='texpara'>[<a class='example_link' href='#temp.local-example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Base <span class='curlybracket'>{</span>
  Base<span class='operator'>*</span> p;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Derived<span class='operator'>:</span> <span class='keyword'>public</span> Base<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> Derived<span class='operator'>::</span>Base<span class='operator'>*</span> p;            <span class='comment'>// meaning <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;Base&lt;T&gt;</span></span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> U <span class='operator'>=</span> T<span class='operator'>::</span><span class='keyword'>template</span> Base<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Third <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
Third<span class='anglebracket'>&lt;</span>Derived<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> t;                 <span class='comment'>// OK: default argument uses injected-class-name as a template</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.local-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4735'>#</a></div><div class='texpara'><div id='temp.local-4.sentence-1' class='sentence'>A lookup that finds an injected-class-name (<a href='class.member.lookup' title='11.8&emsp;Member name lookup'>[class.<span class='shy'></span>member.<span class='shy'></span>lookup]</a>) can result in an ambiguity in
certain cases (for example, if it is found in more than one
base class)<a class='hidden_link' href='#temp.local-4.sentence-1'>.</a></div> <div id='temp.local-4.sentence-2' class='sentence'>If all of the injected-class-names that are
found refer to specializations of the same class template,
and if the name
is used as a <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name_____'><span class='textsf'><span class='textit'>template-name</span></span></span></a>,
the reference refers to the class template itself and not a
specialization thereof, and is not ambiguous<a class='hidden_link' href='#temp.local-4.sentence-2'>.</a></div> <div id='temp.local-example-3' class='example'><div class='texpara'>[<a class='example_link' href='#temp.local-example-3'><span class='textit'>Example&nbsp;3</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Base <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Derived<span class='operator'>:</span> Base<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>, Base<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> Derived<span class='operator'>::</span>Base b;             <span class='comment'>// error: ambiguous</span>
  <span class='keyword'>typename</span> Derived<span class='operator'>::</span>Base<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> d;     <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.local-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4755'>#</a></div><div class='texpara'><div id='temp.local-5.sentence-1' class='sentence'>When the normal name of the template (i.e., the name from
the enclosing scope, not the injected-class-name) is
used,
it always refers to the class template itself and not a
specialization of the template<a class='hidden_link' href='#temp.local-5.sentence-1'>.</a></div> <div id='temp.local-example-4' class='example'><div class='texpara'>[<a class='example_link' href='#temp.local-example-4'><span class='textit'>Example&nbsp;4</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  X<span class='operator'>*</span> p;                                 <span class='comment'>// meaning <span class='tcode_in_codeblock'>X&lt;T&gt;</span></span>
  X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p2;
  X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p3;
  <span class='operator'>::</span>X<span class='operator'>*</span> p4;                              <span class='comment'>// error: missing template argument list</span>
                                        <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span> does not refer to the injected-class-name</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.local-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4773'>#</a></div><div class='texpara'><div id='temp.local-6.sentence-1' class='sentence'>The name of a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter______'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
shall not be redeclared within its scope (including nested scopes)<a class='hidden_link' href='#temp.local-6.sentence-1'>.</a></div> <div id='temp.local-6.sentence-2' class='sentence'>A
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_______'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
shall not have the same name as the template name<a class='hidden_link' href='#temp.local-6.sentence-2'>.</a></div> <div id='temp.local-example-5' class='example'><div class='texpara'>[<a class='example_link' href='#temp.local-example-5'><span class='textit'>Example&nbsp;5</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> T;                                <span class='comment'>// error: template-parameter redeclared</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>char</span> T;                             <span class='comment'>// error: template-parameter redeclared</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;              <span class='comment'>// error: template-parameter redeclared</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.local-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4793'>#</a></div><div class='texpara'><div id='temp.local-7.sentence-1' class='sentence'>In the definition of a member of
a class template that appears outside of the class template definition,
the name of a member of the class template hides the name of a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
of any enclosing class templates (but not a <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a> of the
member if the member is a class or function template)<a class='hidden_link' href='#temp.local-7.sentence-1'>.</a></div> <div id='temp.local-example-6' class='example'><div class='texpara'>[<a class='example_link' href='#temp.local-example-6'><span class='textit'>Example&nbsp;6</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>typedef</span> <span class='keyword'>void</span> C;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> B<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>, not the template parameter</span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> B<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> C<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span>C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>, not the template parameter</span>
  C c;              <span class='comment'>// the template parameter <span class='tcode_in_codeblock'>C</span>, not <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>C</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.local-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4820'>#</a></div><div class='texpara'><div id='temp.local-8.sentence-1' class='sentence'>In the definition of a member of a class template that appears outside of the
namespace containing the class template definition,
the name of a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter__________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
hides the name of a member of this namespace<a class='hidden_link' href='#temp.local-8.sentence-1'>.</a></div> <div id='temp.local-example-7' class='example'><div class='texpara'>[<a class='example_link' href='#temp.local-example-7'><span class='textit'>Example&nbsp;7</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> C<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> N<span class='operator'>::</span>B<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span>C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  C b;              <span class='comment'>// <span class='tcode_in_codeblock'>C</span> is the template parameter, not <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;C</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.local-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4840'>#</a></div><div class='texpara'><div id='temp.local-9.sentence-1' class='sentence'>In the definition of a class template or in the definition of a member of such
a template that appears outside of the template definition,
for each non-dependent base class (<a href='#temp.dep.type' title='13.8.3.2&emsp;Dependent types'>[temp.<span class='shy'></span>dep.<span class='shy'></span>type]</a>),
if the name of the base class
or the name of a member of the
base class is the same as the name of a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter___________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>,
the base class name or member name <a href='basic.scope.hiding' title='6.4.10&emsp;Name hiding&emsp;[basic.scope.hiding]'>hides</a> the
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter____________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
name<a class='hidden_link' href='#temp.local-9.sentence-1'>.</a></div> <div id='temp.local-example-8' class='example'><div class='texpara'>[<a class='example_link' href='#temp.local-example-8'><span class='textit'>Example&nbsp;8</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> a;
  <span class='keyword'>int</span> Y;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> B, <span class='keyword'>class</span> a<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='operator'>:</span> A <span class='curlybracket'>{</span>
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span></span>
  a b;              <span class='comment'>// error: <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>a</span> isn't a type name</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.dep' class='section'><h3 ><a class='secnum' href='#temp.dep' style='min-width:80pt'>13.8.3</a> Dependent names <a class='abbr_ref' href='temp.dep'>[temp.dep]</a></h3><div id='temp.dep.general' class='section'><h4 ><a class='secnum' href='#temp.dep.general' style='min-width:95pt'>13.8.3.1</a> General <a class='abbr_ref' href='temp.dep.general'>[temp.dep.general]</a></h4><div class='para' id='temp.dep.general-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4870'>#</a></div><div class='texpara'><div id='temp.dep.general-1.sentence-1' class='sentence'>Inside a template, some constructs have semantics which may differ from one
instantiation to another<a class='hidden_link' href='#temp.dep.general-1.sentence-1'>.</a></div> <div id='temp.dep.general-1.sentence-2' class='sentence'>Such a construct
<a class='hidden_link' href='#def:name,dependent' title='13.8.3.1&emsp;General&emsp;[temp.dep.general]'><span id='def:name,dependent'><span class='textit'>depends</span></span></a>
on the template parameters<a class='hidden_link' href='#temp.dep.general-1.sentence-2'>.</a></div> <div id='temp.dep.general-1.sentence-3' class='sentence'>In particular, types and expressions may depend on the type
and/or
value of
template parameters (as determined by the template arguments) and this determines
the context for name lookup for certain names<a class='hidden_link' href='#temp.dep.general-1.sentence-3'>.</a></div> <div id='temp.dep.general-1.sentence-4' class='sentence'>An expression may be
<a class='hidden_link' href='#def:expression,type-dependent' title='13.8.3.1&emsp;General&emsp;[temp.dep.general]'><span id='def:expression,type-dependent'><span class='textit'>type-dependent</span></span></a>
(that is, its type may depend on a template parameter) or
<a class='hidden_link' href='#def:expression,value-dependent' title='13.8.3.1&emsp;General&emsp;[temp.dep.general]'><span id='def:expression,value-dependent'><span class='textit'>value-dependent</span></span></a>
(that is, its value when evaluated as a constant expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)
may depend on a template parameter)
as described below<a class='hidden_link' href='#temp.dep.general-1.sentence-4'>.</a></div></div></div><div class='para' id='temp.dep.general-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4890'>#</a></div><div class='texpara'><div id='temp.dep.general-2.sentence-1' class='sentence'>In an expression of the form:
<div class='ncsimplebnf'>
<a href='expr.post.general#nt:postfix-expression' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:postfix-expression'><span class='textsf'><span class='textit'>postfix-expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list'><span class='textsf'><span class='textit'>expression-list</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span>
</div>
where the
<a href='expr.post.general#nt:postfix-expression' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:postfix-expression_'><span class='textsf'><span class='textit'>postfix-expression</span></span></span></a>
is an
<a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><span class='textit'>unqualified-id</span></span></span></a>,
the
<a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id_'><span class='textsf'><span class='textit'>unqualified-id</span></span></span></a>
denotes a
<a class='hidden_link' href='#def:name,dependent' title='13.8.3.1&emsp;General&emsp;[temp.dep.general]'><span id='def:name,dependent_'><span class='textit'>dependent name</span></span></a>
if
<ul class='itemize'><li id='temp.dep.general-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.general-2.1'>(2.1)</a></div>any of the expressions in the <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list_'><span class='textsf'><span class='textit'>expression-list</span></span></span></a> is a
<a href='temp.variadic#def:pack_expansion' title='13.7.4&emsp;Variadic templates&emsp;[temp.variadic]'>pack expansion</a>,</li><li id='temp.dep.general-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.general-2.2'>(2.2)</a></div>any of the expressions
or <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><span class='textit'>braced-init-list</span></span></span></a><span class='textit'>s</span>
in the
<a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list__'><span class='textsf'><span class='textit'>expression-list</span></span></span></a>
is <a href='#temp.dep.expr' title='13.8.3.3&emsp;Type-dependent expressions&emsp;[temp.dep.expr]'>type-dependent</a>, or</li><li id='temp.dep.general-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.general-2.3'>(2.3)</a></div>the <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id__'><span class='textsf'><span class='textit'>unqualified-id</span></span></span></a>
is a <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><span class='textit'>template-id</span></span></span></a> in which any of the template arguments depends
on a template parameter<a class='hidden_link' href='#temp.dep.general-2.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='temp.dep.general-2.sentence-2' class='sentence'>If an operand of an operator is a type-dependent expression, the operator
also denotes a dependent name<a class='hidden_link' href='#temp.dep.general-2.sentence-2'>.</a></div> <div id='temp.dep.general-note-1' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.general-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='temp.dep.general-2.sentence-3' class='sentence'>Such names are unbound and
are looked up at the point of the template instantiation (<a href='#temp.point' title='13.8.5.1&emsp;Point of instantiation'>[temp.<span class='shy'></span>point]</a>) in
both the context of the template definition and the
context of the point of instantiation (<a href='#temp.dep.candidate' title='13.8.5.2&emsp;Candidate functions'>[temp.<span class='shy'></span>dep.<span class='shy'></span>candidate]</a>)<a class='hidden_link' href='#temp.dep.general-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.dep.general-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4929'>#</a></div><div class='texpara'><div id='temp.dep.general-example-1' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.general-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='operator'>:</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='operator'>::</span>A<span class='operator'>*</span> pa;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> pb<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>static</span> <span class='keyword'>int</span> i <span class='operator'>=</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>i;
    pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>j<span class='operator'>+</span><span class='operator'>+</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='temp.dep.general-3.sentence-1' class='sentence'>The base class name
<span class='texttt'>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,
the type name
<span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>A</span>,
the names
<span class='texttt'>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>i</span>
and
<span class='texttt'>pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>j</span>
explicitly depend on the
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_____________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a><a class='hidden_link' href='#temp.dep.general-3.sentence-1'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.dep.general-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L4953'>#</a></div><div class='texpara'><div id='temp.dep.general-4.sentence-1' class='sentence'>In the definition of a class or class template,
the scope of a <a href='#def:base_class,dependent' title='13.8.3.2&emsp;Dependent types&emsp;[temp.dep.type]'>dependent base class</a>
is not examined during unqualified
name lookup either at the point of definition of the
class template or member or during an instantiation of
the class template or member<a class='hidden_link' href='#temp.dep.general-4.sentence-1'>.</a></div> <div id='temp.dep.general-example-2' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.general-example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>typedef</span> <span class='keyword'>double</span> A;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> A;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='operator'>:</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  A a;              <span class='comment'>// <span class='tcode_in_codeblock'>a</span> has type <span class='tcode_in_codeblock'>double</span></span>
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='temp.dep.general-4.sentence-2' class='sentence'>The type name
<span class='texttt'>A</span>
in the definition of
<span class='texttt'>X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
binds to the typedef name defined in the global
namespace scope, not to the typedef name
defined in the base class
<span class='texttt'>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#temp.dep.general-4.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='temp.dep.general-example-3' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.general-example-3'><span class='textit'>Example&nbsp;3</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> a;
  <span class='keyword'>int</span> Y;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> a;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='operator'>:</span> T <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  B b;                          <span class='comment'>// The <span class='tcode_in_codeblock'>B</span> defined in <span class='tcode_in_codeblock'>Y</span></span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> a <span class='operator'>=</span> i; <span class='curlybracket'>}</span>      <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;a</span></span>
  Y<span class='operator'>*</span> p;                         <span class='comment'>// <span class='tcode_in_codeblock'>Y&lt;T&gt;</span></span>
<span class='curlybracket'>}</span>;

Y<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span> ya;
</span></div><div class='texpara'><div id='temp.dep.general-4.sentence-3' class='sentence'>The members
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>B</span>,
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>a</span>,
and
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>Y</span>
of the template argument
<span class='texttt'>A</span>
do not affect the binding of names in
<span class='texttt'>Y<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#temp.dep.general-4.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.dep.type' class='section'><h4 ><a class='secnum' href='#temp.dep.type' style='min-width:95pt'>13.8.3.2</a> Dependent types <a class='abbr_ref' href='temp.dep.type'>[temp.dep.type]</a></h4><div class='para' id='temp.dep.type-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5013'>#</a></div><div class='texpara'><div id='temp.dep.type-1.sentence-1' class='sentence'>A name refers to the
<a class='hidden_link' href='#def:current_instantiation' title='13.8.3.2&emsp;Dependent types&emsp;[temp.dep.type]'><span id='def:current_instantiation'><span class='textit'>current instantiation</span></span></a>
if it is
<ul class='itemize'><li id='temp.dep.type-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-1.1'>(1.1)</a></div>in the definition of a class template, a nested class of a class template,
a member of a class template, or a member of a nested class of a class template,
the <a href='class.pre#def:injected-class-name' title='11.1&emsp;Preamble&emsp;[class.pre]'>injected-class-name</a> of the class template or nested class,</li><li id='temp.dep.type-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-1.2'>(1.2)</a></div>in the definition of a primary class template
or a member of a primary class template, the name of the
class template followed by the template argument list of the
primary template (as described below) enclosed in
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span> (or an equivalent template alias specialization),</li><li id='temp.dep.type-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-1.3'>(1.3)</a></div>in the definition of a nested class of a class template,
the name of the nested class referenced as a member of the
current instantiation, or</li><li id='temp.dep.type-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-1.4'>(1.4)</a></div>in the definition of a partial specialization
or a member of a partial specialization, the name of
the class template followed by the template argument list of
the partial specialization enclosed in
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span> (or an equivalent template alias specialization)<a class='hidden_link' href='#temp.dep.type-1.sentence-1'>.</a> <div class='texpara'><div id='temp.dep.type-1.4.sentence-2' class='sentence'>If the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> template parameter is
a template parameter pack, the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> template argument is a pack
expansion (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>) whose pattern is the name of
the template parameter pack<a class='hidden_link' href='#temp.dep.type-1.4.sentence-2'>.</a></div></div></li></ul></div></div></div><div class='para' id='temp.dep.type-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5044'>#</a></div><div class='texpara'><div id='temp.dep.type-2.sentence-1' class='sentence'>The template argument list of a primary template is a
template argument list in which the
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span>
template argument has the value of the
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span>
template parameter of the class template<a class='hidden_link' href='#temp.dep.type-2.sentence-1'>.</a></div> <div id='temp.dep.type-2.sentence-2' class='sentence'>If the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> template parameter is a
<a href='temp.variadic#def:template_parameter_pack' title='13.7.4&emsp;Variadic templates&emsp;[temp.variadic]'>template parameter pack</a>, the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> template argument is a
<a href='temp.variadic#def:pack_expansion' title='13.7.4&emsp;Variadic templates&emsp;[temp.variadic]'>pack expansion</a> whose pattern is the name of
the template parameter pack<a class='hidden_link' href='#temp.dep.type-2.sentence-2'>.</a></div></div></div><div class='para' id='temp.dep.type-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5056'>#</a></div><div class='texpara'><div id='temp.dep.type-3.sentence-1' class='sentence'>A template argument that is equivalent to a template
parameter can be used in place of that
template parameter in a reference to the current instantiation<a class='hidden_link' href='#temp.dep.type-3.sentence-1'>.</a></div> <div id='temp.dep.type-3.sentence-2' class='sentence'>For a template <a href='temp.param#nt:type-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-parameter_'><span class='textsf'><span class='textit'>type-parameter</span></span></span></a>,
a template argument is equivalent to a template parameter
if it denotes the same type<a class='hidden_link' href='#temp.dep.type-3.sentence-2'>.</a></div> <div id='temp.dep.type-3.sentence-3' class='sentence'>For a non-type template parameter,
a template argument is equivalent to a template parameter
if it is an <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier__'><span class='textsf'><span class='textit'>identifier</span></span></span></a> that names a variable
that is equivalent to the template parameter<a class='hidden_link' href='#temp.dep.type-3.sentence-3'>.</a></div> <div id='temp.dep.type-3.sentence-4' class='sentence'>A variable is equivalent to a template parameter if
<ul class='itemize'><li id='temp.dep.type-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-3.1'>(3.1)</a></div>it has the same type as the template parameter
  (ignoring cv-qualification) and</li><li id='temp.dep.type-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-3.2'>(3.2)</a></div>its initializer consists of a single <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier___'><span class='textsf'><span class='textit'>identifier</span></span></span></a>
  that names the template parameter or, recursively, such a variable<a class='hidden_link' href='#temp.dep.type-3.sentence-4'>.</a></li></ul></div> <div id='temp.dep.type-note-1' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.type-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='temp.dep.type-3.sentence-5' class='sentence'>Using a parenthesized variable name breaks the equivalence<a class='hidden_link' href='#temp.dep.type-3.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.dep.type-example-1' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.type-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  A<span class='operator'>*</span> p1;                        <span class='comment'>// <span class='tcode_in_codeblock'>A</span> is the current instantiation</span>
  A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p2;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;</span> is the current instantiation</span>
  A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> p3;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;</span> is not the current instantiation</span>
  <span class='operator'>::</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p4;                   <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;A&lt;T&gt;</span> is the current instantiation</span>
  <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    B<span class='operator'>*</span> p1;                      <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is the current instantiation</span>
    A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>*</span> p2;                <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;B</span> is the current instantiation</span>
    <span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>*</span> p3;      <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;&#x200b;::&#x200b;B</span> is not the current instantiation</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p1;                    <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;</span> is the current instantiation</span>
  A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p2;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;</span> is not the current instantiation</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  B<span class='anglebracket'>&lt;</span>T1, T2, I<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b1;             <span class='comment'>// refers to the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>T2, T1, I<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b2;             <span class='comment'>// not the current instantiation</span>
  <span class='keyword'>typedef</span> T1 my_T1;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> my_I <span class='operator'>=</span> I;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> my_I2 <span class='operator'>=</span> I<span class='operator'>+</span><span class='literal'>0</span>;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> my_I3 <span class='operator'>=</span> my_I;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>long</span> my_I4 <span class='operator'>=</span> I;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> my_I5 <span class='operator'>=</span> <span class='parenthesis'>(</span>I<span class='parenthesis'>)</span>;
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b3;       <span class='comment'>// refers to the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I2<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b4;      <span class='comment'>// not the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I3<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b5;      <span class='comment'>// refers to the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I4<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b6;      <span class='comment'>// not the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I5<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b7;      <span class='comment'>// not the current instantiation</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.dep.type-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5116'>#</a></div><div class='texpara'><div id='temp.dep.type-4.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:base_class,dependent' title='13.8.3.2&emsp;Dependent types&emsp;[temp.dep.type]'><span id='def:base_class,dependent'><span class='textit'>dependent base class</span></span></a> is a base class that is a dependent type and is
not the current instantiation<a class='hidden_link' href='#temp.dep.type-4.sentence-1'>.</a></div> <div id='temp.dep.type-note-2' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.type-note-2'><span class='textit'>Note&nbsp;2</span></a><span class='textit'>:</span> <div id='temp.dep.type-4.sentence-2' class='sentence'>A base class can be the current instantiation in the case of a nested class
naming an enclosing class as a base<a class='hidden_link' href='#temp.dep.type-4.sentence-2'>.</a></div> <div id='temp.dep.type-example-2' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.type-example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> M;
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>typedef</span> <span class='keyword'>void</span> M;
    <span class='keyword'>struct</span> C;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>::</span>C <span class='operator'>:</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  M m;                          <span class='comment'>// OK, <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;M</span></span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.dep.type-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5140'>#</a></div><div class='texpara'><div id='temp.dep.type-5.sentence-1' class='sentence'>A name is a
<a class='hidden_link' href='#def:current_instantiation,member_of_the' title='13.8.3.2&emsp;Dependent types&emsp;[temp.dep.type]'><span id='def:current_instantiation,member_of_the'><span class='textit'>member of the current instantiation</span></span></a>
if it is
<ul class='itemize'><li id='temp.dep.type-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-5.1'>(5.1)</a></div><div class='texpara'><div id='temp.dep.type-5.1.sentence-1' class='sentence'>An unqualified name that, when looked up, refers to
at least one member of a class that is
the current instantiation or a non-dependent base class thereof<a class='hidden_link' href='#temp.dep.type-5.1.sentence-1'>.</a></div> <div id='temp.dep.type-note-3' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.type-note-3'><span class='textit'>Note&nbsp;3</span></a><span class='textit'>:</span> <div id='temp.dep.type-5.1.sentence-2' class='sentence'>This can only occur when looking up a name in a scope enclosed by the
definition of a class template<a class='hidden_link' href='#temp.dep.type-5.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='temp.dep.type-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-5.2'>(5.2)</a></div><div class='texpara'><div id='temp.dep.type-5.2.sentence-1' class='sentence'>A
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id___'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>
in which the
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier____'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a>
refers to the current instantiation
and that, when looked up, refers to at least one member of a class that is
the current
instantiation or a non-dependent base class thereof<a class='hidden_link' href='#temp.dep.type-5.2.sentence-1'>.</a></div> <div id='temp.dep.type-note-4' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.type-note-4'><span class='textit'>Note&nbsp;4</span></a><span class='textit'>:</span> <div id='temp.dep.type-5.2.sentence-2' class='sentence'>If no such
member is found, and the current instantiation has any dependent base classes,
then the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id____'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> is a member of an unknown specialization;
see below<a class='hidden_link' href='#temp.dep.type-5.2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='temp.dep.type-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-5.3'>(5.3)</a></div><div class='texpara'><div id='temp.dep.type-5.3.sentence-1' class='sentence'>An <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><span class='textit'>id-expression</span></span></span></a> denoting the member in a <a href='expr.ref' title='7.6.1.5&emsp;Class member access&emsp;[expr.ref]'>class member access</a>
expression for which the type of the object expression is the
current instantiation, and the <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_'><span class='textsf'><span class='textit'>id-expression</span></span></span></a>, when <a href='basic.lookup.classref' title='6.5.6&emsp;Class member access&emsp;[basic.lookup.classref]'>looked
up</a>, refers to at least one member of a class
that is the current
instantiation or a non-dependent base class thereof<a class='hidden_link' href='#temp.dep.type-5.3.sentence-1'>.</a></div> <div id='temp.dep.type-note-5' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.type-note-5'><span class='textit'>Note&nbsp;5</span></a><span class='textit'>:</span> <div id='temp.dep.type-5.3.sentence-2' class='sentence'>If no such
member is found, and the current instantiation has any dependent base classes,
then the <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression__'><span class='textsf'><span class='textit'>id-expression</span></span></span></a> is a member of an unknown specialization;
see below<a class='hidden_link' href='#temp.dep.type-5.3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul></div></div><div class='texpara'><div id='temp.dep.type-example-3' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.type-example-3'><span class='textit'>Example&nbsp;3</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>5</span>;
  <span class='keyword'>int</span> n1<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>;                    <span class='comment'>// <span class='tcode_in_codeblock'>i</span> refers to a member of the current instantiation</span>
  <span class='keyword'>int</span> n2<span class='squarebracket'>[</span>A<span class='operator'>::</span>i<span class='squarebracket'>]</span>;                 <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span> refers to a member of the current instantiation</span>
  <span class='keyword'>int</span> n3<span class='squarebracket'>[</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>i<span class='squarebracket'>]</span>;              <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;i</span> refers to a member of the current instantiation</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> i;                     <span class='comment'>// <span class='tcode_in_codeblock'>i</span> refers to a member of the current instantiation</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='temp.dep.type-5.sentence-2' class='sentence'>A name is a <a class='hidden_link' href='#def:current_instantiation,dependent_member_of_the' title='13.8.3.2&emsp;Dependent types&emsp;[temp.dep.type]'><span id='def:current_instantiation,dependent_member_of_the'><span class='textit'>dependent member of the current instantiation</span></span></a> if it is a
member of the current instantiation that, when looked up, refers to at least
one member of a class that is the current instantiation<a class='hidden_link' href='#temp.dep.type-5.sentence-2'>.</a></div></div></div><div class='para' id='temp.dep.type-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5206'>#</a></div><div class='texpara'><div id='temp.dep.type-6.sentence-1' class='sentence'>A name is a
<a class='hidden_link' href='#def:member_of_an_unknown_specialization' title='13.8.3.2&emsp;Dependent types&emsp;[temp.dep.type]'><span id='def:member_of_an_unknown_specialization'><span class='textit'>member of an unknown specialization</span></span></a>
if it is
<ul class='itemize'><li id='temp.dep.type-6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-6.1'>(6.1)</a></div><div class='texpara'><div id='temp.dep.type-6.1.sentence-1' class='sentence'>A
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_____'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>
in which the
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_____'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a>
names a dependent type that is not the current instantiation<a class='hidden_link' href='#temp.dep.type-6.1.sentence-1'>.</a></div></div></li><li id='temp.dep.type-6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-6.2'>(6.2)</a></div><div class='texpara'><div id='temp.dep.type-6.2.sentence-1' class='sentence'>A <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id______'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> in which the <a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier______'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a>
refers to the current instantiation, the current instantiation has at least one
dependent base class, and name lookup of the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_______'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> does not
find any member of a class that is the current instantiation or a non-dependent
base class thereof<a class='hidden_link' href='#temp.dep.type-6.2.sentence-1'>.</a></div></div></li><li id='temp.dep.type-6.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-6.3'>(6.3)</a></div><div class='texpara'><div id='temp.dep.type-6.3.sentence-1' class='sentence'>An <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression___'><span class='textsf'><span class='textit'>id-expression</span></span></span></a> denoting the member in a
<a href='expr.ref' title='7.6.1.5&emsp;Class member access&emsp;[expr.ref]'>class member access</a> expression in which either
<ul class='itemize'><li id='temp.dep.type-6.3.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#temp.dep.type-6.3.1'>(6.3.1)</a></div>the type of the object expression is the current instantiation, the
current instantiation has at least one dependent base class, and name lookup
of the <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression____'><span class='textsf'><span class='textit'>id-expression</span></span></span></a> does not find a member of a class that is
the current instantiation or a non-dependent base class thereof; or</li><li id='temp.dep.type-6.3.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#temp.dep.type-6.3.2'>(6.3.2)</a></div>the type of the object expression is not the current instantiation
and the object expression is type-dependent<a class='hidden_link' href='#temp.dep.type-6.3.sentence-1'>.</a></li></ul></div></div></li></ul></div></div></div><div class='para' id='temp.dep.type-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5237'>#</a></div><div class='texpara'><div id='temp.dep.type-7.sentence-1' class='sentence'>If a <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id________'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> in which the <a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_______'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a>
refers to the current instantiation is not a member of the current instantiation
or a member of an unknown specialization, the program is ill-formed even if the
template containing the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_________'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> is not instantiated; no
diagnostic required<a class='hidden_link' href='#temp.dep.type-7.sentence-1'>.</a></div> <div id='temp.dep.type-7.sentence-2' class='sentence'>Similarly, if the <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_____'><span class='textsf'><span class='textit'>id-expression</span></span></span></a> in a class
member access expression for which the type of the object expression is the
current instantiation does not refer to a member of the current instantiation
or a member of an unknown specialization, the program is ill-formed even if the
template containing the member access expression is not instantiated; no diagnostic
required<a class='hidden_link' href='#temp.dep.type-7.sentence-2'>.</a></div> <div id='temp.dep.type-example-4' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.type-example-4'><span class='textit'>Example&nbsp;4</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> type;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>type i;               <span class='comment'>// OK: refers to a member of the current instantiation</span>
    <span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>other j;     <span class='comment'>// error: neither a member of the current instantiation nor</span>
                                <span class='comment'>// a member of an unknown specialization</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.dep.type-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5261'>#</a></div><div class='texpara'><div id='temp.dep.type-8.sentence-1' class='sentence'>If, for a given set of template arguments, a specialization of a template is
instantiated that refers to a member of the current instantiation with a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__________'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> or class member access expression, the name in the
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id___________'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> or class member access expression is looked up in the
template instantiation context<a class='hidden_link' href='#temp.dep.type-8.sentence-1'>.</a></div> <div id='temp.dep.type-8.sentence-2' class='sentence'>If the result of this lookup differs from the
result of name lookup in the template definition context, name lookup is
ambiguous<a class='hidden_link' href='#temp.dep.type-8.sentence-2'>.</a></div> <div id='temp.dep.type-example-5' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.type-example-5'><span class='textit'>Example&nbsp;5</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> C <span class='operator'>:</span> A, T <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>m; <span class='curlybracket'>}</span>   <span class='comment'>// finds <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> in the template definition context</span>
  <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> m; <span class='curlybracket'>}</span>         <span class='comment'>// finds <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> in the template definition context</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='keyword'>int</span> C<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// error: finds both <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> and <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;m</span></span>
<span class='keyword'>template</span> <span class='keyword'>int</span> C<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK: transformation to class member access syntax</span>
                            <span class='comment'>// does not occur in the template definition context; see <a href='class.mfct.non-static' title='11.4.3&emsp;Non-static member functions'>[class.<span class='shy'></span>mfct.<span class='shy'></span>non-static]</a></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.dep.type-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5291'>#</a></div><div class='texpara'><div id='temp.dep.type-9.sentence-1' class='sentence'>A type is dependent if it is
<ul class='itemize'><li id='temp.dep.type-9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.1'>(9.1)</a></div>a template parameter,</li><li id='temp.dep.type-9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.2'>(9.2)</a></div>a member of an unknown specialization,</li><li id='temp.dep.type-9.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.3'>(9.3)</a></div>a nested class or enumeration that is a dependent member of the current
instantiation,</li><li id='temp.dep.type-9.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.4'>(9.4)</a></div>a cv-qualified type where the cv-unqualified type is dependent,</li><li id='temp.dep.type-9.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.5'>(9.5)</a></div>a compound type constructed from any dependent type,</li><li id='temp.dep.type-9.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.6'>(9.6)</a></div>an array type whose element type is dependent or whose
bound (if any) is value-dependent,</li><li id='temp.dep.type-9.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.7'>(9.7)</a></div>a function type whose exception specification is value-dependent,</li><li id='temp.dep.type-9.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.8'>(9.8)</a></div>denoted by a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id___'><span class='textsf'><span class='textit'>simple-template-id</span></span></span></a>
in which either the template name is a template parameter or any of the
template arguments is a dependent type or an expression that is type-dependent
or value-dependent or is a pack expansion,<a class='footnotenum' href='#footnote-141' id='footnoteref-141' title='This includes an injected-class-name ([class.pre]) of a class template used without a template-argument-list.'>141</a>
or</li><li id='temp.dep.type-9.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.type-9.9'>(9.9)</a></div>denoted by <span class='texttt'><span class='keyword'>decltype</span><span class='parenthesis'>(</span></span><a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><span class='textit'>expression</span></span></span></a><span class='texttt'><span class='parenthesis'>)</span></span>,
where <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_'><span class='textsf'><span class='textit'>expression</span></span></span></a> is <a href='#temp.dep.expr' title='13.8.3.3&emsp;Type-dependent expressions&emsp;[temp.dep.expr]'>type-dependent</a><a class='hidden_link' href='#temp.dep.type-9.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='temp.dep.type-10'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5322'>#</a></div><div class='texpara'><div id='temp.dep.type-note-6' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.type-note-6'><span class='textit'>Note&nbsp;6</span></a><span class='textit'>:</span> <div id='temp.dep.type-10.sentence-1' class='sentence'>Because typedefs do not introduce new types, but
instead simply refer to other types, a name that refers to a
typedef that is a member of the current instantiation is dependent
only if the type referred to is dependent<a class='hidden_link' href='#temp.dep.type-10.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnote' id='footnote-141'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-141'>141)</a></div><div class='texpara'><div id='footnote-141.sentence-1' class='sentence'>This includes an injected-class-name (<a href='class.pre' title='11.1&emsp;Preamble'>[class.<span class='shy'></span>pre]</a>) of a class template
used without a <a href='temp.names#nt:template-argument-list' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument-list_'><span class='textsf'><span class='textit'>template-argument-list</span></span></span></a><a class='hidden_link' href='#footnote-141.sentence-1'>.</a></div>&nbsp;<a href='#footnoteref-141'>⮥</a></div></div></div><div id='temp.dep.expr' class='section'><h4 ><a class='secnum' href='#temp.dep.expr' style='min-width:95pt'>13.8.3.3</a> Type-dependent expressions <a class='abbr_ref' href='temp.dep.expr'>[temp.dep.expr]</a></h4><div class='para' id='temp.dep.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5332'>#</a></div><div class='texpara'><div id='temp.dep.expr-1.sentence-1' class='sentence'>Except as described below, an expression is type-dependent if any
subexpression is type-dependent<a class='hidden_link' href='#temp.dep.expr-1.sentence-1'>.</a></div></div></div><div class='para' id='temp.dep.expr-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5336'>#</a></div><div class='texpara'><div id='temp.dep.expr-2.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>this</span></span>
is type-dependent if the class type of the enclosing member function is
dependent (<a href='#temp.dep.type' title='13.8.3.2&emsp;Dependent types'>[temp.<span class='shy'></span>dep.<span class='shy'></span>type]</a>)<a class='hidden_link' href='#temp.dep.expr-2.sentence-1'>.</a></div></div></div><div class='para' id='temp.dep.expr-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5341'>#</a></div><div class='texpara'><div id='temp.dep.expr-3.sentence-1' class='sentence'>An
<a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression______'><span class='textsf'><span class='textit'>id-expression</span></span></span></a>
is type-dependent if it is not a concept-id and it contains
<ul class='itemize'><li id='temp.dep.expr-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.1'>(3.1)</a></div>an
<a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier____'><span class='textsf'><span class='textit'>identifier</span></span></span></a>
associated by name lookup with one or more declarations
declared with a dependent type,</li><li id='temp.dep.expr-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.2'>(3.2)</a></div>an
<a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_____'><span class='textsf'><span class='textit'>identifier</span></span></span></a>
associated by name lookup with
a non-type <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter______________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
declared with a type
that contains a <a href='dcl.spec.auto#def:placeholder_type' title='9.2.9.6&emsp;Placeholder type specifiers&emsp;[dcl.spec.auto]'>placeholder type</a>,</li><li id='temp.dep.expr-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.3'>(3.3)</a></div>an
<a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier______'><span class='textsf'><span class='textit'>identifier</span></span></span></a>
associated by name lookup with
a variable declared with a type that contains a placeholder type (<a href='dcl.spec.auto' title='9.2.9.6&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>)
where the initializer is type-dependent,</li><li id='temp.dep.expr-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.4'>(3.4)</a></div>an <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_______'><span class='textsf'><span class='textit'>identifier</span></span></span></a> associated by name lookup with one or more
declarations of member functions of the current instantiation declared
with a return type that contains a placeholder type,</li><li id='temp.dep.expr-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.5'>(3.5)</a></div>an <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier________'><span class='textsf'><span class='textit'>identifier</span></span></span></a> associated by name lookup with
a <a href='dcl.struct.bind' title='9.6&emsp;Structured binding declarations&emsp;[dcl.struct.bind]'>structured binding declaration</a> whose
<a href='dcl.init.general#nt:brace-or-equal-initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:brace-or-equal-initializer'><span class='textsf'><span class='textit'>brace-or-equal-initializer</span></span></span></a> is type-dependent,</li><li id='temp.dep.expr-3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.6'>(3.6)</a></div>the
<a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_________'><span class='textsf'><span class='textit'>identifier</span></span></span></a>
<span class='texttt'>__func__</span> (<a href='dcl.fct.def.general' title='9.5.1&emsp;In general'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>general]</a>), where any enclosing function is a
template, a member of a class template, or a generic lambda,</li><li id='temp.dep.expr-3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.7'>(3.7)</a></div>a
<a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id_'><span class='textsf'><span class='textit'>template-id</span></span></span></a>
that is dependent,</li><li id='temp.dep.expr-3.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.8'>(3.8)</a></div>a
<a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id'><span class='textsf'><span class='textit'>conversion-function-id</span></span></span></a>
that specifies a dependent type, or</li><li id='temp.dep.expr-3.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.expr-3.9'>(3.9)</a></div>a
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier________'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a>
or a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id____________'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>
that names a member of an unknown specialization;</li></ul>
or if it names a dependent member of the current instantiation that is a static
data member of type
“array of unknown bound of <span class='texttt'>T</span>” for some <span class='texttt'>T</span> (<a href='temp.static' title='13.7.2.5&emsp;Static data members of class templates'>[temp.<span class='shy'></span>static]</a>)<a class='hidden_link' href='#temp.dep.expr-3.sentence-1'>.</a></div> <div id='temp.dep.expr-3.sentence-2' class='sentence'>Expressions of the following forms are type-dependent only if the type
specified by the
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id____'><span class='textsf'><span class='textit'>type-id</span></span></span></a>,
<a href='dcl.type.simple#nt:simple-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:simple-type-specifier_'><span class='textsf'><span class='textit'>simple-type-specifier</span></span></span></a>
or
<a href='expr.new#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id___'><span class='textsf'><span class='textit'>new-type-id</span></span></span></a>
is dependent, even if any subexpression is type-dependent:
<div class='ncsimplebnf'>
<a href='dcl.type.simple#nt:simple-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:simple-type-specifier__'><span class='textsf'><span class='textit'>simple-type-specifier</span></span></span></a> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list___'><span class='textsf'><span class='textit'>expression-list</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span class='terminal'><span class='operator'>::</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span id=':new'><span class='texttt'><span class='keyword'>new</span></span></span> <a href='expr.new#nt:new-placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-placement'><span class='textsf'><span class='textit'>new-placement</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='expr.new#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id____'><span class='textsf'><span class='textit'>new-type-id</span></span></span></a> <a href='expr.new#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer'><span class='textsf'><span class='textit'>new-initializer</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><span class='terminal'><span class='operator'>::</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span id=':new_'><span class='texttt'><span class='keyword'>new</span></span></span> <a href='expr.new#nt:new-placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-placement_'><span class='textsf'><span class='textit'>new-placement</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_____'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <a href='expr.new#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer_'><span class='textsf'><span class='textit'>new-initializer</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><span id=':dynamic_cast'><span class='texttt'><span class='keyword'>dynamic_&shy;cast</span></span></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id______'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression__'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':static_cast'><span class='texttt'><span class='keyword'>static_&shy;cast</span></span></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_______'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression___'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':const_cast'><span class='texttt'><span class='keyword'>const_&shy;cast</span></span></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression____'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':reinterpret_cast'><span class='texttt'><span class='keyword'>reinterpret_&shy;cast</span></span></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_____'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id__________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression'><span class='textsf'><span class='textit'>cast-expression</span></span></span></a>
</div></div></div></div><div class='para' id='temp.dep.expr-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5413'>#</a></div><div class='texpara'><div id='temp.dep.expr-4.sentence-1' class='sentence'>Expressions of the following forms are never type-dependent (because the type
of the expression cannot be dependent):
<div class='ncsimplebnf'>
<a href='lex.literal.kinds#nt:literal' title='5.13.1&emsp;Kinds of literals&emsp;[lex.literal.kinds]'><span id='ntref:literal'><span class='textsf'><span class='textit'>literal</span></span></span></a><br/><span id=':sizeof'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <a href='expr.unary.general#nt:unary-expression' title='7.6.2.1&emsp;General&emsp;[expr.unary.general]'><span id='ntref:unary-expression'><span class='textsf'><span class='textit'>unary-expression</span></span></span></a><br/><span id=':sizeof_'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id___________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':sizeof__'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier__________'><span class='textsf'><span class='textit'>identifier</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':alignof'><span class='texttt'><span class='keyword'>alignof</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id____________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':typeid'><span class='texttt'><span class='keyword'>typeid</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression______'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':typeid_'><span class='texttt'><span class='keyword'>typeid</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_____________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span class='terminal'><span class='operator'>::</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span id=':delete'><span class='texttt'><span class='keyword'>delete</span></span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression_'><span class='textsf'><span class='textit'>cast-expression</span></span></span></a><br/><span class='terminal'><span class='operator'>::</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span id=':delete_'><span class='texttt'><span class='keyword'>delete</span></span></span> <span class='terminal'><span class='squarebracket'>[</span></span> <span class='terminal'><span class='squarebracket'>]</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression__'><span class='textsf'><span class='textit'>cast-expression</span></span></span></a><br/><span id=':throw'><span class='texttt'><span class='keyword'>throw</span></span></span> <a href='expr.ass#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='ntref:assignment-expression'><span class='textsf'><span class='textit'>assignment-expression</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_______'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span>
</div></div></div><div class='texpara'><div id='temp.dep.expr-note-1' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.expr-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='temp.dep.expr-4.sentence-2' class='sentence'>For the standard library macro <span class='texttt'>offsetof</span>,
see <a href='support.types' title='17.2&emsp;Common definitions'>[support.<span class='shy'></span>types]</a><a class='hidden_link' href='#temp.dep.expr-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.dep.expr-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5435'>#</a></div><div class='texpara'><div id='temp.dep.expr-5.sentence-1' class='sentence'>A <a href='expr.ref' title='7.6.1.5&emsp;Class member access&emsp;[expr.ref]'>class member access expression</a> is
type-dependent if
the expression refers to a member of the current instantiation and
the type of the referenced member is dependent, or the class member access
expression refers to a member of an unknown specialization<a class='hidden_link' href='#temp.dep.expr-5.sentence-1'>.</a></div> <div id='temp.dep.expr-note-2' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.expr-note-2'><span class='textit'>Note&nbsp;2</span></a><span class='textit'>:</span> <div id='temp.dep.expr-5.sentence-2' class='sentence'>In an expression of the form
<span class='texttt'>x<span class='operator'>.</span>y</span>
or
<span class='texttt'>xp<span class='operator'>-</span><span class='anglebracket'>&gt;</span>y</span>
the type of the expression is usually the type of the member
<span class='texttt'>y</span>
of the class of
<span class='texttt'>x</span>
(or the class pointed to by
<span class='texttt'>xp</span>)<a class='hidden_link' href='#temp.dep.expr-5.sentence-2'>.</a></div> <div id='temp.dep.expr-5.sentence-3' class='sentence'>However, if
<span class='texttt'>x</span>
or
<span class='texttt'>xp</span>
refers to a dependent type that is not the current instantiation,
the type of
<span class='texttt'>y</span>
is always dependent<a class='hidden_link' href='#temp.dep.expr-5.sentence-3'>.</a></div> <div id='temp.dep.expr-5.sentence-4' class='sentence'>If
<span class='texttt'>x</span>
or <span class='texttt'>xp</span>
refers to a non-dependent type or refers to the current instantiation, the
type of
<span class='texttt'>y</span>
is the type of the class member access expression<a class='hidden_link' href='#temp.dep.expr-5.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.dep.expr-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5468'>#</a></div><div class='texpara'><div id='temp.dep.expr-6.sentence-1' class='sentence'>A <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list_'><span class='textsf'><span class='textit'>braced-init-list</span></span></span></a> is type-dependent if any element is
type-dependent or is a pack expansion<a class='hidden_link' href='#temp.dep.expr-6.sentence-1'>.</a></div></div></div><div class='para' id='temp.dep.expr-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5472'>#</a></div><div class='texpara'><div id='temp.dep.expr-7.sentence-1' class='sentence'>A <a href='expr.prim.fold#nt:fold-expression' title='7.5.6&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-expression'><span class='textsf'><span class='textit'>fold-expression</span></span></span></a> is type-dependent<a class='hidden_link' href='#temp.dep.expr-7.sentence-1'>.</a></div></div></div></div><div id='temp.dep.constexpr' class='section'><h4 ><a class='secnum' href='#temp.dep.constexpr' style='min-width:95pt'>13.8.3.4</a> Value-dependent expressions <a class='abbr_ref' href='temp.dep.constexpr'>[temp.dep.constexpr]</a></h4><div class='para' id='temp.dep.constexpr-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5477'>#</a></div><div class='texpara'><div id='temp.dep.constexpr-1.sentence-1' class='sentence'>Except as described below, an expression used in a context where a
constant expression is required is value-dependent if any
subexpression is value-dependent<a class='hidden_link' href='#temp.dep.constexpr-1.sentence-1'>.</a></div></div></div><div class='para' id='temp.dep.constexpr-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5482'>#</a></div><div class='texpara'><div id='temp.dep.constexpr-2.sentence-1' class='sentence'>An
<a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_______'><span class='textsf'><span class='textit'>id-expression</span></span></span></a>
is value-dependent if:
<ul class='itemize'><li id='temp.dep.constexpr-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.constexpr-2.1'>(2.1)</a></div>it is a concept-id and any of its arguments are dependent,</li><li id='temp.dep.constexpr-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.constexpr-2.2'>(2.2)</a></div>it is type-dependent,</li><li id='temp.dep.constexpr-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.constexpr-2.3'>(2.3)</a></div>it is the name of a non-type template parameter,</li><li id='temp.dep.constexpr-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.constexpr-2.4'>(2.4)</a></div>it names a static data member that is a dependent member of the current
instantiation and is not initialized in a <a href='class.mem.general#nt:member-declarator' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-declarator'><span class='textsf'><span class='textit'>member-declarator</span></span></span></a>,</li><li id='temp.dep.constexpr-2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.constexpr-2.5'>(2.5)</a></div>it names a static member function that is a dependent member of the current
instantiation, or</li><li id='temp.dep.constexpr-2.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.dep.constexpr-2.6'>(2.6)</a></div>it names a potentially-constant variable (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)
that is initialized with an expression that is value-dependent<a class='hidden_link' href='#temp.dep.constexpr-2.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='temp.dep.constexpr-2.sentence-2' class='sentence'>Expressions of the following form are value-dependent if the
<a href='expr.unary.general#nt:unary-expression' title='7.6.2.1&emsp;General&emsp;[expr.unary.general]'><span id='ntref:unary-expression_'><span class='textsf'><span class='textit'>unary-expression</span></span></span></a> or <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression________'><span class='textsf'><span class='textit'>expression</span></span></span></a>
is type-dependent or the
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id______________'><span class='textsf'><span class='textit'>type-id</span></span></span></a>
is dependent:
<div class='ncsimplebnf'>
<span id=':sizeof___'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <a href='expr.unary.general#nt:unary-expression' title='7.6.2.1&emsp;General&emsp;[expr.unary.general]'><span id='ntref:unary-expression__'><span class='textsf'><span class='textit'>unary-expression</span></span></span></a><br/><span id=':sizeof____'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_______________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':typeid__'><span class='texttt'><span class='keyword'>typeid</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_________'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':typeid___'><span class='texttt'><span class='keyword'>typeid</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id________________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':alignof_'><span class='texttt'><span class='keyword'>alignof</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_________________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':noexcept_'><span class='texttt'><span class='keyword'>noexcept</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression__________'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span>
</div></div></div><div class='texpara'><div id='temp.dep.constexpr-note-1' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.constexpr-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='temp.dep.constexpr-2.sentence-3' class='sentence'>For the standard library macro <span class='texttt'>offsetof</span>,
see <a href='support.types' title='17.2&emsp;Common definitions'>[support.<span class='shy'></span>types]</a><a class='hidden_link' href='#temp.dep.constexpr-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.dep.constexpr-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5523'>#</a></div><div class='texpara'><div id='temp.dep.constexpr-3.sentence-1' class='sentence'>Expressions of the following form are value-dependent if either the
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id__________________'><span class='textsf'><span class='textit'>type-id</span></span></span></a>
or
<a href='dcl.type.simple#nt:simple-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:simple-type-specifier___'><span class='textsf'><span class='textit'>simple-type-specifier</span></span></span></a>
is dependent or the
<a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression___________'><span class='textsf'><span class='textit'>expression</span></span></span></a>
or
<a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression___'><span class='textsf'><span class='textit'>cast-expression</span></span></span></a>
is value-dependent:
<div class='ncsimplebnf'>
<a href='dcl.type.simple#nt:simple-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:simple-type-specifier____'><span class='textsf'><span class='textit'>simple-type-specifier</span></span></span></a> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list____'><span class='textsf'><span class='textit'>expression-list</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':static_cast_'><span class='texttt'><span class='keyword'>static_&shy;cast</span></span></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id___________________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression____________'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':const_cast_'><span class='texttt'><span class='keyword'>const_&shy;cast</span></span></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id____________________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_____________'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':reinterpret_cast_'><span class='texttt'><span class='keyword'>reinterpret_&shy;cast</span></span></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_____________________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression______________'><span class='textsf'><span class='textit'>expression</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id______________________'><span class='textsf'><span class='textit'>type-id</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression____'><span class='textsf'><span class='textit'>cast-expression</span></span></span></a>
</div></div></div></div><div class='para' id='temp.dep.constexpr-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5541'>#</a></div><div class='texpara'><div id='temp.dep.constexpr-4.sentence-1' class='sentence'>Expressions of the following form are value-dependent:
<div class='ncsimplebnf'>
<span id=':sizeof_____'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier___________'><span class='textsf'><span class='textit'>identifier</span></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><a href='expr.prim.fold#nt:fold-expression' title='7.5.6&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-expression_'><span class='textsf'><span class='textit'>fold-expression</span></span></span></a>
</div></div></div></div><div class='para' id='temp.dep.constexpr-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5548'>#</a></div><div class='texpara'><div id='temp.dep.constexpr-5.sentence-1' class='sentence'>An expression of the form <span class='texttt'><span class='operator'>&amp;</span></span><a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_____________'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> where the
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id______________'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a> names a dependent member of the current
instantiation is value-dependent<a class='hidden_link' href='#temp.dep.constexpr-5.sentence-1'>.</a></div> <div id='temp.dep.constexpr-5.sentence-2' class='sentence'>An expression of the form <span class='texttt'><span class='operator'>&amp;</span></span><a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression_____'><span class='textsf'><span class='textit'>cast-expression</span></span></span></a>
is also value-dependent if evaluating <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression______'><span class='textsf'><span class='textit'>cast-expression</span></span></span></a>
as a <a href='expr.const#def:expression,core_constant' title='7.7&emsp;Constant expressions&emsp;[expr.const]'>core constant expression</a> succeeds and
the result of the evaluation refers to a templated entity
that is an object with static or thread storage duration or a member function<a class='hidden_link' href='#temp.dep.constexpr-5.sentence-2'>.</a></div></div></div></div><div id='temp.dep.temp' class='section'><h4 ><a class='secnum' href='#temp.dep.temp' style='min-width:95pt'>13.8.3.5</a> Dependent template arguments <a class='abbr_ref' href='temp.dep.temp'>[temp.dep.temp]</a></h4><div class='para' id='temp.dep.temp-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5560'>#</a></div><div class='texpara'><div id='temp.dep.temp-1.sentence-1' class='sentence'>A type
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument___'><span class='textsf'><span class='textit'>template-argument</span></span></span></a>
is dependent if the type it specifies is dependent<a class='hidden_link' href='#temp.dep.temp-1.sentence-1'>.</a></div></div></div><div class='para' id='temp.dep.temp-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.temp-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5565'>#</a></div><div class='texpara'><div id='temp.dep.temp-2.sentence-1' class='sentence'>A non-type
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument____'><span class='textsf'><span class='textit'>template-argument</span></span></span></a>
is dependent if its type is dependent or the constant
expression it specifies is value-dependent<a class='hidden_link' href='#temp.dep.temp-2.sentence-1'>.</a></div></div></div><div class='para' id='temp.dep.temp-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.temp-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5571'>#</a></div><div class='texpara'><div id='temp.dep.temp-3.sentence-1' class='sentence'>Furthermore, a non-type
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_____'><span class='textsf'><span class='textit'>template-argument</span></span></span></a>
is dependent if the corresponding non-type <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_______________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
is of reference or pointer type and the <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument______'><span class='textsf'><span class='textit'>template-argument</span></span></span></a>
designates or points to a member of the current instantiation or a member of
a dependent type<a class='hidden_link' href='#temp.dep.temp-3.sentence-1'>.</a></div></div></div><div class='para' id='temp.dep.temp-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.temp-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5579'>#</a></div><div class='texpara'><div id='temp.dep.temp-4.sentence-1' class='sentence'>A template
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_______'><span class='textsf'><span class='textit'>template-argument</span></span></span></a>
is dependent if it names a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter________________'><span class='textsf'><span class='textit'>template-parameter</span></span></span></a>
or is a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_______________'><span class='textsf'><span class='textit'>qualified-id</span></span></span></a>
that refers to a member of an unknown specialization<a class='hidden_link' href='#temp.dep.temp-4.sentence-1'>.</a></div></div></div></div></div><div id='temp.nondep' class='section'><h3 ><a class='secnum' href='#temp.nondep' style='min-width:80pt'>13.8.4</a> Non-dependent names <a class='abbr_ref' href='temp.nondep'>[temp.nondep]</a></h3><div class='para' id='temp.nondep-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.nondep-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5590'>#</a></div><div class='texpara'><div id='temp.nondep-1.sentence-1' class='sentence'>Non-dependent names used in a template definition are found using the
usual name lookup and bound at the point they are used<a class='hidden_link' href='#temp.nondep-1.sentence-1'>.</a></div> <div id='temp.nondep-example-1' class='example'><div class='texpara'>[<a class='example_link' href='#temp.nondep-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Z <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    g<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;           <span class='comment'>// calls <span class='tcode_in_codeblock'>g(double)</span></span>
    h<span class='operator'>+</span><span class='operator'>+</span>;            <span class='comment'>// ill-formed: cannot increment function; this could be diagnosed</span>
                    <span class='comment'>// either here or at the point of instantiation</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;        <span class='comment'>// not in scope at the point of the template definition, not considered for the call <span class='tcode_in_codeblock'>g(1)</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.dep.res' class='section'><h3 ><a class='secnum' href='#temp.dep.res' style='min-width:80pt'>13.8.5</a> Dependent name resolution <a class='abbr_ref' href='temp.dep.res'>[temp.dep.res]</a></h3><div id='temp.point' class='section'><h4 ><a class='secnum' href='#temp.point' style='min-width:95pt'>13.8.5.1</a> Point of instantiation <a class='abbr_ref' href='temp.point'>[temp.point]</a></h4><div class='para' id='temp.point-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5614'>#</a></div><div class='texpara'><div id='temp.point-1.sentence-1' class='sentence'><a class='index' id=':instantiation,point_of'></a>For a function template specialization, a member function template
specialization, or a specialization for a member function or static data member
of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization and
the context from which it is referenced depends on a template parameter,
the point of instantiation of the specialization is the point of instantiation
of the enclosing specialization<a class='hidden_link' href='#temp.point-1.sentence-1'>.</a></div> <div id='temp.point-1.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
follows the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#temp.point-1.sentence-2'>.</a></div></div></div><div class='para' id='temp.point-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5628'>#</a></div><div class='texpara'><div id='temp.point-2.sentence-1' class='sentence'>If a function template or member function of a class template is called
in a way which uses the definition of a default argument of that function
template or member function,
the point of instantiation of the default argument is the point of
instantiation of the function template or member function specialization<a class='hidden_link' href='#temp.point-2.sentence-1'>.</a></div></div></div><div class='para' id='temp.point-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5635'>#</a></div><div class='texpara'><div id='temp.point-3.sentence-1' class='sentence'>For a <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier__'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> of a function template
specialization or specialization of a member function of a class template, if
the <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier___'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> is implicitly instantiated because
it is needed by another template specialization and the context that requires
it depends on a template parameter, the point of instantiation of the
<a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier____'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> is the point of instantiation of the
specialization that requires it<a class='hidden_link' href='#temp.point-3.sentence-1'>.</a></div> <div id='temp.point-3.sentence-2' class='sentence'>Otherwise, the point of instantiation for such
a <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_____'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a> immediately follows the namespace
scope declaration or definition that requires the
<a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier______'><span class='textsf'><span class='textit'>noexcept-specifier</span></span></span></a><a class='hidden_link' href='#temp.point-3.sentence-2'>.</a></div></div></div><div class='para' id='temp.point-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5649'>#</a></div><div class='texpara'><div id='temp.point-4.sentence-1' class='sentence'>For a class template specialization, a class member template specialization,
or a specialization for a class member of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization,
if the context from which the specialization is referenced depends on a
template parameter,
and if the specialization is not instantiated previous to the instantiation of
the enclosing template,
the point of instantiation is immediately before the point of instantiation of
the enclosing template<a class='hidden_link' href='#temp.point-4.sentence-1'>.</a></div> <div id='temp.point-4.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
precedes the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#temp.point-4.sentence-2'>.</a></div></div></div><div class='para' id='temp.point-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5664'>#</a></div><div class='texpara'><div id='temp.point-5.sentence-1' class='sentence'>If a virtual function is implicitly instantiated, its point of instantiation
is immediately following the point of instantiation of its enclosing class
template specialization<a class='hidden_link' href='#temp.point-5.sentence-1'>.</a></div></div></div><div class='para' id='temp.point-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5669'>#</a></div><div class='texpara'><div id='temp.point-6.sentence-1' class='sentence'>An explicit instantiation definition is an instantiation
point for the specialization or specializations specified by the explicit
instantiation<a class='hidden_link' href='#temp.point-6.sentence-1'>.</a></div></div></div><div class='para' id='temp.point-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5674'>#</a></div><div class='texpara'><div id='temp.point-7.sentence-1' class='sentence'>A specialization for a function template, a member function template,
or of a member function or static data member of a class template may have
multiple points of instantiations within a translation unit, and in addition
to the points of instantiation described above,
<ul class='itemize'><li id='temp.point-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.point-7.1'>(7.1)</a></div>for any such
specialization that has a point of instantiation within the
<a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq'><span class='textsf'><span class='textit'>declaration-seq</span></span></span></a> of the
<a href='basic.link#nt:translation-unit' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='ntref:translation-unit'><span class='textsf'><span class='textit'>translation-unit</span></span></span></a>,
prior to the <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment'><span class='textsf'><span class='textit'>private-module-fragment</span></span></span></a> (if any),
the point after the <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq_'><span class='textsf'><span class='textit'>declaration-seq</span></span></span></a>
of the <a href='basic.link#nt:translation-unit' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='ntref:translation-unit_'><span class='textsf'><span class='textit'>translation-unit</span></span></span></a>
is also considered a point of instantiation,
and</li><li id='temp.point-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.point-7.2'>(7.2)</a></div>for any such specialization that has a point of instantiation
within the <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment_'><span class='textsf'><span class='textit'>private-module-fragment</span></span></span></a>,
the end of the translation unit is also
considered a point of instantiation<a class='hidden_link' href='#temp.point-7.sentence-1'>.</a></li></ul></div> <div id='temp.point-7.sentence-2' class='sentence'>
A specialization for a class template has at most one point of instantiation
within a translation unit<a class='hidden_link' href='#temp.point-7.sentence-2'>.</a></div> <div id='temp.point-7.sentence-3' class='sentence'>A specialization for any template may have points of instantiation in multiple
translation units<a class='hidden_link' href='#temp.point-7.sentence-3'>.</a></div> <div id='temp.point-7.sentence-4' class='sentence'>If two different points of instantiation give a template specialization
different meanings according to the <a href='basic.def.odr' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'>one-definition rule</a>,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#temp.point-7.sentence-4'>.</a></div></div></div></div><div id='temp.dep.candidate' class='section'><h4 ><a class='secnum' href='#temp.dep.candidate' style='min-width:95pt'>13.8.5.2</a> Candidate functions <a class='abbr_ref' href='temp.dep.candidate'>[temp.dep.candidate]</a></h4><div class='para' id='temp.dep.candidate-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.candidate-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5706'>#</a></div><div class='texpara'><div id='temp.dep.candidate-1.sentence-1' class='sentence'><a class='index' id=':functions,candidate'></a>For a function call where the <a href='expr.post.general#nt:postfix-expression' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:postfix-expression__'><span class='textsf'><span class='textit'>postfix-expression</span></span></span></a> is a
dependent name,
the candidate functions are found using the usual lookup
rules from the template definition context
(<a href='basic.lookup.unqual' title='6.5.2&emsp;Unqualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>unqual]</a>, <a href='basic.lookup.argdep' title='6.5.3&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a>)<a class='hidden_link' href='#temp.dep.candidate-1.sentence-1'>.</a></div> <div id='temp.dep.candidate-note-1' class='note'><div class='texpara'>[<a class='note_link' href='#temp.dep.candidate-note-1'><span class='textit'>Note&nbsp;1</span></a><span class='textit'>:</span> <div id='temp.dep.candidate-1.sentence-2' class='sentence'>For the part of the lookup using associated namespaces (<a href='basic.lookup.argdep' title='6.5.3&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a>),
function declarations found in the template instantiation context
are found by this lookup, as described in <a href='basic.lookup.argdep' title='6.5.3&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a><a class='hidden_link' href='#temp.dep.candidate-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.dep.candidate-1.sentence-3' class='sentence'>
If
the call would be ill-formed or would find a better match had the lookup
within the associated namespaces considered all the function declarations with
external linkage introduced in those namespaces in all translation units,
not just considering those declarations found in the template definition and
template instantiation contexts, then the program has undefined behavior<a class='hidden_link' href='#temp.dep.candidate-1.sentence-3'>.</a></div></div></div><div class='para' id='temp.dep.candidate-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.candidate-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5725'>#</a></div><div class='texpara'><div id='temp.dep.candidate-example-1' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.candidate-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <p>Source file <span class='texttt'><span class='literal'>"X.h"</span></span>:<span class='codeblock'><span class='keyword'>namespace</span> Q <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Source file <span class='texttt'><span class='literal'>"G.h"</span></span>:<span class='codeblock'><span class='keyword'>namespace</span> Q <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> g_impl<span class='parenthesis'>(</span>X, X<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Module interface unit of <span class='texttt'>M1</span>:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"X.h"</span>
<span class='preprocessordirective'>#include</span> <span class='literal'>"G.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M1;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g_impl<span class='parenthesis'>(</span>t, Q<span class='operator'>::</span>X<span class='curlybracket'>{</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;   <span class='comment'>// ADL in definition context finds <span class='tcode_in_codeblock'>Q&#x200b;::&#x200b;g_&shy;impl</span>, <span class='tcode_in_codeblock'>g_&shy;impl</span> not discarded</span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Module interface unit of <span class='texttt'>M2</span>:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"X.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M2;
<span class='keyword'>import</span> M1;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span>Q<span class='operator'>::</span>X x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
   g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.dep.candidate-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.candidate-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5761'>#</a></div><div class='texpara'><div id='temp.dep.candidate-example-2' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.candidate-example-2'><span class='textit'>Example&nbsp;2</span></a><span class='textit'>:</span> <p>Module interface unit of <span class='texttt'>Std</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> Std;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> Iter<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> indirect_swap<span class='parenthesis'>(</span>Iter lhs, Iter rhs<span class='parenthesis'>)</span>
<span class='curlybracket'>{</span>
  swap<span class='parenthesis'>(</span><span class='operator'>*</span>lhs, <span class='operator'>*</span>rhs<span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>swap</span> not found by unqualified lookup, can be found only via ADL</span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Module interface unit of <span class='texttt'>M</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>import</span> Std;

<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='comment'>/* ...*/</span> <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> swap<span class='parenthesis'>(</span>S<span class='operator'>&amp;</span>, S<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;      <span class='comment'>// #1</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='operator'>*</span> p, S<span class='operator'>*</span> q<span class='parenthesis'>)</span>
<span class='curlybracket'>{</span>
  indirect_swap<span class='parenthesis'>(</span>p, q<span class='parenthesis'>)</span>;  <span class='comment'>// finds #1 via ADL in instantiation context</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.dep.candidate-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.candidate-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5786'>#</a></div><div class='texpara'><div id='temp.dep.candidate-example-3' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.candidate-example-3'><span class='textit'>Example&nbsp;3</span></a><span class='textit'>:</span> <p>Source file <span class='texttt'><span class='literal'>"X.h"</span></span>:<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
X <span class='keyword'>operator</span><span class='operator'>+</span><span class='parenthesis'>(</span>X, X<span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Module interface unit of <span class='texttt'>F</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> F;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  t <span class='operator'>+</span> t;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Module interface unit of <span class='texttt'>M</span>:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"X.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>import</span> F;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>X x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;             <span class='comment'>// OK: instantiates <span class='tcode_in_codeblock'>f</span> from <span class='tcode_in_codeblock'>F</span>,</span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>operator+</span> is visible in instantiation context</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.dep.candidate-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.candidate-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5813'>#</a></div><div class='texpara'><div id='temp.dep.candidate-example-4' class='example'><div class='texpara'>[<a class='example_link' href='#temp.dep.candidate-example-4'><span class='textit'>Example&nbsp;4</span></a><span class='textit'>:</span> <p>Module interface unit of <span class='texttt'>A</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  cat<span class='parenthesis'>(</span>t, t<span class='parenthesis'>)</span>;            <span class='comment'>// #1</span>
  dog<span class='parenthesis'>(</span>t, t<span class='parenthesis'>)</span>;            <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Module interface unit of <span class='texttt'>B</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> B;
<span class='keyword'>import</span> A;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t, U u<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Source file <span class='texttt'><span class='literal'>"foo.h"</span></span>, not an importable header:<span class='codeblock'><span class='keyword'>struct</span> foo <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>int</span> cat<span class='parenthesis'>(</span>foo, foo<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> dog<span class='parenthesis'>(</span>foo, foo<span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Module interface unit of <span class='texttt'>C1</span>:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"foo.h"</span>        <span class='comment'>// <span class='tcode_in_codeblock'>dog</span> not referenced, discarded</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> C1;
<span class='keyword'>import</span> B;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='parenthesis'>(</span>foo<span class='curlybracket'>{</span> <span class='curlybracket'>}</span>, t<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Translation unit:<span class='codeblock'><span class='keyword'>import</span> C1;
<span class='keyword'>void</span> i<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
   h<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                <span class='comment'>// error: <span class='tcode_in_codeblock'>dog</span> not found at #2</span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Importable header <span class='texttt'><span class='literal'>"bar.h"</span></span>:<span class='codeblock'><span class='keyword'>struct</span> bar <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>int</span> cat<span class='parenthesis'>(</span>bar, bar<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> dog<span class='parenthesis'>(</span>bar, bar<span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Module interface unit of <span class='texttt'>C2</span>:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"bar.h"</span>        <span class='comment'>// imports header unit <span class='tcode_in_codeblock'>"bar.h"</span></span>
<span class='keyword'>export</span> <span class='keyword'>module</span> C2;
<span class='keyword'>import</span> B;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> j<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='parenthesis'>(</span>bar<span class='curlybracket'>{</span> <span class='curlybracket'>}</span>, t<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Translation unit:<span class='codeblock'><span class='keyword'>import</span> C2;
<span class='keyword'>void</span> k<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
   j<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                <span class='comment'>// OK, <span class='tcode_in_codeblock'>dog</span> found in instantiation context:</span>
                        <span class='comment'>// visible at end of module interface unit of <span class='tcode_in_codeblock'>C2</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></div><div id='temp.inject' class='section'><h3 ><a class='secnum' href='#temp.inject' style='min-width:80pt'>13.8.6</a> Friend names declared within a class template <a class='abbr_ref' href='temp.inject'>[temp.inject]</a></h3><div class='para' id='temp.inject-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.inject-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5887'>#</a></div><div class='texpara'><div id='temp.inject-1.sentence-1' class='sentence'>Friend classes or functions can be declared within a class template<a class='hidden_link' href='#temp.inject-1.sentence-1'>.</a></div> <div id='temp.inject-1.sentence-2' class='sentence'>When a template is instantiated, the names of its friends are treated
as if the specialization had been explicitly declared at its point of
instantiation<a class='hidden_link' href='#temp.inject-1.sentence-2'>.</a></div></div></div><div class='para' id='temp.inject-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.inject-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/templates.tex#L5893'>#</a></div><div class='texpara'><div id='temp.inject-2.sentence-1' class='sentence'>As with non-template classes, the names of namespace-scope friend
functions of a class template specialization are not visible during
an ordinary lookup unless explicitly declared at namespace scope (<a href='class.friend' title='11.9.4&emsp;Friends'>[class.<span class='shy'></span>friend]</a>)<a class='hidden_link' href='#temp.inject-2.sentence-1'>.</a></div> <div id='temp.inject-2.sentence-2' class='sentence'>Such names may be found under the rules for associated
classes (<a href='basic.lookup.argdep' title='6.5.3&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a>)<a class='hidden_link' href='#temp.inject-2.sentence-2'>.</a><a class='footnotenum' href='#footnote-142' id='footnoteref-142' title='Friend declarations do not introduce new names into any scope, either when the template is declared or when it is instantiated.'>142</a></div> <div id='temp.inject-example-1' class='example'><div class='texpara'>[<a class='example_link' href='#temp.inject-example-1'><span class='textit'>Example&nbsp;1</span></a><span class='textit'>:</span> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> number <span class='curlybracket'>{</span>
  number<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>friend</span> number gcd<span class='parenthesis'>(</span>number x, number y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  number<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> a<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span>, b<span class='parenthesis'>(</span><span class='literal'>4</span><span class='parenthesis'>)</span>;
  a <span class='operator'>=</span> gcd<span class='parenthesis'>(</span>a,b<span class='parenthesis'>)</span>;     <span class='comment'>// finds <span class='tcode_in_codeblock'>gcd</span> because <span class='tcode_in_codeblock'>number&lt;double&gt;</span> is an associated class,</span>
                    <span class='comment'>// making <span class='tcode_in_codeblock'>gcd</span> visible in its namespace (global scope)</span>
  b <span class='operator'>=</span> gcd<span class='parenthesis'>(</span><span class='literal'>3</span>,<span class='literal'>4</span><span class='parenthesis'>)</span>;     <span class='comment'>// error: <span class='tcode_in_codeblock'>gcd</span> is not visible</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnote' id='footnote-142'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-142'>142)</a></div><div class='texpara'><div id='footnote-142.sentence-1' class='sentence'>Friend declarations do not
introduce new names into any scope, either
when the template is declared or when it is instantiated<a class='hidden_link' href='#footnote-142.sentence-1'>.</a></div>&nbsp;<a href='#footnoteref-142'>⮥</a></div></div></div></div></body></html>