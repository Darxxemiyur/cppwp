<!DOCTYPE html><html lang='en'><head><title>[basic.lookup.elab]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.5</a> Name lookup <a class='abbr_ref' href='basic.lookup#elab'>[basic.lookup]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>6.5.5</a> Elaborated type specifiers <a class='abbr_ref'>[basic.lookup.elab]</a></h3><div class='texpara'><a class='index' id=':lookup,elaborated_type_specifier'></a><a class='index' id=':type_specifier,elaborated'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cc74b25ebec38ee9aa6a13433699c600a1375fc1/source/basic.tex#L2456'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>An <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> (<a href='dcl.type.elab' title='9.2.9.4&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>) may be
used to refer to a previously declared <a href='class.pre#nt:class-name' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-name'><span class='textsf'><i >class-name</i></span></span></a> or
<a href='dcl.enum#nt:enum-name' title='9.7.1&emsp;Enumeration declarations&emsp;[dcl.enum]'><span id='ntref:enum-name'><span class='textsf'><i >enum-name</i></span></span></a> even though the name has been
<a href='basic.scope.hiding' title='6.4.10&emsp;Name hiding&emsp;[basic.scope.hiding]'>hidden</a> by a non-type
declaration<a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cc74b25ebec38ee9aa6a13433699c600a1375fc1/source/basic.tex#L2463'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>If the <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier_'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> has no
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><i >nested-name-specifier</i></span></span></a>, and unless the
<a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier__'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> appears in a declaration with the
following form:
<div class='bnf'>
<a href='class.pre#nt:class-key' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-key'><span class='textsf'><i >class-key</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'>;</span>
</div>
the <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_'><span class='textsf'><i >identifier</i></span></span></a> is looked up according
to <a href='basic.lookup.unqual' title='6.5.2&emsp;Unqualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>unqual]</a> but ignoring any non-type names that have
been declared<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If the <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier___'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> is introduced
by the <span class='texttt'><span class='keyword'>enum</span></span> keyword and this lookup does not find a previously
declared <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name'><span class='textsf'><i >type-name</i></span></span></a>, the <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier____'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a>
is ill-formed<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>If the <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier_____'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> is introduced
by the <a href='class.pre#nt:class-key' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-key_'><span class='textsf'><i >class-key</i></span></span></a> and this lookup does not find a previously
declared <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name_'><span class='textsf'><i >type-name</i></span></span></a>, or if the
<a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier______'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> appears in a declaration with the
form:
<div class='bnf'>
<a href='class.pre#nt:class-key' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-key__'><span class='textsf'><i >class-key</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier__'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'>;</span>
</div>
the <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier_______'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> is a declaration that
introduces the <a href='class.pre#nt:class-name' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-name_'><span class='textsf'><i >class-name</i></span></span></a> as described
in <a href='basic.scope.pdecl' title='6.4.2&emsp;Point of declaration'>[basic.<span class='shy'></span>scope.<span class='shy'></span>pdecl]</a><a class='hidden_link' href='#2.sentence-3'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cc74b25ebec38ee9aa6a13433699c600a1375fc1/source/basic.tex#L2488'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>If the <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier________'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> has a
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_'><span class='textsf'><i >nested-name-specifier</i></span></span></a>, qualified name lookup is performed, as
described in <a href='basic.lookup.qual' title='6.5.4&emsp;Qualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>qual]</a>, but ignoring any non-type names
that have been declared<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If the name lookup does not find a previously
declared <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name__'><span class='textsf'><i >type-name</i></span></span></a>, the <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier_________'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a>
is ill-formed<a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cc74b25ebec38ee9aa6a13433699c600a1375fc1/source/basic.tex#L2496'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>struct</span> Node <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Node<span class='operator'>*</span> Next;            <span class='comment'>// OK: Refers to injected-class-name <span class='tcode_in_codeblock'>Node</span></span>
  <span class='keyword'>struct</span> Data<span class='operator'>*</span> Data;            <span class='comment'>// OK: Declares type <span class='tcode_in_codeblock'>Data</span> at global scope and member <span class='tcode_in_codeblock'>Data</span></span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Data <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Node<span class='operator'>*</span> Node;            <span class='comment'>// OK: Refers to <span class='tcode_in_codeblock'>Node</span> at global scope</span>
  <span class='keyword'>friend</span> <span class='keyword'>struct</span> <span class='operator'>::</span>Glob;         <span class='comment'>// error: <span class='tcode_in_codeblock'>Glob</span> is not declared, cannot introduce a qualified type (<a href='dcl.type.elab' title='9.2.9.4&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>)</span>
  <span class='keyword'>friend</span> <span class='keyword'>struct</span> Glob;           <span class='comment'>// OK: Refers to (as yet) undeclared <span class='tcode_in_codeblock'>Glob</span> at global scope.</span>
  <span class='comment'>/* ... */</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Base <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Data;                  <span class='comment'>// OK: Declares nested <span class='tcode_in_codeblock'>Data</span></span>
  <span class='keyword'>struct</span> <span class='operator'>::</span>Data<span class='operator'>*</span>     thatData;  <span class='comment'>// OK: Refers to <span class='tcode_in_codeblock'>&#x200b;::&#x200b;Data</span></span>
  <span class='keyword'>struct</span> Base<span class='operator'>::</span>Data<span class='operator'>*</span> thisData;  <span class='comment'>// OK: Refers to nested <span class='tcode_in_codeblock'>Data</span></span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> <span class='operator'>::</span>Data;          <span class='comment'>// OK: global <span class='tcode_in_codeblock'>Data</span> is a friend</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> Data;            <span class='comment'>// OK: nested <span class='tcode_in_codeblock'>Data</span> is a friend</span>
  <span class='keyword'>struct</span> Data <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;    <span class='comment'>// Defines nested <span class='tcode_in_codeblock'>Data</span></span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Data;                    <span class='comment'>// OK: Redeclares <span class='tcode_in_codeblock'>Data</span> at global scope</span>
<span class='keyword'>struct</span> <span class='operator'>::</span>Data;                  <span class='comment'>// error: cannot introduce a qualified type (<a href='dcl.type.elab' title='9.2.9.4&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>)</span>
<span class='keyword'>struct</span> Base<span class='operator'>::</span>Data;              <span class='comment'>// error: cannot introduce a qualified type (<a href='dcl.type.elab' title='9.2.9.4&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>)</span>
<span class='keyword'>struct</span> Base<span class='operator'>::</span>Datum;             <span class='comment'>// error: <span class='tcode_in_codeblock'>Datum</span> undefined</span>
<span class='keyword'>struct</span> Base<span class='operator'>::</span>Data<span class='operator'>*</span> pBase;       <span class='comment'>// OK: refers to nested <span class='tcode_in_codeblock'>Data</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> </div></div></div></body></html>