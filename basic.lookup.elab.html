<!DOCTYPE html><html lang='en'><head><title>[basic.lookup.elab]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.5</a> Name lookup <a class='abbr_ref' href='basic.lookup#elab'>[basic.lookup]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>6.5.4</a> Elaborated type specifiers <a class='abbr_ref'>[basic.lookup.elab]</a></h3><span class='indexparent'><a class='index' id=':lookup,elaborated_type_specifier'></a></span><span class='indexparent'><a class='index' id=':type_specifier,elaborated'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L2428'>#</a></div><div id='1.sentence-1' class='sentence'>An <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> may be
used to refer to a previously declared <a class='grammarterm' href='class.pre#nt:class-name'>class-name</a> or
<a class='grammarterm' href='dcl.enum#nt:enum-name'>enum-name</a> even though the name has been
<a href='basic.scope.hiding'>hidden</a> by a non-type
declaration<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L2435'>#</a></div><div id='2.sentence-1' class='sentence'>If the <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> has no
<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>, and unless the
<a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> appears in a declaration with the
following form:
<pre class='ncbnf'><a class='grammarterm' href='class.pre#nt:class-key'>class-key</a> <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> <span class='terminal'>;</span>
</pre>
the <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> is looked up according
to <a href='basic.lookup.unqual'>[basic.lookup.unqual]</a> but ignoring any non-type names that have
been declared<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If the <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> is introduced
by the <span class='texttt'><span class='keyword'>enum</span></span> keyword and this lookup does not find a previously
declared <a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a>, the <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a>
is ill-formed<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>If the <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> is introduced
by the <a class='grammarterm' href='class.pre#nt:class-key'>class-key</a> and this lookup does not find a previously
declared <a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a>, or if the
<a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> appears in a declaration with the
form:
<pre class='ncbnf'><a class='grammarterm' href='class.pre#nt:class-key'>class-key</a> <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> <span class='terminal'>;</span>
</pre>
the <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> is a declaration that
introduces the <a class='grammarterm' href='class.pre#nt:class-name'>class-name</a> as described
in <a href='basic.scope.pdecl'>[basic.scope.pdecl]</a><a class='hidden_link' href='#2.sentence-3'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L2460'>#</a></div><div id='3.sentence-1' class='sentence'>If the <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> has a
<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>, qualified name lookup is performed, as
described in <a href='basic.lookup.qual'>[basic.lookup.qual]</a>, but ignoring any non-type names
that have been declared<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If the name lookup does not find a previously
declared <a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a>, the <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a>
is ill-formed<a class='hidden_link' href='#3.sentence-2'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/basic.tex#L2468'>#</a></div><div id='4.example-1' class='example'>[&nbsp;<a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> Node <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Node<span class='operator'>*</span> Next;            <span class='comment'>// OK: Refers to injected-class-name <span class='tcode_in_codeblock'>Node</span></span>
  <span class='keyword'>struct</span> Data<span class='operator'>*</span> Data;            <span class='comment'>// OK: Declares type <span class='tcode_in_codeblock'>Data</span> at global scope and member <span class='tcode_in_codeblock'>Data</span></span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Data <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Node<span class='operator'>*</span> Node;            <span class='comment'>// OK: Refers to <span class='tcode_in_codeblock'>Node</span> at global scope</span>
  <span class='keyword'>friend</span> <span class='keyword'>struct</span> <span class='operator'>::</span>Glob;         <span class='comment'>// error: <span class='tcode_in_codeblock'>Glob</span> is not declared, cannot introduce a qualified type (<a href='dcl.type.elab'>[dcl.type.elab]</a>)</span>
  <span class='keyword'>friend</span> <span class='keyword'>struct</span> Glob;           <span class='comment'>// OK: Refers to (as yet) undeclared <span class='tcode_in_codeblock'>Glob</span> at global scope.</span>
  <span class='comment'>/* ... */</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Base <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Data;                  <span class='comment'>// OK: Declares nested <span class='tcode_in_codeblock'>Data</span></span>
  <span class='keyword'>struct</span> <span class='operator'>::</span>Data<span class='operator'>*</span>     thatData;  <span class='comment'>// OK: Refers to <span class='tcode_in_codeblock'>&#x200b;::&#x200b;Data</span></span>
  <span class='keyword'>struct</span> Base<span class='operator'>::</span>Data<span class='operator'>*</span> thisData;  <span class='comment'>// OK: Refers to nested <span class='tcode_in_codeblock'>Data</span></span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> <span class='operator'>::</span>Data;          <span class='comment'>// OK: global <span class='tcode_in_codeblock'>Data</span> is a friend</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> Data;            <span class='comment'>// OK: nested <span class='tcode_in_codeblock'>Data</span> is a friend</span>
  <span class='keyword'>struct</span> Data <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;    <span class='comment'>// Defines nested <span class='tcode_in_codeblock'>Data</span></span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Data;                    <span class='comment'>// OK: Redeclares <span class='tcode_in_codeblock'>Data</span> at global scope</span>
<span class='keyword'>struct</span> <span class='operator'>::</span>Data;                  <span class='comment'>// error: cannot introduce a qualified type (<a href='dcl.type.elab'>[dcl.type.elab]</a>)</span>
<span class='keyword'>struct</span> Base<span class='operator'>::</span>Data;              <span class='comment'>// error: cannot introduce a qualified type (<a href='dcl.type.elab'>[dcl.type.elab]</a>)</span>
<span class='keyword'>struct</span> Base<span class='operator'>::</span>Datum;             <span class='comment'>// error: <span class='tcode_in_codeblock'>Datum</span> undefined</span>
<span class='keyword'>struct</span> Base<span class='operator'>::</span>Data<span class='operator'>*</span> pBase;       <span class='comment'>// OK: refers to nested <span class='tcode_in_codeblock'>Data</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  </div></div></body></html>