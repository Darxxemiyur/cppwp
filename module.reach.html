<!DOCTYPE html><html lang='en'><head><title>[module.reach]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>10</a> Modules <a class='abbr_ref' href='./#module'>[module]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>10.7</a> Reachability <a class='abbr_ref'>[module.reach]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/modules.tex#L967'>#</a></div><div id='1.sentence-1' class='sentence'>A translation unit <span class='math'><span class='mathalpha'>U</span></span> is
<a class='hidden_link' href='#def:reachable,necessarily,translation_unit' id='def:reachable,necessarily,translation_unit'><i >necessarily reachable</i></a>
from a point <span class='math'><span class='mathalpha'>P</span></span> if
<span class='math'><span class='mathalpha'>U</span></span> is a module interface unit on which the translation unit containing <span class='math'><span class='mathalpha'>P</span></span>
has an interface dependency, or
the translation unit containing <span class='math'><span class='mathalpha'>P</span></span> imports <span class='math'><span class='mathalpha'>U</span></span>,
in either case prior to <span class='math'><span class='mathalpha'>P</span></span> (<a href='module.import'>[module.import]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.note-1' class='note'>[&nbsp;<a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-2' class='sentence'>While module interface units are reachable even when they are only
transitively imported via a non-exported import declaration,
namespace-scope names from such module interface units are not visible
to name lookup (<a href='basic.scope.namespace'>[basic.scope.namespace]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/modules.tex#L982'>#</a></div><div id='2.sentence-1' class='sentence'>All translation units that are necessarily reachable are
<a class='hidden_link' href='#def:reachable,translation_unit' id='def:reachable,translation_unit'><i >reachable</i></a><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>It is unspecified whether additional translation units on which the
point within the program has an interface dependency are considered reachable,
and under what circumstances<a class='hidden_link' href='#2.sentence-2'>.</a><a class='footnotenum' href='#footnote-100' id='footnoteref-100'>100</a></div> <div id='2.note-1' class='note'>[&nbsp;<a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-3' class='sentence'>It is advisable to avoid
depending on the reachability of any additional translation units
in programs intending to be portable<a class='hidden_link' href='#2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/modules.tex#L997'>#</a></div><div id='3.sentence-1' class='sentence'>A declaration <span class='math'><span class='mathalpha'>D</span></span> is
<a class='hidden_link' href='#def:reachable,declaration' id='def:reachable,declaration'><i >reachable</i></a> if,
for any point <span class='math'><span class='mathalpha'>P</span></span> in the
instantiation context (<a href='module.context'>[module.context]</a>),
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> appears prior to <span class='math'><span class='mathalpha'>P</span></span> in the same translation unit, or</li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div><span class='math'><span class='mathalpha'>D</span></span> is not discarded (<a href='module.global.frag'>[module.global.frag]</a>),
appears in a translation unit that is
reachable from <span class='math'><span class='mathalpha'>P</span></span>,
and
does not appear within a <a class='grammarterm' href='module.private.frag#nt:private-module-fragment'>private-module-fragment</a>.</li></ul></div> <div id='3.note-1' class='note'>[&nbsp;<a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'>Whether a declaration is exported has no bearing on whether it is reachable<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/modules.tex#L1014'>#</a></div><div id='4.sentence-1' class='sentence'>The accumulated properties of all reachable declarations of
an entity within a context
determine the behavior of the entity within that context<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-2' class='sentence'>These reachable semantic properties include type completeness,
type definitions, initializers,
default arguments of functions or template declarations, attributes,
visibility of class or enumeration member names to ordinary lookup,
etc<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>Since default arguments are evaluated in the context of the call expression,
the reachable semantic properties of the corresponding parameter types apply in
that context<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.example-1' class='example'>[&nbsp;<a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <p>Translation unit #1:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> M<span class='operator'>:</span>A;
<span class='keyword'>export</span> <span class='keyword'>struct</span> B;
</pre><p>Translation unit #2:<pre class='codeblock'>
<span class='keyword'>module</span> M<span class='operator'>:</span>B;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
</pre><p>Translation unit #3:<pre class='codeblock'>
<span class='keyword'>module</span> M<span class='operator'>:</span>C;
<span class='keyword'>import</span> <span class='operator'>:</span>A;
B b1;                           <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
</pre><p>Translation unit #4:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>export</span> <span class='keyword'>import</span> <span class='operator'>:</span>A;
<span class='keyword'>import</span> <span class='operator'>:</span>B;
B b2;
<span class='keyword'>export</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B b <span class='operator'>=</span> B<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre><p>Translation unit #5:<pre class='codeblock'>
<span class='keyword'>module</span> X;
<span class='keyword'>import</span> M;
B b3;                           <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>               <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/modules.tex#L1063'>#</a></div><div id='5.note-1' class='note'>[&nbsp;<a class='note_link' href='#5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='5.sentence-1' class='sentence'>An entity can have reachable declarations
even if it is not visible to name lookup<a class='hidden_link' href='#5.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='5.example-1' class='example'>[&nbsp;<a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <p>Translation unit #1:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>export</span> <span class='keyword'>using</span> Y <span class='operator'>=</span> X;
</pre><p>Translation unit #2:<pre class='codeblock'>
<span class='keyword'>module</span> B;
<span class='keyword'>import</span> A;
Y y;                <span class='comment'>// OK, definition of <span class='tcode_in_codeblock'>X</span> is reachable</span>
X x;                <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> not visible to unqualified lookup</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-100'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-100'>100)</a></div><div id='footnote-100.sentence-1' class='sentence'>Implementations are therefore not required to prevent the semantic
effects of additional translation units involved in the compilation from being
observed<a class='hidden_link' href='#footnote-100.sentence-1'>.</a></div> <a href='#footnoteref-100'>⮥</a></div></div></body></html>