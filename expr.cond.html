<!DOCTYPE html><html lang='en'><head><title>[expr.cond]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.cond'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>7.6.16</a> Conditional operator <a class='abbr_ref'>[expr.cond]</a></h3><span class='indexparent'><a class='index' id=':expression,conditional_operator'></a></span><span class='indexparent'><a class='index' id=':operator,conditional_expression'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:conditional-expression' id='nt:conditional-expression'>conditional-expression</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='expr.log.or#nt:logical-or-expression'>logical-or-expression</a>
&#9;<a class='grammarterm' href='expr.log.or#nt:logical-or-expression'>logical-or-expression</a> <span class='terminal'><span class='operator'>?</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='operator'>:</span></span> <a class='grammarterm' href='expr.ass#nt:assignment-expression'>assignment-expression</a>
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L6367'>#</a></div><div id='1.sentence-1' class='sentence'>Conditional expressions group right-to-left<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The first expression is
<a href='conv#def:conversion,contextual_to_bool'>contextually converted to <span class='texttt'>bool</span></a><a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>It is
evaluated and if it is <span class='texttt'><span class='literal'>true</span></span>, the result of the conditional
expression is the value of the second expression, otherwise that of the
third expression<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>Only one of the second and third expressions is
evaluated<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>The first expression is sequenced before
the second or third expression (<a href='intro.execution'>[intro.execution]</a>)<a class='hidden_link' href='#1.sentence-5'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L6378'>#</a></div><div id='2.sentence-1' class='sentence'>If either the second or the third operand has type <span class='texttt'><span class='keyword'>void</span></span>,
one of the following shall hold:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><span class='indexparent'><a class='index' id=':conditional-expression,throw-expression_in'></a></span>The second or the third operand (but not both) is a (possibly
parenthesized) <a class='grammarterm' href='expr.throw#nt:throw-expression'>throw-expression</a>; the result
is of the type and value category of the other. The <a class='grammarterm' href='#nt:conditional-expression'>conditional-expression</a>
is a bit-field if that operand is a bit-field.</li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div>Both the second and the third operands have type <span class='texttt'><span class='keyword'>void</span></span>; the
result is of type <span class='texttt'><span class='keyword'>void</span></span> and is a prvalue. <div id='2.2.note-1' class='note'>[&nbsp;<a class='note_link' href='#2.2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> This
includes the case where both operands are <a class='grammarterm' href='expr.throw#nt:throw-expression'>throw-expression</a><span class='textit'>s</span>. —&nbsp;<i>end note</i></div>&nbsp;]</div> </li></ul></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L6398'>#</a></div><div id='3.sentence-1' class='sentence'>Otherwise, if the second and third operand are glvalue bit-fields
of the same value category and
of types <span class='textit'>cv1</span> <span class='texttt'>T</span> and <span class='textit'>cv2</span> <span class='texttt'>T</span>, respectively,
the operands are considered to be of type <span class='mathit'>cv</span> <span class='texttt'>T</span>
for the remainder of this subclause,
where <span class='mathit'>cv</span> is the union of <span class='textit'>cv1</span> and <span class='textit'>cv2</span><a class='hidden_link' href='#3.sentence-1'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L6406'>#</a></div><div id='4.sentence-1' class='sentence'>Otherwise, if the second and third operand have different types and
either has (possibly cv-qualified) class type, or if both
are glvalues of the same value category and the same type except for
cv-qualification, an attempt is made to
form an <a href='over.best.ics'>implicit conversion sequence</a> from
each of those operands to the type of the other<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-2' class='sentence'>Properties such as access, whether an operand is a bit-field, or whether
a conversion function is deleted are ignored for that determination<a class='hidden_link' href='#4.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='4.sentence-3' class='sentence'>
Attempts are made to form an implicit conversion sequence
from an operand expression <span class='texttt'>E1</span> of type <span class='texttt'>T1</span>
to a target type related to the type <span class='texttt'>T2</span>
of the operand expression <span class='texttt'>E2</span> as follows:</div><ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><div id='4.1.sentence-1' class='sentence'>If <span class='texttt'>E2</span> is an lvalue, the target type is
“lvalue reference to <span class='texttt'>T2</span>”, subject to the
constraint that in the conversion the reference must bind
directly (<a href='dcl.init.ref'>[dcl.init.ref]</a>) to a glvalue<a class='hidden_link' href='#4.1.sentence-1'>.</a></div></li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><div id='4.2.sentence-1' class='sentence'>If <span class='texttt'>E2</span> is an xvalue, the target type is
“rvalue reference to <span class='texttt'>T2</span>”,
subject to the constraint that the reference must bind directly<a class='hidden_link' href='#4.2.sentence-1'>.</a></div></li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div><div id='4.3.sentence-1' class='sentence'>If <span class='texttt'>E2</span> is a prvalue or if neither of the conversion sequences above can be
formed and at least one of the operands has (possibly cv-qualified) class type:
<ul class='itemize'><li id='4.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#4.3.1'>(4.3.1)</a></div>if <span class='texttt'>T1</span> and <span class='texttt'>T2</span> are the same class type
(ignoring cv-qualification) and
<span class='texttt'>T2</span> is at least as cv-qualified as <span class='texttt'>T1</span>,
the target type is <span class='texttt'>T2</span>,</li><li id='4.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#4.3.2'>(4.3.2)</a></div>otherwise, if <span class='texttt'>T2</span> is a base class of <span class='texttt'>T1</span>,
the target type is <span class='textit'>cv1</span> <span class='texttt'>T2</span>, where <span class='textit'>cv1</span>
denotes the cv-qualifiers of <span class='texttt'>T1</span>,</li><li id='4.3.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#4.3.3'>(4.3.3)</a></div>otherwise, the target type is the type that <span class='texttt'>E2</span> would have
after applying the
<a href='conv.lval'>lvalue-to-rvalue</a>,
<a href='conv.array'>array-to-pointer</a>, and
<a href='conv.func'>function-to-pointer</a>
standard conversions<a class='hidden_link' href='#4.3.sentence-1'>.</a></li></ul></div></li></ul><div id='4.sentence-4' class='sentence'>Using this process, it is determined whether an implicit conversion
sequence can be formed from the second operand
to the target type determined for the third operand, and vice versa<a class='hidden_link' href='#4.sentence-4'>.</a></div> <div id='4.sentence-5' class='sentence'>If both sequences can be formed, or one can be formed but it is the
ambiguous conversion sequence, the program is ill-formed<a class='hidden_link' href='#4.sentence-5'>.</a></div> <div id='4.sentence-6' class='sentence'>If no conversion sequence can be formed, the operands are left unchanged
and further checking is performed as described below<a class='hidden_link' href='#4.sentence-6'>.</a></div> <div id='4.sentence-7' class='sentence'>Otherwise, if exactly one conversion sequence can be formed,
that conversion is applied to the chosen operand
and the converted operand is used in place of the original operand for
the remainder of this subclause<a class='hidden_link' href='#4.sentence-7'>.</a></div> <div id='4.note-2' class='note'>[&nbsp;<a class='note_link' href='#4.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-8' class='sentence'>The conversion might be ill-formed even if an implicit conversion
sequence could be formed<a class='hidden_link' href='#4.sentence-8'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L6469'>#</a></div><div id='5.sentence-1' class='sentence'>If the second and third operands are glvalues of the same value category
and have the same type, the
result is of that type and value category and it is a bit-field if the
second or the third operand is a bit-field, or if both are bit-fields<a class='hidden_link' href='#5.sentence-1'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L6475'>#</a></div><div id='6.sentence-1' class='sentence'>Otherwise, the result is a prvalue<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>If the second and third operands do
not have the same type, and either has (possibly cv-qualified) class
type, overload resolution is used to determine the conversions (if any)
to be applied to the operands (<a href='over.match.oper'>[over.match.oper]</a>, <a href='over.built'>[over.built]</a>)<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>If the overload resolution fails, the program is ill-formed<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>Otherwise,
the conversions thus determined are applied, and the converted operands
are used in place of the original operands for the remainder of this
subclause<a class='hidden_link' href='#6.sentence-4'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L6485'>#</a></div><div id='7.sentence-1' class='sentence'><a href='conv.lval'>Lvalue-to-rvalue</a>, <a href='conv.array'>array-to-pointer</a>,
and <a href='conv.func'>function-to-pointer</a> standard conversions are
performed on the second and third operands<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>After those conversions, one
of the following shall hold:</div><ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.1'>(7.1)</a></div><div id='7.1.sentence-1' class='sentence'>The second and third operands have the same type; the result is of
that type and the result object is initialized using the selected operand<a class='hidden_link' href='#7.1.sentence-1'>.</a></div></li><li id='7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.2'>(7.2)</a></div><div id='7.2.sentence-1' class='sentence'>The second and third operands have arithmetic or enumeration type;
the <a href='expr.arith.conv'>usual arithmetic conversions</a> are performed to bring them to a common
type, and the result is of that type<a class='hidden_link' href='#7.2.sentence-1'>.</a></div></li><li id='7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.3'>(7.3)</a></div><div id='7.3.sentence-1' class='sentence'>One or both of the second and third operands have pointer type;
<a href='conv.ptr'>pointer conversions</a>,
<a href='conv.fctptr'>function pointer conversions</a>, and
<a href='conv.qual'>qualification conversions</a>
are performed to bring them to their
<a href='expr.type#def:composite_pointer_type'>composite pointer type</a><a class='hidden_link' href='#7.3.sentence-1'>.</a></div> <div id='7.3.sentence-2' class='sentence'>The result is of the composite
pointer type<a class='hidden_link' href='#7.3.sentence-2'>.</a></div></li><li id='7.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.4'>(7.4)</a></div><div id='7.4.sentence-1' class='sentence'>One or both of the second and third operands have pointer-to-member type;
pointer to member conversions (<a href='conv.mem'>[conv.mem]</a>),
function pointer conversions (<a href='conv.fctptr'>[conv.fctptr]</a>), and
qualification conversions (<a href='conv.qual'>[conv.qual]</a>)
are performed to bring them to their composite
pointer type (<a href='expr.type'>[expr.type]</a>)<a class='hidden_link' href='#7.4.sentence-1'>.</a></div> <div id='7.4.sentence-2' class='sentence'>The result is of the composite pointer type<a class='hidden_link' href='#7.4.sentence-2'>.</a></div></li><li id='7.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.5'>(7.5)</a></div><div id='7.5.sentence-1' class='sentence'>Both the second and third operands have type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span> or one has
that type and the other is a null pointer constant<a class='hidden_link' href='#7.5.sentence-1'>.</a></div> <div id='7.5.sentence-2' class='sentence'>The result is of type
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span><a class='hidden_link' href='#7.5.sentence-2'>.</a></div></li></ul></div></div></body></html>