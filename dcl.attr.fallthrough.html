<!DOCTYPE html><html lang='en'><head><title>[dcl.attr.fallthrough]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>9.12</a> Attributes <a class='abbr_ref' href='dcl.attr#fallthrough'>[dcl.attr]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>9.12.5</a> Fallthrough attribute <a class='abbr_ref'>[dcl.attr.fallthrough]</a></h3><span class='indexparent'><a class='index' id=':attribute,fallthrough'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L8815'>#</a></div><div id='1.sentence-1' class='sentence'>The <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a> <span class='texttt'>fallthrough</span>
may be applied to a <a href='stmt.expr#def:null_statement'>null statement</a>;
<span class='indexparent'><a class='index' id=':statement,fallthrough'></a></span>
such a statement is a fallthrough statement<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a> <span class='texttt'>fallthrough</span>
shall appear at most once in each <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a> and
no <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a> shall be present<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>A fallthrough statement may only appear within
an enclosing <a href='stmt.switch'><span class='texttt'>switch</span> statement</a><a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>The next statement that would be executed after a fallthrough statement
shall be a labeled statement whose label is a case label or
default label for the same <span class='texttt'><span class='keyword'>switch</span></span> statement and,
if the fallthrough statement is contained in an iteration statement,
the next statement shall be part of the same execution of
the substatement of the innermost enclosing iteration statement<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>The program is ill-formed if there is no such statement<a class='hidden_link' href='#1.sentence-5'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L8833'>#</a></div><div id='2.sentence-1' class='sentence'><span class='textit'>Recommended practice:</span> 
The use of a fallthrough statement should suppress
a warning that an implementation might otherwise issue
for a case or default label that is reachable
from another case or default label along some path of execution<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Implementations should issue a warning
if a fallthrough statement is not dynamically reachable<a class='hidden_link' href='#2.sentence-2'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L8842'>#</a></div><div id='3.example-1' class='example'>[&nbsp;<a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, i<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>switch</span> <span class='parenthesis'>(</span>n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>case</span> <span class='literal'>1</span><span class='operator'>:</span>
  <span class='keyword'>case</span> <span class='literal'>2</span><span class='operator'>:</span>
    g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;
  <span class='keyword'>case</span> <span class='literal'>3</span><span class='operator'>:</span>                       <span class='comment'>// warning on fallthrough discouraged</span>
    <span class='keyword'>do</span> <span class='curlybracket'>{</span>
      <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;          <span class='comment'>// error: next statement is not part of the same substatement execution</span>
    <span class='curlybracket'>}</span> <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;
  <span class='keyword'>case</span> <span class='literal'>6</span><span class='operator'>:</span>
    <span class='keyword'>do</span> <span class='curlybracket'>{</span>
      <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;          <span class='comment'>// error: next statement is not part of the same substatement execution</span>
    <span class='curlybracket'>}</span> <span class='keyword'>while</span> <span class='parenthesis'>(</span>n<span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>)</span>;
  <span class='keyword'>case</span> <span class='literal'>7</span><span class='operator'>:</span>
    <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;          <span class='comment'>// error: next statement is not part of the same substatement execution</span>
    <span class='curlybracket'>}</span>
  <span class='keyword'>case</span> <span class='literal'>5</span><span class='operator'>:</span>
    h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>case</span> <span class='literal'>4</span><span class='operator'>:</span>                       <span class='comment'>// implementation may warn on fallthrough</span>
    i<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;            <span class='comment'>// error</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</pre> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></body></html>