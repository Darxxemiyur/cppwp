<!DOCTYPE html><html lang='en'><head><title>[cpp.line]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>15</a> Preprocessing directives <a class='abbr_ref' href='./#cpp'>[cpp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>15.7</a> Line control <a class='abbr_ref'>[cpp.line]</a></h2><span class='indexparent'><a class='index' id=':preprocessing_directive,line_control'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/preprocessor.tex#L1530'>#</a></div><div id='1.sentence-1' class='sentence'>The <a class='grammarterm' href='lex.string#nt:string-literal'>string-literal</a> of a
<span class='texttt'><span class='preprocessordirective'>#line</span></span>
directive, if present,
shall be a character string literal<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/preprocessor.tex#L1536'>#</a></div><div id='2.sentence-1' class='sentence'>The
<a class='hidden_link' href='#def:line_number' id='def:line_number'><i >line number</i></a>
of the current source line is one greater than
the number of new-line characters read or introduced
in <a href='lex.phases'>translation phase 1</a>
while processing the source file to the current token<a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/preprocessor.tex#L1544'>#</a></div><div id='3.sentence-1' class='sentence'>A preprocessing directive of the form
<pre class='ncsimplebnf'><span class='terminal'><span class='preprocessordirective'># line</span></span> <a class='grammarterm' href='lex.fcon#nt:digit-sequence'>digit-sequence</a> <a class='grammarterm' href='cpp.pre#nt:new-line'>new-line</a>
</pre>
causes the implementation to behave as if
the following sequence of source lines begins with a
source line that has a line number as specified
by the digit sequence (interpreted as a decimal integer)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If the digit sequence specifies zero
or a number greater than 2147483647,
the behavior is undefined<a class='hidden_link' href='#3.sentence-2'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/preprocessor.tex#L1557'>#</a></div><div id='4.sentence-1' class='sentence'>A preprocessing directive of the form
<pre class='ncsimplebnf'><span class='terminal'><span class='preprocessordirective'># line</span></span> <a class='grammarterm' href='lex.fcon#nt:digit-sequence'>digit-sequence</a> <span class='terminal'>"</span> <a class='grammarterm' href='lex.string#nt:s-char-sequence'>s-char-sequence</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>"</span> <a class='grammarterm' href='cpp.pre#nt:new-line'>new-line</a>
</pre>
sets the presumed line number similarly and changes the
presumed name of the source file to be the contents
of the character string literal<a class='hidden_link' href='#4.sentence-1'>.</a></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/preprocessor.tex#L1566'>#</a></div><div id='5.sentence-1' class='sentence'>A preprocessing directive of the form
<pre class='ncsimplebnf'><span class='terminal'><span class='preprocessordirective'># line</span></span> <a class='grammarterm' href='cpp.pre#nt:pp-tokens'>pp-tokens</a> <a class='grammarterm' href='cpp.pre#nt:new-line'>new-line</a>
</pre>
(that does not match one of the two previous forms)
is permitted<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>The preprocessing tokens after
<span class='texttt'>line</span>
on the directive are processed just as in normal text
(each identifier currently defined as a macro name is replaced by its
replacement list of preprocessing tokens)<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>If the directive resulting after all replacements does not match
one of the two previous forms, the behavior is undefined;
otherwise, the result is processed as appropriate<a class='hidden_link' href='#5.sentence-3'>.</a></div></div></div></body></html>