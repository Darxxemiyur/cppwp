<!DOCTYPE html><html lang='en'><head><title>[dcl.init]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>9.4</a> Initializers <a class='abbr_ref'>[dcl.init]</a></h2><span class='indexparent'><a class='index' id=':initialization'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4041'>#</a></div><div id='1.sentence-1' class='sentence'>The process of initialization described in this subclause applies to
all initializations regardless of syntactic context, including the
initialization of a function parameter (<a href='expr.call'>[expr.call]</a>), the
initialization of a return value (<a href='stmt.return'>[stmt.return]</a>), or when an
initializer follows a declarator<a class='hidden_link' href='#1.sentence-1'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:initializer' id='nt:initializer'>initializer</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a>
&#9;<span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a> <span class='terminal'><span class='parenthesis'>)</span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:brace-or-equal-initializer' id='nt:brace-or-equal-initializer'>brace-or-equal-initializer</a><span class='ntdefcolon'>:</span>
&#9;<span class='terminal'><span class='operator'>=</span></span> <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a>
&#9;<a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:initializer-clause' id='nt:initializer-clause'>initializer-clause</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='expr.ass#nt:assignment-expression'>assignment-expression</a>
&#9;<a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:braced-init-list' id='nt:braced-init-list'>braced-init-list</a><span class='ntdefcolon'>:</span>
&#9;<span class='terminal'><span class='curlybracket'>{</span></span> <a class='grammarterm' href='#nt:initializer-list'>initializer-list</a> <span class='terminal'>,</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='curlybracket'>}</span></span>
&#9;<span class='terminal'><span class='curlybracket'>{</span></span> <a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a> <span class='terminal'>,</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='curlybracket'>}</span></span>
&#9;<span class='terminal'><span class='curlybracket'>{</span></span> <span class='terminal'><span class='curlybracket'>}</span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:initializer-list' id='nt:initializer-list'>initializer-list</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a> <span class='terminal'>,</span> <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:designated-initializer-list' id='nt:designated-initializer-list'>designated-initializer-list</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='#nt:designated-initializer-clause'>designated-initializer-clause</a>
&#9;<a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a> <span class='terminal'>,</span> <a class='grammarterm' href='#nt:designated-initializer-clause'>designated-initializer-clause</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:designated-initializer-clause' id='nt:designated-initializer-clause'>designated-initializer-clause</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='#nt:designator'>designator</a> <a class='grammarterm' href='#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:designator' id='nt:designator'>designator</a><span class='ntdefcolon'>:</span>
&#9;<span class='terminal'><span class='operator'>.</span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:expr-or-braced-init-list' id='nt:expr-or-braced-init-list'>expr-or-braced-init-list</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='expr.comma#nt:expression'>expression</a>
&#9;<a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a>
</pre><div id='1.note-1' class='note'>[&nbsp;<a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-2' class='sentence'>The rules in this subclause apply even if the grammar permits only
the <a class='grammarterm' href='#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a> form
of <a class='grammarterm' href='#nt:initializer'>initializer</a> in a given context<a class='hidden_link' href='#1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4107'>#</a></div><div id='2.sentence-1' class='sentence'>Except for objects declared with the <span class='texttt'><span class='keyword'>constexpr</span></span> specifier, for which see <a href='dcl.constexpr'>[dcl.constexpr]</a>,
an <a class='grammarterm' href='#nt:initializer'>initializer</a> in the definition of a variable can consist of
arbitrary expressions involving literals and previously declared
variables and functions,
regardless of the variable's storage duration<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.example-1' class='example'>[&nbsp;<a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>2</span>;
<span class='keyword'>int</span> b <span class='operator'>=</span> f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;
<span class='keyword'>int</span> c<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4122'>#</a></div><div id='3.note-1' class='note'>[&nbsp;<a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-1' class='sentence'>Default arguments are more restricted; see <a href='dcl.fct.default'>[dcl.fct.default]</a><a class='hidden_link' href='#3.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4127'>#</a></div><div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-1' class='sentence'>The order of initialization of variables with static storage duration is described in <a href='basic.start'>[basic.start]</a>
and <a href='stmt.dcl'>[stmt.dcl]</a><a class='hidden_link' href='#4.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4133'>#</a></div><div id='5.sentence-1' class='sentence'>A declaration of a block-scope variable with external or internal
linkage that has an <a class='grammarterm' href='#nt:initializer'>initializer</a> is ill-formed<a class='hidden_link' href='#5.sentence-1'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4137'>#</a></div><div id='6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,default'></a></span><span class='indexparent'><a class='index' id=':variable,indeterminate_uninitialized'></a></span><span class='indexparent'><a class='index' id=':initialization,zero-initialization'></a></span>To
<a class='hidden_link' href='#def:zero-initialization' id='def:zero-initialization'><i >zero-initialize</i></a>
an object or reference of type
<span class='texttt'>T</span>
means:
<ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.1'>(6.1)</a></div>if
<span class='texttt'>T</span>
is a <a href='basic.types#def:scalar_type'>scalar type</a>, the
object
is initialized to the value obtained by converting the integer literal <span class='texttt'><span class='literal'>0</span></span>
(zero) to
<span class='texttt'>T</span>;<a class='footnotenum' href='#footnote-90' id='footnoteref-90'>90</a></li><li id='6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.2'>(6.2)</a></div>if
<span class='texttt'>T</span>
is a (possibly cv-qualified) non-union class type,
its <a href='basic.types#def:padding_bits'>padding bits</a> are initialized to zero bits and
each non-static data member,
each non-virtual base class subobject, and,
if the object is not a base class subobject,
each virtual base class subobject
is zero-initialized;</li><li id='6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.3'>(6.3)</a></div>if
<span class='texttt'>T</span>
is a (possibly cv-qualified) union type,
its <a href='basic.types#def:padding_bits'>padding bits</a> are initialized to zero bits and
the
object's first non-static named
data member
is zero-initialized;</li><li id='6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.4'>(6.4)</a></div>if
<span class='texttt'>T</span>
is an array type,
each element is zero-initialized;</li><li id='6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.5'>(6.5)</a></div>if
<span class='texttt'>T</span>
is a reference type, no initialization is performed<a class='hidden_link' href='#6.sentence-1'>.</a></li></ul></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4192'>#</a></div><div id='7.sentence-1' class='sentence'>To
<a class='hidden_link' href='#def:default-initialization' id='def:default-initialization'><i >default-initialize</i></a>
an object of type
<span class='texttt'>T</span>
means:</div><ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.1'>(7.1)</a></div><div id='7.1.sentence-1' class='sentence'>If
<span class='texttt'>T</span>
is a (possibly cv-qualified) class type (<a href='class'>[class]</a>),
constructors are considered<a class='hidden_link' href='#7.1.sentence-1'>.</a></div> <div id='7.1.sentence-2' class='sentence'>The applicable constructors are
enumerated (<a href='over.match.ctor'>[over.match.ctor]</a>), and the best one for the
<a class='grammarterm' href='#nt:initializer'>initializer</a> <span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is chosen through
overload resolution (<a href='over.match'>[over.match]</a>)<a class='hidden_link' href='#7.1.sentence-2'>.</a></div> <div id='7.1.sentence-3' class='sentence'>The constructor thus selected
is called, with an empty argument list, to initialize the object<a class='hidden_link' href='#7.1.sentence-3'>.</a></div></li><li id='7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.2'>(7.2)</a></div><div id='7.2.sentence-1' class='sentence'>If
<span class='texttt'>T</span>
is an array type, each element is default-initialized<a class='hidden_link' href='#7.2.sentence-1'>.</a></div></li><li id='7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.3'>(7.3)</a></div><div id='7.3.sentence-1' class='sentence'>Otherwise,
no initialization is performed<a class='hidden_link' href='#7.3.sentence-1'>.</a></div></li></ul><div id='7.sentence-2' class='sentence'>A class type <span class='texttt'>T</span> is <a class='hidden_link' href='#def:const-default-constructible' id='def:const-default-constructible'><i >const-default-constructible</i></a> if
default-initialization of <span class='texttt'>T</span> would invoke
a user-provided constructor of <span class='texttt'>T</span> (not inherited from a base class)
or if
<ul class='itemize'><li id='7.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.4'>(7.4)</a></div>each direct non-variant non-static data member <span class='texttt'>M</span> of <span class='texttt'>T</span>
has a default member initializer
or, if <span class='texttt'>M</span> is of class type <span class='texttt'>X</span> (or array thereof),
<span class='texttt'>X</span> is const-default-constructible,</li><li id='7.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.5'>(7.5)</a></div>if <span class='texttt'>T</span> is a union with at least one non-static data member,
exactly one variant member has a default member initializer,</li><li id='7.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.6'>(7.6)</a></div>if <span class='texttt'>T</span> is not a union,
for each anonymous union member with at least one non-static data member (if any),
exactly one non-static data member has a default member initializer, and</li><li id='7.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.7'>(7.7)</a></div>each potentially constructed base class of <span class='texttt'>T</span> is const-default-constructible<a class='hidden_link' href='#7.sentence-2'>.</a></li></ul></div><div id='7.sentence-3' class='sentence'>If a program calls for the default-initialization of an object of a
const-qualified type <span class='texttt'>T</span>,
<span class='texttt'>T</span> shall be a const-default-constructible class type or array thereof<a class='hidden_link' href='#7.sentence-3'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4245'>#</a></div><div id='8.sentence-1' class='sentence'>To
<a class='hidden_link' href='#def:value-initialization' id='def:value-initialization'><i >value-initialize</i></a>
an object of type
<span class='texttt'>T</span>
means:
<ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.1'>(8.1)</a></div>if
<span class='texttt'>T</span>
is a (possibly cv-qualified) class type (<a href='class'>[class]</a>), then
<ul class='itemize'><li id='8.1.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#8.1.1'>(8.1.1)</a></div>if <span class='texttt'>T</span> has
either no default constructor (<a href='class.default.ctor'>[class.default.ctor]</a>) or a default
constructor that is user-provided or deleted, then the object is default-initialized;</li><li id='8.1.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#8.1.2'>(8.1.2)</a></div>otherwise,
the object is zero-initialized and the semantic constraints for
default-initialization are checked, and if <span class='texttt'>T</span> has a
non-trivial default constructor, the object is default-initialized;</li></ul></li><li id='8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.2'>(8.2)</a></div>if
<span class='texttt'>T</span>
is an array type, then each element is value-initialized;</li><li id='8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.3'>(8.3)</a></div>otherwise, the object is zero-initialized<a class='hidden_link' href='#8.sentence-1'>.</a></li></ul></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4276'>#</a></div><div id='9.sentence-1' class='sentence'>A program that calls for default-initialization
or value-initialization
of an entity
of reference type is ill-formed<a class='hidden_link' href='#9.sentence-1'>.</a></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4282'>#</a></div><div id='10.note-1' class='note'>[&nbsp;<a class='note_link' href='#10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-1' class='sentence'>For every object of static storage duration,
static initialization (<a href='basic.start.static'>[basic.start.static]</a>) is performed
at program startup before any other initialization takes place<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>In some cases, additional initialization is done later<a class='hidden_link' href='#10.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4290'>#</a></div><div id='11.sentence-1' class='sentence'>An object whose initializer is an empty set of parentheses, i.e.,
<span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
shall be
value-initialized<a class='hidden_link' href='#11.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><span class='indexparent'><a class='index' id=':ambiguity,function_declaration'></a></span><div id='11.note-1' class='note'>[&nbsp;<a class='note_link' href='#11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='11.sentence-2' class='sentence'>Since
<span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
is not permitted by the syntax for
<a class='grammarterm' href='#nt:initializer'>initializer</a>,
<pre class='codeblock'>
X a<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre>
is not the declaration of an object of class
<span class='texttt'>X</span>,
but the declaration of a function taking no argument and returning an
<span class='texttt'>X</span><a class='hidden_link' href='#11.sentence-2'>.</a></div> <div id='11.sentence-3' class='sentence'>The form
<span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
is permitted in certain other initialization contexts (<a href='expr.new'>[expr.new]</a>,
<a href='expr.type.conv'>[expr.type.conv]</a>, <a href='class.base.init'>[class.base.init]</a>)<a class='hidden_link' href='#11.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4315'>#</a></div><div id='12.sentence-1' class='sentence'>If no initializer is specified for an object, the object is default-initialized<a class='hidden_link' href='#12.sentence-1'>.</a></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4318'>#</a></div><div id='13.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,class_member'></a></span>An initializer for a static member is in the scope of the member's class<a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='13.example-1' class='example'>[&nbsp;<a class='example_link' href='#13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span> a;

<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> a;
  <span class='keyword'>static</span> <span class='keyword'>int</span> b;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> X<span class='operator'>::</span>a <span class='operator'>=</span> <span class='literal'>1</span>;
<span class='keyword'>int</span> X<span class='operator'>::</span>b <span class='operator'>=</span> a;                   <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;b = X&#x200b;::&#x200b;a</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4335'>#</a></div><div id='14.sentence-1' class='sentence'>If the entity being initialized does not have class type, the
<a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a> in a
parenthesized initializer shall be a single expression<a class='hidden_link' href='#14.sentence-1'>.</a></div></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4340'>#</a></div><div id='15.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,copy'></a></span><span class='indexparent'><a class='index' id=':initialization,direct'></a></span>The initialization that occurs in the <span class='texttt'><span class='operator'>=</span></span> form of a
<a class='grammarterm' href='#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a> or
<a class='grammarterm' href='stmt.pre#nt:condition'>condition</a> (<a href='stmt.select'>[stmt.select]</a>),
as well as in argument passing, function return,
throwing an exception (<a href='except.throw'>[except.throw]</a>),
handling an exception (<a href='except.handle'>[except.handle]</a>),
and aggregate member initialization (<a href='#aggr'>[dcl.init.aggr]</a>),
is called
<a class='hidden_link' href='#def:copy-initialization' id='def:copy-initialization'><i >copy-initialization</i></a><a class='hidden_link' href='#15.sentence-1'>.</a></div> <div id='15.note-1' class='note'>[&nbsp;<a class='note_link' href='#15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='15.sentence-2' class='sentence'>Copy-initialization may invoke a move (<a href='class.copy.ctor'>[class.copy.ctor]</a>)<a class='hidden_link' href='#15.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4356'>#</a></div><div id='16.sentence-1' class='sentence'>The initialization that occurs
<ul class='itemize'><li id='16.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.1'>(16.1)</a></div>for an <a class='grammarterm' href='#nt:initializer'>initializer</a> that is a
parenthesized <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a> or a <a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a>,</li><li id='16.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.2'>(16.2)</a></div>for a <a class='grammarterm' href='expr.new#nt:new-initializer'>new-initializer</a>,</li><li id='16.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.3'>(16.3)</a></div>in a <span class='texttt'><span class='keyword'>static_&shy;cast</span></span> expression (<a href='expr.static.cast'>[expr.static.cast]</a>),</li><li id='16.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.4'>(16.4)</a></div>in a <a href='expr.type.conv'>functional notation type conversion</a>, and</li><li id='16.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.5'>(16.5)</a></div>in the <a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a> form of a <a class='grammarterm' href='stmt.pre#nt:condition'>condition</a></li></ul>
is called
<a class='hidden_link' href='#def:direct-initialization' id='def:direct-initialization'><i >direct-initialization</i></a><a class='hidden_link' href='#16.sentence-1'>.</a></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4369'>#</a></div><div id='17.sentence-1' class='sentence'>The semantics of initializers are as follows<a class='hidden_link' href='#17.sentence-1'>.</a></div> <div id='17.sentence-2' class='sentence'>The
<span class='indexparent'><a class='index' id=':type,destination'></a></span><a class='hidden_link' href='#def:destination_type' id='def:destination_type'><i>destination type</i></a>
is the type of the object or reference being initialized and the
<a class='hidden_link' href='#def:source_type' id='def:source_type'><i>source type</i></a>
is the type of the initializer expression<a class='hidden_link' href='#17.sentence-2'>.</a></div> <div id='17.sentence-3' class='sentence'>If the initializer is not a single (possibly parenthesized) expression, the
source type is not defined<a class='hidden_link' href='#17.sentence-3'>.</a></div> <ul class='itemize'><li id='17.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.1'>(17.1)</a></div><div id='17.1.sentence-1' class='sentence'>If the initializer is a (non-parenthesized) <a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a>
or is <span class='texttt'><span class='operator'>=</span></span> <a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a>, the object or reference
is list-initialized (<a href='#list'>[dcl.init.list]</a>)<a class='hidden_link' href='#17.1.sentence-1'>.</a></div></li><li id='17.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.2'>(17.2)</a></div><div id='17.2.sentence-1' class='sentence'>If the destination type is a reference type, see <a href='#ref'>[dcl.init.ref]</a><a class='hidden_link' href='#17.2.sentence-1'>.</a></div></li><li id='17.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.3'>(17.3)</a></div><div id='17.3.sentence-1' class='sentence'>If the destination type is an array of characters,
an array of <span class='texttt'><span class='keyword'>char8_&shy;t</span></span>,
an array of <span class='texttt'><span class='keyword'>char16_&shy;t</span></span>,
an array of <span class='texttt'><span class='keyword'>char32_&shy;t</span></span>,
or an array of
<span class='texttt'><span class='keyword'>wchar_&shy;t</span></span>,
and the initializer is a <a class='grammarterm' href='lex.string#nt:string-literal'>string-literal</a>, see <a href='#string'>[dcl.init.string]</a><a class='hidden_link' href='#17.3.sentence-1'>.</a></div></li><li id='17.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.4'>(17.4)</a></div><div id='17.4.sentence-1' class='sentence'>If the initializer is <span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, the object is value-initialized<a class='hidden_link' href='#17.4.sentence-1'>.</a></div></li><li id='17.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.5'>(17.5)</a></div><div id='17.5.sentence-1' class='sentence'>Otherwise, if the destination type is an array,
the object is initialized as follows<a class='hidden_link' href='#17.5.sentence-1'>.</a></div> <div id='17.5.sentence-2' class='sentence'>Let <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>&hellip;</span>, <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">k</span></span></span></span></span></span></span> be
the elements of the <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a><a class='hidden_link' href='#17.5.sentence-2'>.</a></div> <div id='17.5.sentence-3' class='sentence'>If the destination type is an array of unknown bound,
it is defined as having <span class='math'><span class='mathalpha'>k</span></span> elements<a class='hidden_link' href='#17.5.sentence-3'>.</a></div> <div id='17.5.sentence-4' class='sentence'>Let <span class='math'><span class='mathalpha'>n</span></span> denote the array size after this potential adjustment<a class='hidden_link' href='#17.5.sentence-4'>.</a></div> <div id='17.5.sentence-5' class='sentence'>If <span class='math'><span class='mathalpha'>k</span></span> is greater than <span class='math'><span class='mathalpha'>n</span></span>,
the program is ill-formed<a class='hidden_link' href='#17.5.sentence-5'>.</a></div> <div id='17.5.sentence-6' class='sentence'>Otherwise, the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> array element is copy-initialized with
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> for each <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">k</span></span></span></span></span>, and
value-initialized for each <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">k</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">&lt;</span></span><span class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span><a class='hidden_link' href='#17.5.sentence-6'>.</a></div> <div id='17.5.sentence-7' class='sentence'>For each <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">&lt;</span></span><span class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span>,
every value computation and side effect associated with
the initialization of the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> element of the array
is sequenced before those associated with
the initialization of the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> element<a class='hidden_link' href='#17.5.sentence-7'>.</a></div></li><li id='17.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.6'>(17.6)</a></div><div id='17.6.sentence-1' class='sentence'>Otherwise, if the destination type is a (possibly cv-qualified) class type:</div><ul class='itemize'><li id='17.6.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#17.6.1'>(17.6.1)</a></div><div id='17.6.1.sentence-1' class='sentence'>If the initializer expression is a prvalue
and the cv-unqualified version of the source type
is the same class as the class of the destination,
the initializer expression is used to initialize the destination object<a class='hidden_link' href='#17.6.1.sentence-1'>.</a></div> <div id='17.6.1.example-1' class='example'>[&nbsp;<a class='example_link' href='#17.6.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='17.6.1.sentence-2' class='sentence'><span class='texttt'>T x <span class='operator'>=</span> T<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;</span> calls the <span class='texttt'>T</span> default constructor to initialize <span class='texttt'>x</span><a class='hidden_link' href='#17.6.1.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='17.6.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#17.6.2'>(17.6.2)</a></div><div id='17.6.2.sentence-1' class='sentence'>Otherwise, if the initialization is direct-initialization,
or if it is copy-initialization where the cv-unqualified version of the source
type is the same class as, or a derived class of, the class of the destination,
constructors are considered<a class='hidden_link' href='#17.6.2.sentence-1'>.</a></div> <div id='17.6.2.sentence-2' class='sentence'>The applicable constructors
are enumerated (<a href='over.match.ctor'>[over.match.ctor]</a>), and the best one is chosen
through overload resolution (<a href='over.match'>[over.match]</a>)<a class='hidden_link' href='#17.6.2.sentence-2'>.</a></div> <div id='17.6.2.sentence-3' class='sentence'>Then:
<ul class='itemize'><li id='17.6.2.1'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#17.6.2.1'>(17.6.2.1)</a></div>If overload resolution is successful,
the selected constructor
is called to initialize the object, with the initializer
expression or <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a> as its argument(s).</li><li id='17.6.2.2'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#17.6.2.2'>(17.6.2.2)</a></div>Otherwise, if no constructor is viable,
the destination type is
an aggregate class, and
the initializer is a parenthesized <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a>,
the object is initialized as follows. Let <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>&hellip;</span>, <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span> be the elements of the aggregate (<a href='#aggr'>[dcl.init.aggr]</a>). Let <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>&hellip;</span>, <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">k</span></span></span></span></span></span></span> be the elements of the <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a>. If <span class='math'><span class='mathalpha'>k</span></span> is greater than <span class='math'><span class='mathalpha'>n</span></span>, the program is ill-formed. The element <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is copy-initialized with
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> for <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">k</span></span></span></span></span>. The remaining elements are initialized with
their default member initializers, if any, and
otherwise are value-initialized. For each <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">&lt;</span></span><span class="mjx-mi MJXc-space3"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span>,
every value computation and side effect
associated with the initialization of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
is sequenced before those associated with the initialization of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span>. <div id='17.6.2.2.note-1' class='note'>[&nbsp;<a class='note_link' href='#17.6.2.2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> By contrast with direct-list-initialization,
narrowing conversions (<a href='#list'>[dcl.init.list]</a>) are permitted,
designators are not permitted,
a temporary object bound to a reference
does not have its lifetime extended (<a href='class.temporary'>[class.temporary]</a>), and
there is no brace elision. <div id='17.6.2.2.example-2' class='example'>[&nbsp;<a class='example_link' href='#17.6.2.2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> n <span class='operator'>=</span> <span class='literal'>10</span>;

A a1<span class='curlybracket'>{</span><span class='literal'>1</span>, f<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='curlybracket'>}</span>;                   <span class='comment'>// OK, lifetime is extended</span>
A a2<span class='parenthesis'>(</span><span class='literal'>1</span>, f<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;                   <span class='comment'>// well-formed, but dangling reference</span>
A a3<span class='curlybracket'>{</span><span class='literal'>1.0</span>, <span class='literal'>1</span><span class='curlybracket'>}</span>;                   <span class='comment'>// error: narrowing conversion</span>
A a4<span class='parenthesis'>(</span><span class='literal'>1.0</span>, <span class='literal'>1</span><span class='parenthesis'>)</span>;                   <span class='comment'>// well-formed, but dangling reference</span>
A a5<span class='parenthesis'>(</span><span class='literal'>1.0</span>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </li><li id='17.6.2.3'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#17.6.2.3'>(17.6.2.3)</a></div>Otherwise, the initialization is ill-formed.</li></ul></div></li><li id='17.6.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#17.6.3'>(17.6.3)</a></div><div id='17.6.3.sentence-1' class='sentence'>Otherwise (i.e., for the remaining copy-initialization cases),
user-defined conversions that can convert from the
source type to the destination type or (when a conversion function
is used) to a derived class thereof are enumerated as described in <a href='over.match.copy'>[over.match.copy]</a>,
and the best one is chosen through overload resolution (<a href='over.match'>[over.match]</a>)<a class='hidden_link' href='#17.6.3.sentence-1'>.</a></div> <div id='17.6.3.sentence-2' class='sentence'>If the conversion cannot be done or
is ambiguous, the initialization is ill-formed<a class='hidden_link' href='#17.6.3.sentence-2'>.</a></div> <div id='17.6.3.sentence-3' class='sentence'>The function
selected is called with the initializer expression as its
argument; if the function is a constructor, the call is a prvalue
of the cv-unqualified version of the
destination type whose result object is initialized by the constructor<a class='hidden_link' href='#17.6.3.sentence-3'>.</a></div> <div id='17.6.3.sentence-4' class='sentence'>The call is used
to direct-initialize, according to the rules above, the object
that is the destination of the copy-initialization<a class='hidden_link' href='#17.6.3.sentence-4'>.</a></div></li></ul></li><li id='17.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.7'>(17.7)</a></div><div id='17.7.sentence-1' class='sentence'>Otherwise, if the source type
is a (possibly cv-qualified) class type, conversion functions are
considered<a class='hidden_link' href='#17.7.sentence-1'>.</a></div> <div id='17.7.sentence-2' class='sentence'>The applicable conversion functions are enumerated (<a href='over.match.conv'>[over.match.conv]</a>),
and the best one is chosen through overload
resolution (<a href='over.match'>[over.match]</a>)<a class='hidden_link' href='#17.7.sentence-2'>.</a></div> <div id='17.7.sentence-3' class='sentence'>The user-defined conversion so selected
is called to convert the initializer expression into the
object being initialized<a class='hidden_link' href='#17.7.sentence-3'>.</a></div> <div id='17.7.sentence-4' class='sentence'>If the conversion cannot be done or is
ambiguous, the initialization is ill-formed<a class='hidden_link' href='#17.7.sentence-4'>.</a></div></li><li id='17.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.8'>(17.8)</a></div><div id='17.8.sentence-1' class='sentence'>Otherwise, if the initialization is direct-initialization,
the source type is <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span>, and
the destination type is <span class='texttt'><span class='keyword'>bool</span></span>,
the initial value of the object being initialized is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#17.8.sentence-1'>.</a></div></li><li id='17.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#17.9'>(17.9)</a></div><div id='17.9.sentence-1' class='sentence'>Otherwise, the initial value of the object being initialized is
the (possibly converted) value of the initializer expression<a class='hidden_link' href='#17.9.sentence-1'>.</a></div> <div id='17.9.sentence-2' class='sentence'>A standard conversion sequence (<a href='conv'>[conv]</a>) will be used, if necessary,
to convert the initializer expression to the cv-unqualified version of
the destination type;
no user-defined conversions are considered<a class='hidden_link' href='#17.9.sentence-2'>.</a></div> <div id='17.9.sentence-3' class='sentence'>If the conversion cannot
be done, the initialization is ill-formed<a class='hidden_link' href='#17.9.sentence-3'>.</a></div> <div id='17.9.sentence-4' class='sentence'>When initializing a bit-field with a value that it cannot represent, the
resulting value of the bit-field is
<span class='indexparent'><a class='index' id=':value_of_bit-field_that_cannot_represent,initializer'></a></span>implementation-defined<a class='hidden_link' href='#17.9.sentence-4'>.</a></div> <span class='indexparent'><a class='index' id=':initialization,const'></a></span><div id='17.9.note-2' class='note'>[&nbsp;<a class='note_link' href='#17.9.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='17.9.sentence-5' class='sentence'>An expression of type
“<span class='textit'>cv1</span> <span class='texttt'>T</span>”
can initialize an object of type
“<span class='textit'>cv2</span> <span class='texttt'>T</span>”
independently of
the cv-qualifiers
<span class='textit'>cv1</span>
and <span class='textit'>cv2</span><a class='hidden_link' href='#17.9.sentence-5'>.</a></div><pre class='codeblock'>
<span class='keyword'>int</span> a;
<span class='keyword'>const</span> <span class='keyword'>int</span> b <span class='operator'>=</span> a;
<span class='keyword'>int</span> c <span class='operator'>=</span> b;
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </li></ul></div><div class='para' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4551'>#</a></div><div id='18.sentence-1' class='sentence'>An <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a> followed by an ellipsis is a
pack expansion (<a href='temp.variadic'>[temp.variadic]</a>)<a class='hidden_link' href='#18.sentence-1'>.</a></div></div><div class='para' id='19'><div class='marginalizedparent'><a class='marginalized' href='#19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4555'>#</a></div><div id='19.sentence-1' class='sentence'>If the initializer is a parenthesized <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a>,
the expressions are evaluated in the order
specified for function calls (<a href='expr.call'>[expr.call]</a>)<a class='hidden_link' href='#19.sentence-1'>.</a></div></div><div class='para' id='20'><div class='marginalizedparent'><a class='marginalized' href='#20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4560'>#</a></div><div id='20.sentence-1' class='sentence'>The same <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
shall not appear in multiple <a class='grammarterm' href='#nt:designator'>designator</a><span class='textit'>s</span> of a
<a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a><a class='hidden_link' href='#20.sentence-1'>.</a></div></div><div class='para' id='21'><div class='marginalizedparent'><a class='marginalized' href='#21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4565'>#</a></div><div id='21.sentence-1' class='sentence'>An object whose initialization has completed
is deemed to be constructed,
even if the object is of non-class type or
no constructor of the object's class
is invoked for the initialization<a class='hidden_link' href='#21.sentence-1'>.</a></div> <div id='21.note-1' class='note'>[&nbsp;<a class='note_link' href='#21.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='21.sentence-2' class='sentence'>Such an object might have been value-initialized
or initialized by aggregate initialization (<a href='#aggr'>[dcl.init.aggr]</a>)
or by an inherited constructor (<a href='class.inhctor.init'>[class.inhctor.init]</a>)<a class='hidden_link' href='#21.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='21.sentence-3' class='sentence'>
Destroying an object of class type invokes the destructor of the class<a class='hidden_link' href='#21.sentence-3'>.</a></div> <div id='21.sentence-4' class='sentence'>Destroying a scalar type has no effect other than
ending the lifetime of the object (<a href='basic.life'>[basic.life]</a>)<a class='hidden_link' href='#21.sentence-4'>.</a></div> <div id='21.sentence-5' class='sentence'>Destroying an array destroys each element in reverse subscript order<a class='hidden_link' href='#21.sentence-5'>.</a></div></div><div class='para' id='22'><div class='marginalizedparent'><a class='marginalized' href='#22'>22</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4581'>#</a></div><div id='22.sentence-1' class='sentence'>A declaration that specifies the initialization of a variable,
whether from an explicit initializer or by default-initialization,
is called the <a class='hidden_link' href='#def:initializing_declaration' id='def:initializing_declaration'><i >initializing declaration</i></a> of that variable<a class='hidden_link' href='#22.sentence-1'>.</a></div> <div id='22.note-1' class='note'>[&nbsp;<a class='note_link' href='#22.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='22.sentence-2' class='sentence'>In most cases
this is the defining declaration (<a href='basic.def'>[basic.def]</a>) of the variable,
but the initializing declaration
of a non-inline static data member (<a href='class.static.data'>[class.static.data]</a>)
might be the declaration within the class definition
and not the definition at namespace scope<a class='hidden_link' href='#22.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-90'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-90'>90)</a></div><div id='footnote-90.sentence-1' class='sentence'>As specified in <a href='conv.ptr'>[conv.ptr]</a>, converting an integer
literal whose value is
<span class='texttt'><span class='literal'>0</span></span>
to a pointer type results in a null pointer value<a class='hidden_link' href='#footnote-90.sentence-1'>.</a></div> <a href='#footnoteref-90'>⮥</a></div><div id='aggr' class='section'><h3 ><a class='secnum' href='#aggr' style='min-width:103pt'>9.4.1</a> Aggregates <a class='abbr_ref' href='dcl.init.aggr'>[dcl.init.aggr]</a></h3><span class='indexparent'><a class='index' id=':aggregate'></a></span><span class='indexparent'><a class='index' id=':initialization,aggregate'></a></span><span class='indexparent'><a class='index' id=':aggregate_initialization'></a></span><span class='indexparent'><a class='index' id=':initialization,array'></a></span><span class='indexparent'><a class='index' id=':initialization,class_object'></a></span><span class='indexparent'><a class='index' id=':{},initializer_list'></a></span><div class='para' id='aggr-1'><div class='marginalizedparent'><a class='marginalized' href='#aggr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4603'>#</a></div><div id='aggr-1.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:aggregate' id='def:aggregate'><i >aggregate</i></a> is an array or a class (<a href='class'>[class]</a>) with
<ul class='itemize'><li id='aggr-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-1.1'>(1.1)</a></div>no user-declared or inherited constructors (<a href='class.ctor'>[class.ctor]</a>),</li><li id='aggr-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-1.2'>(1.2)</a></div>no private or protected direct non-static data members (<a href='class.access'>[class.access]</a>),</li><li id='aggr-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-1.3'>(1.3)</a></div>no virtual functions (<a href='class.virtual'>[class.virtual]</a>), and</li><li id='aggr-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-1.4'>(1.4)</a></div>no virtual, private, or protected base classes (<a href='class.mi'>[class.mi]</a>)<a class='hidden_link' href='#aggr-1.sentence-1'>.</a></li></ul></div> <div id='aggr-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-1.sentence-2' class='sentence'>Aggregate initialization does not allow accessing
protected and private base class' members or constructors<a class='hidden_link' href='#aggr-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='aggr-2'><div class='marginalizedparent'><a class='marginalized' href='#aggr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4620'>#</a></div><div id='aggr-2.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:aggregate,elements' id='def:aggregate,elements'><i >elements</i></a> of an aggregate are:
<ul class='itemize'><li id='aggr-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-2.1'>(2.1)</a></div>for an array, the array elements in increasing subscript order, or</li><li id='aggr-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-2.2'>(2.2)</a></div>for a class, the direct base classes in declaration order,
followed by the direct non-static data members (<a href='class.mem'>[class.mem]</a>)
that are not members of an anonymous union, in declaration order<a class='hidden_link' href='#aggr-2.sentence-1'>.</a></li></ul></div></div><div class='para' id='aggr-3'><div class='marginalizedparent'><a class='marginalized' href='#aggr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4631'>#</a></div><div id='aggr-3.sentence-1' class='sentence'>When an aggregate is initialized by an initializer list
as specified in <a href='#list'>[dcl.init.list]</a>,
the elements of the initializer list are taken as initializers
for the elements of the aggregate<a class='hidden_link' href='#aggr-3.sentence-1'>.</a></div> <div id='aggr-3.sentence-2' class='sentence'>The <a class='hidden_link' href='#def:explicitly_initialized_elements,aggregate' id='def:explicitly_initialized_elements,aggregate'><i >explicitly initialized elements</i></a>
of the aggregate are determined as follows:
<ul class='itemize'><li id='aggr-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-3.1'>(3.1)</a></div>If the initializer list is a <a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a>,
the aggregate shall be of class type,
the <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> in each <a class='grammarterm' href='#nt:designator'>designator</a>
shall name a direct non-static data member of the class, and
the explicitly initialized elements of the aggregate
are the elements that are, or contain, those members.</li><li id='aggr-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-3.2'>(3.2)</a></div>If the initializer list is an <a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>,
the explicitly initialized elements of the aggregate
are the first <span class='math'><span class='mathalpha'>n</span></span> elements of the aggregate,
where <span class='math'><span class='mathalpha'>n</span></span> is the number of elements in the initializer list.</li><li id='aggr-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-3.3'>(3.3)</a></div>Otherwise, the initializer list must be <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span>,
and there are no explicitly initialized elements.</li></ul></div></div><div class='para' id='aggr-4'><div class='marginalizedparent'><a class='marginalized' href='#aggr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4656'>#</a></div><div id='aggr-4.sentence-1' class='sentence'>For each explicitly initialized element:
<ul class='itemize'><li id='aggr-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-4.1'>(4.1)</a></div>If the element is an anonymous union object and
the initializer list is a <a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a>,
the anonymous union object is initialized by the
<a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a> <span class='texttt'><span class='curlybracket'>{</span> </span><span class='textit'>D</span><span class='texttt'> <span class='curlybracket'>}</span></span>,
where <span class='textit'>D</span> is the <a class='grammarterm' href='#nt:designated-initializer-clause'>designated-initializer-clause</a>
naming a member of the anonymous union object. There shall be only one such <a class='grammarterm' href='#nt:designated-initializer-clause'>designated-initializer-clause</a>. <div id='aggr-4.1.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-4.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>union</span> <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> a;
    <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> p;
  <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span> c <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='operator'>.</span>a <span class='operator'>=</span> <span class='literal'>1</span>, <span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>3</span> <span class='curlybracket'>}</span>;
</pre>
initializes <span class='texttt'>c<span class='operator'>.</span>a</span> with 1 and <span class='texttt'>c<span class='operator'>.</span>x</span> with 3. —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='aggr-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-4.2'>(4.2)</a></div>Otherwise, the element is copy-initialized
from the corresponding <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a>
or is initialized with the <a class='grammarterm' href='#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a>
of the corresponding <a class='grammarterm' href='#nt:designated-initializer-clause'>designated-initializer-clause</a>. If that initializer is of the form
<a class='grammarterm' href='expr.ass#nt:assignment-expression'>assignment-expression</a> or
<span class='texttt'><span class='operator'>=</span> </span><a class='grammarterm' href='expr.ass#nt:assignment-expression'>assignment-expression</a>
and
a narrowing conversion (<a href='#list'>[dcl.init.list]</a>) is required
to convert the expression, the program is ill-formed. <div id='aggr-4.2.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-4.2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> If an initializer is itself an initializer list,
the element is list-initialized, which will result in a recursive application
of the rules in this subclause if the element is an aggregate. —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='aggr-4.2.example-2' class='example'>[&nbsp;<a class='example_link' href='#aggr-4.2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x;
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> i;
    <span class='keyword'>int</span> j;
  <span class='curlybracket'>}</span> b;
<span class='curlybracket'>}</span> a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='curlybracket'>{</span> <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
</pre>
initializes
<span class='texttt'>a<span class='operator'>.</span>x</span>
with 1,
<span class='texttt'>a<span class='operator'>.</span>b<span class='operator'>.</span>i</span>
with 2,
<span class='texttt'>a<span class='operator'>.</span>b<span class='operator'>.</span>j</span>
with 3.<pre class='codeblock'>
<span class='keyword'>struct</span> base1 <span class='curlybracket'>{</span> <span class='keyword'>int</span> b1, b2 <span class='operator'>=</span> <span class='literal'>42</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> base2 <span class='curlybracket'>{</span>
  base2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    b3 <span class='operator'>=</span> <span class='literal'>42</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>int</span> b3;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> derived <span class='operator'>:</span> base1, base2 <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> d;
<span class='curlybracket'>}</span>;

derived d1<span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='curlybracket'>}</span>, <span class='literal'>4</span><span class='curlybracket'>}</span>;
derived d2<span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='curlybracket'>}</span>, <span class='literal'>4</span><span class='curlybracket'>}</span>;
</pre>
initializes
<span class='texttt'>d1<span class='operator'>.</span>b1</span> with 1,
<span class='texttt'>d1<span class='operator'>.</span>b2</span> with 2,
<span class='texttt'>d1<span class='operator'>.</span>b3</span> with 42,
<span class='texttt'>d1<span class='operator'>.</span>d</span> with 4, and
<span class='texttt'>d2<span class='operator'>.</span>b1</span> with 0,
<span class='texttt'>d2<span class='operator'>.</span>b2</span> with 42,
<span class='texttt'>d2<span class='operator'>.</span>b3</span> with 42,
<span class='texttt'>d2<span class='operator'>.</span>d</span> with 4. —&nbsp;<i>end example</i></div>&nbsp;]</div> </li></ul></div></div><div class='para' id='aggr-5'><div class='marginalizedparent'><a class='marginalized' href='#aggr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4740'>#</a></div><div id='aggr-5.sentence-1' class='sentence'>For a non-union aggregate,
each element that is not an explicitly initialized element
is initialized as follows:
<ul class='itemize'><li id='aggr-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.1'>(5.1)</a></div>If the element has a default member initializer (<a href='class.mem'>[class.mem]</a>),
the element is initialized from that initializer.</li><li id='aggr-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.2'>(5.2)</a></div>Otherwise, if the element is not a reference, the element
is copy-initialized from an empty initializer list (<a href='#list'>[dcl.init.list]</a>).</li><li id='aggr-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.3'>(5.3)</a></div>Otherwise, the program is ill-formed.</li></ul></div> <div id='aggr-5.sentence-2' class='sentence'>
If the aggregate is a union and the initializer list is empty, then
<ul class='itemize'><li id='aggr-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.4'>(5.4)</a></div>if any variant member has a default member initializer,
that member is initialized from its default member initializer;</li><li id='aggr-5.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#aggr-5.5'>(5.5)</a></div>otherwise, the first member of the union (if any)
is copy-initialized from an empty initializer list<a class='hidden_link' href='#aggr-5.sentence-2'>.</a></li></ul></div> <div id='aggr-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='aggr-5.sentence-3' class='sentence'><pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> b; <span class='keyword'>int</span> c; <span class='keyword'>int</span> d <span class='operator'>=</span> b<span class='squarebracket'>[</span>a<span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
S ss <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;
</pre>
initializes
<span class='texttt'>ss<span class='operator'>.</span>a</span>
with 1,
<span class='texttt'>ss<span class='operator'>.</span>b</span>
with <span class='texttt'><span class='literal'>"asdf"</span></span>,
<span class='texttt'>ss<span class='operator'>.</span>c</span>
with the value of an expression of the form
<span class='texttt'><span class='keyword'>int</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span>
(that is, <span class='texttt'><span class='literal'>0</span></span>), and <span class='texttt'>ss<span class='operator'>.</span>d</span> with the value of <span class='texttt'>ss<span class='operator'>.</span>b<span class='squarebracket'>[</span>ss<span class='operator'>.</span>a<span class='squarebracket'>]</span></span>
(that is, <span class='texttt'><span class='literal'>'s'</span></span>), and in
<pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> i, j, k <span class='operator'>=</span> <span class='literal'>42</span>; <span class='curlybracket'>}</span>;
X a<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span>, <span class='literal'>4</span>, <span class='literal'>5</span>, <span class='literal'>6</span> <span class='curlybracket'>}</span>;
X b<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>4</span>, <span class='literal'>5</span>, <span class='literal'>6</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
</pre>
<span class='texttt'>a</span> and <span class='texttt'>b</span> have the same value</div><pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  string a;
  <span class='keyword'>int</span> b <span class='operator'>=</span> <span class='literal'>42</span>;
  <span class='keyword'>int</span> c <span class='operator'>=</span> <span class='operator'>-</span><span class='literal'>1</span>;
<span class='curlybracket'>}</span>;
</pre><div id='aggr-5.sentence-4' class='sentence'><span class='texttt'>A<span class='curlybracket'>{</span><span class='operator'>.</span>c<span class='operator'>=</span><span class='literal'>21</span><span class='curlybracket'>}</span></span> has the following steps:
<ul class='itemize'><li >Initialize <span class='texttt'>a</span> with <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span></li><li >Initialize <span class='texttt'>b</span> with <span class='texttt'><span class='operator'>=</span> <span class='literal'>42</span></span></li><li >Initialize <span class='texttt'>c</span> with <span class='texttt'><span class='operator'>=</span> <span class='literal'>21</span></span></li></ul></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='aggr-6'><div class='marginalizedparent'><a class='marginalized' href='#aggr-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4801'>#</a></div><div id='aggr-6.sentence-1' class='sentence'>The initializations of the elements of the aggregate
are evaluated in the element order<a class='hidden_link' href='#aggr-6.sentence-1'>.</a></div> <div id='aggr-6.sentence-2' class='sentence'>That is,
all value computations and side effects associated with a given element
are sequenced before
those of any element that follows it in order<a class='hidden_link' href='#aggr-6.sentence-2'>.</a></div></div><div class='para' id='aggr-7'><div class='marginalizedparent'><a class='marginalized' href='#aggr-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4809'>#</a></div><div id='aggr-7.sentence-1' class='sentence'>An aggregate that is a class can also be initialized with a single
expression not enclosed in braces, as described in <a href='#dcl.init'>[dcl.init]</a><a class='hidden_link' href='#aggr-7.sentence-1'>.</a></div></div><div class='para' id='aggr-8'><div class='marginalizedparent'><a class='marginalized' href='#aggr-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4813'>#</a></div><div id='aggr-8.sentence-1' class='sentence'>The destructor for each element of class type
is potentially invoked (<a href='class.dtor'>[class.dtor]</a>)
from the context where the aggregate initialization occurs<a class='hidden_link' href='#aggr-8.sentence-1'>.</a></div> <div id='aggr-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-8.sentence-2' class='sentence'>This provision ensures that destructors can be called
for fully-constructed subobjects
in case an exception is thrown (<a href='except.ctor'>[except.ctor]</a>)<a class='hidden_link' href='#aggr-8.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='aggr-9'><div class='marginalizedparent'><a class='marginalized' href='#aggr-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4823'>#</a></div><div id='aggr-9.sentence-1' class='sentence'>An array of unknown bound initialized with a
brace-enclosed
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
containing
<span class='texttt'>n</span>
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>
is defined as having
<span class='texttt'>n</span>
elements (<a href='dcl.array'>[dcl.array]</a>)<a class='hidden_link' href='#aggr-9.sentence-1'>.</a></div> <div id='aggr-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='aggr-9.sentence-2' class='sentence'><pre class='codeblock'>
<span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>3</span>, <span class='literal'>5</span> <span class='curlybracket'>}</span>;
</pre>
declares and initializes
<span class='texttt'>x</span>
as a one-dimensional array that has three elements
since no size was specified and there are three initializers<a class='hidden_link' href='#aggr-9.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='aggr-9.sentence-3' class='sentence'>
An array of unknown bound shall not be initialized with
an empty <a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a> <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#aggr-9.sentence-3'>.</a><a class='footnotenum' href='#footnote-91' id='footnoteref-91'>91</a></div> <div id='aggr-9.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-9.sentence-4' class='sentence'>A default member initializer does not determine the bound for a member
array of unknown bound<a class='hidden_link' href='#aggr-9.sentence-4'>.</a></div> <div id='aggr-9.sentence-5' class='sentence'>Since the default member initializer is
ignored if a suitable <a class='grammarterm' href='class.base.init#nt:mem-initializer'>mem-initializer</a> is present (<a href='class.base.init'>[class.base.init]</a>),
the default member initializer is not
considered to initialize the array of unknown bound<a class='hidden_link' href='#aggr-9.sentence-5'>.</a></div> <div id='aggr-9.example-2' class='example'>[&nbsp;<a class='example_link' href='#aggr-9.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> y<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>0</span> <span class='curlybracket'>}</span>;          <span class='comment'>// error: non-static data member of incomplete type</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='aggr-10'><div class='marginalizedparent'><a class='marginalized' href='#aggr-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4861'>#</a></div><div id='aggr-10.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-10.sentence-1' class='sentence'>Static data members,
non-static data members of anonymous union members,
and
unnamed bit-fields
are not considered elements of the aggregate<a class='hidden_link' href='#aggr-10.sentence-1'>.</a></div> <div id='aggr-10.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>static</span> <span class='keyword'>int</span> s;
  <span class='keyword'>int</span> j;
  <span class='keyword'>int</span> <span class='operator'>:</span><span class='literal'>17</span>;
  <span class='keyword'>int</span> k;
<span class='curlybracket'>}</span> a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;
</pre><div id='aggr-10.sentence-2' class='sentence'>Here, the second initializer 2 initializes
<span class='texttt'>a<span class='operator'>.</span>j</span>
and not the static data member
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>s</span>, and the third initializer 3 initializes <span class='texttt'>a<span class='operator'>.</span>k</span>
and not the unnamed bit-field before it<a class='hidden_link' href='#aggr-10.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='aggr-11'><div class='marginalizedparent'><a class='marginalized' href='#aggr-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4887'>#</a></div><div id='aggr-11.sentence-1' class='sentence'>An
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
is ill-formed if the number of
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>
exceeds the number of elements of the aggregate<a class='hidden_link' href='#aggr-11.sentence-1'>.</a></div> <div id='aggr-11.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='aggr-11.sentence-2' class='sentence'><pre class='codeblock'>
<span class='keyword'>char</span> cv<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>'a'</span>, <span class='literal'>'s'</span>, <span class='literal'>'d'</span>, <span class='literal'>'f'</span>, <span class='literal'>0</span> <span class='curlybracket'>}</span>;     <span class='comment'>// error</span>
</pre>
is ill-formed<a class='hidden_link' href='#aggr-11.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='aggr-12'><div class='marginalizedparent'><a class='marginalized' href='#aggr-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4900'>#</a></div><div id='aggr-12.sentence-1' class='sentence'>If a member has a default member initializer
and a potentially-evaluated subexpression thereof is an aggregate
initialization that would use that default member initializer,
the program is ill-formed<a class='hidden_link' href='#aggr-12.sentence-1'>.</a></div> <div id='aggr-12.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A;
<span class='keyword'>extern</span> A a;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> A<span class='operator'>&amp;</span> a1 <span class='curlybracket'>{</span> A<span class='curlybracket'>{</span>a,a<span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;       <span class='comment'>// OK</span>
  <span class='keyword'>const</span> A<span class='operator'>&amp;</span> a2 <span class='curlybracket'>{</span> A<span class='curlybracket'>{</span><span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;          <span class='comment'>// error</span>
<span class='curlybracket'>}</span>;
A a<span class='curlybracket'>{</span>a,a<span class='curlybracket'>}</span>;                       <span class='comment'>// OK</span>

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> n <span class='operator'>=</span> B<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='operator'>.</span>n;                <span class='comment'>// error</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='aggr-13'><div class='marginalizedparent'><a class='marginalized' href='#aggr-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4921'>#</a></div><div id='aggr-13.sentence-1' class='sentence'>If an aggregate class <span class='texttt'>C</span> contains a subaggregate element
<span class='texttt'>e</span> with no elements,
the <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a> for <span class='texttt'>e</span> shall not be
omitted from an <a class='grammarterm' href='#nt:initializer-list'>initializer-list</a> for an object of type
<span class='texttt'>C</span> unless the <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span> for all
elements of <span class='texttt'>C</span> following <span class='texttt'>e</span> are also omitted<a class='hidden_link' href='#aggr-13.sentence-1'>.</a></div> <div id='aggr-13.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> s;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  S s1;
  <span class='keyword'>int</span> i1;
  S s2;
  <span class='keyword'>int</span> i2;
  S s3;
  <span class='keyword'>int</span> i3;
<span class='curlybracket'>}</span> a <span class='operator'>=</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>,              <span class='comment'>// Required initialization</span>
  <span class='literal'>0</span>,
  s,                <span class='comment'>// Required initialization</span>
  <span class='literal'>0</span>
<span class='curlybracket'>}</span>;                  <span class='comment'>// Initialization not required for <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;s3</span> because <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i3</span> is also not initialized</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='aggr-14'><div class='marginalizedparent'><a class='marginalized' href='#aggr-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4947'>#</a></div><div id='aggr-14.sentence-1' class='sentence'>When initializing a multi-dimensional array,
the
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>
initialize the elements with the last (rightmost) index of the array
varying the fastest (<a href='dcl.array'>[dcl.array]</a>)<a class='hidden_link' href='#aggr-14.sentence-1'>.</a></div> <div id='aggr-14.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='aggr-14.sentence-2' class='sentence'><pre class='codeblock'>
<span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>3</span>, <span class='literal'>1</span>, <span class='literal'>4</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;
</pre>
initializes
<span class='texttt'>x<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>
to
<span class='texttt'><span class='literal'>3</span></span>,
<span class='texttt'>x<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>
to
<span class='texttt'><span class='literal'>1</span></span>,
<span class='texttt'>x<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>
to
<span class='texttt'><span class='literal'>4</span></span>,
and
<span class='texttt'>x<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>
to
<span class='texttt'><span class='literal'>2</span></span><a class='hidden_link' href='#aggr-14.sentence-2'>.</a></div> <div id='aggr-14.sentence-3' class='sentence'>On the other hand,
<pre class='codeblock'>
<span class='keyword'>float</span> y<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>2</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>3</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>4</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre>
initializes the first column of
<span class='texttt'>y</span>
(regarded as a two-dimensional array)
and leaves the rest zero<a class='hidden_link' href='#aggr-14.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='aggr-15'><div class='marginalizedparent'><a class='marginalized' href='#aggr-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L4983'>#</a></div><div id='aggr-15.sentence-1' class='sentence'>Braces can be elided in an
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
as follows<a class='hidden_link' href='#aggr-15.sentence-1'>.</a></div> <div id='aggr-15.sentence-2' class='sentence'>If the
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
begins with a left brace,
then the succeeding comma-separated list of
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>
initializes the elements of a subaggregate;
it is erroneous for there to be more
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>
than elements<a class='hidden_link' href='#aggr-15.sentence-2'>.</a></div> <div id='aggr-15.sentence-3' class='sentence'>If, however, the
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
for a subaggregate does not begin with a left brace,
then only enough
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>
from the list are taken to initialize the elements of the subaggregate;
any remaining
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>
are left to initialize the next element of the aggregate
of which the current subaggregate is an element<a class='hidden_link' href='#aggr-15.sentence-3'>.</a></div> <div id='aggr-15.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='aggr-15.sentence-4' class='sentence'><pre class='codeblock'>
<span class='keyword'>float</span> y<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>3</span>, <span class='literal'>5</span> <span class='curlybracket'>}</span>,
  <span class='curlybracket'>{</span> <span class='literal'>2</span>, <span class='literal'>4</span>, <span class='literal'>6</span> <span class='curlybracket'>}</span>,
  <span class='curlybracket'>{</span> <span class='literal'>3</span>, <span class='literal'>5</span>, <span class='literal'>7</span> <span class='curlybracket'>}</span>,
<span class='curlybracket'>}</span>;
</pre>
is a completely-braced initialization:
1, 3, and 5 initialize the first row of the array
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>,
namely
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>,
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>,
and
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#aggr-15.sentence-4'>.</a></div> <div id='aggr-15.sentence-5' class='sentence'>Likewise the next two lines initialize
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>
and
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#aggr-15.sentence-5'>.</a></div> <div id='aggr-15.sentence-6' class='sentence'>The initializer ends early and therefore
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span></span>s
elements are initialized as if explicitly initialized with an
expression of the form
<span class='texttt'><span class='keyword'>float</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
that is, are initialized with
<span class='texttt'><span class='literal'>0.0</span></span><a class='hidden_link' href='#aggr-15.sentence-6'>.</a></div> <div id='aggr-15.sentence-7' class='sentence'>In the following example, braces in the
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
are elided;
however the
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
has the same effect as the completely-braced
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
of the above example,
<pre class='codeblock'>
<span class='keyword'>float</span> y<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span>
  <span class='literal'>1</span>, <span class='literal'>3</span>, <span class='literal'>5</span>, <span class='literal'>2</span>, <span class='literal'>4</span>, <span class='literal'>6</span>, <span class='literal'>3</span>, <span class='literal'>5</span>, <span class='literal'>7</span>
<span class='curlybracket'>}</span>;
</pre></div><div id='aggr-15.sentence-8' class='sentence'>The initializer for
<span class='texttt'>y</span>
begins with a left brace, but the one for
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>
does not,
therefore three elements from the list are used<a class='hidden_link' href='#aggr-15.sentence-8'>.</a></div> <div id='aggr-15.sentence-9' class='sentence'>Likewise the next three are taken successively for
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>
and
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#aggr-15.sentence-9'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='aggr-16'><div class='marginalizedparent'><a class='marginalized' href='#aggr-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5059'>#</a></div><div id='aggr-16.sentence-1' class='sentence'>All implicit type conversions (<a href='conv'>[conv]</a>) are considered when
initializing the element with an <a class='grammarterm' href='expr.ass#nt:assignment-expression'>assignment-expression</a><a class='hidden_link' href='#aggr-16.sentence-1'>.</a></div> <div id='aggr-16.sentence-2' class='sentence'>If the
<a class='grammarterm' href='expr.ass#nt:assignment-expression'>assignment-expression</a>
can initialize an element, the element is initialized<a class='hidden_link' href='#aggr-16.sentence-2'>.</a></div> <div id='aggr-16.sentence-3' class='sentence'>Otherwise, if the element is itself a subaggregate,
brace elision is assumed and the
<a class='grammarterm' href='expr.ass#nt:assignment-expression'>assignment-expression</a>
is considered for the initialization of the first element of the subaggregate<a class='hidden_link' href='#aggr-16.sentence-3'>.</a></div> <div id='aggr-16.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-16.sentence-4' class='sentence'>As specified above, brace elision cannot apply to
subaggregates with no elements; an
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a> for the entire subobject is
required<a class='hidden_link' href='#aggr-16.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> <div id='aggr-16.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  A a1, a2;
  <span class='keyword'>int</span> z;
<span class='curlybracket'>}</span>;
A a;
B b <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>4</span>, a, a <span class='curlybracket'>}</span>;
</pre><div id='aggr-16.sentence-5' class='sentence'>Braces are elided around the
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a>
for
<span class='texttt'>b<span class='operator'>.</span>a1<span class='operator'>.</span>i</span><a class='hidden_link' href='#aggr-16.sentence-5'>.</a></div> <div id='aggr-16.sentence-6' class='sentence'><span class='texttt'>b<span class='operator'>.</span>a1<span class='operator'>.</span>i</span>
is initialized with 4,
<span class='texttt'>b<span class='operator'>.</span>a2</span>
is initialized with
<span class='texttt'>a</span>,
<span class='texttt'>b<span class='operator'>.</span>z</span>
is initialized with whatever
<span class='texttt'>a<span class='operator'>.</span><span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
returns<a class='hidden_link' href='#aggr-16.sentence-6'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='aggr-17'><div class='marginalizedparent'><a class='marginalized' href='#aggr-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5105'>#</a></div><span class='indexparent'><a class='index' id=':initialization,array_of_class_objects'></a></span><div id='aggr-17.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-17.sentence-1' class='sentence'>An aggregate array or an aggregate class may contain elements of a
class type with a user-declared constructor (<a href='class.ctor'>[class.ctor]</a>)<a class='hidden_link' href='#aggr-17.sentence-1'>.</a></div> <div id='aggr-17.sentence-2' class='sentence'>Initialization of these aggregate objects is described in <a href='class.expl.init'>[class.expl.init]</a><a class='hidden_link' href='#aggr-17.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='aggr-18'><div class='marginalizedparent'><a class='marginalized' href='#aggr-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5113'>#</a></div><div id='aggr-18.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-18.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-18.sentence-1' class='sentence'>Whether the initialization of aggregates with static storage duration
is static or dynamic is specified
in <a href='basic.start.static'>[basic.start.static]</a>, <a href='basic.start.dynamic'>[basic.start.dynamic]</a>, and <a href='stmt.dcl'>[stmt.dcl]</a><a class='hidden_link' href='#aggr-18.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='aggr-19'><div class='marginalizedparent'><a class='marginalized' href='#aggr-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5120'>#</a></div><div id='aggr-19.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':initialization,union'></a></span>When a union is initialized with an initializer list,
there shall not be more than one
explicitly initialized element<a class='hidden_link' href='#aggr-19.sentence-1'>.</a></div> <div id='aggr-19.example-1' class='example'>[&nbsp;<a class='example_link' href='#aggr-19.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>union</span> u <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> b; <span class='curlybracket'>}</span>;
u a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;
u b <span class='operator'>=</span> a;
u c <span class='operator'>=</span> <span class='literal'>1</span>;                        <span class='comment'>// error</span>
u d <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>0</span>, <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;            <span class='comment'>// error</span>
u e <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;               <span class='comment'>// error</span>
u f <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='operator'>.</span>b <span class='operator'>=</span> <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;
u g <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='operator'>.</span>a <span class='operator'>=</span> <span class='literal'>1</span>, <span class='operator'>.</span>b <span class='operator'>=</span> <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;  <span class='comment'>// error</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='aggr-20'><div class='marginalizedparent'><a class='marginalized' href='#aggr-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5138'>#</a></div><div id='aggr-20.note-1' class='note'>[&nbsp;<a class='note_link' href='#aggr-20.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='aggr-20.sentence-1' class='sentence'>As described above,
the braces around the
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a>
for a union member can be omitted if the
union is a member of another aggregate<a class='hidden_link' href='#aggr-20.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-91'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-91'>91)</a></div><div id='footnote-91.sentence-1' class='sentence'>The syntax provides for empty <a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a><span class='textit'>s</span>,
but nonetheless C++ does not have zero length arrays<a class='hidden_link' href='#footnote-91.sentence-1'>.</a></div> <a href='#footnoteref-91'>⮥</a></div></div><div id='string' class='section'><h3 ><a class='secnum' href='#string' style='min-width:103pt'>9.4.2</a> Character arrays <a class='abbr_ref' href='dcl.init.string'>[dcl.init.string]</a></h3><span class='indexparent'><a class='index' id=':initialization,character_array'></a></span><div class='para' id='string-1'><div class='marginalizedparent'><a class='marginalized' href='#string-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5150'>#</a></div><div id='string-1.sentence-1' class='sentence'>An array of ordinary character type (<a href='basic.fundamental'>[basic.fundamental]</a>),
<span class='texttt'><span class='keyword'>char8_&shy;t</span></span> array,
<span class='texttt'><span class='keyword'>char16_&shy;t</span></span> array,
<span class='texttt'><span class='keyword'>char32_&shy;t</span></span> array,
or <span class='texttt'><span class='keyword'>wchar_&shy;t</span></span> array
can be initialized by
an ordinary string literal,
UTF-8 string literal,
UTF-16 string literal,
UTF-32 string literal, or
wide string literal,
respectively, or by an appropriately-typed <a class='grammarterm' href='lex.string#nt:string-literal'>string-literal</a> enclosed in
braces (<a href='lex.string'>[lex.string]</a>)<a class='hidden_link' href='#string-1.sentence-1'>.</a></div> <div id='string-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':initialization,character_array_'></a></span>Successive
characters of the
value of the <a class='grammarterm' href='lex.string#nt:string-literal'>string-literal</a>
initialize the elements of the array<a class='hidden_link' href='#string-1.sentence-2'>.</a></div> <div id='string-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#string-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='string-1.sentence-3' class='sentence'><pre class='codeblock'>
<span class='keyword'>char</span> msg<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>"Syntax error on line %s\n"</span>;
</pre>
shows a character array whose members are initialized
with a
<a class='grammarterm' href='lex.string#nt:string-literal'>string-literal</a><a class='hidden_link' href='#string-1.sentence-3'>.</a></div> <div id='string-1.sentence-4' class='sentence'>Note that because
<span class='texttt'><span class='literal'>'\n'</span></span>
is a single character and
because a trailing
<span class='texttt'><span class='literal'>'\0'</span></span>
is appended,
<span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>msg<span class='parenthesis'>)</span></span>
is
<span class='texttt'><span class='literal'>25</span></span><a class='hidden_link' href='#string-1.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='string-2'><div class='marginalizedparent'><a class='marginalized' href='#string-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5187'>#</a></div><div id='string-2.sentence-1' class='sentence'>There shall not be more initializers than there are array elements<a class='hidden_link' href='#string-2.sentence-1'>.</a></div> <div id='string-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#string-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='string-2.sentence-2' class='sentence'><pre class='codeblock'>
<span class='keyword'>char</span> cv<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>"asdf"</span>;            <span class='comment'>// error</span>
</pre>
is ill-formed since there is no space for the implied trailing
<span class='texttt'><span class='literal'>'\0'</span></span><a class='hidden_link' href='#string-2.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='string-3'><div class='marginalizedparent'><a class='marginalized' href='#string-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5197'>#</a></div><div id='string-3.sentence-1' class='sentence'>If there are fewer initializers than there are array elements, each element not
explicitly initialized shall be zero-initialized (<a href='#dcl.init'>[dcl.init]</a>)<a class='hidden_link' href='#string-3.sentence-1'>.</a></div></div></div><div id='ref' class='section'><h3 ><a class='secnum' href='#ref' style='min-width:103pt'>9.4.3</a> References <a class='abbr_ref' href='dcl.init.ref'>[dcl.init.ref]</a></h3><span class='indexparent'><a class='index' id=':initialization,reference'></a></span><div class='para' id='ref-1'><div class='marginalizedparent'><a class='marginalized' href='#ref-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5204'>#</a></div><div id='ref-1.sentence-1' class='sentence'>A variable whose declared type is
“reference to type <span class='texttt'>T</span>” (<a href='dcl.ref'>[dcl.ref]</a>)
shall be initialized<a class='hidden_link' href='#ref-1.sentence-1'>.</a></div> <div id='ref-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#ref-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>int</span><span class='operator'>&amp;</span> r <span class='operator'>=</span> i;                   <span class='comment'>// <span class='tcode_in_codeblock'>r</span> refers to <span class='tcode_in_codeblock'>i</span></span>
  r <span class='operator'>=</span> <span class='literal'>1</span>;                        <span class='comment'>// the value of <span class='tcode_in_codeblock'>i</span> becomes <span class='tcode_in_codeblock'>1</span></span>
  <span class='keyword'>int</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='operator'>&amp;</span>r;                  <span class='comment'>// <span class='tcode_in_codeblock'>p</span> points to <span class='tcode_in_codeblock'>i</span></span>
  <span class='keyword'>int</span><span class='operator'>&amp;</span> rr <span class='operator'>=</span> r;                  <span class='comment'>// <span class='tcode_in_codeblock'>rr</span> refers to what <span class='tcode_in_codeblock'>r</span> refers to, that is, to <span class='tcode_in_codeblock'>i</span></span>
  <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>rg<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='operator'>=</span> g;           <span class='comment'>// <span class='tcode_in_codeblock'>rg</span> refers to the function <span class='tcode_in_codeblock'>g</span></span>
  rg<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                        <span class='comment'>// calls function <span class='tcode_in_codeblock'>g</span></span>
  <span class='keyword'>int</span> a<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span>;
  <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>ra<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> a;             <span class='comment'>// <span class='tcode_in_codeblock'>ra</span> refers to the array <span class='tcode_in_codeblock'>a</span></span>
  ra<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span> <span class='operator'>=</span> i;                    <span class='comment'>// modifies <span class='tcode_in_codeblock'>a[1]</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='ref-2'><div class='marginalizedparent'><a class='marginalized' href='#ref-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5226'>#</a></div><div id='ref-2.sentence-1' class='sentence'>A reference cannot be changed to refer to another object after initialization<a class='hidden_link' href='#ref-2.sentence-1'>.</a></div> <div id='ref-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':assignment,reference'></a></span><div id='ref-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#ref-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> Assignment to a reference assigns to the object referred to by the reference (<a href='expr.ass'>[expr.ass]</a>). —&nbsp;<i>end note</i></div>&nbsp;]</div> 
<span class='indexparent'><a class='index' id=':argument_passing,reference_and'></a></span>Argument passing (<a href='expr.call'>[expr.call]</a>)
<span class='indexparent'><a class='index' id=':return,reference_and'></a></span>and function value return (<a href='stmt.return'>[stmt.return]</a>) are initializations<a class='hidden_link' href='#ref-2.sentence-3'>.</a></div></div><div class='para' id='ref-3'><div class='marginalizedparent'><a class='marginalized' href='#ref-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5237'>#</a></div><div id='ref-3.sentence-1' class='sentence'>The initializer can be omitted for a reference only in a parameter declaration (<a href='dcl.fct'>[dcl.fct]</a>),
in the declaration of a function return type, in the declaration of
a class member within its class definition (<a href='class.mem'>[class.mem]</a>), and where the
<span class='texttt'><span class='keyword'>extern</span></span>
specifier is explicitly used<a class='hidden_link' href='#ref-3.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id=':declaration,extern_reference'></a></span><div id='ref-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#ref-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span><span class='operator'>&amp;</span> r1;                        <span class='comment'>// error: initializer missing</span>
<span class='keyword'>extern</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> r2;                 <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='ref-4'><div class='marginalizedparent'><a class='marginalized' href='#ref-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5251'>#</a></div><div id='ref-4.sentence-1' class='sentence'>Given types “<span class='textit'>cv1</span> <span class='texttt'>T1</span>” and “<span class='textit'>cv2</span> <span class='texttt'>T2</span>”,
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is <a class='hidden_link' href='#def:reference-related' id='def:reference-related'><i >reference-related</i></a> to
“<span class='textit'>cv2</span> <span class='texttt'>T2</span>” if
<span class='texttt'>T1</span> is similar (<a href='conv.qual'>[conv.qual]</a>) to <span class='texttt'>T2</span>, or
<span class='texttt'>T1</span> is a base class of <span class='texttt'>T2</span><a class='hidden_link' href='#ref-4.sentence-1'>.</a></div> <div id='ref-4.sentence-2' class='sentence'>“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is <a class='hidden_link' href='#def:reference-compatible' id='def:reference-compatible'><i >reference-compatible</i></a>
with “<span class='textit'>cv2</span> <span class='texttt'>T2</span>” if
a prvalue of type “pointer to <span class='textit'>cv2</span> <span class='texttt'>T2</span>” can be converted to
the type “pointer to <span class='textit'>cv1</span> <span class='texttt'>T1</span>”
via a standard conversion sequence (<a href='conv'>[conv]</a>)<a class='hidden_link' href='#ref-4.sentence-2'>.</a></div> <div id='ref-4.sentence-3' class='sentence'>In all cases where the reference-compatible relationship
of two types is used to establish the validity of a reference binding and
the standard conversion sequence would be ill-formed,
a program that necessitates such a binding is ill-formed<a class='hidden_link' href='#ref-4.sentence-3'>.</a></div></div><div class='para' id='ref-5'><div class='marginalizedparent'><a class='marginalized' href='#ref-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5267'>#</a></div><div id='ref-5.sentence-1' class='sentence'>A reference to type “<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is initialized by
an expression of type “<span class='textit'>cv2</span> <span class='texttt'>T2</span>” as follows:<span class='indexparent'><a class='index' id=':binding,reference'></a></span></div><ul class='itemize'><li id='ref-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-5.1'>(5.1)</a></div><div id='ref-5.1.sentence-1' class='sentence'>If the reference is an lvalue reference and the initializer expression
<ul class='itemize'><li id='ref-5.1.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.1.1'>(5.1.1)</a></div>is an lvalue (but is not a
bit-field), and
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is reference-compatible with
“<span class='textit'>cv2</span> <span class='texttt'>T2</span>”, or</li><li id='ref-5.1.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.1.2'>(5.1.2)</a></div>has a class type (i.e.,
<span class='texttt'>T2</span>
is a class type), where <span class='texttt'>T1</span> is not reference-related to <span class='texttt'>T2</span>, and can be converted
to an lvalue of type “<span class='textit'>cv3</span> <span class='texttt'>T3</span>”, where
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is reference-compatible with
“<span class='textit'>cv3</span> <span class='texttt'>T3</span>”<a class='footnotenum' href='#footnote-92' id='footnoteref-92'>92</a>
(this conversion is selected by enumerating the applicable conversion
functions (<a href='over.match.ref'>[over.match.ref]</a>) and choosing the best one through <a href='over.match'>overload
resolution</a>),</li></ul>
then the reference is bound to the initializer expression lvalue in the
first case and to the lvalue result of the conversion
in the second case (or, in either case, to the appropriate base class subobject of the object)<a class='hidden_link' href='#ref-5.1.sentence-1'>.</a></div> <div id='ref-5.1.note-1' class='note'>[&nbsp;<a class='note_link' href='#ref-5.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref-5.1.sentence-2' class='sentence'>The usual <a href='conv.lval'>lvalue-to-rvalue</a>, <a href='conv.array'>array-to-pointer</a>,
and <a href='conv.func'>function-to-pointer</a> standard
conversions are not needed, and therefore are suppressed, when such
direct bindings to lvalues are done<a class='hidden_link' href='#ref-5.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> <div id='ref-5.1.example-1' class='example'>[&nbsp;<a class='example_link' href='#ref-5.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>double</span> d <span class='operator'>=</span> <span class='literal'>2.0</span>;
<span class='keyword'>double</span><span class='operator'>&amp;</span> rd <span class='operator'>=</span> d;                 <span class='comment'>// <span class='tcode_in_codeblock'>rd</span> refers to <span class='tcode_in_codeblock'>d</span></span>
<span class='keyword'>const</span> <span class='keyword'>double</span><span class='operator'>&amp;</span> rcd <span class='operator'>=</span> d;          <span class='comment'>// <span class='tcode_in_codeblock'>rcd</span> refers to <span class='tcode_in_codeblock'>d</span></span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span> <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span> b;
A<span class='operator'>&amp;</span> ra <span class='operator'>=</span> b;                      <span class='comment'>// <span class='tcode_in_codeblock'>ra</span> refers to <span class='tcode_in_codeblock'>A</span> subobject in <span class='tcode_in_codeblock'>b</span></span>
<span class='keyword'>const</span> A<span class='operator'>&amp;</span> rca <span class='operator'>=</span> b;               <span class='comment'>// <span class='tcode_in_codeblock'>rca</span> refers to <span class='tcode_in_codeblock'>A</span> subobject in <span class='tcode_in_codeblock'>b</span></span>
<span class='keyword'>int</span><span class='operator'>&amp;</span> ir <span class='operator'>=</span> B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                  <span class='comment'>// <span class='tcode_in_codeblock'>ir</span> refers to the result of <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;operator int&amp;</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='ref-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-5.2'>(5.2)</a></div><div id='ref-5.2.sentence-1' class='sentence'>Otherwise,
if the reference is an lvalue reference to a
type that is not const-qualified or is volatile-qualified,
the program is ill-formed<a class='hidden_link' href='#ref-5.2.sentence-1'>.</a></div> <div id='ref-5.2.example-2' class='example'>[&nbsp;<a class='example_link' href='#ref-5.2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>double</span><span class='operator'>&amp;</span> rd2 <span class='operator'>=</span> <span class='literal'>2.0</span>;              <span class='comment'>// error: not an lvalue and reference not <span class='tcode_in_codeblock'>const</span></span>
<span class='keyword'>int</span>  i <span class='operator'>=</span> <span class='literal'>2</span>;
<span class='keyword'>double</span><span class='operator'>&amp;</span> rd3 <span class='operator'>=</span> i;                <span class='comment'>// error: type mismatch and reference not <span class='tcode_in_codeblock'>const</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='ref-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-5.3'>(5.3)</a></div><div id='ref-5.3.sentence-1' class='sentence'>Otherwise, if the initializer expression
<ul class='itemize'><li id='ref-5.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.3.1'>(5.3.1)</a></div>is an rvalue (but not a bit-field) or function lvalue and
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is
reference-compatible with “<span class='textit'>cv2</span> <span class='texttt'>T2</span>”, or</li><li id='ref-5.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.3.2'>(5.3.2)</a></div>has a class type (i.e., <span class='texttt'>T2</span> is a class type), where <span class='texttt'>T1</span>
is not reference-related to <span class='texttt'>T2</span>, and can be converted to
an rvalue or function lvalue of type “<span class='textit'>cv3</span> <span class='texttt'>T3</span>”,
where “<span class='textit'>cv1</span> <span class='texttt'>T1</span>” is
reference-compatible with “<span class='textit'>cv3</span> <span class='texttt'>T3</span>” (see <a href='over.match.ref'>[over.match.ref]</a>),</li></ul>
then
the value of the initializer expression in the first case and
the result of the conversion in the second case
is called the converted initializer<a class='hidden_link' href='#ref-5.3.sentence-1'>.</a></div> <div id='ref-5.3.sentence-2' class='sentence'>If the converted initializer is a prvalue,
its type <span class='texttt'>T4</span> is adjusted to type “<span class='textit'>cv1</span> <span class='texttt'>T4</span>” (<a href='conv.qual'>[conv.qual]</a>)
and the temporary materialization conversion (<a href='conv.rval'>[conv.rval]</a>) is applied<a class='hidden_link' href='#ref-5.3.sentence-2'>.</a></div> <div id='ref-5.3.sentence-3' class='sentence'>In any case,
the reference is bound to the resulting glvalue
(or to an appropriate base class subobject)<a class='hidden_link' href='#ref-5.3.sentence-3'>.</a></div><div style='height:0.6em;display:block'></div><div id='ref-5.3.example-3' class='example'>[&nbsp;<a class='example_link' href='#ref-5.3.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> b;
<span class='keyword'>extern</span> B f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>const</span> A<span class='operator'>&amp;</span> rca2 <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                <span class='comment'>// bound to the <span class='tcode_in_codeblock'>A</span> subobject of the <span class='tcode_in_codeblock'>B</span> rvalue.</span>
A<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rra <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                      <span class='comment'>// same as above</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> x;
<span class='keyword'>const</span> A<span class='operator'>&amp;</span> r <span class='operator'>=</span> x;                     <span class='comment'>// bound to the <span class='tcode_in_codeblock'>A</span> subobject of the result of the conversion</span>
<span class='keyword'>int</span> i2 <span class='operator'>=</span> <span class='literal'>42</span>;
<span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> rri <span class='operator'>=</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>i2<span class='parenthesis'>)</span>; <span class='comment'>// bound directly to <span class='tcode_in_codeblock'>i2</span></span>
B<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rrb <span class='operator'>=</span> x;                        <span class='comment'>// bound directly to the result of <span class='tcode_in_codeblock'>operator B</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='ref-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#ref-5.4'>(5.4)</a></div><div id='ref-5.4.sentence-1' class='sentence'>Otherwise:
<ul class='itemize'><li id='ref-5.4.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.4.1'>(5.4.1)</a></div>If <span class='texttt'>T1</span> or <span class='texttt'>T2</span> is a class type and
<span class='texttt'>T1</span> is not reference-related to <span class='texttt'>T2</span>,
user-defined conversions are considered
using the rules for copy-initialization of an object of type
“<span class='textit'>cv1</span> <span class='texttt'>T1</span>” by
user-defined conversion
(<a href='#dcl.init'>[dcl.init]</a>, <a href='over.match.copy'>[over.match.copy]</a>, <a href='over.match.conv'>[over.match.conv]</a>);
the program is ill-formed if the corresponding non-reference
copy-initialization would be ill-formed. The result of the call to the
conversion function, as described for the non-reference
copy-initialization, is then used to direct-initialize the reference. For this direct-initialization, user-defined conversions are not considered.</li><li id='ref-5.4.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.4.2'>(5.4.2)</a></div>Otherwise,
the initializer expression is implicitly converted to a prvalue
of type “<span class='textit'>cv1</span> <span class='texttt'>T1</span>”. The temporary materialization conversion is applied and the reference is
bound to the result.</li></ul></div><div id='ref-5.4.sentence-2' class='sentence'>If
<span class='texttt'>T1</span>
is reference-related to
<span class='texttt'>T2</span>:
<ul class='itemize'><li id='ref-5.4.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.4.3'>(5.4.3)</a></div><span class='textit'>cv1</span>
shall be the same cv-qualification as, or greater cv-qualification than,
<span class='textit'>cv2</span>; and</li><li id='ref-5.4.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#ref-5.4.4'>(5.4.4)</a></div>if the reference is an rvalue reference,
the initializer expression shall not be an lvalue<a class='hidden_link' href='#ref-5.4.sentence-2'>.</a></li></ul></div><div id='ref-5.4.example-4' class='example'>[&nbsp;<a class='example_link' href='#ref-5.4.example-4'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> Banana <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Enigma <span class='curlybracket'>{</span> <span class='keyword'>operator</span> <span class='keyword'>const</span> Banana<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Alaska <span class='curlybracket'>{</span> <span class='keyword'>operator</span> Banana<span class='operator'>&amp;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> enigmatic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>const</span> Banana ConstBanana;
  Banana <span class='operator'>&amp;</span><span class='operator'>&amp;</span>banana1 <span class='operator'>=</span> ConstBanana<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='comment'>// error</span>
  Banana <span class='operator'>&amp;</span><span class='operator'>&amp;</span>banana2 <span class='operator'>=</span> Enigma<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;      <span class='comment'>// error</span>
  Banana <span class='operator'>&amp;</span><span class='operator'>&amp;</span>banana3 <span class='operator'>=</span> Alaska<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;      <span class='comment'>// error</span>
<span class='curlybracket'>}</span>

<span class='keyword'>const</span> <span class='keyword'>double</span><span class='operator'>&amp;</span> rcd2 <span class='operator'>=</span> <span class='literal'>2</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>rcd2</span> refers to temporary with value <span class='tcode_in_codeblock'>2.0</span></span>
<span class='keyword'>double</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> rrd <span class='operator'>=</span> <span class='literal'>2</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>rrd</span> refers to temporary with value <span class='tcode_in_codeblock'>2.0</span></span>
<span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>int</span> cvi <span class='operator'>=</span> <span class='literal'>1</span>;
<span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> r2 <span class='operator'>=</span> cvi;                <span class='comment'>// error: cv-qualifier dropped</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>operator</span> <span class='keyword'>volatile</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span> a;
<span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> r3 <span class='operator'>=</span> a;                  <span class='comment'>// error: cv-qualifier dropped</span>
                                    <span class='comment'>// from result of conversion function</span>
<span class='keyword'>double</span> d2 <span class='operator'>=</span> <span class='literal'>1.0</span>;
<span class='keyword'>double</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> rrd2 <span class='operator'>=</span> d2;                 <span class='comment'>// error: initializer is lvalue of related type</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> rri2 <span class='operator'>=</span> X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                   <span class='comment'>// error: result of conversion function is lvalue of related type</span>
<span class='keyword'>int</span> i3 <span class='operator'>=</span> <span class='literal'>2</span>;
<span class='keyword'>double</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> rrd3 <span class='operator'>=</span> i3;                 <span class='comment'>// <span class='tcode_in_codeblock'>rrd3</span> refers to temporary with value <span class='tcode_in_codeblock'>2.0</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li></ul><div id='ref-5.sentence-2' class='sentence'>In all cases except the last
(i.e., implicitly converting the initializer expression
to the referenced type),
the reference is said to <a class='hidden_link' href='#def:bind_directly' id='def:bind_directly'><i >bind directly</i></a> to the
initializer expression<a class='hidden_link' href='#ref-5.sentence-2'>.</a></div></div><div class='para' id='ref-6'><div class='marginalizedparent'><a class='marginalized' href='#ref-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5444'>#</a></div><div id='ref-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#ref-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref-6.sentence-1' class='sentence'><a href='class.temporary'>[class.temporary]</a> describes the lifetime of temporaries bound to references<a class='hidden_link' href='#ref-6.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-92'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-92'>92)</a></div><div id='footnote-92.sentence-1' class='sentence'>This requires a conversion
function (<a href='class.conv.fct'>[class.conv.fct]</a>) returning a reference type<a class='hidden_link' href='#footnote-92.sentence-1'>.</a></div> <a href='#footnoteref-92'>⮥</a></div></div><div id='list' class='section'><h3 ><a class='secnum' href='#list' style='min-width:103pt'>9.4.4</a> List-initialization <a class='abbr_ref' href='dcl.init.list'>[dcl.init.list]</a></h3><span class='indexparent'><a class='index' id=':initialization,list-initialization'></a></span><div class='para' id='list-1'><div class='marginalizedparent'><a class='marginalized' href='#list-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5452'>#</a></div><div id='list-1.sentence-1' class='sentence'><a class='hidden_link' href='#def:list-initialization' id='def:list-initialization'><i >List-initialization</i></a> is initialization of an object or reference from a
<a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a><a class='hidden_link' href='#list-1.sentence-1'>.</a></div> <div id='list-1.sentence-2' class='sentence'>Such an initializer is called an <a class='hidden_link' href='#def:initializer_list' id='def:initializer_list'><i>initializer list</i></a>, and
the comma-separated
<a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>
of the <a class='grammarterm' href='#nt:initializer-list'>initializer-list</a>
or
<a class='grammarterm' href='#nt:designated-initializer-clause'>designated-initializer-clause</a><span class='textit'>s</span>
of the <a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a>
are called the <a class='hidden_link' href='#def:elements' id='def:elements'><i>elements</i></a> of the initializer list<a class='hidden_link' href='#list-1.sentence-2'>.</a></div> <div id='list-1.sentence-3' class='sentence'>An initializer list may be empty<a class='hidden_link' href='#list-1.sentence-3'>.</a></div> <div id='list-1.sentence-4' class='sentence'>List-initialization can occur in direct-initialization or copy-initialization contexts;
list-initialization in a direct-initialization context is called
<a class='hidden_link' href='#def:direct-list-initialization' id='def:direct-list-initialization'><i >direct-list-initialization</i></a> and list-initialization in a
copy-initialization context is called <a class='hidden_link' href='#def:copy-list-initialization' id='def:copy-list-initialization'><i >copy-list-initialization</i></a><a class='hidden_link' href='#list-1.sentence-4'>.</a></div> <div id='list-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#list-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-1.sentence-5' class='sentence'>List-initialization can be used
<ul class='itemize'><li id='list-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.1'>(1.1)</a></div>as the initializer in a variable definition (<a href='#dcl.init'>[dcl.init]</a>)</li><li id='list-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.2'>(1.2)</a></div>as the initializer in a <a class='grammarterm' href='expr.new#nt:new-expression'>new-expression</a></li><li id='list-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.3'>(1.3)</a></div>in a <span class='texttt'><span class='keyword'>return</span></span> statement (<a href='stmt.return'>[stmt.return]</a>)</li><li id='list-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.4'>(1.4)</a></div>as a <a class='grammarterm' href='stmt.iter#nt:for-range-initializer'>for-range-initializer</a></li><li id='list-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.5'>(1.5)</a></div>as a function argument (<a href='expr.call'>[expr.call]</a>)</li><li id='list-1.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.6'>(1.6)</a></div>as a subscript (<a href='expr.sub'>[expr.sub]</a>)</li><li id='list-1.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.7'>(1.7)</a></div>as an argument to a constructor invocation (<a href='#dcl.init'>[dcl.init]</a>, <a href='expr.type.conv'>[expr.type.conv]</a>)</li><li id='list-1.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.8'>(1.8)</a></div>as an initializer for a non-static data member (<a href='class.mem'>[class.mem]</a>)</li><li id='list-1.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.9'>(1.9)</a></div>in a <a class='grammarterm' href='class.base.init#nt:mem-initializer'>mem-initializer</a></li><li id='list-1.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-1.10'>(1.10)</a></div>on the right-hand side of an assignment (<a href='expr.ass'>[expr.ass]</a>)</li></ul></div><div id='list-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#list-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span> a <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;
std<span class='operator'>::</span>complex<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> z<span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span><span class='curlybracket'>}</span>;
<span class='keyword'>new</span> std<span class='operator'>::</span>vector<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>string<span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='literal'>"once"</span>, <span class='literal'>"upon"</span>, <span class='literal'>"a"</span>, <span class='literal'>"time"</span><span class='curlybracket'>}</span>;  <span class='comment'>// 4 string elements</span>
f<span class='parenthesis'>(</span> <span class='curlybracket'>{</span><span class='literal'>"Nicholas"</span>,<span class='literal'>"Annemarie"</span><span class='curlybracket'>}</span> <span class='parenthesis'>)</span>;  <span class='comment'>// pass list of two elements</span>
<span class='keyword'>return</span> <span class='curlybracket'>{</span> <span class='literal'>"Norah"</span> <span class='curlybracket'>}</span>;             <span class='comment'>// return list of one element</span>
<span class='keyword'>int</span><span class='operator'>*</span> e <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                      <span class='comment'>// initialization to zero / null pointer</span>
x <span class='operator'>=</span> <span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;                  <span class='comment'>// explicitly construct a <span class='tcode_in_codeblock'>double</span></span>
std<span class='operator'>::</span>map<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>string,<span class='keyword'>int</span><span class='anglebracket'>&gt;</span> anim <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span><span class='literal'>"bear"</span>,<span class='literal'>4</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='literal'>"cassowary"</span>,<span class='literal'>2</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='literal'>"tiger"</span>,<span class='literal'>7</span><span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='list-2'><div class='marginalizedparent'><a class='marginalized' href='#list-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5496'>#</a></div><div id='list-2.sentence-1' class='sentence'>A constructor is an <a class='hidden_link' href='#def:initializer-list_constructor' id='def:initializer-list_constructor'><i >initializer-list constructor</i></a> if its first parameter is
of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_&shy;list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span> or reference to
<span class='mathit'>cv</span> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_&shy;list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span> for some type <span class='texttt'>E</span>, and either there are no other
parameters or else all other parameters have default arguments (<a href='dcl.fct.default'>[dcl.fct.default]</a>)<a class='hidden_link' href='#list-2.sentence-1'>.</a></div> <div id='list-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#list-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-2.sentence-2' class='sentence'>Initializer-list constructors are favored over other constructors in
list-initialization (<a href='over.match.list'>[over.match.list]</a>)<a class='hidden_link' href='#list-2.sentence-2'>.</a></div> <div id='list-2.sentence-3' class='sentence'>Passing an initializer list as the argument
to the constructor template <span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> C<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> of a class <span class='texttt'>C</span> does not
create an initializer-list constructor, because an initializer list argument causes the
corresponding parameter to be a non-deduced context (<a href='temp.deduct.call'>[temp.deduct.call]</a>)<a class='hidden_link' href='#list-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='list-2.sentence-4' class='sentence'>
The template
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_&shy;list</span> is not predefined; if the header
<span class='texttt'><span class='anglebracket'>&lt;</span>initializer_&shy;list<span class='anglebracket'>&gt;</span></span> is not imported or included prior to a use of
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_&shy;list</span> — even an implicit use in which the type is not
named (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>) — the program is ill-formed<a class='hidden_link' href='#list-2.sentence-4'>.</a></div></div><div class='para' id='list-3'><div class='marginalizedparent'><a class='marginalized' href='#list-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5514'>#</a></div><div id='list-3.sentence-1' class='sentence'>List-initialization of an object or reference of type <span class='texttt'>T</span> is defined as follows:
<ul class='itemize'><li id='list-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.1'>(3.1)</a></div>If the <a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a>
contains a <a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a>,
<span class='texttt'>T</span> shall be an aggregate class. The ordered <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><span class='textit'>s</span>
in the <a class='grammarterm' href='#nt:designator'>designator</a><span class='textit'>s</span>
of the <a class='grammarterm' href='#nt:designated-initializer-list'>designated-initializer-list</a>
shall form a subsequence
of the ordered <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><span class='textit'>s</span>
in the direct non-static data members of <span class='texttt'>T</span>. Aggregate initialization is performed (<a href='#aggr'>[dcl.init.aggr]</a>). <div id='list-3.1.example-1' class='example'>[&nbsp;<a class='example_link' href='#list-3.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> x; <span class='keyword'>int</span> y; <span class='keyword'>int</span> z; <span class='curlybracket'>}</span>;
A a<span class='curlybracket'>{</span><span class='operator'>.</span>y <span class='operator'>=</span> <span class='literal'>2</span>, <span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>1</span><span class='curlybracket'>}</span>;                <span class='comment'>// error: designator order does not match declaration order</span>
A b<span class='curlybracket'>{</span><span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>1</span>, <span class='operator'>.</span>z <span class='operator'>=</span> <span class='literal'>2</span><span class='curlybracket'>}</span>;                <span class='comment'>// OK, <span class='tcode_in_codeblock'>b.y</span> initialized to <span class='tcode_in_codeblock'>0</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='list-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.2'>(3.2)</a></div>If <span class='texttt'>T</span> is an aggregate class and the initializer list has a single element
of type <span class='textit'>cv</span> <span class='texttt'>U</span>,
where <span class='texttt'>U</span> is <span class='texttt'>T</span> or a class derived from <span class='texttt'>T</span>,
the object is initialized from that element (by copy-initialization for
copy-list-initialization, or by direct-initialization for
direct-list-initialization).</li><li id='list-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.3'>(3.3)</a></div>Otherwise, if <span class='texttt'>T</span> is a character array and the initializer list has a
single element that is an appropriately-typed <a class='grammarterm' href='lex.string#nt:string-literal'>string-literal</a> (<a href='#string'>[dcl.init.string]</a>),
initialization is performed as described in that subclause.</li><li id='list-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.4'>(3.4)</a></div>Otherwise, if <span class='texttt'>T</span> is an aggregate, aggregate initialization is
performed (<a href='#aggr'>[dcl.init.aggr]</a>).<div style='height:0.6em;display:block'></div><div id='list-3.4.example-2' class='example'>[&nbsp;<a class='example_link' href='#list-3.4.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>double</span> ad<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2.0</span> <span class='curlybracket'>}</span>;           <span class='comment'>// OK</span>
<span class='keyword'>int</span> ai<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2.0</span> <span class='curlybracket'>}</span>;              <span class='comment'>// error: narrowing</span>

<span class='keyword'>struct</span> S2 <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m1;
  <span class='keyword'>double</span> m2, m3;
<span class='curlybracket'>}</span>;
S2 s21 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3.0</span> <span class='curlybracket'>}</span>;             <span class='comment'>// OK</span>
S2 s22 <span class='curlybracket'>{</span> <span class='literal'>1.0</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;               <span class='comment'>// error: narrowing</span>
S2 s23 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                         <span class='comment'>// OK: default to 0,0,0</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='list-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.5'>(3.5)</a></div>Otherwise, if the initializer list has no elements and <span class='texttt'>T</span> is a class type with a
default constructor, the object is value-initialized.</li><li id='list-3.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.6'>(3.6)</a></div>Otherwise, if <span class='texttt'>T</span> is a specialization of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_&shy;list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span>,
the object is constructed as described below.</li><li id='list-3.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.7'>(3.7)</a></div>Otherwise, if <span class='texttt'>T</span> is a class type, constructors are considered. The applicable constructors are enumerated and
the best one is chosen through overload resolution (<a href='over.match'>[over.match]</a>, <a href='over.match.list'>[over.match.list]</a>). If a narrowing
conversion (see below) is required to convert any of the arguments, the program is
ill-formed.<div style='height:0.6em;display:block'></div><div id='list-3.7.example-3' class='example'>[&nbsp;<a class='example_link' href='#list-3.7.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>; <span class='comment'>// #1</span>
  S<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;    <span class='comment'>// #2</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                              <span class='comment'>// #3</span>
  <span class='comment'>// ...</span>
<span class='curlybracket'>}</span>;
S s1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1.0</span>, <span class='literal'>2.0</span>, <span class='literal'>3.0</span> <span class='curlybracket'>}</span>;           <span class='comment'>// invoke #1</span>
S s2 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;                 <span class='comment'>// invoke #2</span>
S s3 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                         <span class='comment'>// invoke #3</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> <div id='list-3.7.example-4' class='example'>[&nbsp;<a class='example_link' href='#list-3.7.example-4'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> Map <span class='curlybracket'>{</span>
  Map<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>pair<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>string,<span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
Map ship <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>"Sophie"</span>,<span class='literal'>14</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='literal'>"Surprise"</span>,<span class='literal'>28</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> <div id='list-3.7.example-5' class='example'>[&nbsp;<a class='example_link' href='#list-3.7.example-5'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='comment'>// no initializer-list constructors</span>
  S<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>double</span>, <span class='keyword'>double</span><span class='parenthesis'>)</span>;           <span class='comment'>// #1</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                              <span class='comment'>// #2</span>
  <span class='comment'>// ...</span>
<span class='curlybracket'>}</span>;
S s1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3.0</span> <span class='curlybracket'>}</span>;               <span class='comment'>// OK: invoke #1</span>
S s2 <span class='curlybracket'>{</span> <span class='literal'>1.0</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;                 <span class='comment'>// error: narrowing</span>
S s3 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                           <span class='comment'>// OK: invoke #2</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='list-3.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.8'>(3.8)</a></div>Otherwise, if <span class='texttt'>T</span> is an enumeration
with a fixed underlying type (<a href='dcl.enum'>[dcl.enum]</a>) <span class='texttt'>U</span>,
the <a class='grammarterm' href='#nt:initializer-list'>initializer-list</a> has a single element <span class='texttt'>v</span>,
<span class='texttt'>v</span> can be implicitly converted to <span class='texttt'>U</span>, and
the initialization is direct-list-initialization,
the object is initialized with the value <span class='texttt'>T<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span></span> (<a href='expr.type.conv'>[expr.type.conv]</a>);
if a narrowing conversion is required to convert <span class='texttt'>v</span>
to <span class='texttt'>U</span>, the program is ill-formed. <div id='list-3.8.example-6' class='example'>[&nbsp;<a class='example_link' href='#list-3.8.example-6'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>enum</span> byte <span class='operator'>:</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
byte b <span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span>;                      <span class='comment'>// OK</span>
byte c <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span>;                    <span class='comment'>// error</span>
byte d <span class='operator'>=</span> byte<span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span>;                <span class='comment'>// OK; same value as <span class='tcode_in_codeblock'>b</span></span>
byte e <span class='curlybracket'>{</span> <span class='operator'>-</span><span class='literal'>1</span> <span class='curlybracket'>}</span>;                      <span class='comment'>// error</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> byte b; <span class='curlybracket'>}</span>;
A a1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// error</span>
A a2 <span class='operator'>=</span> <span class='curlybracket'>{</span> byte<span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;              <span class='comment'>// OK</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>byte<span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                          <span class='comment'>// error</span>

<span class='keyword'>enum</span> <span class='keyword'>class</span> Handle <span class='operator'>:</span> uint32_t <span class='curlybracket'>{</span> Invalid <span class='operator'>=</span> <span class='literal'>0</span> <span class='curlybracket'>}</span>;
Handle h <span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span>;                    <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='list-3.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.9'>(3.9)</a></div>Otherwise, if
the initializer list has a single element of type <span class='texttt'>E</span> and either
<span class='texttt'>T</span> is not a reference type or its referenced type is
reference-related to <span class='texttt'>E</span>, the object or reference is initialized
from that element (by copy-initialization for copy-list-initialization,
or by direct-initialization for direct-list-initialization);
if a narrowing conversion (see below) is required
to convert the element to <span class='texttt'>T</span>, the program is ill-formed.<div style='height:0.6em;display:block'></div><div id='list-3.9.example-7' class='example'>[&nbsp;<a class='example_link' href='#list-3.9.example-7'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span> x1 <span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>;                         <span class='comment'>// OK</span>
<span class='keyword'>int</span> x2 <span class='curlybracket'>{</span><span class='literal'>2.0</span><span class='curlybracket'>}</span>;                       <span class='comment'>// error: narrowing</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='list-3.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.10'>(3.10)</a></div>Otherwise, if <span class='texttt'>T</span> is a reference type, a prvalue is generated. The prvalue initializes its result object by copy-list-initialization. The prvalue is then used to direct-initialize the reference. The type of the temporary is the type referenced by <span class='texttt'>T</span>,
unless <span class='texttt'>T</span> is “reference to array of unknown bound of <span class='texttt'>U</span>”,
in which case the type of the temporary is
the type of <span class='texttt'>x</span> in the declaration <span class='texttt'>U x<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='math'><span class='mathalpha'>H</span></span></span>,
where <span class='math'><span class='mathalpha'>H</span></span> is the initializer list. <div id='list-3.10.note-1' class='note'>[&nbsp;<a class='note_link' href='#list-3.10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> As usual, the binding will fail and the program is ill-formed if
the reference type is an lvalue reference to a non-const type. —&nbsp;<i>end note</i></div>&nbsp;]</div> <div id='list-3.10.example-8' class='example'>[&nbsp;<a class='example_link' href='#list-3.10.example-8'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>; <span class='comment'>// #1</span>
  S<span class='parenthesis'>(</span><span class='keyword'>const</span> std<span class='operator'>::</span>string<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;            <span class='comment'>// #2</span>
  <span class='comment'>// ...</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>const</span> S<span class='operator'>&amp;</span> r1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3.0</span> <span class='curlybracket'>}</span>;        <span class='comment'>// OK: invoke #1</span>
<span class='keyword'>const</span> S<span class='operator'>&amp;</span> r2 <span class='curlybracket'>{</span> <span class='literal'>"Spinach"</span> <span class='curlybracket'>}</span>;          <span class='comment'>// OK: invoke #2</span>
S<span class='operator'>&amp;</span> r3 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;                <span class='comment'>// error: initializer is not an lvalue</span>
<span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> i1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;              <span class='comment'>// OK</span>
<span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> i2 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1.1</span> <span class='curlybracket'>}</span>;            <span class='comment'>// error: narrowing</span>
<span class='keyword'>const</span> <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>iar<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;     <span class='comment'>// OK: <span class='tcode_in_codeblock'>iar</span> is bound to temporary array</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> a;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>explicit</span> B<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>const</span> B<span class='operator'>&amp;</span> b2<span class='curlybracket'>{</span>a<span class='curlybracket'>}</span>;                     <span class='comment'>// error: cannot copy-list-initialize <span class='tcode_in_codeblock'>B</span> temporary from <span class='tcode_in_codeblock'>A</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='list-3.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.11'>(3.11)</a></div>Otherwise, if the initializer list has no elements, the object is
value-initialized.<div style='height:0.6em;display:block'></div><div id='list-3.11.example-9' class='example'>[&nbsp;<a class='example_link' href='#list-3.11.example-9'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span><span class='operator'>*</span><span class='operator'>*</span> pp <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                        <span class='comment'>// initialized to null pointer</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='list-3.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-3.12'>(3.12)</a></div>Otherwise, the program is ill-formed.<div style='height:0.6em;display:block'></div><div id='list-3.12.example-10' class='example'>[&nbsp;<a class='example_link' href='#list-3.12.example-10'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='keyword'>int</span> j; <span class='curlybracket'>}</span>;
A a1 <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;                      <span class='comment'>// aggregate initialization</span>
A a2 <span class='curlybracket'>{</span> <span class='literal'>1.2</span> <span class='curlybracket'>}</span>;                       <span class='comment'>// error: narrowing</span>
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  B<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
B b1 <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;                      <span class='comment'>// creates <span class='tcode_in_codeblock'>initializer_&shy;list&lt;int&gt;</span> and calls constructor</span>
B b2 <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2.0</span> <span class='curlybracket'>}</span>;                    <span class='comment'>// error: narrowing</span>
<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  C<span class='parenthesis'>(</span><span class='keyword'>int</span> i, <span class='keyword'>double</span> j<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
C c1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2.2</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// calls constructor with arguments (1, 2.2)</span>
C c2 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1.1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// error: narrowing</span>

<span class='keyword'>int</span> j <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;                        <span class='comment'>// initialize to 1</span>
<span class='keyword'>int</span> k <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                          <span class='comment'>// initialize to 0</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li></ul></div></div><div class='para' id='list-4'><div class='marginalizedparent'><a class='marginalized' href='#list-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5725'>#</a></div><div id='list-4.sentence-1' class='sentence'>Within the <a class='grammarterm' href='#nt:initializer-list'>initializer-list</a> of a <a class='grammarterm' href='#nt:braced-init-list'>braced-init-list</a>,
the <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a><span class='textit'>s</span>, including any that result from pack
expansions (<a href='temp.variadic'>[temp.variadic]</a>), are evaluated in the order in which they
appear<a class='hidden_link' href='#list-4.sentence-1'>.</a></div> <div id='list-4.sentence-2' class='sentence'>That is, every value computation and side effect associated with a
given <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a> is sequenced before every value
computation and side effect associated with any <a class='grammarterm' href='#nt:initializer-clause'>initializer-clause</a>
that follows it in the comma-separated list of the <a class='grammarterm' href='#nt:initializer-list'>initializer-list</a><a class='hidden_link' href='#list-4.sentence-2'>.</a></div> <div id='list-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#list-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-4.sentence-3' class='sentence'>This evaluation ordering holds regardless of the semantics of the
initialization; for example, it applies when the elements of the
<a class='grammarterm' href='#nt:initializer-list'>initializer-list</a> are interpreted as arguments of a constructor
call, even though ordinarily there are no sequencing constraints on the
arguments of a call<a class='hidden_link' href='#list-4.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='list-5'><div class='marginalizedparent'><a class='marginalized' href='#list-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5741'>#</a></div><div id='list-5.sentence-1' class='sentence'>An object of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_&shy;list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span> is constructed from
an initializer list as if
the implementation generated and materialized (<a href='conv.rval'>[conv.rval]</a>)
a prvalue of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'><span class='keyword'>const</span> E</span>”,
where <span class='math'><span class='mathalpha'>N</span></span> is the number of elements in the
initializer list<a class='hidden_link' href='#list-5.sentence-1'>.</a></div> <div id='list-5.sentence-2' class='sentence'>Each element of that array is copy-initialized with the
corresponding element of the initializer list, and the
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_&shy;list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span> object is constructed to refer to that array<a class='hidden_link' href='#list-5.sentence-2'>.</a></div> <div id='list-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#list-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-5.sentence-3' class='sentence'>A constructor or conversion function selected for the copy is required to be
accessible (<a href='class.access'>[class.access]</a>) in the context of the initializer list<a class='hidden_link' href='#list-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='list-5.sentence-4' class='sentence'>
If a narrowing conversion is required to initialize any of the elements, the program is ill-formed<a class='hidden_link' href='#list-5.sentence-4'>.</a></div> <div id='list-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#list-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> v<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
X x<span class='curlybracket'>{</span> <span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span> <span class='curlybracket'>}</span>;
</pre><div id='list-5.sentence-5' class='sentence'>The initialization will be implemented in a way roughly equivalent to this:
<pre class='codeblock'>
<span class='keyword'>const</span> <span class='keyword'>double</span> __a<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>, <span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>, <span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>;
X x<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>__a, __a<span class='operator'>+</span><span class='literal'>3</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre>
assuming that the implementation can construct an <span class='texttt'>initializer_&shy;list</span> object with a pair of pointers<a class='hidden_link' href='#list-5.sentence-5'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='list-6'><div class='marginalizedparent'><a class='marginalized' href='#list-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5771'>#</a></div><div id='list-6.sentence-1' class='sentence'>The array has the same lifetime as any other temporary
object (<a href='class.temporary'>[class.temporary]</a>), except that initializing an
<span class='texttt'>initializer_&shy;list</span> object from the array extends the lifetime of
the array exactly like binding a reference to a temporary<a class='hidden_link' href='#list-6.sentence-1'>.</a></div> <div id='list-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#list-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>typedef</span> std<span class='operator'>::</span>complex<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> cmplx;
std<span class='operator'>::</span>vector<span class='anglebracket'>&lt;</span>cmplx<span class='anglebracket'>&gt;</span> v1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>vector<span class='anglebracket'>&lt;</span>cmplx<span class='anglebracket'>&gt;</span> v2<span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;
  std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> i3 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> i4;
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> i4<span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>            <span class='comment'>// ill-formed, would create a dangling reference</span>
<span class='curlybracket'>}</span>;
</pre><div id='list-6.sentence-2' class='sentence'>For <span class='texttt'>v1</span> and <span class='texttt'>v2</span>, the <span class='texttt'>initializer_&shy;list</span> object
is a parameter in a function call, so the array created for
<span class='texttt'><span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span></span> has full-expression lifetime<a class='hidden_link' href='#list-6.sentence-2'>.</a></div> <div id='list-6.sentence-3' class='sentence'>For <span class='texttt'>i3</span>, the <span class='texttt'>initializer_&shy;list</span> object is a variable,
so the array persists for the lifetime of the variable<a class='hidden_link' href='#list-6.sentence-3'>.</a></div> <div id='list-6.sentence-4' class='sentence'>For <span class='texttt'>i4</span>, the <span class='texttt'>initializer_&shy;list</span> object is initialized in
the constructor's <a class='grammarterm' href='class.base.init#nt:ctor-initializer'>ctor-initializer</a> as if by binding
a temporary array to a reference member, so the program is
ill-formed (<a href='class.base.init'>[class.base.init]</a>)<a class='hidden_link' href='#list-6.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='list-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#list-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-6.sentence-5' class='sentence'>The implementation is free to allocate the array in read-only memory if an explicit array with the same initializer could be so allocated<a class='hidden_link' href='#list-6.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='list-7'><div class='marginalizedparent'><a class='marginalized' href='#list-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/declarations.tex#L5806'>#</a></div><div id='list-7.sentence-1' class='sentence'>A
<span class='indexparent'><a class='index' id=':narrowing_conversion'></a></span><span class='indexparent'><a class='index' id=':conversion,narrowing'></a></span><a class='hidden_link' href='#def:narrowing_conversion' id='def:narrowing_conversion'><i>narrowing conversion</i></a> is an implicit conversion
<ul class='itemize'><li id='list-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.1'>(7.1)</a></div>from a floating-point type to an integer type, or</li><li id='list-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.2'>(7.2)</a></div>from <span class='texttt'><span class='keyword'>long</span> <span class='keyword'>double</span></span> to <span class='texttt'><span class='keyword'>double</span></span> or <span class='texttt'><span class='keyword'>float</span></span>, or from
<span class='texttt'><span class='keyword'>double</span></span> to <span class='texttt'><span class='keyword'>float</span></span>, except where the source is a constant expression and
the actual value after conversion
is within the range of values that can be represented (even if it cannot be represented exactly),
or</li><li id='list-7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.3'>(7.3)</a></div>from an integer type or unscoped enumeration type to a floating-point type, except
where the source is a constant expression and the actual value after conversion will fit
into the target type and will produce the original value when converted back to the
original type, or</li><li id='list-7.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.4'>(7.4)</a></div>from an integer type or unscoped enumeration type to an integer type that cannot
represent all the values of the original type, except where the source is a constant
expression whose value after integral promotions will fit into the target type, or</li><li id='list-7.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#list-7.5'>(7.5)</a></div>from a pointer type or a pointer-to-member type to <span class='texttt'><span class='keyword'>bool</span></span><a class='hidden_link' href='#list-7.sentence-1'>.</a></li></ul></div><div id='list-7.note-1' class='note'>[&nbsp;<a class='note_link' href='#list-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='list-7.sentence-2' class='sentence'>As indicated above, such conversions are not allowed at the top level in
list-initializations<a class='hidden_link' href='#list-7.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='list-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#list-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>999</span>;                    <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is not a constant expression</span>
<span class='keyword'>const</span> <span class='keyword'>int</span> y <span class='operator'>=</span> <span class='literal'>999</span>;
<span class='keyword'>const</span> <span class='keyword'>int</span> z <span class='operator'>=</span> <span class='literal'>99</span>;
<span class='keyword'>char</span> c1 <span class='operator'>=</span> x;                    <span class='comment'>// OK, though it might narrow (in this case, it does narrow)</span>
<span class='keyword'>char</span> c2<span class='curlybracket'>{</span>x<span class='curlybracket'>}</span>;                     <span class='comment'>// error: might narrow</span>
<span class='keyword'>char</span> c3<span class='curlybracket'>{</span>y<span class='curlybracket'>}</span>;                     <span class='comment'>// error: narrows (assuming <span class='tcode_in_codeblock'>char</span> is 8 bits)</span>
<span class='keyword'>char</span> c4<span class='curlybracket'>{</span>z<span class='curlybracket'>}</span>;                     <span class='comment'>// OK: no narrowing needed</span>
<span class='keyword'>unsigned</span> <span class='keyword'>char</span> uc1 <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>5</span><span class='curlybracket'>}</span>;        <span class='comment'>// OK: no narrowing needed</span>
<span class='keyword'>unsigned</span> <span class='keyword'>char</span> uc2 <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>-</span><span class='literal'>1</span><span class='curlybracket'>}</span>;       <span class='comment'>// error: narrows</span>
<span class='keyword'>unsigned</span> <span class='keyword'>int</span> ui1 <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>-</span><span class='literal'>1</span><span class='curlybracket'>}</span>;        <span class='comment'>// error: narrows</span>
<span class='keyword'>signed</span> <span class='keyword'>int</span> si1 <span class='operator'>=</span>
  <span class='curlybracket'>{</span> <span class='parenthesis'>(</span><span class='keyword'>unsigned</span> <span class='keyword'>int</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='literal'>1</span> <span class='curlybracket'>}</span>;         <span class='comment'>// error: narrows</span>
<span class='keyword'>int</span> ii <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>2.0</span><span class='curlybracket'>}</span>;                 <span class='comment'>// error: narrows</span>
<span class='keyword'>float</span> f1 <span class='curlybracket'>{</span> x <span class='curlybracket'>}</span>;                 <span class='comment'>// error: might narrow</span>
<span class='keyword'>float</span> f2 <span class='curlybracket'>{</span> <span class='literal'>7</span> <span class='curlybracket'>}</span>;                 <span class='comment'>// OK: 7 can be exactly represented as a <span class='tcode_in_codeblock'>float</span></span>
<span class='keyword'>bool</span> b <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>"meow"</span><span class='curlybracket'>}</span>;              <span class='comment'>// error: narrows</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> a<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>2</span>, f<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span>, f<span class='parenthesis'>(</span><span class='literal'>2.0</span><span class='parenthesis'>)</span> <span class='curlybracket'>}</span>;  <span class='comment'>// OK: the <span class='tcode_in_codeblock'>double</span>-to-<span class='tcode_in_codeblock'>int</span> conversion is not at the top level</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  </div></div></div></body></html>