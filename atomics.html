<!DOCTYPE html><html lang='en'><head><title>[atomics]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>31</a> Atomic operations library <a class='abbr_ref' href='./#atomics'>[atomics]</a></h1><div id='general' class='section'><h2 ><a class='secnum' href='#general' style='min-width:88pt'>31.1</a> General <a class='abbr_ref' href='atomics.general'>[atomics.general]</a></h2><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L6'>#</a></div><div id='general-1.sentence-1' class='sentence'>This Clause describes components for fine-grained atomic access<a class='hidden_link' href='#general-1.sentence-1'>.</a></div> <div id='general-1.sentence-2' class='sentence'>This access is
provided via operations on atomic objects<a class='hidden_link' href='#general-1.sentence-2'>.</a></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L10'>#</a></div><div id='general-2.sentence-1' class='sentence'>The following subclauses describe atomics requirements and components for types
and operations, as summarized in Table <a href='#tab:atomics.summary'>143</a><a class='hidden_link' href='#general-2.sentence-1'>.</a></div><div class='numberedTable' id='tab:atomics.summary'>Table <a href='#tab:atomics.summary'>143</a>: Atomics library summary &emsp;&ensp;[tab:atomics.summary]<br><table ><tr class='rowsep'><td class='empty left'></td><td class='left'><div id='general-2.sentence-2' class='sentence'><b>Subclause</b></div></td><td class='left'><div id='general-2.sentence-3' class='sentence'><b>Header</b></div></td></tr><tr class='capsep'><td class='left'><div id='general-2.sentence-4' class='sentence'><a href='#alias'>[atomics.alias]</a></div></td><td class='left'><div id='general-2.sentence-5' class='sentence'>Type aliases</div></td><td class='left'><div id='general-2.sentence-6' class='sentence'><span class='texttt'><span class='anglebracket'>&lt;</span>atomic<span class='anglebracket'>&gt;</span></span></div></td></tr><tr ><td class='left'><div id='general-2.sentence-7' class='sentence'><a href='#order'>[atomics.order]</a></div></td><td class='left'><div id='general-2.sentence-8' class='sentence'>Order and consistency</div></td><td class='empty left'></td></tr><tr ><td class='left'><div id='general-2.sentence-9' class='sentence'><a href='#lockfree'>[atomics.lockfree]</a></div></td><td class='left'><div id='general-2.sentence-10' class='sentence'>Lock-free property</div></td><td class='empty left'></td></tr><tr ><td class='left'><div id='general-2.sentence-11' class='sentence'><a href='#wait'>[atomics.wait]</a></div></td><td class='left'><div id='general-2.sentence-12' class='sentence'>Waiting and notifying</div></td><td class='empty left'></td></tr><tr ><td class='left'><div id='general-2.sentence-13' class='sentence'><a href='#ref.generic'>[atomics.ref.generic]</a></div></td><td class='left'><div id='general-2.sentence-14' class='sentence'>Class template <span class='texttt'>atomic_&shy;ref</span></div></td><td class='empty left'></td></tr><tr ><td class='left'><div id='general-2.sentence-15' class='sentence'><a href='#types.generic'>[atomics.types.generic]</a></div></td><td class='left'><div id='general-2.sentence-16' class='sentence'>Class template <span class='texttt'>atomic</span></div></td><td class='empty left'></td></tr><tr ><td class='left'><div id='general-2.sentence-17' class='sentence'><a href='#nonmembers'>[atomics.nonmembers]</a></div></td><td class='left'><div id='general-2.sentence-18' class='sentence'>Non-member functions</div></td><td class='empty left'></td></tr><tr ><td class='left'><div id='general-2.sentence-19' class='sentence'><a href='#flag'>[atomics.flag]</a></div></td><td class='left'><div id='general-2.sentence-20' class='sentence'>Flag type and operations</div></td><td class='empty left'></td></tr><tr ><td class='left'><div id='general-2.sentence-21' class='sentence'><a href='#fences'>[atomics.fences]</a></div></td><td class='left'><div id='general-2.sentence-22' class='sentence'>Fences</div></td><td class='empty left'></td></tr></table></div></div></div><div id='syn' class='section'><h2 ><a class='secnum' href='#syn' style='min-width:88pt'>31.2</a> Header <span class='texttt'>&lt;atomic&gt;</span> synopsis <a class='abbr_ref' href='atomics.syn'>[atomics.syn]</a></h2><span class='indexparent'><a class='index' id=':<atomic>'></a></span><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='comment'>// <a href='#order'>[atomics.order]</a>, order and consistency</span>
  <span class='keyword'>enum</span> <span class='keyword'>class</span> memory_order <span class='operator'>:</span> <span class='textit'><span class='texttt'>unspecified</span></span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T kill_dependency<span class='parenthesis'>(</span>T y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#lockfree'>[atomics.lockfree]</a>, lock-free property</span>
  <span class='preprocessordirective'>#define</span> ATOMIC_BOOL_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_CHAR_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_CHAR8_T_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_CHAR16_T_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_CHAR32_T_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_WCHAR_T_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_SHORT_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_INT_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_LONG_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_LLONG_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
  <span class='preprocessordirective'>#define</span> ATOMIC_POINTER_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>

  <span class='comment'>// <a href='#ref.generic'>[atomics.ref.generic]</a>, class template <span class='tcode_in_codeblock'>atomic_&shy;ref</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref;
  <span class='comment'>// <a href='#ref.pointer'>[atomics.ref.pointer]</a>, partial specialization for pointers</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span>;

  <span class='comment'>// <a href='#types.generic'>[atomics.types.generic]</a>, class template <span class='tcode_in_codeblock'>atomic</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic;
  <span class='comment'>// <a href='#types.pointer'>[atomics.types.pointer]</a>, partial specialization for pointers</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span>;

  <span class='comment'>// <a href='#nonmembers'>[atomics.nonmembers]</a>, non-member functions</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_is_lock_free<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_is_lock_free<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_store<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_store<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_store_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                               memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_store_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                               memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_load<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_load<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_load_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_load_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_exchange<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_exchange<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_exchange_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                               memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_exchange_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                               memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_compare_exchange_weak<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>,
                                      <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='operator'>*</span>,
                                      <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_compare_exchange_weak<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>,
                                      <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='operator'>*</span>,
                                      <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_compare_exchange_strong<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>,
                                        <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='operator'>*</span>,
                                        <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_compare_exchange_strong<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>,
                                        <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='operator'>*</span>,
                                        <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_compare_exchange_weak_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>,
                                               <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='operator'>*</span>,
                                               <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_compare_exchange_weak_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>,
                                               <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='operator'>*</span>,
                                               <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_compare_exchange_strong_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>,
                                                 <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='operator'>*</span>,
                                                 <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> atomic_compare_exchange_strong_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>,
                                                 <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='operator'>*</span>,
                                                 <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_add<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>difference_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_add<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>difference_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_add_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>difference_type,
                                memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_add_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>difference_type,
                                memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_sub<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>difference_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_sub<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>difference_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_sub_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>difference_type,
                                memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_sub_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>difference_type,
                                memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_and<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_and<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_and_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                                memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_and_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                                memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_or<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_or<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_or_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                               memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_or_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                               memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_xor<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_xor<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_xor_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                                memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T atomic_fetch_xor_explicit<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                                memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_wait<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_wait<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_wait_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                              memory_order<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_wait_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span>, <span class='keyword'>typename</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value_type,
                              memory_order<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_notify_one<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_notify_one<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_notify_all<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> atomic_notify_all<span class='parenthesis'>(</span>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;

  <span class='comment'>// <a href='#alias'>[atomics.alias]</a>, type aliases</span>
  <span class='keyword'>using</span> atomic_bool           <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_char           <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_schar          <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>signed</span> <span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uchar          <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> <span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_short          <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_ushort         <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> <span class='keyword'>short</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int            <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint           <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_long           <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>long</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_ulong          <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> <span class='keyword'>long</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_llong          <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>long</span> <span class='keyword'>long</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_ullong         <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_char8_t        <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>char8_t</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_char16_t       <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>char16_t</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_char32_t       <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>char32_t</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_wchar_t        <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;

  <span class='keyword'>using</span> atomic_int8_t         <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int8_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint8_t        <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint8_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int16_t        <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int16_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint16_t       <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint16_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int32_t        <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int32_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint32_t       <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint32_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int64_t        <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int64_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint64_t       <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint64_t<span class='anglebracket'>&gt;</span>;

  <span class='keyword'>using</span> atomic_int_least8_t   <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int_least8_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint_least8_t  <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint_least8_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int_least16_t  <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int_least16_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint_least16_t <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint_least16_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int_least32_t  <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int_least32_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint_least32_t <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint_least32_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int_least64_t  <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int_least64_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint_least64_t <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint_least64_t<span class='anglebracket'>&gt;</span>;

  <span class='keyword'>using</span> atomic_int_fast8_t    <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int_fast8_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint_fast8_t   <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint_fast8_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int_fast16_t   <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int_fast16_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint_fast16_t  <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint_fast16_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int_fast32_t   <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int_fast32_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint_fast32_t  <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint_fast32_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_int_fast64_t   <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>int_fast64_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uint_fast64_t  <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uint_fast64_t<span class='anglebracket'>&gt;</span>;

  <span class='keyword'>using</span> atomic_intptr_t       <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>intptr_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uintptr_t      <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uintptr_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_size_t         <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>size_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_ptrdiff_t      <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>ptrdiff_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_intmax_t       <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>intmax_t<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>using</span> atomic_uintmax_t      <span class='operator'>=</span> atomic<span class='anglebracket'>&lt;</span>uintmax_t<span class='anglebracket'>&gt;</span>;

  <span class='keyword'>using</span> atomic_signed_lock_free   <span class='operator'>=</span> <span class='textit'><span class='texttt'>see below</span></span>;
  <span class='keyword'>using</span> atomic_unsigned_lock_free <span class='operator'>=</span> <span class='textit'><span class='texttt'>see below</span></span>;

  <span class='comment'>// <a href='#flag'>[atomics.flag]</a>, flag type and operations</span>
  <span class='keyword'>struct</span> atomic_flag;

  <span class='keyword'>bool</span> atomic_flag_test<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>bool</span> atomic_flag_test<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>bool</span> atomic_flag_test_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>bool</span> atomic_flag_test_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>*</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>bool</span> atomic_flag_test_and_set<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>bool</span> atomic_flag_test_and_set<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>bool</span> atomic_flag_test_and_set_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>bool</span> atomic_flag_test_and_set_explicit<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_clear<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_clear<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_clear_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_clear_explicit<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>void</span> atomic_flag_wait<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span>, <span class='keyword'>bool</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_wait<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>*</span>, <span class='keyword'>bool</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_wait_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span>,
                                 <span class='keyword'>bool</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_wait_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>*</span>,
                                 <span class='keyword'>bool</span>, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_notify_one<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_notify_one<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_notify_all<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>void</span> atomic_flag_notify_all<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#fences'>[atomics.fences]</a>, fences</span>
  <span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>void</span> atomic_thread_fence<span class='parenthesis'>(</span>memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>void</span> atomic_signal_fence<span class='parenthesis'>(</span>memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='curlybracket'>}</span>
</pre></div><div id='alias' class='section'><h2 ><a class='secnum' href='#alias' style='min-width:88pt'>31.3</a> Type aliases <a class='abbr_ref' href='atomics.alias'>[atomics.alias]</a></h2><span class='indexparent'><a class='index' id='lib:atomic_bool'></a></span><span class='indexparent'><a class='index' id='lib:atomic_char'></a></span><span class='indexparent'><a class='index' id='lib:atomic_schar'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uchar'></a></span><span class='indexparent'><a class='index' id='lib:atomic_short'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ushort'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint'></a></span><span class='indexparent'><a class='index' id='lib:atomic_long'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ulong'></a></span><span class='indexparent'><a class='index' id='lib:atomic_llong'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ullong'></a></span><span class='indexparent'><a class='index' id='lib:atomic_char8_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_char16_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_char32_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_wchar_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int8_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint8_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int16_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint16_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int32_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint32_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int64_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint64_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int_least8_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint_least8_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int_least16_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint_least16_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int_least32_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint_least32_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int_least64_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint_least64_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int_fast8_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint_fast8_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int_fast16_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint_fast16_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int_fast32_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint_fast32_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_int_fast64_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uint_fast64_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_intptr_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uintptr_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_size_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ptrdiff_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_intmax_t'></a></span><span class='indexparent'><a class='index' id='lib:atomic_uintmax_t'></a></span><div class='para' id='alias-1'><div class='marginalizedparent'><a class='marginalized' href='#alias-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L334'>#</a></div><div id='alias-1.sentence-1' class='sentence'>The type aliases <span class='texttt'>atomic_&shy;int<span class='math'><span class='mathalpha'>N</span></span>_&shy;t</span>, <span class='texttt'>atomic_&shy;uint<span class='math'><span class='mathalpha'>N</span></span>_&shy;t</span>,
<span class='texttt'>atomic_&shy;intptr_&shy;t</span>, and <span class='texttt'>atomic_&shy;uintptr_&shy;t</span>
are defined if and only if
<span class='texttt'><span class='keyword'>int</span><span class='math'><span class='mathalpha'>N</span></span>_&shy;t</span>, <span class='texttt'>uint<span class='math'><span class='mathalpha'>N</span></span>_&shy;t</span>,
<span class='texttt'>intptr_&shy;t</span>, and <span class='texttt'>uintptr_&shy;t</span>
are defined, respectively<a class='hidden_link' href='#alias-1.sentence-1'>.</a></div></div><div class='para' id='alias-2'><div class='marginalizedparent'><a class='marginalized' href='#alias-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L342'>#</a></div><div id='alias-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:atomic_signed_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:atomic_unsigned_lock_free'></a></span>The type aliases
<span class='texttt'>atomic_&shy;signed_&shy;lock_&shy;free</span> and <span class='texttt'>atomic_&shy;unsigned_&shy;lock_&shy;free</span>
name specializations of <span class='texttt'>atomic</span>
whose template arguments are integral types, respectively signed and unsigned,
and whose <span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> property is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#alias-2.sentence-1'>.</a></div> <div id='alias-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#alias-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='alias-2.sentence-2' class='sentence'>These aliases are optional in freestanding implementations (<a href='compliance'>[compliance]</a>)<a class='hidden_link' href='#alias-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='alias-2.sentence-3' class='sentence'>
Implementations should choose for these aliases
the integral specializations of <span class='texttt'>atomic</span>
for which the atomic waiting and notifying operations (<a href='#wait'>[atomics.wait]</a>)
are most efficient<a class='hidden_link' href='#alias-2.sentence-3'>.</a></div></div></div><div id='order' class='section'><h2 ><a class='secnum' href='#order' style='min-width:88pt'>31.4</a> Order and consistency <a class='abbr_ref' href='atomics.order'>[atomics.order]</a></h2><span class='indexparent'><a class='index' id='lib:memory_order'></a></span><span class='indexparent'><a class='index' id='lib:relaxed,memory_order'></a></span><span class='indexparent'><a class='index' id='lib:memory_order,relaxed'></a></span><span class='indexparent'><a class='index' id='lib:consume,memory_order'></a></span><span class='indexparent'><a class='index' id='lib:memory_order,consume'></a></span><span class='indexparent'><a class='index' id='lib:acquire,memory_order'></a></span><span class='indexparent'><a class='index' id='lib:memory_order,acquire'></a></span><span class='indexparent'><a class='index' id='lib:release,memory_order'></a></span><span class='indexparent'><a class='index' id='lib:memory_order,release'></a></span><span class='indexparent'><a class='index' id='lib:acq_rel,memory_order'></a></span><span class='indexparent'><a class='index' id='lib:memory_order,acq_rel'></a></span><span class='indexparent'><a class='index' id='lib:seq_cst,memory_order'></a></span><span class='indexparent'><a class='index' id='lib:memory_order,seq_cst'></a></span><span class='indexparent'><a class='index' id='lib:memory_order_relaxed'></a></span><span class='indexparent'><a class='index' id='lib:memory_order_consume'></a></span><span class='indexparent'><a class='index' id='lib:memory_order_acquire'></a></span><span class='indexparent'><a class='index' id='lib:memory_order_release'></a></span><span class='indexparent'><a class='index' id='lib:memory_order_acq_rel'></a></span><span class='indexparent'><a class='index' id='lib:memory_order_seq_cst'></a></span>
<pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>enum</span> <span class='keyword'>class</span> memory_order <span class='operator'>:</span> <span class='textit'><span class='texttt'>unspecified</span></span> <span class='curlybracket'>{</span>
    relaxed, consume, acquire, release, acq_rel, seq_cst
  <span class='curlybracket'>}</span>;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> memory_order memory_order_relaxed <span class='operator'>=</span> memory_order<span class='operator'>::</span>relaxed;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> memory_order memory_order_consume <span class='operator'>=</span> memory_order<span class='operator'>::</span>consume;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> memory_order memory_order_acquire <span class='operator'>=</span> memory_order<span class='operator'>::</span>acquire;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> memory_order memory_order_release <span class='operator'>=</span> memory_order<span class='operator'>::</span>release;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> memory_order memory_order_acq_rel <span class='operator'>=</span> memory_order<span class='operator'>::</span>acq_rel;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> memory_order memory_order_seq_cst <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst;
<span class='curlybracket'>}</span>
</pre><div class='para' id='order-1'><div class='marginalizedparent'><a class='marginalized' href='#order-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L387'>#</a></div><div id='order-1.sentence-1' class='sentence'>The enumeration <span class='texttt'>memory_&shy;order</span> specifies the detailed regular
(non-atomic) memory synchronization order as defined in
<a href='intro.multithread'>[intro.multithread]</a> and may provide for operation ordering<a class='hidden_link' href='#order-1.sentence-1'>.</a></div> <div id='order-1.sentence-2' class='sentence'>Its
enumerated values and their meanings are as follows:</div><ul class='itemize'><li id='order-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-1.1'>(1.1)</a></div><div id='order-1.1.sentence-1' class='sentence'><span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span>: no operation orders memory<a class='hidden_link' href='#order-1.1.sentence-1'>.</a></div></li><li id='order-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-1.2'>(1.2)</a></div><div id='order-1.2.sentence-1' class='sentence'><span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span>, <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span>, and
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span>: a store operation performs a release operation on the
affected memory location<a class='hidden_link' href='#order-1.2.sentence-1'>.</a></div></li><li id='order-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-1.3'>(1.3)</a></div><div id='order-1.3.sentence-1' class='sentence'><span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>: a load operation performs a consume operation on the
affected memory location<a class='hidden_link' href='#order-1.3.sentence-1'>.</a></div> <div id='order-1.3.note-1' class='note'>[&nbsp;<a class='note_link' href='#order-1.3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='order-1.3.sentence-2' class='sentence'>Prefer <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, which provides stronger guarantees
than <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>consume</span><a class='hidden_link' href='#order-1.3.sentence-2'>.</a></div> <div id='order-1.3.sentence-3' class='sentence'>Implementations have found it infeasible
to provide performance better than that of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span><a class='hidden_link' href='#order-1.3.sentence-3'>.</a></div> <div id='order-1.3.sentence-4' class='sentence'>Specification revisions are under consideration<a class='hidden_link' href='#order-1.3.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </li><li id='order-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-1.4'>(1.4)</a></div><div id='order-1.4.sentence-1' class='sentence'><span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span>, and
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span>: a load operation performs an acquire operation on the
affected memory location<a class='hidden_link' href='#order-1.4.sentence-1'>.</a></div></li></ul><div id='order-1.note-2' class='note'>[&nbsp;<a class='note_link' href='#order-1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='order-1.sentence-3' class='sentence'>Atomic operations specifying <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span> are relaxed
with respect to memory ordering<a class='hidden_link' href='#order-1.sentence-3'>.</a></div> <div id='order-1.sentence-4' class='sentence'>Implementations must still guarantee that any
given atomic access to a particular atomic object be indivisible with respect
to all other atomic accesses to that object<a class='hidden_link' href='#order-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='order-2'><div class='marginalizedparent'><a class='marginalized' href='#order-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L421'>#</a></div><div id='order-2.sentence-1' class='sentence'>An atomic operation <span class='math'><span class='mathalpha'>A</span></span> that performs a release operation on an atomic
object <span class='math'><span class='mathalpha'>M</span></span> synchronizes with an atomic operation <span class='math'><span class='mathalpha'>B</span></span> that performs
an acquire operation on <span class='math'><span class='mathalpha'>M</span></span> and takes its value from any side effect in the
release sequence headed by <span class='math'><span class='mathalpha'>A</span></span><a class='hidden_link' href='#order-2.sentence-1'>.</a></div></div><div class='para' id='order-3'><div class='marginalizedparent'><a class='marginalized' href='#order-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L427'>#</a></div><div id='order-3.sentence-1' class='sentence'>An atomic operation <span class='math'><span class='mathalpha'>A</span></span> on some atomic object <span class='math'><span class='mathalpha'>M</span></span> is
<a class='hidden_link' href='#def:coherence-ordered_before' id='def:coherence-ordered_before'><i >coherence-ordered before</i></a>
another atomic operation <span class='math'><span class='mathalpha'>B</span></span> on <span class='math'><span class='mathalpha'>M</span></span> if
<ul class='itemize'><li id='order-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-3.1'>(3.1)</a></div><span class='math'><span class='mathalpha'>A</span></span> is a modification, and
<span class='math'><span class='mathalpha'>B</span></span> reads the value stored by <span class='math'><span class='mathalpha'>A</span></span>, or</li><li id='order-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-3.2'>(3.2)</a></div><span class='math'><span class='mathalpha'>A</span></span> precedes <span class='math'><span class='mathalpha'>B</span></span>
in the modification order of <span class='math'><span class='mathalpha'>M</span></span>, or</li><li id='order-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-3.3'>(3.3)</a></div><span class='math'><span class='mathalpha'>A</span></span> and <span class='math'><span class='mathalpha'>B</span></span> are not
the same atomic read-modify-write operation, and
there exists an atomic modification <span class='math'><span class='mathalpha'>X</span></span> of <span class='math'><span class='mathalpha'>M</span></span>
such that <span class='math'><span class='mathalpha'>A</span></span> reads the value stored by <span class='math'><span class='mathalpha'>X</span></span> and
<span class='math'><span class='mathalpha'>X</span></span> precedes <span class='math'><span class='mathalpha'>B</span></span>
in the modification order of <span class='math'><span class='mathalpha'>M</span></span>, or</li><li id='order-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-3.4'>(3.4)</a></div>there exists an atomic modification <span class='math'><span class='mathalpha'>X</span></span> of <span class='math'><span class='mathalpha'>M</span></span>
such that <span class='math'><span class='mathalpha'>A</span></span> is coherence-ordered before <span class='math'><span class='mathalpha'>X</span></span> and
<span class='math'><span class='mathalpha'>X</span></span> is coherence-ordered before <span class='math'><span class='mathalpha'>B</span></span><a class='hidden_link' href='#order-3.sentence-1'>.</a></li></ul></div></div><div class='para' id='order-4'><div class='marginalizedparent'><a class='marginalized' href='#order-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L447'>#</a></div><div id='order-4.sentence-1' class='sentence'>There is a single total order <span class='math'><span class='mathalpha'>S</span></span>
on all <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> operations, including fences,
that satisfies the following constraints<a class='hidden_link' href='#order-4.sentence-1'>.</a></div> <div id='order-4.sentence-2' class='sentence'>First, if <span class='math'><span class='mathalpha'>A</span></span> and <span class='math'><span class='mathalpha'>B</span></span> are
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> operations and
<span class='math'><span class='mathalpha'>A</span></span> strongly happens before <span class='math'><span class='mathalpha'>B</span></span>,
then <span class='math'><span class='mathalpha'>A</span></span> precedes <span class='math'><span class='mathalpha'>B</span></span> in <span class='math'><span class='mathalpha'>S</span></span><a class='hidden_link' href='#order-4.sentence-2'>.</a></div> <div id='order-4.sentence-3' class='sentence'>Second, for every pair of atomic operations <span class='math'><span class='mathalpha'>A</span></span> and
<span class='math'><span class='mathalpha'>B</span></span> on an object <span class='math'><span class='mathalpha'>M</span></span>,
where <span class='math'><span class='mathalpha'>A</span></span> is coherence-ordered before <span class='math'><span class='mathalpha'>B</span></span>,
the following four conditions are required to be satisfied by <span class='math'><span class='mathalpha'>S</span></span>:
<ul class='itemize'><li id='order-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-4.1'>(4.1)</a></div>if <span class='math'><span class='mathalpha'>A</span></span> and <span class='math'><span class='mathalpha'>B</span></span> are both
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> operations,
then <span class='math'><span class='mathalpha'>A</span></span> precedes <span class='math'><span class='mathalpha'>B</span></span> in <span class='math'><span class='mathalpha'>S</span></span>; and</li><li id='order-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-4.2'>(4.2)</a></div>if <span class='math'><span class='mathalpha'>A</span></span> is a <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> operation and
<span class='math'><span class='mathalpha'>B</span></span> happens before
a <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> fence <span class='math'><span class='mathalpha'>Y</span></span>,
then <span class='math'><span class='mathalpha'>A</span></span> precedes <span class='math'><span class='mathalpha'>Y</span></span> in <span class='math'><span class='mathalpha'>S</span></span>; and</li><li id='order-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-4.3'>(4.3)</a></div>if a <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> fence <span class='math'><span class='mathalpha'>X</span></span>
happens before <span class='math'><span class='mathalpha'>A</span></span> and
<span class='math'><span class='mathalpha'>B</span></span> is a <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> operation,
then <span class='math'><span class='mathalpha'>X</span></span> precedes <span class='math'><span class='mathalpha'>B</span></span> in <span class='math'><span class='mathalpha'>S</span></span>; and</li><li id='order-4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#order-4.4'>(4.4)</a></div>if a <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> fence <span class='math'><span class='mathalpha'>X</span></span>
happens before <span class='math'><span class='mathalpha'>A</span></span> and
<span class='math'><span class='mathalpha'>B</span></span> happens before
a <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> fence <span class='math'><span class='mathalpha'>Y</span></span>,
then <span class='math'><span class='mathalpha'>X</span></span> precedes <span class='math'><span class='mathalpha'>Y</span></span> in <span class='math'><span class='mathalpha'>S</span></span><a class='hidden_link' href='#order-4.sentence-3'>.</a></li></ul></div></div><div class='para' id='order-5'><div class='marginalizedparent'><a class='marginalized' href='#order-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L478'>#</a></div><div id='order-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#order-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='order-5.sentence-1' class='sentence'>This definition ensures that <span class='math'><span class='mathalpha'>S</span></span> is consistent with
the modification order of any atomic object <span class='math'><span class='mathalpha'>M</span></span><a class='hidden_link' href='#order-5.sentence-1'>.</a></div> <div id='order-5.sentence-2' class='sentence'>It also ensures that
a <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> load <span class='math'><span class='mathalpha'>A</span></span> of <span class='math'><span class='mathalpha'>M</span></span>
gets its value either from the last modification of <span class='math'><span class='mathalpha'>M</span></span>
that precedes <span class='math'><span class='mathalpha'>A</span></span> in <span class='math'><span class='mathalpha'>S</span></span> or
from some non-<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> modification of <span class='math'><span class='mathalpha'>M</span></span>
that does not happen before any modification of <span class='math'><span class='mathalpha'>M</span></span>
that precedes <span class='math'><span class='mathalpha'>A</span></span> in <span class='math'><span class='mathalpha'>S</span></span><a class='hidden_link' href='#order-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='order-6'><div class='marginalizedparent'><a class='marginalized' href='#order-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L491'>#</a></div><div id='order-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#order-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='order-6.sentence-1' class='sentence'>We do not require that <span class='math'><span class='mathalpha'>S</span></span> be consistent with
“happens before” (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#order-6.sentence-1'>.</a></div> <div id='order-6.sentence-2' class='sentence'>This allows more efficient implementation
of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
on some machine architectures<a class='hidden_link' href='#order-6.sentence-2'>.</a></div> <div id='order-6.sentence-3' class='sentence'>It can produce surprising results
when these are mixed with <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> accesses<a class='hidden_link' href='#order-6.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='order-7'><div class='marginalizedparent'><a class='marginalized' href='#order-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L502'>#</a></div><div id='order-7.note-1' class='note'>[&nbsp;<a class='note_link' href='#order-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='order-7.sentence-1' class='sentence'><span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> ensures sequential consistency only
for a program that is free of data races and
uses exclusively <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> atomic operations<a class='hidden_link' href='#order-7.sentence-1'>.</a></div> <div id='order-7.sentence-2' class='sentence'>Any use of weaker ordering will invalidate this guarantee
unless extreme care is used<a class='hidden_link' href='#order-7.sentence-2'>.</a></div> <div id='order-7.sentence-3' class='sentence'>In many cases, <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span> atomic operations are reorderable
with respect to other atomic operations performed by the same thread<a class='hidden_link' href='#order-7.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='order-8'><div class='marginalizedparent'><a class='marginalized' href='#order-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L513'>#</a></div><div id='order-8.sentence-1' class='sentence'>Implementations should ensure that no “out-of-thin-air” values are computed that
circularly depend on their own computation<a class='hidden_link' href='#order-8.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='order-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#order-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='order-8.sentence-2' class='sentence'>For example, with <span class='texttt'>x</span> and <span class='texttt'>y</span> initially zero,
<pre class='codeblock'>
<span class='comment'>// Thread 1:</span>
r1 <span class='operator'>=</span> y<span class='operator'>.</span>load<span class='parenthesis'>(</span>memory_order<span class='operator'>::</span>relaxed<span class='parenthesis'>)</span>;
x<span class='operator'>.</span>store<span class='parenthesis'>(</span>r1, memory_order<span class='operator'>::</span>relaxed<span class='parenthesis'>)</span>;
</pre></div><div id='order-8.sentence-3' class='sentence'><pre class='codeblock'>
<span class='comment'>// Thread 2:</span>
r2 <span class='operator'>=</span> x<span class='operator'>.</span>load<span class='parenthesis'>(</span>memory_order<span class='operator'>::</span>relaxed<span class='parenthesis'>)</span>;
y<span class='operator'>.</span>store<span class='parenthesis'>(</span>r2, memory_order<span class='operator'>::</span>relaxed<span class='parenthesis'>)</span>;
</pre>
should not produce <span class='texttt'>r1 <span class='operator'>=</span><span class='operator'>=</span> r2 <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>42</span></span>, since the store of 42 to <span class='texttt'>y</span> is only
possible if the store to <span class='texttt'>x</span> stores <span class='texttt'><span class='literal'>42</span></span>, which circularly depends on the
store to <span class='texttt'>y</span> storing <span class='texttt'><span class='literal'>42</span></span><a class='hidden_link' href='#order-8.sentence-3'>.</a></div> <div id='order-8.sentence-4' class='sentence'>Note that without this restriction, such an
execution is possible<a class='hidden_link' href='#order-8.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='order-9'><div class='marginalizedparent'><a class='marginalized' href='#order-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L536'>#</a></div><div id='order-9.note-1' class='note'>[&nbsp;<a class='note_link' href='#order-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='order-9.sentence-1' class='sentence'>The recommendation similarly disallows <span class='texttt'>r1 <span class='operator'>=</span><span class='operator'>=</span> r2 <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>42</span></span> in the
following example, with <span class='texttt'>x</span> and <span class='texttt'>y</span> again initially zero:</div><pre class='codeblock'>
<span class='comment'>// Thread 1:</span>
r1 <span class='operator'>=</span> x<span class='operator'>.</span>load<span class='parenthesis'>(</span>memory_order<span class='operator'>::</span>relaxed<span class='parenthesis'>)</span>;
<span class='keyword'>if</span> <span class='parenthesis'>(</span>r1 <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>42</span><span class='parenthesis'>)</span> y<span class='operator'>.</span>store<span class='parenthesis'>(</span><span class='literal'>42</span>, memory_order<span class='operator'>::</span>relaxed<span class='parenthesis'>)</span>;
</pre><pre class='codeblock'>
<span class='comment'>// Thread 2:</span>
r2 <span class='operator'>=</span> y<span class='operator'>.</span>load<span class='parenthesis'>(</span>memory_order<span class='operator'>::</span>relaxed<span class='parenthesis'>)</span>;
<span class='keyword'>if</span> <span class='parenthesis'>(</span>r2 <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>42</span><span class='parenthesis'>)</span> x<span class='operator'>.</span>store<span class='parenthesis'>(</span><span class='literal'>42</span>, memory_order<span class='operator'>::</span>relaxed<span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='order-10'><div class='marginalizedparent'><a class='marginalized' href='#order-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L554'>#</a></div><div id='order-10.sentence-1' class='sentence'>Atomic read-modify-write operations shall always read the last value
(in the modification order) written before the write associated with
the read-modify-write operation<a class='hidden_link' href='#order-10.sentence-1'>.</a></div></div><div class='para' id='order-11'><div class='marginalizedparent'><a class='marginalized' href='#order-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L559'>#</a></div><div id='order-11.sentence-1' class='sentence'>Implementations should make atomic stores visible to atomic loads within a reasonable
amount of time<a class='hidden_link' href='#order-11.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='lib:kill_dependency'>
<div class='itemdecl' id='order-11.itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#order-11.itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  T kill_dependency<span class='parenthesis'>(</span>T y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='order-12'><div class='marginalizedparent'><a class='marginalized' href='#order-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L571'>#</a></div><div id='order-12.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
The argument does not
<a href='intro.multithread#def:carries_a_dependency'>carry a dependency</a>
to the return value<a class='hidden_link' href='#order-12.sentence-1'>.</a></div></div></div><div class='para' id='order-13'><div class='marginalizedparent'><a class='marginalized' href='#order-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L577'>#</a></div><div id='order-13.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>y</span><a class='hidden_link' href='#order-13.sentence-1'>.</a></div></div></div></div><div id='lockfree' class='section'><h2 ><a class='secnum' href='#lockfree' style='min-width:88pt'>31.5</a> Lock-free property <a class='abbr_ref' href='atomics.lockfree'>[atomics.lockfree]</a></h2><span class='indexparent'><a class='index' id='lib:ATOMIC_BOOL_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_CHAR_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_CHAR8_T_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_CHAR16_T_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_CHAR32_T_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_WCHAR_T_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_SHORT_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_INT_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_LONG_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_LLONG_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id='lib:ATOMIC_POINTER_LOCK_FREE'></a></span><span class='indexparent'><a class='index' id=':values_of_various_ATOMIC_..._LOCK_FREE_macros'></a></span>
<pre class='codeblock'>
<span class='preprocessordirective'>#define</span> ATOMIC_BOOL_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_CHAR_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_CHAR8_T_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_CHAR16_T_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_CHAR32_T_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_WCHAR_T_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_SHORT_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_INT_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_LONG_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_LLONG_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
<span class='preprocessordirective'>#define</span> ATOMIC_POINTER_LOCK_FREE <span class='textit'><span class='texttt'>unspecified</span></span>
</pre><div class='para' id='lockfree-1'><div class='marginalizedparent'><a class='marginalized' href='#lockfree-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L611'>#</a></div><div id='lockfree-1.sentence-1' class='sentence'>The <span class='texttt'>ATOMIC_&shy;<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>_&shy;LOCK_&shy;FREE</span> macros indicate the lock-free property of the
corresponding atomic types, with the signed and unsigned variants grouped
together<a class='hidden_link' href='#lockfree-1.sentence-1'>.</a></div> <div id='lockfree-1.sentence-2' class='sentence'>The properties also apply to the corresponding (partial) specializations of the
<span class='texttt'>atomic</span> template<a class='hidden_link' href='#lockfree-1.sentence-2'>.</a></div> <div id='lockfree-1.sentence-3' class='sentence'>A value of 0 indicates that the types are never
lock-free<a class='hidden_link' href='#lockfree-1.sentence-3'>.</a></div> <div id='lockfree-1.sentence-4' class='sentence'>A value of 1 indicates that the types are sometimes lock-free<a class='hidden_link' href='#lockfree-1.sentence-4'>.</a></div> <div id='lockfree-1.sentence-5' class='sentence'>A
value of 2 indicates that the types are always lock-free<a class='hidden_link' href='#lockfree-1.sentence-5'>.</a></div></div><div class='para' id='lockfree-2'><div class='marginalizedparent'><a class='marginalized' href='#lockfree-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L619'>#</a></div><div id='lockfree-2.sentence-1' class='sentence'>At least one signed integral specialization of the <span class='texttt'>atomic</span> template,
along with the specialization
for the corresponding unsigned type (<a href='basic.fundamental'>[basic.fundamental]</a>),
is always lock-free<a class='hidden_link' href='#lockfree-2.sentence-1'>.</a></div> <div id='lockfree-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#lockfree-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='lockfree-2.sentence-2' class='sentence'>This requirement is optional in freestanding implementations (<a href='compliance'>[compliance]</a>)<a class='hidden_link' href='#lockfree-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='lockfree-3'><div class='marginalizedparent'><a class='marginalized' href='#lockfree-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L628'>#</a></div><div id='lockfree-3.sentence-1' class='sentence'>The function <span class='texttt'>atomic_&shy;is_&shy;lock_&shy;free</span> (<a href='#types.operations'>[atomics.types.operations]</a>)
indicates whether the object is lock-free<a class='hidden_link' href='#lockfree-3.sentence-1'>.</a></div> <div id='lockfree-3.sentence-2' class='sentence'>In any given program execution, the
result of the lock-free query shall be consistent for all pointers of the same
type<a class='hidden_link' href='#lockfree-3.sentence-2'>.</a></div></div><div class='para' id='lockfree-4'><div class='marginalizedparent'><a class='marginalized' href='#lockfree-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L634'>#</a></div><div id='lockfree-4.sentence-1' class='sentence'>Atomic operations that are not lock-free are considered to potentially
block (<a href='intro.progress'>[intro.progress]</a>)<a class='hidden_link' href='#lockfree-4.sentence-1'>.</a></div></div><div class='para' id='lockfree-5'><div class='marginalizedparent'><a class='marginalized' href='#lockfree-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L638'>#</a></div><div id='lockfree-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#lockfree-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='lockfree-5.sentence-1' class='sentence'>Operations that are lock-free should also be address-free<a class='hidden_link' href='#lockfree-5.sentence-1'>.</a></div> <div id='lockfree-5.sentence-2' class='sentence'>That is,
atomic operations on the same memory location via two different addresses will
communicate atomically<a class='hidden_link' href='#lockfree-5.sentence-2'>.</a></div> <div id='lockfree-5.sentence-3' class='sentence'>The implementation should not depend on any
per-process state<a class='hidden_link' href='#lockfree-5.sentence-3'>.</a></div> <div id='lockfree-5.sentence-4' class='sentence'>This restriction enables communication  by memory that is
mapped into a process more than once and by memory that is shared between two
processes<a class='hidden_link' href='#lockfree-5.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='wait' class='section'><h2 ><a class='secnum' href='#wait' style='min-width:88pt'>31.6</a> Waiting and notifying <a class='abbr_ref' href='atomics.wait'>[atomics.wait]</a></h2><div class='para' id='wait-1'><div class='marginalizedparent'><a class='marginalized' href='#wait-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L650'>#</a></div><div id='wait-1.sentence-1' class='sentence'><a class='hidden_link' href='#def:atomic,waiting_operation' id='def:atomic,waiting_operation'><i >Atomic waiting operations</i></a>
and <a class='hidden_link' href='#def:atomic,notifying_operation' id='def:atomic,notifying_operation'><i >atomic notifying operations</i></a>
provide a mechanism to wait for the value of an atomic object to change
more efficiently than can be achieved with polling<a class='hidden_link' href='#wait-1.sentence-1'>.</a></div> <div id='wait-1.sentence-2' class='sentence'>An atomic waiting operation may block until it is unblocked
by an atomic notifying operation, according to each function's effects<a class='hidden_link' href='#wait-1.sentence-2'>.</a></div> <div id='wait-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#wait-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='wait-1.sentence-3' class='sentence'>Programs are not guaranteed to observe transient atomic values,
an issue known as the A-B-A problem,
resulting in continued blocking if a condition is only temporarily met<a class='hidden_link' href='#wait-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='wait-2'><div class='marginalizedparent'><a class='marginalized' href='#wait-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L663'>#</a></div><div id='wait-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#wait-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='wait-2.sentence-1' class='sentence'>The following functions are atomic waiting operations:
<ul class='itemize'><li id='wait-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-2.1'>(2.1)</a></div><span class='texttt'>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>wait</span>,</li><li id='wait-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-2.2'>(2.2)</a></div><span class='texttt'>atomic_&shy;flag<span class='operator'>&#x200b;::&#x200b;</span>wait</span>,</li><li id='wait-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-2.3'>(2.3)</a></div><span class='texttt'>atomic_&shy;wait</span> and <span class='texttt'>atomic_&shy;wait_&shy;explicit</span>,</li><li id='wait-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-2.4'>(2.4)</a></div><span class='texttt'>atomic_&shy;flag_&shy;wait</span> and <span class='texttt'>atomic_&shy;flag_&shy;wait_&shy;explicit</span>, and</li><li id='wait-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-2.5'>(2.5)</a></div><span class='texttt'>atomic_&shy;ref<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>wait</span><a class='hidden_link' href='#wait-2.sentence-1'>.</a></li></ul></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='wait-3'><div class='marginalizedparent'><a class='marginalized' href='#wait-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L675'>#</a></div><div id='wait-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#wait-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='wait-3.sentence-1' class='sentence'>The following functions are atomic notifying operations:
<ul class='itemize'><li id='wait-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-3.1'>(3.1)</a></div><span class='texttt'>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>notify_&shy;one</span> and <span class='texttt'>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>notify_&shy;all</span>,</li><li id='wait-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-3.2'>(3.2)</a></div><span class='texttt'>atomic_&shy;flag<span class='operator'>&#x200b;::&#x200b;</span>notify_&shy;one</span> and <span class='texttt'>atomic_&shy;flag<span class='operator'>&#x200b;::&#x200b;</span>notify_&shy;all</span>,</li><li id='wait-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-3.3'>(3.3)</a></div><span class='texttt'>atomic_&shy;notify_&shy;one</span> and <span class='texttt'>atomic_&shy;notify_&shy;all</span>,</li><li id='wait-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-3.4'>(3.4)</a></div><span class='texttt'>atomic_&shy;flag_&shy;notify_&shy;one</span> and <span class='texttt'>atomic_&shy;flag_&shy;notify_&shy;all</span>, and</li><li id='wait-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-3.5'>(3.5)</a></div><span class='texttt'>atomic_&shy;ref<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>notify_&shy;one</span> and <span class='texttt'>atomic_&shy;ref<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>notify_&shy;all</span><a class='hidden_link' href='#wait-3.sentence-1'>.</a></li></ul></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <span class='indexparent'><a class='index' id=':atomic,waiting_operation,eligible_to_be_unblocked'></a></span></div><div class='para' id='wait-4'><div class='marginalizedparent'><a class='marginalized' href='#wait-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L688'>#</a></div><div id='wait-4.sentence-1' class='sentence'>A call to an atomic waiting operation on an atomic object <span class='texttt'>M</span>
is <a class='hidden_link' href='#def:eligible_to_be_unblocked' id='def:eligible_to_be_unblocked'><i >eligible to be unblocked</i></a>
by a call to an atomic notifying operation on <span class='texttt'>M</span>
if there exist side effects <span class='texttt'>X</span> and <span class='texttt'>Y</span> on <span class='texttt'>M</span> such that:
<ul class='itemize'><li id='wait-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-4.1'>(4.1)</a></div>the atomic waiting operation has blocked after observing the result of <span class='texttt'>X</span>,</li><li id='wait-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-4.2'>(4.2)</a></div><span class='texttt'>X</span> precedes <span class='texttt'>Y</span> in the modification order of <span class='texttt'>M</span>, and</li><li id='wait-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#wait-4.3'>(4.3)</a></div><span class='texttt'>Y</span> happens before the call to the atomic notifying operation.</li></ul></div></div></div><div id='ref.generic' class='section'><h2 ><a class='secnum' href='#ref.generic' style='min-width:88pt'>31.7</a> Class template <span class='texttt'>atomic_&shy;ref</span> <a class='abbr_ref' href='atomics.ref.generic'>[atomics.ref.generic]</a></h2><span class='indexparent'><a class='index' id='lib:atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:value_type,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,value_type'></a></span><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    T<span class='operator'>*</span> ptr;             <span class='comment'>// <span class='textit'>exposition only</span></span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> T;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':required_alignment_for_atomic_ref_type&#39;s_operations'></a></span><span class='textit'>implementation-defined</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_ref_type&#39;s_operations_are_always_lock_free'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>explicit</span> atomic_ref<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_ref<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T exchange<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><div class='para' id='ref.generic-1'><div class='marginalizedparent'><a class='marginalized' href='#ref.generic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L741'>#</a></div><div id='ref.generic-1.sentence-1' class='sentence'>An <span class='texttt'>atomic_&shy;ref</span> object applies atomic operations (<a href='#general'>[atomics.general]</a>) to
the object referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> such that,
for the lifetime (<a href='basic.life'>[basic.life]</a>) of the <span class='texttt'>atomic_&shy;ref</span> object,
the object referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> is an atomic object (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#ref.generic-1.sentence-1'>.</a></div></div><div class='para' id='ref.generic-2'><div class='marginalizedparent'><a class='marginalized' href='#ref.generic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L747'>#</a></div><div id='ref.generic-2.sentence-1' class='sentence'>The program is ill-formed if <span class='texttt'>is_&shy;trivially_&shy;copyable_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#ref.generic-2.sentence-1'>.</a></div></div><div class='para' id='ref.generic-3'><div class='marginalizedparent'><a class='marginalized' href='#ref.generic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L750'>#</a></div><div id='ref.generic-3.sentence-1' class='sentence'>The lifetime (<a href='basic.life'>[basic.life]</a>) of an object referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
shall exceed the lifetime of all <span class='texttt'>atomic_&shy;ref</span>s that reference the object<a class='hidden_link' href='#ref.generic-3.sentence-1'>.</a></div> <div id='ref.generic-3.sentence-2' class='sentence'>While any <span class='texttt'>atomic_&shy;ref</span> instances exist
that reference the <span class='texttt'><span class='operator'>*</span>ptr</span> object,
all accesses to that object shall exclusively occur
through those <span class='texttt'>atomic_&shy;ref</span> instances<a class='hidden_link' href='#ref.generic-3.sentence-2'>.</a></div> <div id='ref.generic-3.sentence-3' class='sentence'>No subobject of the object referenced by <span class='texttt'>atomic_&shy;ref</span>
shall be concurrently referenced by any other <span class='texttt'>atomic_&shy;ref</span> object<a class='hidden_link' href='#ref.generic-3.sentence-3'>.</a></div></div><div class='para' id='ref.generic-4'><div class='marginalizedparent'><a class='marginalized' href='#ref.generic-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L760'>#</a></div><div id='ref.generic-4.sentence-1' class='sentence'>Atomic operations applied to an object
through a referencing <span class='texttt'>atomic_&shy;ref</span> are atomic with respect to
atomic operations applied through any other <span class='texttt'>atomic_&shy;ref</span>
referencing the same object<a class='hidden_link' href='#ref.generic-4.sentence-1'>.</a></div> <div id='ref.generic-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#ref.generic-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref.generic-4.sentence-2' class='sentence'>Atomic operations or the <span class='texttt'>atomic_&shy;ref</span> constructor could acquire
a shared resource, such as a lock associated with the referenced object,
to enable atomic operations to be applied to the referenced object<a class='hidden_link' href='#ref.generic-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div id='ref.ops' class='section'><h3 ><a class='secnum' href='#ref.ops' style='min-width:103pt'>31.7.1</a> Operations <a class='abbr_ref' href='atomics.ref.ops'>[atomics.ref.ops]</a></h3><span class='indexparent'><a class='index' id='lib:required_alignment,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,required_alignment'></a></span><span class='indexparent'><a class='index' id='lib:required_alignment,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,required_alignment'></a></span><span class='indexparent'><a class='index' id='lib:required_alignment,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,required_alignment'></a></span><span class='indexparent'><a class='index' id='lib:required_alignment,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,required_alignment'></a></span><div class='itemdecl' id='ref.ops-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-1'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L782'>#</a></div><div id='ref.ops-1.sentence-1' class='sentence'>The alignment required for an object to be referenced by an atomic reference,
which is at least <span class='texttt'><span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span><a class='hidden_link' href='#ref.ops-1.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-2'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L786'>#</a></div><div id='ref.ops-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#ref.ops-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref.ops-2.sentence-1' class='sentence'>Hardware could require an object
referenced by an <span class='texttt'>atomic_&shy;ref</span>
to have stricter alignment (<a href='basic.align'>[basic.align]</a>)
than other objects of type <span class='texttt'>T</span><a class='hidden_link' href='#ref.ops-2.sentence-1'>.</a></div> <div id='ref.ops-2.sentence-2' class='sentence'>Further, whether operations on an <span class='texttt'>atomic_&shy;ref</span>
are lock-free could depend on the alignment of the referenced object<a class='hidden_link' href='#ref.ops-2.sentence-2'>.</a></div> <div id='ref.ops-2.sentence-3' class='sentence'>For example, lock-free operations on <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>complex<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span></span>
could be supported only if aligned to <span class='texttt'><span class='literal'>2</span><span class='operator'>*</span><span class='keyword'>alignof</span><span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#ref.ops-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,is_always_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,is_always_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,is_always_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,is_always_lock_free'></a></span><div class='itemdecl' id='ref.ops-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-3'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L808'>#</a></div><div id='ref.ops-3.sentence-1' class='sentence'>The static data member <span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span>
if the <span class='texttt'>atomic_&shy;ref</span> type's operations are always lock-free,
and <span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#ref.ops-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,is_lock_free'></a></span><div class='itemdecl' id='ref.ops-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-4'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L823'>#</a></div><div id='ref.ops-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'><span class='literal'>true</span></span> if operations on all objects of the type <span class='texttt'>atomic_&shy;ref<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
are lock-free,
<span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#ref.ops-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_ref,constructor'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,constructor'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,constructor'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,constructor'></a></span><div class='itemdecl' id='ref.ops-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:4'>🔗</a></div><code class='itemdeclcode'>atomic_ref<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> obj<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-5'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L839'>#</a></div><div id='ref.ops-5.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
The referenced object is aligned to <span class='texttt'>required_&shy;alignment</span><a class='hidden_link' href='#ref.ops-5.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-6'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L843'>#</a></div><div id='ref.ops-6.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
<span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> references <span class='texttt'>obj</span><a class='hidden_link' href='#ref.ops-6.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-7'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L847'>#</a></div><div id='ref.ops-7.sentence-1' class='sentence'><span class='textit'>Throws:</span> 
Nothing<a class='hidden_link' href='#ref.ops-7.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_ref,constructor_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,constructor_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,constructor_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,constructor_'></a></span><div class='itemdecl' id='ref.ops-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:5'>🔗</a></div><code class='itemdeclcode'>atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span> ref<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-8'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L861'>#</a></div><div id='ref.ops-8.sentence-1' class='sentence'><span class='textit'>Postconditions:</span> 
<span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> references the object referenced by <span class='texttt'>ref</span><a class='hidden_link' href='#ref.ops-8.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:store,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,store'></a></span><span class='indexparent'><a class='index' id='lib:store,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,store'></a></span><span class='indexparent'><a class='index' id='lib:store,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,store'></a></span><span class='indexparent'><a class='index' id='lib:store,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,store'></a></span><div class='itemdecl' id='ref.ops-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:6'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> store<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-9'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L875'>#</a></div><div id='ref.ops-9.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
The <span class='texttt'>order</span> argument is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, nor
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#ref.ops-9.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-10'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L882'>#</a></div><div id='ref.ops-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
with the value of <span class='texttt'>desired</span><a class='hidden_link' href='#ref.ops-10.sentence-1'>.</a></div> <div id='ref.ops-10.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#ref.ops-10.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,operator='></a></span><span class='indexparent'><a class='index' id='lib:operator=,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,operator='></a></span><span class='indexparent'><a class='index' id='lib:operator=,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator='></a></span><span class='indexparent'><a class='index' id='lib:operator=,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,operator='></a></span><div class='itemdecl' id='ref.ops-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:7'>🔗</a></div><code class='itemdeclcode'>T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T desired<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-11'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L898'>#</a></div><div id='ref.ops-11.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
store<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span>;
<span class='keyword'>return</span> desired;
</pre></div></div></div><span class='indexparent'><a class='index' id='lib:load,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,load'></a></span><span class='indexparent'><a class='index' id='lib:load,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,load'></a></span><span class='indexparent'><a class='index' id='lib:load,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,load'></a></span><span class='indexparent'><a class='index' id='lib:load,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,load'></a></span><div class='itemdecl' id='ref.ops-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:8'>🔗</a></div><code class='itemdeclcode'>T load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-12'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L916'>#</a></div><div id='ref.ops-12.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
The <span class='texttt'>order</span> argument is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#ref.ops-12.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-13'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L921'>#</a></div><div id='ref.ops-13.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#ref.ops-13.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-14'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L925'>#</a></div><div id='ref.ops-14.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#ref.ops-14.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator_type,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,operator_type'></a></span><span class='indexparent'><a class='index' id='lib:operator_T*,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,operator_T*'></a></span><span class='indexparent'><a class='index' id='lib:operator_integral,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator_integral'></a></span><span class='indexparent'><a class='index' id='lib:operator_floating-point,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,operator_floating-point'></a></span><div class='itemdecl' id='ref.ops-itemdecl:9'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:9'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-15'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L939'>#</a></div><div id='ref.ops-15.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:exchange,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,exchange'></a></span><span class='indexparent'><a class='index' id='lib:exchange,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,exchange'></a></span><span class='indexparent'><a class='index' id='lib:exchange,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,exchange'></a></span><span class='indexparent'><a class='index' id='lib:exchange,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,exchange'></a></span><div class='itemdecl' id='ref.ops-itemdecl:10'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:10'>🔗</a></div><code class='itemdeclcode'>T exchange<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-16'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L953'>#</a></div><div id='ref.ops-16.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
with <span class='texttt'>desired</span><a class='hidden_link' href='#ref.ops-16.sentence-1'>.</a></div> <div id='ref.ops-16.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#ref.ops-16.sentence-2'>.</a></div> <div id='ref.ops-16.sentence-3' class='sentence'>This operation is an atomic read-modify-write operation (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#ref.ops-16.sentence-3'>.</a></div></div></div><div class='para' id='ref.ops-17'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L960'>#</a></div><div id='ref.ops-17.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
immediately before the effects<a class='hidden_link' href='#ref.ops-17.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic_ref'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref,compare_exchange_strong'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,compare_exchange_strong'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,compare_exchange_strong'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,compare_exchange_strong'></a></span><div class='itemdecl' id='ref.ops-itemdecl:11'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:11'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-18'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L989'>#</a></div><div id='ref.ops-18.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
The <span class='texttt'>failure</span> argument is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#ref.ops-18.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-19'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L994'>#</a></div><div id='ref.ops-19.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Retrieves the value in <span class='texttt'>expected</span><a class='hidden_link' href='#ref.ops-19.sentence-1'>.</a></div> <div id='ref.ops-19.sentence-2' class='sentence'>It then atomically compares the value representation of
the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> for equality
with that previously retrieved from <span class='texttt'>expected</span>,
and if <span class='texttt'><span class='literal'>true</span></span>, replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
with that in <span class='texttt'>desired</span><a class='hidden_link' href='#ref.ops-19.sentence-2'>.</a></div> <div id='ref.ops-19.sentence-3' class='sentence'>If and only if the comparison is <span class='texttt'><span class='literal'>true</span></span>,
memory is affected according to the value of <span class='texttt'>success</span>, and
if the comparison is <span class='texttt'><span class='literal'>false</span></span>,
memory is affected according to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#ref.ops-19.sentence-3'>.</a></div> <div id='ref.ops-19.sentence-4' class='sentence'>When only one <span class='texttt'>memory_&shy;order</span> argument is supplied,
the value of <span class='texttt'>success</span> is <span class='texttt'>order</span>, and
the value of <span class='texttt'>failure</span> is <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span> shall be replaced by
the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> shall be replaced by
the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#ref.ops-19.sentence-4'>.</a></div> <div id='ref.ops-19.sentence-5' class='sentence'>If and only if the comparison is <span class='texttt'><span class='literal'>false</span></span> then,
after the atomic operation,
the value in <span class='texttt'>expected</span> is replaced by
the value read from the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
during the atomic comparison<a class='hidden_link' href='#ref.ops-19.sentence-5'>.</a></div> <div id='ref.ops-19.sentence-6' class='sentence'>If the operation returns <span class='texttt'><span class='literal'>true</span></span>,
these operations are atomic read-modify-write operations (<a href='intro.races'>[intro.races]</a>)
on the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#ref.ops-19.sentence-6'>.</a></div> <div id='ref.ops-19.sentence-7' class='sentence'>Otherwise, these operations are atomic load operations on that memory<a class='hidden_link' href='#ref.ops-19.sentence-7'>.</a></div></div></div><div class='para' id='ref.ops-20'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1023'>#</a></div><div id='ref.ops-20.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The result of the comparison<a class='hidden_link' href='#ref.ops-20.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-21'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1027'>#</a></div><div id='ref.ops-21.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
A weak compare-and-exchange operation may fail spuriously<a class='hidden_link' href='#ref.ops-21.sentence-1'>.</a></div> <div id='ref.ops-21.sentence-2' class='sentence'>That is, even when the contents of memory referred to
by <span class='texttt'>expected</span> and <span class='texttt'>ptr</span> are equal,
it may return <span class='texttt'><span class='literal'>false</span></span> and
store back to <span class='texttt'>expected</span> the same memory contents
that were originally there<a class='hidden_link' href='#ref.ops-21.sentence-2'>.</a></div> <div id='ref.ops-21.note-1' class='note'>[&nbsp;<a class='note_link' href='#ref.ops-21.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref.ops-21.sentence-3' class='sentence'>This spurious failure enables implementation of compare-and-exchange
on a broader class of machines, e.g., load-locked store-conditional machines<a class='hidden_link' href='#ref.ops-21.sentence-3'>.</a></div> <div id='ref.ops-21.sentence-4' class='sentence'>A consequence of spurious failure is
that nearly all uses of weak compare-and-exchange will be in a loop<a class='hidden_link' href='#ref.ops-21.sentence-4'>.</a></div> <div id='ref.ops-21.sentence-5' class='sentence'>When a compare-and-exchange is in a loop,
the weak version will yield better performance on some platforms<a class='hidden_link' href='#ref.ops-21.sentence-5'>.</a></div> <div id='ref.ops-21.sentence-6' class='sentence'>When a weak compare-and-exchange would require a loop and
a strong one would not, the strong one is preferable<a class='hidden_link' href='#ref.ops-21.sentence-6'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:wait,atomic_ref<T>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T>,wait'></a></span><div class='itemdecl' id='ref.ops-itemdecl:12'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:12'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-22'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1053'>#</a></div><div id='ref.ops-22.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is
neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#ref.ops-22.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-23'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1058'>#</a></div><div id='ref.ops-23.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='ref.ops-23.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#ref.ops-23.1'>(23.1)</a></div>Evaluates <span class='texttt'>load<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span> and
  compares its value representation for equality against that of <span class='texttt'>old</span>.</li><li id='ref.ops-23.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#ref.ops-23.2'>(23.2)</a></div>If they compare unequal, returns.</li><li id='ref.ops-23.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#ref.ops-23.3'>(23.3)</a></div>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously.</li></ul></div></div></div><div class='para' id='ref.ops-24'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1072'>#</a></div><div id='ref.ops-24.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic waiting operation (<a href='#wait'>[atomics.wait]</a>)
on atomic object <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#ref.ops-24.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:notify_one,atomic_ref<T>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T>,notify_one'></a></span><div class='itemdecl' id='ref.ops-itemdecl:13'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:13'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-25'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1084'>#</a></div><div id='ref.ops-25.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of at least one atomic waiting operation on <span class='texttt'><span class='operator'>*</span>ptr</span>
that is eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#ref.ops-25.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-26'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1090'>#</a></div><div id='ref.ops-26.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)
on atomic object <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#ref.ops-26.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:notify_all,atomic_ref<T>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T>,notify_all'></a></span><div class='itemdecl' id='ref.ops-itemdecl:14'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.ops-itemdecl:14'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.ops-27'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1102'>#</a></div><div id='ref.ops-27.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of all atomic waiting operations on <span class='texttt'><span class='operator'>*</span>ptr</span>
that are eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call<a class='hidden_link' href='#ref.ops-27.sentence-1'>.</a></div></div></div><div class='para' id='ref.ops-28'><div class='marginalizedparent'><a class='marginalized' href='#ref.ops-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1107'>#</a></div><div id='ref.ops-28.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
 This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)
 on atomic object <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#ref.ops-28.sentence-1'>.</a></div></div></div></div><div id='ref.int' class='section'><h3 ><a class='secnum' href='#ref.int' style='min-width:103pt'>31.7.2</a> Specializations for integral types <a class='abbr_ref' href='atomics.ref.int'>[atomics.ref.int]</a></h3><div class='para' id='ref.int-1'><div class='marginalizedparent'><a class='marginalized' href='#ref.int-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1115'>#</a></div><div id='ref.int-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>'></a></span>There are specializations of the <span class='texttt'>atomic_&shy;ref</span> class template
for the integral types
<span class='texttt'><span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>short</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>short</span></span>,
<span class='texttt'><span class='keyword'>int</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>int</span></span>,
<span class='texttt'><span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>long</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>char8_&shy;t</span></span>,
<span class='texttt'><span class='keyword'>char16_&shy;t</span></span>,
<span class='texttt'><span class='keyword'>char32_&shy;t</span></span>,
<span class='texttt'><span class='keyword'>wchar_&shy;t</span></span>,
and any other types needed by the typedefs in the header <span class='indexparent'><a class='index' id=':<cstdint>'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>cstdint<span class='anglebracket'>&gt;</span></span> (<a href='cstdint.syn'>[cstdint.syn]</a>)<a class='hidden_link' href='#ref.int-1.sentence-1'>.</a></div> <div id='ref.int-1.sentence-2' class='sentence'>For each such type <span class='texttt'><span class='textit'>integral</span></span>,
the specialization <span class='texttt'>atomic_&shy;ref<span class='anglebracket'>&lt;</span><span class='textit'>integral</span><span class='anglebracket'>&gt;</span></span> provides
additional atomic operations appropriate to integral types<a class='hidden_link' href='#ref.int-1.sentence-2'>.</a></div> <div id='ref.int-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#ref.int-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref.int-1.sentence-3' class='sentence'>The specialization <span class='texttt'>atomic_&shy;ref<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span></span>
uses the primary template (<a href='#ref.generic'>[atomics.ref.generic]</a>)<a class='hidden_link' href='#ref.int-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> <pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref<span class='anglebracket'>&lt;</span><span class='textit'>integral</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    <span class='textit'>integral</span><span class='operator'>*</span> ptr;        <span class='comment'>// <span class='textit'>exposition only</span></span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <span class='textit'>integral</span>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> value_type;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':required_alignment_for_atomic_ref_type&#39;s_operations_'></a></span><span class='textit'>implementation-defined</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_ref_type&#39;s_operations_are_always_lock_free_'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>explicit</span> atomic_ref<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_ref<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <span class='textit'>integral</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>integral</span> exchange<span class='parenthesis'>(</span><span class='textit'>integral</span>,
                      memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>integral</span> fetch_add<span class='parenthesis'>(</span><span class='textit'>integral</span>,
                       memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_sub<span class='parenthesis'>(</span><span class='textit'>integral</span>,
                       memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_and<span class='parenthesis'>(</span><span class='textit'>integral</span>,
                       memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_or<span class='parenthesis'>(</span><span class='textit'>integral</span>,
                      memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_xor<span class='parenthesis'>(</span><span class='textit'>integral</span>,
                       memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>&amp;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>|</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>^</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre></div><div class='para' id='ref.int-2'><div class='marginalizedparent'><a class='marginalized' href='#ref.int-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1204'>#</a></div><div id='ref.int-2.sentence-1' class='sentence'>Descriptions are provided below only for members
that differ from the primary template<a class='hidden_link' href='#ref.int-2.sentence-1'>.</a></div></div><div class='para' id='ref.int-3'><div class='marginalizedparent'><a class='marginalized' href='#ref.int-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1208'>#</a></div><div id='ref.int-3.sentence-1' class='sentence'>The following operations perform arithmetic computations<a class='hidden_link' href='#ref.int-3.sentence-1'>.</a></div> <div id='ref.int-3.sentence-2' class='sentence'>The key, operator, and computation correspondence is identified
in Table <a href='#tab:atomic.types.int.comp'>144</a><a class='hidden_link' href='#ref.int-3.sentence-2'>.</a></div> <span class='indexparent'><a class='index' id='lib:fetch_add,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,fetch_add'></a></span><span class='indexparent'><a class='index' id='lib:fetch_and,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,fetch_and'></a></span><span class='indexparent'><a class='index' id='lib:fetch_or,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,fetch_or'></a></span><span class='indexparent'><a class='index' id='lib:fetch_sub,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,fetch_sub'></a></span><span class='indexparent'><a class='index' id='lib:fetch_xor,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,fetch_xor'></a></span></div><div class='itemdecl' id='ref.int-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.int-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='textit'>integral</span> fetch_<span class='textit'>key</span><span class='parenthesis'>(</span><span class='textit'>integral</span> operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.int-4'><div class='marginalizedparent'><a class='marginalized' href='#ref.int-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1223'>#</a></div><div id='ref.int-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> with
the result of the computation applied to the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
and the given operand<a class='hidden_link' href='#ref.int-4.sentence-1'>.</a></div> <div id='ref.int-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#ref.int-4.sentence-2'>.</a></div> <div id='ref.int-4.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#ref.int-4.sentence-3'>.</a></div></div></div><div class='para' id='ref.int-5'><div class='marginalizedparent'><a class='marginalized' href='#ref.int-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1231'>#</a></div><div id='ref.int-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically, the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
immediately before the effects<a class='hidden_link' href='#ref.int-5.sentence-1'>.</a></div></div></div><div class='para' id='ref.int-6'><div class='marginalizedparent'><a class='marginalized' href='#ref.int-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1236'>#</a></div><div id='ref.int-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':signed_integer_representation,two&#39;s_complement'></a></span><span class='textit'>Remarks:</span> 
For signed integer types,
the result is as if the object value and parameters
were converted to their corresponding unsigned types,
the computation performed on those types, and
the result converted back to the signed type<a class='hidden_link' href='#ref.int-6.sentence-1'>.</a></div> <div id='ref.int-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#ref.int-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='ref.int-6.sentence-2' class='sentence'>There are no undefined results arising from the computation<a class='hidden_link' href='#ref.int-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:operator+=,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator+='></a></span><span class='indexparent'><a class='index' id='lib:operator-=,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator-='></a></span><span class='indexparent'><a class='index' id='lib:operator&amp;=,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator&amp;='></a></span><span class='indexparent'><a class='index' id='lib:operator|=,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator|='></a></span><span class='indexparent'><a class='index' id='lib:operator^=,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator^='></a></span><div class='itemdecl' id='ref.int-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.int-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='textit'>integral</span> <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span> operand<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.int-7'><div class='marginalizedparent'><a class='marginalized' href='#ref.int-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1259'>#</a></div><div id='ref.int-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<span class='texttt'><span class='keyword'>return</span> fetch_&shy;<span class='textit'>key</span><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <span class='textit'>op</span> operand;</span></div></div></div></div><div id='ref.float' class='section'><h3 ><a class='secnum' href='#ref.float' style='min-width:103pt'>31.7.3</a> Specializations for floating-point types <a class='abbr_ref' href='atomics.ref.float'>[atomics.ref.float]</a></h3><div class='para' id='ref.float-1'><div class='marginalizedparent'><a class='marginalized' href='#ref.float-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1267'>#</a></div><div id='ref.float-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>'></a></span>There are specializations of the <span class='texttt'>atomic_&shy;ref</span> class template
for the floating-point types
<span class='texttt'><span class='keyword'>float</span></span>,
<span class='texttt'><span class='keyword'>double</span></span>, and
<span class='texttt'><span class='keyword'>long</span> <span class='keyword'>double</span></span><a class='hidden_link' href='#ref.float-1.sentence-1'>.</a></div> <div id='ref.float-1.sentence-2' class='sentence'>For each such type <span class='texttt'><span class='textit'>floating-point</span></span>,
the specialization <span class='texttt'>atomic_&shy;ref<span class='anglebracket'>&lt;</span><span class='textit'>floating-point</span><span class='anglebracket'>&gt;</span></span> provides
additional atomic operations appropriate to floating-point types<a class='hidden_link' href='#ref.float-1.sentence-2'>.</a></div><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref<span class='anglebracket'>&lt;</span><span class='textit'>floating-point</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    <span class='textit'>floating-point</span><span class='operator'>*</span> ptr;  <span class='comment'>// <span class='textit'>exposition only</span></span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <span class='textit'>floating-point</span>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> value_type;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':required_alignment_for_atomic_ref_type&#39;s_operations__'></a></span><span class='textit'>implementation-defined</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_ref_type&#39;s_operations_are_always_lock_free__'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>explicit</span> atomic_ref<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_ref<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><span class='textit'>floating-point</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <span class='textit'>floating-point</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>floating-point</span> exchange<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>floating-point</span> fetch_add<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                             memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> fetch_sub<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                             memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><span class='textit'>floating-point</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre></div><div class='para' id='ref.float-2'><div class='marginalizedparent'><a class='marginalized' href='#ref.float-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1326'>#</a></div><div id='ref.float-2.sentence-1' class='sentence'>Descriptions are provided below only for members
that differ from the primary template<a class='hidden_link' href='#ref.float-2.sentence-1'>.</a></div></div><div class='para' id='ref.float-3'><div class='marginalizedparent'><a class='marginalized' href='#ref.float-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1330'>#</a></div><div id='ref.float-3.sentence-1' class='sentence'>The following operations perform arithmetic computations<a class='hidden_link' href='#ref.float-3.sentence-1'>.</a></div> <div id='ref.float-3.sentence-2' class='sentence'>The key, operator, and computation correspondence are identified
in Table <a href='#tab:atomic.types.int.comp'>144</a><a class='hidden_link' href='#ref.float-3.sentence-2'>.</a></div> <span class='indexparent'><a class='index' id='lib:fetch_add,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,fetch_add'></a></span><span class='indexparent'><a class='index' id='lib:fetch_sub,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,fetch_sub'></a></span></div><div class='itemdecl' id='ref.float-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.float-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='textit'>floating-point</span> fetch_<span class='textit'>key</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span> operand,
                          memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.float-4'><div class='marginalizedparent'><a class='marginalized' href='#ref.float-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1343'>#</a></div><div id='ref.float-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> with
the result of the computation applied to the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
and the given operand<a class='hidden_link' href='#ref.float-4.sentence-1'>.</a></div> <div id='ref.float-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#ref.float-4.sentence-2'>.</a></div> <div id='ref.float-4.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#ref.float-4.sentence-3'>.</a></div></div></div><div class='para' id='ref.float-5'><div class='marginalizedparent'><a class='marginalized' href='#ref.float-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1351'>#</a></div><div id='ref.float-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically, the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
immediately before the effects<a class='hidden_link' href='#ref.float-5.sentence-1'>.</a></div></div></div><div class='para' id='ref.float-6'><div class='marginalizedparent'><a class='marginalized' href='#ref.float-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1356'>#</a></div><div id='ref.float-6.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
If the result is not a representable value for its type (<a href='expr.pre'>[expr.pre]</a>),
the result is unspecified,
but the operations otherwise have no undefined behavior<a class='hidden_link' href='#ref.float-6.sentence-1'>.</a></div> <div id='ref.float-6.sentence-2' class='sentence'>Atomic arithmetic operations on <span class='texttt'><span class='textit'>floating-point</span></span> should conform to
the <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>numeric_&shy;limits<span class='anglebracket'>&lt;</span><span class='textit'>floating-point</span><span class='anglebracket'>&gt;</span></span> traits
associated with the floating-point type (<a href='limits.syn'>[limits.syn]</a>)<a class='hidden_link' href='#ref.float-6.sentence-2'>.</a></div> <div id='ref.float-6.sentence-3' class='sentence'>The floating-point environment (<a href='cfenv'>[cfenv]</a>)
for atomic arithmetic operations on <span class='texttt'><span class='textit'>floating-point</span></span>
may be different than the calling thread's floating-point environment<a class='hidden_link' href='#ref.float-6.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator+=,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,operator+='></a></span><span class='indexparent'><a class='index' id='lib:operator-=,atomic_ref<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<floating-point>,operator-='></a></span><div class='itemdecl' id='ref.float-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.float-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='textit'>floating-point</span> <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span> operand<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'><div id='ref.float-sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<span class='texttt'><span class='keyword'>return</span> fetch_&shy;<span class='textit'>key</span><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <span class='textit'>op</span> operand;</span></div></div></div><div id='ref.pointer' class='section'><h3 ><a class='secnum' href='#ref.pointer' style='min-width:103pt'>31.7.4</a> Partial specialization for pointers <a class='abbr_ref' href='atomics.ref.pointer'>[atomics.ref.pointer]</a></h3><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>'></a></span>
<pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    T<span class='operator'>*</span><span class='operator'>*</span> ptr;        <span class='comment'>// <span class='textit'>exposition only</span></span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> T<span class='operator'>*</span>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> ptrdiff_t;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':required_alignment_for_atomic_ref_type&#39;s_operations___'></a></span><span class='textit'>implementation-defined</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_ref_type&#39;s_operations_are_always_lock_free___'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>explicit</span> atomic_ref<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_ref<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> exchange<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> fetch_add<span class='parenthesis'>(</span>difference_type, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_sub<span class='parenthesis'>(</span>difference_type, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span>difference_type<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span>difference_type<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><div class='para' id='ref.pointer-1'><div class='marginalizedparent'><a class='marginalized' href='#ref.pointer-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1433'>#</a></div><div id='ref.pointer-1.sentence-1' class='sentence'>Descriptions are provided below only for members
that differ from the primary template<a class='hidden_link' href='#ref.pointer-1.sentence-1'>.</a></div></div><div class='para' id='ref.pointer-2'><div class='marginalizedparent'><a class='marginalized' href='#ref.pointer-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1437'>#</a></div><div id='ref.pointer-2.sentence-1' class='sentence'>The following operations perform arithmetic computations<a class='hidden_link' href='#ref.pointer-2.sentence-1'>.</a></div> <div id='ref.pointer-2.sentence-2' class='sentence'>The key, operator, and computation correspondence is identified
in Table <a href='#tab:atomic.types.pointer.comp'>145</a><a class='hidden_link' href='#ref.pointer-2.sentence-2'>.</a></div> <span class='indexparent'><a class='index' id='lib:fetch_add,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,fetch_add'></a></span><span class='indexparent'><a class='index' id='lib:fetch_sub,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,fetch_sub'></a></span></div><div class='itemdecl' id='ref.pointer-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.pointer-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> fetch_<span class='textit'>key</span><span class='parenthesis'>(</span>difference_type operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.pointer-3'><div class='marginalizedparent'><a class='marginalized' href='#ref.pointer-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1449'>#</a></div><div id='ref.pointer-3.sentence-1' class='sentence'><span class='textit'>Mandates:</span> 
<span class='texttt'>T</span> is a complete object type<a class='hidden_link' href='#ref.pointer-3.sentence-1'>.</a></div></div></div><div class='para' id='ref.pointer-4'><div class='marginalizedparent'><a class='marginalized' href='#ref.pointer-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1453'>#</a></div><div id='ref.pointer-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> with
the result of the computation applied to the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
and the given operand<a class='hidden_link' href='#ref.pointer-4.sentence-1'>.</a></div> <div id='ref.pointer-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#ref.pointer-4.sentence-2'>.</a></div> <div id='ref.pointer-4.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#ref.pointer-4.sentence-3'>.</a></div></div></div><div class='para' id='ref.pointer-5'><div class='marginalizedparent'><a class='marginalized' href='#ref.pointer-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1461'>#</a></div><div id='ref.pointer-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically, the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
immediately before the effects<a class='hidden_link' href='#ref.pointer-5.sentence-1'>.</a></div></div></div><div class='para' id='ref.pointer-6'><div class='marginalizedparent'><a class='marginalized' href='#ref.pointer-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1466'>#</a></div><div id='ref.pointer-6.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The result may be an undefined address,
but the operations otherwise have no undefined behavior<a class='hidden_link' href='#ref.pointer-6.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator+=,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,operator+='></a></span><span class='indexparent'><a class='index' id='lib:operator-=,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,operator-='></a></span><div class='itemdecl' id='ref.pointer-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.pointer-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span>difference_type operand<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.pointer-7'><div class='marginalizedparent'><a class='marginalized' href='#ref.pointer-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1479'>#</a></div><div id='ref.pointer-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<span class='texttt'><span class='keyword'>return</span> fetch_&shy;<span class='textit'>key</span><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <span class='textit'>op</span> operand;</span></div></div></div></div><div id='ref.memop' class='section'><h3 ><a class='secnum' href='#ref.memop' style='min-width:103pt'>31.7.5</a> Member operators
                          common to integers and pointers to objects <a class='abbr_ref' href='atomics.ref.memop'>[atomics.ref.memop]</a></h3><span class='indexparent'><a class='index' id='lib:operator++,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,operator++'></a></span><span class='indexparent'><a class='index' id='lib:operator++,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator++'></a></span><div class='itemdecl' id='ref.memop-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.memop-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.memop-1'><div class='marginalizedparent'><a class='marginalized' href='#ref.memop-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1495'>#</a></div><div id='ref.memop-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;add<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:operator--,atomic_ref<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,operator--'></a></span><span class='indexparent'><a class='index' id='lib:operator--,atomic_ref<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator--'></a></span><div class='itemdecl' id='ref.memop-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.memop-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.memop-2'><div class='marginalizedparent'><a class='marginalized' href='#ref.memop-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1507'>#</a></div><div id='ref.memop-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;sub<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:operator++,atomic_ref<T*>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,operator++_'></a></span><span class='indexparent'><a class='index' id='lib:operator++,atomic_ref<integral>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator++_'></a></span><div class='itemdecl' id='ref.memop-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.memop-itemdecl:3'>🔗</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.memop-3'><div class='marginalizedparent'><a class='marginalized' href='#ref.memop-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1519'>#</a></div><div id='ref.memop-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;add<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>1</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:operator--,atomic_ref<T*>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<T*>,operator--_'></a></span><span class='indexparent'><a class='index' id='lib:operator--,atomic_ref<integral>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_ref<integral>,operator--_'></a></span><div class='itemdecl' id='ref.memop-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#ref.memop-itemdecl:4'>🔗</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='ref.memop-4'><div class='marginalizedparent'><a class='marginalized' href='#ref.memop-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1531'>#</a></div><div id='ref.memop-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;sub<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>-</span> <span class='literal'>1</span>;</span></div></div></div></div></div><div id='types.generic' class='section'><h2 ><a class='secnum' href='#types.generic' style='min-width:88pt'>31.8</a> Class template <span class='texttt'>atomic</span> <a class='abbr_ref' href='atomics.types.generic'>[atomics.types.generic]</a></h2><span class='indexparent'><a class='index' id='lib:atomic'></a></span><span class='indexparent'><a class='index' id='lib:value_type,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,value_type'></a></span><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> T;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#types.operations'>[atomics.types.operations]</a>, operations on atomic types</span>
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>is_nothrow_default_constructible_v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    T load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    T exchange<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T exchange<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><span class='indexparent'><a class='index' id='lib:atomic_'></a></span><div class='para' id='types.generic-1'><div class='marginalizedparent'><a class='marginalized' href='#types.generic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1587'>#</a></div><div id='types.generic-1.sentence-1' class='sentence'>The template argument for <span class='texttt'>T</span> shall meet the
<span class='textit'>Cpp17CopyConstructible</span> and <span class='textit'>Cpp17CopyAssignable</span> requirements<a class='hidden_link' href='#types.generic-1.sentence-1'>.</a></div> <div id='types.generic-1.sentence-2' class='sentence'>The program is ill-formed if any of
<ul class='itemize'><li id='types.generic-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#types.generic-1.1'>(1.1)</a></div><span class='texttt'>is_&shy;trivially_&shy;copyable_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,</li><li id='types.generic-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#types.generic-1.2'>(1.2)</a></div><span class='texttt'>is_&shy;copy_&shy;constructible_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,</li><li id='types.generic-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#types.generic-1.3'>(1.3)</a></div><span class='texttt'>is_&shy;move_&shy;constructible_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,</li><li id='types.generic-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#types.generic-1.4'>(1.4)</a></div><span class='texttt'>is_&shy;copy_&shy;assignable_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>, or</li><li id='types.generic-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#types.generic-1.5'>(1.5)</a></div><span class='texttt'>is_&shy;move_&shy;assignable_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span></li></ul>
is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#types.generic-1.sentence-2'>.</a></div> <div id='types.generic-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.generic-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.generic-1.sentence-3' class='sentence'>Type arguments that are
not also statically initializable may be difficult to use<a class='hidden_link' href='#types.generic-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='types.generic-2'><div class='marginalizedparent'><a class='marginalized' href='#types.generic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1604'>#</a></div><div id='types.generic-2.sentence-1' class='sentence'>The specialization <span class='texttt'>atomic<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span></span> is a standard-layout struct<a class='hidden_link' href='#types.generic-2.sentence-1'>.</a></div></div><div class='para' id='types.generic-3'><div class='marginalizedparent'><a class='marginalized' href='#types.generic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1607'>#</a></div><div id='types.generic-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.generic-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.generic-3.sentence-1' class='sentence'>The representation of an atomic specialization
need not have the same size and alignment requirement as
its corresponding argument type<a class='hidden_link' href='#types.generic-3.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div id='types.operations' class='section'><h3 ><a class='secnum' href='#types.operations' style='min-width:103pt'>31.8.1</a> Operations on atomic types <a class='abbr_ref' href='atomics.types.operations'>[atomics.types.operations]</a></h3><span class='indexparent'><a class='index' id='lib:atomic,constructor'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,constructor'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,constructor'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,constructor'></a></span><div class='itemdecl' id='types.operations-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>is_nothrow_default_constructible_v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-1'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1625'>#</a></div><div id='types.operations-1.sentence-1' class='sentence'><span class='textit'>Mandates:</span> 
<span class='texttt'>is_&shy;default_&shy;constructible_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.operations-1.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-2'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1629'>#</a></div><div id='types.operations-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the atomic object with the value of <span class='texttt'>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#types.operations-2.sentence-1'>.</a></div> <div id='types.operations-2.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#types.operations-2.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic,constructor_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,constructor_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,constructor_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,constructor_'></a></span><div class='itemdecl' id='types.operations-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span>T desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-3'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1644'>#</a></div><div id='types.operations-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the object with the value <span class='texttt'>desired</span><a class='hidden_link' href='#types.operations-3.sentence-1'>.</a></div> <div id='types.operations-3.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#types.operations-3.sentence-2'>.</a></div> <div id='types.operations-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.operations-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.operations-3.sentence-3' class='sentence'>It is possible to have an access to an atomic object <span class='texttt'>A</span>
race with its construction, for example by communicating the address of the
just-constructed object <span class='texttt'>A</span> to another thread via
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span> operations on a suitable atomic pointer
variable, and then immediately accessing <span class='texttt'>A</span> in the receiving thread<a class='hidden_link' href='#types.operations-3.sentence-3'>.</a></div> <div id='types.operations-3.sentence-4' class='sentence'>This results in undefined behavior<a class='hidden_link' href='#types.operations-3.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,is_always_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,is_always_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,is_always_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,is_always_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,is_always_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_always_lock_free,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,is_always_lock_free'></a></span><div class='itemdecl' id='types.operations-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free_'></a></span><span class='textit'>implementation-defined</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-4'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1669'>#</a></div><div id='types.operations-4.sentence-1' class='sentence'>The <span class='texttt'><span class='keyword'>static</span></span> data member <span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span>
if the atomic type's operations are always lock-free, and <span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#types.operations-4.sentence-1'>.</a></div> <div id='types.operations-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.operations-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.operations-4.sentence-2' class='sentence'>The value of <span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is consistent with the value of
the corresponding <span class='texttt'>ATOMIC_&shy;<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>_&shy;LOCK_&shy;FREE</span> macro, if defined<a class='hidden_link' href='#types.operations-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:atomic_is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,is_lock_free'></a></span><span class='indexparent'><a class='index' id='lib:is_lock_free,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,is_lock_free'></a></span><div class='itemdecl' id='types.operations-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-5'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1691'>#</a></div><div id='types.operations-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'><span class='literal'>true</span></span> if the object's operations are lock-free, <span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#types.operations-5.sentence-1'>.</a></div> <div id='types.operations-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.operations-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.operations-5.sentence-2' class='sentence'>The return value of the <span class='texttt'>is_&shy;lock_&shy;free</span> member function
is consistent with the value of <span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> for the same type<a class='hidden_link' href='#types.operations-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:atomic_store'></a></span><span class='indexparent'><a class='index' id='lib:atomic_store_explicit'></a></span><span class='indexparent'><a class='index' id='lib:store,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,store'></a></span><span class='indexparent'><a class='index' id='lib:store,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,store'></a></span><span class='indexparent'><a class='index' id='lib:store,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,store'></a></span><span class='indexparent'><a class='index' id='lib:store,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,store'></a></span><div class='itemdecl' id='types.operations-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:5'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> store<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> store<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-6'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1712'>#</a></div><div id='types.operations-6.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
The <span class='texttt'>order</span> argument is neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#types.operations-6.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-7'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1717'>#</a></div><div id='types.operations-7.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.operations-7.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-8'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1722'>#</a></div><div id='types.operations-8.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by <span class='texttt'><span class='keyword'>this</span></span>
with the value of <span class='texttt'>desired</span><a class='hidden_link' href='#types.operations-8.sentence-1'>.</a></div> <div id='types.operations-8.sentence-2' class='sentence'>Memory is affected according to the value of
<span class='texttt'>order</span><a class='hidden_link' href='#types.operations-8.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,operator='></a></span><span class='indexparent'><a class='index' id='lib:operator=,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator='></a></span><span class='indexparent'><a class='index' id='lib:operator=,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator='></a></span><span class='indexparent'><a class='index' id='lib:operator=,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,operator='></a></span><div class='itemdecl' id='types.operations-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:6'>🔗</a></div><code class='itemdeclcode'>T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T desired<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-9'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1739'>#</a></div><div id='types.operations-9.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.operations-9.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-10'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1744'>#</a></div><div id='types.operations-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to <span class='texttt'>store<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#types.operations-10.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-11'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1748'>#</a></div><div id='types.operations-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>desired</span><a class='hidden_link' href='#types.operations-11.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_load'></a></span><span class='indexparent'><a class='index' id='lib:atomic_load_explicit'></a></span><span class='indexparent'><a class='index' id='lib:load,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,load'></a></span><span class='indexparent'><a class='index' id='lib:load,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,load'></a></span><span class='indexparent'><a class='index' id='lib:load,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,load'></a></span><span class='indexparent'><a class='index' id='lib:load,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,load'></a></span><div class='itemdecl' id='types.operations-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:7'>🔗</a></div><code class='itemdeclcode'>T load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-12'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1765'>#</a></div><div id='types.operations-12.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
The <span class='texttt'>order</span> argument is neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#types.operations-12.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-13'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1769'>#</a></div><div id='types.operations-13.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.operations-13.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-14'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1774'>#</a></div><div id='types.operations-14.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#types.operations-14.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-15'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1778'>#</a></div><div id='types.operations-15.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value pointed to by <span class='texttt'><span class='keyword'>this</span></span><a class='hidden_link' href='#types.operations-15.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator_type,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,operator_type'></a></span><span class='indexparent'><a class='index' id='lib:operator_T*,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator_T*'></a></span><span class='indexparent'><a class='index' id='lib:operator_integral,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator_integral'></a></span><span class='indexparent'><a class='index' id='lib:operator_floating-point,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,operator_floating-point'></a></span><div class='itemdecl' id='types.operations-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:8'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-16'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1793'>#</a></div><div id='types.operations-16.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.operations-16.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-17'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1798'>#</a></div><div id='types.operations-17.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_exchange'></a></span><span class='indexparent'><a class='index' id='lib:atomic_exchange_explicit'></a></span><span class='indexparent'><a class='index' id='lib:exchange,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,exchange'></a></span><span class='indexparent'><a class='index' id='lib:exchange,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,exchange'></a></span><span class='indexparent'><a class='index' id='lib:exchange,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,exchange'></a></span><span class='indexparent'><a class='index' id='lib:exchange,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,exchange'></a></span><div class='itemdecl' id='types.operations-itemdecl:9'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:9'>🔗</a></div><code class='itemdeclcode'>T exchange<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T exchange<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-18'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1816'>#</a></div><div id='types.operations-18.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.operations-18.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-19'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1821'>#</a></div><div id='types.operations-19.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by <span class='texttt'><span class='keyword'>this</span></span>
with <span class='texttt'>desired</span><a class='hidden_link' href='#types.operations-19.sentence-1'>.</a></div> <div id='types.operations-19.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#types.operations-19.sentence-2'>.</a></div> <div id='types.operations-19.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#types.operations-19.sentence-3'>.</a></div></div></div><div class='para' id='types.operations-20'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1828'>#</a></div><div id='types.operations-20.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value pointed to by <span class='texttt'><span class='keyword'>this</span></span> immediately before the effects<a class='hidden_link' href='#types.operations-20.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:atomic_compare_exchange_strong'></a></span><span class='indexparent'><a class='index' id='lib:atomic_compare_exchange_weak_explicit'></a></span><span class='indexparent'><a class='index' id='lib:atomic_compare_exchange_strong_explicit'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,compare_exchange_strong'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,compare_exchange_strong'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,compare_exchange_strong'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,compare_exchange_strong'></a></span><div class='itemdecl' id='types.operations-itemdecl:10'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:10'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-21'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1865'>#</a></div><div id='types.operations-21.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
The <span class='texttt'>failure</span> argument is neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#types.operations-21.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-22'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1870'>#</a></div><div id='types.operations-22.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.operations-22.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-23'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1875'>#</a></div><div id='types.operations-23.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Retrieves the value in <span class='texttt'>expected</span><a class='hidden_link' href='#types.operations-23.sentence-1'>.</a></div> <div id='types.operations-23.sentence-2' class='sentence'>It then atomically
compares the value representation of the value pointed to by <span class='texttt'><span class='keyword'>this</span></span>
for equality with that previously retrieved from <span class='texttt'>expected</span>,
and if true, replaces the value pointed to
by <span class='texttt'><span class='keyword'>this</span></span> with that in <span class='texttt'>desired</span><a class='hidden_link' href='#types.operations-23.sentence-2'>.</a></div> <div id='types.operations-23.sentence-3' class='sentence'>If and only if the comparison is <span class='texttt'><span class='literal'>true</span></span>, memory is affected according to the
value of <span class='texttt'>success</span>, and if the comparison is false, memory is affected according
to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#types.operations-23.sentence-3'>.</a></div> <div id='types.operations-23.sentence-4' class='sentence'>When only one <span class='texttt'>memory_&shy;order</span> argument is
supplied, the value of <span class='texttt'>success</span> is <span class='texttt'>order</span>, and the value of
<span class='texttt'>failure</span> is <span class='texttt'>order</span> except that a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and a value of
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> shall be replaced by the value
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#types.operations-23.sentence-4'>.</a></div> <div id='types.operations-23.sentence-5' class='sentence'>If and only if the comparison is false then, after the atomic operation,
the value in <span class='texttt'>expected</span> is replaced by the value
pointed to by <span class='texttt'><span class='keyword'>this</span></span> during the atomic comparison<a class='hidden_link' href='#types.operations-23.sentence-5'>.</a></div> <div id='types.operations-23.sentence-6' class='sentence'>If the operation returns <span class='texttt'><span class='literal'>true</span></span>, these
operations are atomic read-modify-write
operations (<a href='intro.multithread'>[intro.multithread]</a>) on the memory
pointed to by <span class='texttt'><span class='keyword'>this</span></span><a class='hidden_link' href='#types.operations-23.sentence-6'>.</a></div> <div id='types.operations-23.sentence-7' class='sentence'>Otherwise, these operations are atomic load operations on that memory<a class='hidden_link' href='#types.operations-23.sentence-7'>.</a></div></div></div><div class='para' id='types.operations-24'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1899'>#</a></div><div id='types.operations-24.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The result of the comparison<a class='hidden_link' href='#types.operations-24.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-25'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1903'>#</a></div><div id='types.operations-25.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.operations-25.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.operations-25.sentence-1' class='sentence'>For example, the effect of
<span class='texttt'>compare_&shy;exchange_&shy;strong</span>
on objects without padding bits (<a href='basic.types'>[basic.types]</a>) is
<pre class='codeblock'>
<span class='keyword'>if</span> <span class='parenthesis'>(</span>memcmp<span class='parenthesis'>(</span><span class='keyword'>this</span>, <span class='operator'>&amp;</span>expected, <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>
  memcpy<span class='parenthesis'>(</span><span class='keyword'>this</span>, <span class='operator'>&amp;</span>desired, <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>else</span>
  memcpy<span class='parenthesis'>(</span><span class='operator'>&amp;</span>expected, <span class='keyword'>this</span>, <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='types.operations-25.example-1' class='example'>[&nbsp;<a class='example_link' href='#types.operations-25.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='types.operations-25.sentence-2' class='sentence'>The expected use of the compare-and-exchange operations is as follows<a class='hidden_link' href='#types.operations-25.sentence-2'>.</a></div> <div id='types.operations-25.sentence-3' class='sentence'>The
compare-and-exchange operations will update <span class='texttt'>expected</span> when another iteration of
the loop is needed<a class='hidden_link' href='#types.operations-25.sentence-3'>.</a></div> <pre class='codeblock'>
expected <span class='operator'>=</span> current<span class='operator'>.</span>load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>do</span> <span class='curlybracket'>{</span>
  desired <span class='operator'>=</span> function<span class='parenthesis'>(</span>expected<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='operator'>!</span>current<span class='operator'>.</span>compare_exchange_weak<span class='parenthesis'>(</span>expected, desired<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='types.operations-25.example-2' class='example'>[&nbsp;<a class='example_link' href='#types.operations-25.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='types.operations-25.sentence-4' class='sentence'>Because the expected value is updated only on failure,
code releasing the memory containing the <span class='texttt'>expected</span> value on success will work<a class='hidden_link' href='#types.operations-25.sentence-4'>.</a></div> <div id='types.operations-25.sentence-5' class='sentence'>For example, list head insertion will act atomically and would not introduce a
data race in the following code:
<pre class='codeblock'>
<span class='keyword'>do</span> <span class='curlybracket'>{</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next <span class='operator'>=</span> head;                                   <span class='comment'>// make new list node point to the current head</span>
<span class='curlybracket'>}</span> <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='operator'>!</span>head<span class='operator'>.</span>compare_exchange_weak<span class='parenthesis'>(</span>p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next, p<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;  <span class='comment'>// try to insert</span>
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div class='para' id='types.operations-26'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1938'>#</a></div><div id='types.operations-26.sentence-1' class='sentence'>Implementations should ensure that weak compare-and-exchange operations do not
consistently return <span class='texttt'><span class='literal'>false</span></span> unless either the atomic object has value
different from <span class='texttt'>expected</span> or there are concurrent modifications to the
atomic object<a class='hidden_link' href='#types.operations-26.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-27'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1944'>#</a></div><div id='types.operations-27.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
A weak compare-and-exchange operation may fail spuriously<a class='hidden_link' href='#types.operations-27.sentence-1'>.</a></div> <div id='types.operations-27.sentence-2' class='sentence'>That is, even when
the contents of memory referred to by <span class='texttt'>expected</span> and <span class='texttt'><span class='keyword'>this</span></span> are
equal, it may return <span class='texttt'><span class='literal'>false</span></span> and store back to <span class='texttt'>expected</span> the same memory
contents that were originally there<a class='hidden_link' href='#types.operations-27.sentence-2'>.</a></div> <div id='types.operations-27.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.operations-27.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.operations-27.sentence-3' class='sentence'>This
spurious failure enables implementation of compare-and-exchange on a broader class of
machines, e.g., load-locked store-conditional machines<a class='hidden_link' href='#types.operations-27.sentence-3'>.</a></div> <div id='types.operations-27.sentence-4' class='sentence'>A
consequence of spurious failure is that nearly all uses of weak compare-and-exchange
will be in a loop<a class='hidden_link' href='#types.operations-27.sentence-4'>.</a></div> <div id='types.operations-27.sentence-5' class='sentence'>When a compare-and-exchange is in a loop, the weak version will yield better performance
on some platforms<a class='hidden_link' href='#types.operations-27.sentence-5'>.</a></div> <div id='types.operations-27.sentence-6' class='sentence'>When a weak compare-and-exchange would require a loop and a strong one
would not, the strong one is preferable<a class='hidden_link' href='#types.operations-27.sentence-6'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div class='para' id='types.operations-28'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L1961'>#</a></div><div id='types.operations-28.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.operations-28.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.operations-28.sentence-1' class='sentence'>Under cases where the <span class='texttt'>memcpy</span> and <span class='texttt'>memcmp</span> semantics of the compare-and-exchange
operations apply, the outcome might be failed comparisons for values that compare equal with
<span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span> if the value representation has trap bits or alternate
representations of the same value<a class='hidden_link' href='#types.operations-28.sentence-1'>.</a></div> <div id='types.operations-28.sentence-2' class='sentence'>Notably, on implementations conforming to
ISO/IEC/IEEE 60559, floating-point <span class='texttt'><span class='operator'>-</span><span class='literal'>0.0</span></span> and <span class='texttt'><span class='operator'>+</span><span class='literal'>0.0</span></span>
will not compare equal with <span class='texttt'>memcmp</span> but will compare equal with <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span>,
and NaNs with the same payload will compare equal with <span class='texttt'>memcmp</span> but will not
compare equal with <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span><a class='hidden_link' href='#types.operations-28.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='types.operations-28.note-2' class='note'>[&nbsp;<a class='note_link' href='#types.operations-28.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.operations-28.sentence-3' class='sentence'>Because compare-and-exchange acts on an object's value representation,
padding bits that never participate in the object's value representation
are ignored<a class='hidden_link' href='#types.operations-28.sentence-3'>.</a></div> <div id='types.operations-28.sentence-4' class='sentence'>As a consequence, the following code is guaranteed to avoid
spurious failure:
<pre class='codeblock'>
<span class='keyword'>struct</span> padded <span class='curlybracket'>{</span>
  <span class='keyword'>char</span> clank <span class='operator'>=</span> <span class='literal'>0x42</span>;
  <span class='comment'>// Padding here.</span>
  <span class='keyword'>unsigned</span> biff <span class='operator'>=</span> <span class='literal'>0xC0DEFEFE</span>;
<span class='curlybracket'>}</span>;
atomic<span class='anglebracket'>&lt;</span>padded<span class='anglebracket'>&gt;</span> pad <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

<span class='keyword'>bool</span> zap<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  padded expected, desired<span class='curlybracket'>{</span><span class='literal'>0</span>, <span class='literal'>0</span><span class='curlybracket'>}</span>;
  <span class='keyword'>return</span> pad<span class='operator'>.</span>compare_exchange_strong<span class='parenthesis'>(</span>expected, desired<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='types.operations-28.note-3' class='note'>[&nbsp;<a class='note_link' href='#types.operations-28.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.operations-28.sentence-5' class='sentence'>For a union with bits that participate in the value representation
of some members but not others, compare-and-exchange might always fail<a class='hidden_link' href='#types.operations-28.sentence-5'>.</a></div> <div id='types.operations-28.sentence-6' class='sentence'>This is because such padding bits have an indeterminate value when they
do not participate in the value representation of the active member<a class='hidden_link' href='#types.operations-28.sentence-6'>.</a></div> <div id='types.operations-28.sentence-7' class='sentence'>As a consequence, the following code is not guaranteed to ever succeed:
<pre class='codeblock'>
<span class='keyword'>union</span> pony <span class='curlybracket'>{</span>
  <span class='keyword'>double</span> celestia <span class='operator'>=</span> <span class='literal'>0.</span>;
  <span class='keyword'>short</span> luna;       <span class='comment'>// padded</span>
<span class='curlybracket'>}</span>;
atomic<span class='anglebracket'>&lt;</span>pony<span class='anglebracket'>&gt;</span> princesses <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

<span class='keyword'>bool</span> party<span class='parenthesis'>(</span>pony desired<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  pony expected;
  <span class='keyword'>return</span> princesses<span class='operator'>.</span>compare_exchange_strong<span class='parenthesis'>(</span>expected, desired<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:wait,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,wait'></a></span><span class='indexparent'><a class='index' id='lib:wait,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,wait'></a></span><span class='indexparent'><a class='index' id='lib:wait,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,wait'></a></span><span class='indexparent'><a class='index' id='lib:wait,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,wait'></a></span><div class='itemdecl' id='types.operations-itemdecl:11'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:11'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-29'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2022'>#</a></div><div id='types.operations-29.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#types.operations-29.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-30'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-30'>30</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2026'>#</a></div><div id='types.operations-30.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='types.operations-30.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#types.operations-30.1'>(30.1)</a></div>Evaluates <span class='texttt'>load<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span> and
  compares its value representation for equality against that of <span class='texttt'>old</span>.</li><li id='types.operations-30.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#types.operations-30.2'>(30.2)</a></div>If they compare unequal, returns.</li><li id='types.operations-30.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#types.operations-30.3'>(30.3)</a></div>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously.</li></ul></div></div></div><div class='para' id='types.operations-31'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-31'>31</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2040'>#</a></div><div id='types.operations-31.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic waiting operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#types.operations-31.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:notify_one,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,notify_one'></a></span><span class='indexparent'><a class='index' id='lib:notify_one,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,notify_one'></a></span><span class='indexparent'><a class='index' id='lib:notify_one,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,notify_one'></a></span><span class='indexparent'><a class='index' id='lib:notify_one,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,notify_one'></a></span><div class='itemdecl' id='types.operations-itemdecl:12'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:12'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-32'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-32'>32</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2055'>#</a></div><div id='types.operations-32.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of at least one atomic waiting operation
that is eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#types.operations-32.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-33'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-33'>33</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2061'>#</a></div><div id='types.operations-33.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#types.operations-33.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:notify_all,atomic'></a></span><span class='indexparent'><a class='index' id='lib:atomic,notify_all'></a></span><span class='indexparent'><a class='index' id='lib:notify_all,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,notify_all'></a></span><span class='indexparent'><a class='index' id='lib:notify_all,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,notify_all'></a></span><span class='indexparent'><a class='index' id='lib:notify_all,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,notify_all'></a></span><div class='itemdecl' id='types.operations-itemdecl:13'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.operations-itemdecl:13'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.operations-34'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-34'>34</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2076'>#</a></div><div id='types.operations-34.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of all atomic waiting operations
that are eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call<a class='hidden_link' href='#types.operations-34.sentence-1'>.</a></div></div></div><div class='para' id='types.operations-35'><div class='marginalizedparent'><a class='marginalized' href='#types.operations-35'>35</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2081'>#</a></div><div id='types.operations-35.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#types.operations-35.sentence-1'>.</a></div></div></div></div><div id='types.int' class='section'><h3 ><a class='secnum' href='#types.int' style='min-width:103pt'>31.8.2</a> Specializations for integers <a class='abbr_ref' href='atomics.types.int'>[atomics.types.int]</a></h3><span class='indexparent'><a class='index' id='lib:atomic<integral>'></a></span><div class='para' id='types.int-1'><div class='marginalizedparent'><a class='marginalized' href='#types.int-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2089'>#</a></div><div id='types.int-1.sentence-1' class='sentence'>There are specializations of the <span class='texttt'>atomic</span>
class template for the integral types
<span class='texttt'><span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>short</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>short</span></span>,
<span class='texttt'><span class='keyword'>int</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>int</span></span>,
<span class='texttt'><span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>long</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>char8_&shy;t</span></span>,
<span class='texttt'><span class='keyword'>char16_&shy;t</span></span>,
<span class='texttt'><span class='keyword'>char32_&shy;t</span></span>,
<span class='texttt'><span class='keyword'>wchar_&shy;t</span></span>,
and any other types needed by the typedefs in the header <span class='indexparent'><a class='index' id=':<cstdint>_'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>cstdint<span class='anglebracket'>&gt;</span></span> (<a href='cstdint.syn'>[cstdint.syn]</a>)<a class='hidden_link' href='#types.int-1.sentence-1'>.</a></div> <div id='types.int-1.sentence-2' class='sentence'>For each such type <span class='texttt'><span class='textit'>integral</span></span>, the specialization
<span class='texttt'>atomic<span class='anglebracket'>&lt;</span><span class='textit'>integral</span><span class='anglebracket'>&gt;</span></span> provides additional atomic operations appropriate to integral types<a class='hidden_link' href='#types.int-1.sentence-2'>.</a></div> <div id='types.int-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.int-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.int-1.sentence-3' class='sentence'>The specialization <span class='texttt'>atomic<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span></span>
uses the primary template (<a href='#types.generic'>[atomics.types.generic]</a>)<a class='hidden_link' href='#types.int-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> <pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span><span class='textit'>integral</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <span class='textit'>integral</span>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> value_type;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free__'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <span class='textit'>integral</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <span class='textit'>integral</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>integral</span> exchange<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> exchange<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>integral</span><span class='operator'>&amp;</span>, <span class='textit'>integral</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>integral</span> fetch_add<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_add<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_sub<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_sub<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_and<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_and<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_or<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_or<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_xor<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> fetch_xor<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>&amp;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>&amp;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>|</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>|</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>^</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>integral</span> <span class='keyword'>operator</span><span class='operator'>^</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>integral</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><span class='textit'>integral</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre></div><div class='para' id='types.int-2'><div class='marginalizedparent'><a class='marginalized' href='#types.int-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2199'>#</a></div><div id='types.int-2.sentence-1' class='sentence'>The atomic integral specializations
are standard-layout structs<a class='hidden_link' href='#types.int-2.sentence-1'>.</a></div> <div id='types.int-2.sentence-2' class='sentence'>They each have
a trivial destructor<a class='hidden_link' href='#types.int-2.sentence-2'>.</a></div></div><div class='para' id='types.int-3'><div class='marginalizedparent'><a class='marginalized' href='#types.int-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2205'>#</a></div><div id='types.int-3.sentence-1' class='sentence'>Descriptions are provided below only for members that differ from the primary template<a class='hidden_link' href='#types.int-3.sentence-1'>.</a></div></div><div class='para' id='types.int-4'><div class='marginalizedparent'><a class='marginalized' href='#types.int-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2208'>#</a></div><div id='types.int-4.sentence-1' class='sentence'>The following operations perform arithmetic computations<a class='hidden_link' href='#types.int-4.sentence-1'>.</a></div> <div id='types.int-4.sentence-2' class='sentence'>The key, operator, and computation correspondence is:</div><div class='numberedTable' id='tab:atomic.types.int.comp'>Table <a href='#tab:atomic.types.int.comp'>144</a>: Atomic arithmetic computations &emsp;&ensp;[tab:atomic.types.int.comp]<br><table ><tr class='rowsep'><td class='left'><div id='types.int-4.sentence-3' class='sentence'><b><span class='texttt'><span class='textit'>key</span></span></b></div></td><td class='left'><div id='types.int-4.sentence-4' class='sentence'><b>Op</b></div></td><td class='left'><div id='types.int-4.sentence-5' class='sentence'><b>Computation</b></div></td><td class='border left'><div id='types.int-4.sentence-6' class='sentence'><b><span class='texttt'><span class='textit'>key</span></span></b></div></td><td class='left'><div id='types.int-4.sentence-7' class='sentence'><b>Op</b></div></td><td class='left'><div id='types.int-4.sentence-8' class='sentence'><b>Computation</b></div></td></tr><tr class='rowsep'><td class='left'><div id='types.int-4.sentence-9' class='sentence'><span class='texttt'>add</span></div></td><td class='left'><div id='types.int-4.sentence-10' class='sentence'><span class='texttt'><span class='operator'>+</span></span></div></td><td class='left'><div id='types.int-4.sentence-11' class='sentence'>addition</div></td><td class='border left'><div id='types.int-4.sentence-12' class='sentence'><span class='texttt'>sub</span></div></td><td class='left'><div id='types.int-4.sentence-13' class='sentence'><span class='texttt'><span class='operator'>-</span></span></div></td><td class='left'><div id='types.int-4.sentence-14' class='sentence'>subtraction</div></td></tr><tr ><td class='left'><div id='types.int-4.sentence-15' class='sentence'><span class='texttt'>or</span></div></td><td class='left'><div id='types.int-4.sentence-16' class='sentence'><span class='texttt'><span class='operator'>|</span></span></div></td><td class='left'><div id='types.int-4.sentence-17' class='sentence'>bitwise inclusive or</div></td><td class='border left'><div id='types.int-4.sentence-18' class='sentence'><span class='texttt'>xor</span></div></td><td class='left'><div id='types.int-4.sentence-19' class='sentence'><span class='texttt'><span class='operator'>^</span></span></div></td><td class='left'><div id='types.int-4.sentence-20' class='sentence'>bitwise exclusive or</div></td></tr><tr ><td class='left'><div id='types.int-4.sentence-21' class='sentence'><span class='texttt'>and</span></div></td><td class='left'><div id='types.int-4.sentence-22' class='sentence'><span class='texttt'><span class='operator'>&amp;</span></span></div></td><td class='left'><div id='types.int-4.sentence-23' class='sentence'>bitwise and</div></td><td class='empty border left'></td><td class='empty left'></td><td class='empty left'></td></tr></table></div><span class='indexparent'><a class='index' id='lib:atomic_fetch_add'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_and'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_or'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_sub'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_xor'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_add_explicit'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_and_explicit'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_or_explicit'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_sub_explicit'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_xor_explicit'></a></span><span class='indexparent'><a class='index' id='lib:fetch_add,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,fetch_add'></a></span><span class='indexparent'><a class='index' id='lib:fetch_and,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,fetch_and'></a></span><span class='indexparent'><a class='index' id='lib:fetch_or,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,fetch_or'></a></span><span class='indexparent'><a class='index' id='lib:fetch_sub,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,fetch_sub'></a></span><span class='indexparent'><a class='index' id='lib:fetch_xor,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,fetch_xor'></a></span></div><div class='itemdecl' id='types.int-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.int-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>T fetch_<span class='textit'>key</span><span class='parenthesis'>(</span>T operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T fetch_<span class='textit'>key</span><span class='parenthesis'>(</span>T operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.int-5'><div class='marginalizedparent'><a class='marginalized' href='#types.int-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2258'>#</a></div><div id='types.int-5.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.int-5.sentence-1'>.</a></div></div></div><div class='para' id='types.int-6'><div class='marginalizedparent'><a class='marginalized' href='#types.int-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2263'>#</a></div><div id='types.int-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by
<span class='texttt'><span class='keyword'>this</span></span> with the result of the computation applied to the
value pointed to by <span class='texttt'><span class='keyword'>this</span></span> and the given <span class='texttt'>operand</span><a class='hidden_link' href='#types.int-6.sentence-1'>.</a></div> <div id='types.int-6.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#types.int-6.sentence-2'>.</a></div> <div id='types.int-6.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#types.int-6.sentence-3'>.</a></div></div></div><div class='para' id='types.int-7'><div class='marginalizedparent'><a class='marginalized' href='#types.int-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2271'>#</a></div><div id='types.int-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically, the value pointed to by <span class='texttt'><span class='keyword'>this</span></span> immediately before the effects<a class='hidden_link' href='#types.int-7.sentence-1'>.</a></div></div></div><div class='para' id='types.int-8'><div class='marginalizedparent'><a class='marginalized' href='#types.int-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2275'>#</a></div><div id='types.int-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':signed_integer_representation,two&#39;s_complement_'></a></span><span class='textit'>Remarks:</span> 
For signed integer types,
the result is as if the object value and parameters
were converted to their corresponding unsigned types,
the computation performed on those types, and
the result converted back to the signed type<a class='hidden_link' href='#types.int-8.sentence-1'>.</a></div> <div id='types.int-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.int-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.int-8.sentence-2' class='sentence'>There are no undefined results arising from the computation<a class='hidden_link' href='#types.int-8.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:operator+=,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator+='></a></span><span class='indexparent'><a class='index' id='lib:operator-=,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator-='></a></span><span class='indexparent'><a class='index' id='lib:operator+=,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator+='></a></span><span class='indexparent'><a class='index' id='lib:operator-=,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator-='></a></span><span class='indexparent'><a class='index' id='lib:operator&amp;=,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator&amp;='></a></span><span class='indexparent'><a class='index' id='lib:operator|=,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator|='></a></span><span class='indexparent'><a class='index' id='lib:operator^=,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator^='></a></span><div class='itemdecl' id='types.int-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.int-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>T <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span>T operand<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span>T operand<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.int-9'><div class='marginalizedparent'><a class='marginalized' href='#types.int-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2302'>#</a></div><div id='types.int-9.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.int-9.sentence-1'>.</a></div></div></div><div class='para' id='types.int-10'><div class='marginalizedparent'><a class='marginalized' href='#types.int-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2307'>#</a></div><div id='types.int-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;<span class='textit'>key</span><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <span class='textit'>op</span> operand;</span></div></div></div></div><div id='types.float' class='section'><h3 ><a class='secnum' href='#types.float' style='min-width:103pt'>31.8.3</a> Specializations for floating-point types <a class='abbr_ref' href='atomics.types.float'>[atomics.types.float]</a></h3><span class='indexparent'><a class='index' id='lib:atomic<floating-point>'></a></span><div class='para' id='types.float-1'><div class='marginalizedparent'><a class='marginalized' href='#types.float-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2315'>#</a></div><div id='types.float-1.sentence-1' class='sentence'>There are specializations of the <span class='texttt'>atomic</span>
class template for the floating-point types
<span class='texttt'><span class='keyword'>float</span></span>,
<span class='texttt'><span class='keyword'>double</span></span>, and
<span class='texttt'><span class='keyword'>long</span> <span class='keyword'>double</span></span><a class='hidden_link' href='#types.float-1.sentence-1'>.</a></div> <div id='types.float-1.sentence-2' class='sentence'>For each such type <span class='texttt'><span class='textit'>floating-point</span></span>,
the specialization <span class='texttt'>atomic<span class='anglebracket'>&lt;</span><span class='textit'>floating-point</span><span class='anglebracket'>&gt;</span></span>
provides additional atomic operations appropriate to floating-point types<a class='hidden_link' href='#types.float-1.sentence-2'>.</a></div><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span><span class='textit'>floating-point</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <span class='textit'>floating-point</span>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> value_type;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free___'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><span class='textit'>floating-point</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><span class='textit'>floating-point</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <span class='textit'>floating-point</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <span class='textit'>floating-point</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>floating-point</span> exchange<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> exchange<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='operator'>&amp;</span>, <span class='textit'>floating-point</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>floating-point</span> fetch_add<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                             memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> fetch_add<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                             memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> fetch_sub<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                             memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> fetch_sub<span class='parenthesis'>(</span><span class='textit'>floating-point</span>,
                             memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='textit'>floating-point</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='textit'>floating-point</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><span class='textit'>floating-point</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><span class='textit'>floating-point</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre></div><div class='para' id='types.float-2'><div class='marginalizedparent'><a class='marginalized' href='#types.float-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2395'>#</a></div><div id='types.float-2.sentence-1' class='sentence'>The atomic floating-point specializations
are standard-layout structs<a class='hidden_link' href='#types.float-2.sentence-1'>.</a></div> <div id='types.float-2.sentence-2' class='sentence'>They each have
a trivial destructor<a class='hidden_link' href='#types.float-2.sentence-2'>.</a></div></div><div class='para' id='types.float-3'><div class='marginalizedparent'><a class='marginalized' href='#types.float-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2401'>#</a></div><div id='types.float-3.sentence-1' class='sentence'>Descriptions are provided below only for members that differ from the primary template<a class='hidden_link' href='#types.float-3.sentence-1'>.</a></div></div><div class='para' id='types.float-4'><div class='marginalizedparent'><a class='marginalized' href='#types.float-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2404'>#</a></div><div id='types.float-4.sentence-1' class='sentence'>The following operations perform arithmetic addition and subtraction computations<a class='hidden_link' href='#types.float-4.sentence-1'>.</a></div> <div id='types.float-4.sentence-2' class='sentence'>The key, operator, and computation correspondence are identified in
Table <a href='#tab:atomic.types.int.comp'>144</a><a class='hidden_link' href='#types.float-4.sentence-2'>.</a></div> <span class='indexparent'><a class='index' id='lib:atomic_fetch_add_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_sub_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_add_explicit_'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_sub_explicit_'></a></span><span class='indexparent'><a class='index' id='lib:fetch_add,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,fetch_add'></a></span><span class='indexparent'><a class='index' id='lib:fetch_sub,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,fetch_sub'></a></span></div><div class='itemdecl' id='types.float-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.float-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>T fetch_<span class='textit'>key</span><span class='parenthesis'>(</span>T operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T fetch_<span class='textit'>key</span><span class='parenthesis'>(</span>T operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.float-5'><div class='marginalizedparent'><a class='marginalized' href='#types.float-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2421'>#</a></div><div id='types.float-5.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.float-5.sentence-1'>.</a></div></div></div><div class='para' id='types.float-6'><div class='marginalizedparent'><a class='marginalized' href='#types.float-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2426'>#</a></div><div id='types.float-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by <span class='texttt'><span class='keyword'>this</span></span>
with the result of the computation applied to the value pointed
to by <span class='texttt'><span class='keyword'>this</span></span> and the given <span class='texttt'>operand</span><a class='hidden_link' href='#types.float-6.sentence-1'>.</a></div> <div id='types.float-6.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#types.float-6.sentence-2'>.</a></div> <div id='types.float-6.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#types.float-6.sentence-3'>.</a></div></div></div><div class='para' id='types.float-7'><div class='marginalizedparent'><a class='marginalized' href='#types.float-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2434'>#</a></div><div id='types.float-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically, the value pointed to by <span class='texttt'><span class='keyword'>this</span></span> immediately before the effects<a class='hidden_link' href='#types.float-7.sentence-1'>.</a></div></div></div><div class='para' id='types.float-8'><div class='marginalizedparent'><a class='marginalized' href='#types.float-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2438'>#</a></div><div id='types.float-8.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
If the result is not a representable value for its type (<a href='expr.pre'>[expr.pre]</a>)
the result is unspecified, but the operations otherwise have no undefined
behavior<a class='hidden_link' href='#types.float-8.sentence-1'>.</a></div> <div id='types.float-8.sentence-2' class='sentence'>Atomic arithmetic operations on <span class='texttt'><span class='textit'>floating-point</span></span>
should conform to the <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>numeric_&shy;limits<span class='anglebracket'>&lt;</span><span class='textit'>floating-point</span><span class='anglebracket'>&gt;</span></span>
traits associated with the floating-point type (<a href='limits.syn'>[limits.syn]</a>)<a class='hidden_link' href='#types.float-8.sentence-2'>.</a></div> <div id='types.float-8.sentence-3' class='sentence'>The floating-point environment (<a href='cfenv'>[cfenv]</a>) for atomic arithmetic operations
on <span class='texttt'><span class='textit'>floating-point</span></span> may be different than the
calling thread's floating-point environment<a class='hidden_link' href='#types.float-8.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator+=,atomic<T*>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator+=_'></a></span><span class='indexparent'><a class='index' id='lib:operator-=,atomic<T*>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator-=_'></a></span><span class='indexparent'><a class='index' id='lib:operator+=,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,operator+='></a></span><span class='indexparent'><a class='index' id='lib:operator-=,atomic<floating-point>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<floating-point>,operator-='></a></span><div class='itemdecl' id='types.float-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.float-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>T <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span>T operand<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span>T operand<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.float-9'><div class='marginalizedparent'><a class='marginalized' href='#types.float-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2460'>#</a></div><div id='types.float-9.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.float-9.sentence-1'>.</a></div></div></div><div class='para' id='types.float-10'><div class='marginalizedparent'><a class='marginalized' href='#types.float-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2465'>#</a></div><div id='types.float-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;<span class='textit'>key</span><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <span class='textit'>op</span> operand;</span></div></div></div><div class='para' id='types.float-11'><div class='marginalizedparent'><a class='marginalized' href='#types.float-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2469'>#</a></div><div id='types.float-11.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
If the result is not a representable value for its type (<a href='expr.pre'>[expr.pre]</a>)
the result is unspecified, but the operations otherwise have no undefined
behavior<a class='hidden_link' href='#types.float-11.sentence-1'>.</a></div> <div id='types.float-11.sentence-2' class='sentence'>Atomic arithmetic operations on <span class='texttt'><span class='textit'>floating-point</span></span>
should conform to the <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>numeric_&shy;limits<span class='anglebracket'>&lt;</span><span class='textit'>floating-point</span><span class='anglebracket'>&gt;</span></span>
traits associated with the floating-point type (<a href='limits.syn'>[limits.syn]</a>)<a class='hidden_link' href='#types.float-11.sentence-2'>.</a></div> <div id='types.float-11.sentence-3' class='sentence'>The floating-point environment (<a href='cfenv'>[cfenv]</a>) for atomic arithmetic operations
on <span class='texttt'><span class='textit'>floating-point</span></span> may be different than the
calling thread's floating-point environment<a class='hidden_link' href='#types.float-11.sentence-3'>.</a></div></div></div></div><div id='types.pointer' class='section'><h3 ><a class='secnum' href='#types.pointer' style='min-width:103pt'>31.8.4</a> Partial specialization for pointers <a class='abbr_ref' href='atomics.types.pointer'>[atomics.types.pointer]</a></h3><span class='indexparent'><a class='index' id='lib:atomic<T*>'></a></span>
<pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> T<span class='operator'>*</span>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> ptrdiff_t;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free____'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> exchange<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> exchange<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> fetch_add<span class='parenthesis'>(</span>ptrdiff_t, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_add<span class='parenthesis'>(</span>ptrdiff_t, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_sub<span class='parenthesis'>(</span>ptrdiff_t, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_sub<span class='parenthesis'>(</span>ptrdiff_t, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><span class='indexparent'><a class='index' id='lib:atomic<T*>_'></a></span><div class='para' id='types.pointer-1'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2553'>#</a></div><div id='types.pointer-1.sentence-1' class='sentence'>There is a partial specialization of the <span class='texttt'>atomic</span> class template for pointers<a class='hidden_link' href='#types.pointer-1.sentence-1'>.</a></div> <div id='types.pointer-1.sentence-2' class='sentence'>Specializations of this partial specialization are standard-layout structs<a class='hidden_link' href='#types.pointer-1.sentence-2'>.</a></div> <div id='types.pointer-1.sentence-3' class='sentence'>They each have a trivial destructor<a class='hidden_link' href='#types.pointer-1.sentence-3'>.</a></div></div><div class='para' id='types.pointer-2'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2558'>#</a></div><div id='types.pointer-2.sentence-1' class='sentence'>Descriptions are provided below only for members that differ from the primary template<a class='hidden_link' href='#types.pointer-2.sentence-1'>.</a></div></div><div class='para' id='types.pointer-3'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2561'>#</a></div><div id='types.pointer-3.sentence-1' class='sentence'>The following operations perform pointer arithmetic<a class='hidden_link' href='#types.pointer-3.sentence-1'>.</a></div> <div id='types.pointer-3.sentence-2' class='sentence'>The key, operator,
and computation correspondence is:</div><div class='numberedTable' id='tab:atomic.types.pointer.comp'>Table <a href='#tab:atomic.types.pointer.comp'>145</a>: Atomic pointer computations &emsp;&ensp;[tab:atomic.types.pointer.comp]<br><table ><tr class='rowsep'><td class='left'><div id='types.pointer-3.sentence-3' class='sentence'><span class='texttt'>Key</span></div></td><td class='left'><div id='types.pointer-3.sentence-4' class='sentence'>Op</div></td><td class='left'><div id='types.pointer-3.sentence-5' class='sentence'>Computation</div></td><td class='border left'><div id='types.pointer-3.sentence-6' class='sentence'><span class='texttt'>Key</span></div></td><td class='left'><div id='types.pointer-3.sentence-7' class='sentence'>Op</div></td><td class='left'><div id='types.pointer-3.sentence-8' class='sentence'>Computation</div></td></tr><tr class='rowsep'><td class='left'><div id='types.pointer-3.sentence-9' class='sentence'><span class='texttt'>add</span></div></td><td class='left'><div id='types.pointer-3.sentence-10' class='sentence'><span class='texttt'><span class='operator'>+</span></span></div></td><td class='left'><div id='types.pointer-3.sentence-11' class='sentence'>addition</div></td><td class='border left'><div id='types.pointer-3.sentence-12' class='sentence'><span class='texttt'>sub</span></div></td><td class='left'><div id='types.pointer-3.sentence-13' class='sentence'><span class='texttt'><span class='operator'>-</span></span></div></td><td class='left'><div id='types.pointer-3.sentence-14' class='sentence'>subtraction</div></td></tr></table></div><span class='indexparent'><a class='index' id='lib:atomic_fetch_add__'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_sub__'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_add_explicit__'></a></span><span class='indexparent'><a class='index' id='lib:atomic_fetch_sub_explicit__'></a></span><span class='indexparent'><a class='index' id='lib:fetch_add,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,fetch_add'></a></span><span class='indexparent'><a class='index' id='lib:fetch_sub,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,fetch_sub'></a></span></div><div class='itemdecl' id='types.pointer-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.pointer-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> fetch_<span class='textit'>key</span><span class='parenthesis'>(</span>ptrdiff_t operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T<span class='operator'>*</span> fetch_<span class='textit'>key</span><span class='parenthesis'>(</span>ptrdiff_t operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.pointer-4'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2594'>#</a></div><div id='types.pointer-4.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.pointer-4.sentence-1'>.</a></div></div></div><div class='para' id='types.pointer-5'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2599'>#</a></div><div id='types.pointer-5.sentence-1' class='sentence'><span class='textit'>Mandates:</span> 
<span class='texttt'>T</span> is a complete object type<a class='hidden_link' href='#types.pointer-5.sentence-1'>.</a></div> <div id='types.pointer-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#types.pointer-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='types.pointer-5.sentence-2' class='sentence'>Pointer arithmetic on <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> or function pointers is ill-formed<a class='hidden_link' href='#types.pointer-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div class='para' id='types.pointer-6'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2606'>#</a></div><div id='types.pointer-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by
<span class='texttt'><span class='keyword'>this</span></span> with the result of the computation applied to the
value pointed to by <span class='texttt'><span class='keyword'>this</span></span> and the given <span class='texttt'>operand</span><a class='hidden_link' href='#types.pointer-6.sentence-1'>.</a></div> <div id='types.pointer-6.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#types.pointer-6.sentence-2'>.</a></div> <div id='types.pointer-6.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#types.pointer-6.sentence-3'>.</a></div></div></div><div class='para' id='types.pointer-7'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2614'>#</a></div><div id='types.pointer-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically, the value pointed to by <span class='texttt'><span class='keyword'>this</span></span> immediately before the effects<a class='hidden_link' href='#types.pointer-7.sentence-1'>.</a></div></div></div><div class='para' id='types.pointer-8'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2618'>#</a></div><div id='types.pointer-8.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The result may be an undefined address,
but the operations otherwise have no undefined behavior<a class='hidden_link' href='#types.pointer-8.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator+=,atomic<T*>__'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator+=__'></a></span><span class='indexparent'><a class='index' id='lib:operator-=,atomic<T*>__'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator-=__'></a></span><div class='itemdecl' id='types.pointer-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.pointer-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t operand<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T<span class='operator'>*</span> <span class='keyword'>operator</span> <span class='textit'>op</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t operand<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.pointer-9'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2632'>#</a></div><div id='types.pointer-9.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.pointer-9.sentence-1'>.</a></div></div></div><div class='para' id='types.pointer-10'><div class='marginalizedparent'><a class='marginalized' href='#types.pointer-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2637'>#</a></div><div id='types.pointer-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;<span class='textit'>key</span><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <span class='textit'>op</span> operand;</span></div></div></div></div><div id='types.memop' class='section'><h3 ><a class='secnum' href='#types.memop' style='min-width:103pt'>31.8.5</a> Member operators common to integers and pointers to objects <a class='abbr_ref' href='atomics.types.memop'>[atomics.types.memop]</a></h3><span class='indexparent'><a class='index' id='lib:operator++,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator++'></a></span><span class='indexparent'><a class='index' id='lib:operator++,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator++'></a></span><div class='itemdecl' id='types.memop-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.memop-itemdecl:1'>🔗</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.memop-1'><div class='marginalizedparent'><a class='marginalized' href='#types.memop-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2652'>#</a></div><div id='types.memop-1.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.memop-1.sentence-1'>.</a></div></div></div><div class='para' id='types.memop-2'><div class='marginalizedparent'><a class='marginalized' href='#types.memop-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2657'>#</a></div><div id='types.memop-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;add<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:operator--,atomic<T*>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator--'></a></span><span class='indexparent'><a class='index' id='lib:operator--,atomic<integral>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator--'></a></span><div class='itemdecl' id='types.memop-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.memop-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.memop-3'><div class='marginalizedparent'><a class='marginalized' href='#types.memop-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2670'>#</a></div><div id='types.memop-3.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.memop-3.sentence-1'>.</a></div></div></div><div class='para' id='types.memop-4'><div class='marginalizedparent'><a class='marginalized' href='#types.memop-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2675'>#</a></div><div id='types.memop-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;sub<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:operator++,atomic<T*>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator++_'></a></span><span class='indexparent'><a class='index' id='lib:operator++,atomic<integral>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator++_'></a></span><div class='itemdecl' id='types.memop-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.memop-itemdecl:3'>🔗</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.memop-5'><div class='marginalizedparent'><a class='marginalized' href='#types.memop-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2688'>#</a></div><div id='types.memop-5.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.memop-5.sentence-1'>.</a></div></div></div><div class='para' id='types.memop-6'><div class='marginalizedparent'><a class='marginalized' href='#types.memop-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2693'>#</a></div><div id='types.memop-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;add<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>1</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:operator--,atomic<T*>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<T*>,operator--_'></a></span><span class='indexparent'><a class='index' id='lib:operator--,atomic<integral>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<integral>,operator--_'></a></span><div class='itemdecl' id='types.memop-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#types.memop-itemdecl:4'>🔗</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='types.memop-7'><div class='marginalizedparent'><a class='marginalized' href='#types.memop-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2706'>#</a></div><div id='types.memop-7.sentence-1' class='sentence'><span class='textit'>Constraints:</span> 
For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_&shy;always_&shy;lock_&shy;free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#types.memop-7.sentence-1'>.</a></div></div></div><div class='para' id='types.memop-8'><div class='marginalizedparent'><a class='marginalized' href='#types.memop-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2711'>#</a></div><div id='types.memop-8.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_&shy;sub<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>-</span> <span class='literal'>1</span>;</span></div></div></div></div><div id='util.smartptr.atomic' class='section'><h3 ><a class='secnum' href='#util.smartptr.atomic' style='min-width:103pt'>31.8.6</a> Partial specializations for smart pointers <a class='abbr_ref' href='util.smartptr.atomic'>[util.smartptr.atomic]</a></h3><span class='indexparent'><a class='index' id=':atomic,smart_pointers'></a></span><div class='para' id='util.smartptr.atomic-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2719'>#</a></div><div id='util.smartptr.atomic-1.sentence-1' class='sentence'>The library provides partial specializations of the <span class='texttt'>atomic</span> template
for shared-ownership smart pointers (<a href='smartptr'>[smartptr]</a>)<a class='hidden_link' href='#util.smartptr.atomic-1.sentence-1'>.</a></div> <div id='util.smartptr.atomic-1.sentence-2' class='sentence'>The behavior of all operations is as specified in <a href='#types.generic'>[atomics.types.generic]</a>,
unless specified otherwise<a class='hidden_link' href='#util.smartptr.atomic-1.sentence-2'>.</a></div> <div id='util.smartptr.atomic-1.sentence-3' class='sentence'>The template parameter <span class='texttt'>T</span> of these partial specializations
may be an incomplete type<a class='hidden_link' href='#util.smartptr.atomic-1.sentence-3'>.</a></div></div><div class='para' id='util.smartptr.atomic-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2727'>#</a></div><div id='util.smartptr.atomic-2.sentence-1' class='sentence'>All changes to an atomic smart pointer in this subclause, and
all associated <span class='texttt'>use_&shy;count</span> increments,
are guaranteed to be performed atomically<a class='hidden_link' href='#util.smartptr.atomic-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic-2.sentence-2' class='sentence'>Associated <span class='texttt'>use_&shy;count</span> decrements
are sequenced after the atomic operation,
but are not required to be part of it<a class='hidden_link' href='#util.smartptr.atomic-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic-2.sentence-3' class='sentence'>Any associated deletion and deallocation
are sequenced after the atomic update step and
are not part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#util.smartptr.atomic-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.atomic-2.sentence-4' class='sentence'>If the atomic operation uses locks,
locks acquired by the implementation
will be held when any <span class='texttt'>use_&shy;count</span> adjustments are performed, and
will not be held when any destruction or deallocation
resulting from this is performed<a class='hidden_link' href='#util.smartptr.atomic-2.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='util.smartptr.atomic-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2745'>#</a></div><div id='util.smartptr.atomic-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#util.smartptr.atomic-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> atomic_list <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> node <span class='curlybracket'>{</span>
    T t;
    shared_ptr<span class='anglebracket'>&lt;</span>node<span class='anglebracket'>&gt;</span> next;
  <span class='curlybracket'>}</span>;
  atomic<span class='anglebracket'>&lt;</span>shared_ptr<span class='anglebracket'>&lt;</span>node<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> head;

<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>auto</span> find<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span>
    <span class='keyword'>auto</span> p <span class='operator'>=</span> head<span class='operator'>.</span>load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>while</span> <span class='parenthesis'>(</span>p <span class='operator'>&amp;</span><span class='operator'>&amp;</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>t <span class='operator'>!</span><span class='operator'>=</span> t<span class='parenthesis'>)</span>
      p <span class='operator'>=</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next;

    <span class='keyword'>return</span> shared_ptr<span class='anglebracket'>&lt;</span>node<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>move<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>

  <span class='keyword'>void</span> push_front<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>auto</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>node<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>t <span class='operator'>=</span> t;
    p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next <span class='operator'>=</span> head;
    <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='operator'>!</span>head<span class='operator'>.</span>compare_exchange_weak<span class='parenthesis'>(</span>p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next, p<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div id='util.smartptr.atomic.shared' class='section'><h4 ><a class='secnum' href='#util.smartptr.atomic.shared' style='min-width:118pt'>31.8.6.1</a> Partial specialization for <span class='texttt'>shared_&shy;ptr</span> <a class='abbr_ref' href='util.smartptr.atomic.shared'>[util.smartptr.atomic.shared]</a></h4><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>'></a></span><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free_____'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> exchange<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                               memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                                 memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                               memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                                 memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> p;            <span class='comment'>// <span class='textit'>exposition only</span></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,constructor'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2821'>#</a></div><div id='util.smartptr.atomic.shared-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'>p<span class='curlybracket'>{</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,constructor_'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>atomic<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2832'>#</a></div><div id='util.smartptr.atomic.shared-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the object with the value <span class='texttt'>desired</span><a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-2.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#util.smartptr.atomic.shared-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.atomic.shared-2.sentence-3' class='sentence'>It is possible to have an access to
an atomic object <span class='texttt'>A</span> race with its construction,
for example,
by communicating the address of the just-constructed object <span class='texttt'>A</span>
to another thread via <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span> operations
on a suitable atomic pointer variable, and
then immediately accessing <span class='texttt'>A</span> in the receiving thread<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic.shared-2.sentence-4' class='sentence'>This results in undefined behavior<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:store,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,store'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> store<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2854'>#</a></div><div id='util.smartptr.atomic.shared-3.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, nor
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-3.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2861'>#</a></div><div id='util.smartptr.atomic.shared-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by <span class='texttt'><span class='keyword'>this</span></span> with
the value of <span class='texttt'>desired</span> as if by <span class='texttt'>p<span class='operator'>.</span>swap<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-4.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-4.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,operator='></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2874'>#</a></div><div id='util.smartptr.atomic.shared-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to <span class='texttt'>store<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:load,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,load'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:5'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2885'>#</a></div><div id='util.smartptr.atomic.shared-6.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2890'>#</a></div><div id='util.smartptr.atomic.shared-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-7.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2894'>#</a></div><div id='util.smartptr.atomic.shared-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.atomic.shared-8.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator_shared_ptr<T>,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,operator_shared_ptr<T>'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:6'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2905'>#</a></div><div id='util.smartptr.atomic.shared-9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:exchange,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,exchange'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:7'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> exchange<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2916'>#</a></div><div id='util.smartptr.atomic.shared-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces <span class='texttt'>p</span> with <span class='texttt'>desired</span>
as if by <span class='texttt'>p<span class='operator'>.</span>swap<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-10.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-10.sentence-3' class='sentence'>This is an atomic read-modify-write operation (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2923'>#</a></div><div id='util.smartptr.atomic.shared-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value of <span class='texttt'>p</span> immediately before the effects<a class='hidden_link' href='#util.smartptr.atomic.shared-11.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,compare_exchange_strong'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:8'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2938'>#</a></div><div id='util.smartptr.atomic.shared-12.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>failure</span> is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-12.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2943'>#</a></div><div id='util.smartptr.atomic.shared-13.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If <span class='texttt'>p</span> is equivalent to <span class='texttt'>expected</span>,
assigns <span class='texttt'>desired</span> to <span class='texttt'>p</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>success</span>,
otherwise assigns <span class='texttt'>p</span> to <span class='texttt'>expected</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#util.smartptr.atomic.shared-13.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2951'>#</a></div><div id='util.smartptr.atomic.shared-14.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'><span class='literal'>true</span></span> if <span class='texttt'>p</span> was equivalent to <span class='texttt'>expected</span>,
<span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#util.smartptr.atomic.shared-14.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2956'>#</a></div><div id='util.smartptr.atomic.shared-15.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
Two <span class='texttt'>shared_&shy;ptr</span> objects are equivalent if
they store the same pointer value and
either share ownership or are both empty<a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-15.sentence-2' class='sentence'>The weak form may fail spuriously<a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-15.sentence-3' class='sentence'>See <a href='#types.operations'>[atomics.types.operations]</a><a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2963'>#</a></div><div id='util.smartptr.atomic.shared-16.sentence-1' class='sentence'>If the operation returns <span class='texttt'><span class='literal'>true</span></span>,
<span class='texttt'>expected</span> is not accessed after the atomic update and
the operation is an atomic read-modify-write operation (<a href='intro.multithread'>[intro.multithread]</a>)
on the memory pointed to by <span class='texttt'><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-2' class='sentence'>Otherwise, the operation is an atomic load operation on that memory, and
<span class='texttt'>expected</span> is updated with the existing value
read from the atomic object in the attempted atomic update<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-3' class='sentence'>The <span class='texttt'>use_&shy;count</span> update corresponding to the write to <span class='texttt'>expected</span>
is part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-3'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-4' class='sentence'>The write to <span class='texttt'>expected</span> itself
is not required to be part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-4'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<shared_ptr<T>>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,compare_exchange_weak_'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:9'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:9'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L2984'>#</a></div><div id='util.smartptr.atomic.shared-17.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
<span class='keyword'>return</span> compare_exchange_weak<span class='parenthesis'>(</span>expected, desired, order, fail_order<span class='parenthesis'>)</span>;
</pre>
where <span class='texttt'>fail_&shy;order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.shared-17.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<shared_ptr<T>>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,compare_exchange_strong_'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:10'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:10'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3004'>#</a></div><div id='util.smartptr.atomic.shared-18.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
<span class='keyword'>return</span> compare_exchange_strong<span class='parenthesis'>(</span>expected, desired, order, fail_order<span class='parenthesis'>)</span>;
</pre>
where <span class='texttt'>fail_&shy;order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.shared-18.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:wait,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,wait'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:11'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:11'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> wait<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-19'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3023'>#</a></div><div id='util.smartptr.atomic.shared-19.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is
neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-19.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-20'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3028'>#</a></div><div id='util.smartptr.atomic.shared-20.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='util.smartptr.atomic.shared-20.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.atomic.shared-20.1'>(20.1)</a></div>Evaluates <span class='texttt'>load<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span> and compares it to <span class='texttt'>old</span>.</li><li id='util.smartptr.atomic.shared-20.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.atomic.shared-20.2'>(20.2)</a></div>If the two are not equivalent, returns.</li><li id='util.smartptr.atomic.shared-20.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.atomic.shared-20.3'>(20.3)</a></div>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously.</li></ul></div></div></div><div class='para' id='util.smartptr.atomic.shared-21'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3041'>#</a></div><div id='util.smartptr.atomic.shared-21.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
Two <span class='texttt'>shared_&shy;ptr</span> objects are equivalent
if they store the same pointer and either share ownership or are both empty<a class='hidden_link' href='#util.smartptr.atomic.shared-21.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-21.sentence-2' class='sentence'>This function is an atomic waiting operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-21.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:notify_one,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,notify_one'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:12'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:12'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-22'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3054'>#</a></div><div id='util.smartptr.atomic.shared-22.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of at least one atomic waiting operation
that is eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#util.smartptr.atomic.shared-22.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-23'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3060'>#</a></div><div id='util.smartptr.atomic.shared-23.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-23.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:notify_all,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,notify_all'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:13'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:13'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-24'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3071'>#</a></div><div id='util.smartptr.atomic.shared-24.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of all atomic waiting operations
that are eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call<a class='hidden_link' href='#util.smartptr.atomic.shared-24.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-25'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3076'>#</a></div><div id='util.smartptr.atomic.shared-25.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-25.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.atomic.weak' class='section'><h4 ><a class='secnum' href='#util.smartptr.atomic.weak' style='min-width:118pt'>31.8.6.2</a> Partial specialization for <span class='texttt'>weak_&shy;ptr</span> <a class='abbr_ref' href='util.smartptr.atomic.weak'>[util.smartptr.atomic.weak]</a></h4><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>'></a></span><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free______'></a></span><span class='textit'>implementation-defined</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> exchange<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                         memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                               memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                                 memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                               memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                                 memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> p;              <span class='comment'>// <span class='textit'>exposition only</span></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,constructor'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3128'>#</a></div><div id='util.smartptr.atomic.weak-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'>p<span class='curlybracket'>{</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,constructor_'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:2'>🔗</a></div><code class='itemdeclcode'>atomic<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3139'>#</a></div><div id='util.smartptr.atomic.weak-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the object with the value <span class='texttt'>desired</span><a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-2.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#util.smartptr.atomic.weak-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.atomic.weak-2.sentence-3' class='sentence'>It is possible to have an access to
an atomic object <span class='texttt'>A</span> race with its construction,
for example,
by communicating the address of the just-constructed object <span class='texttt'>A</span>
to another thread via <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span> operations
on a suitable atomic pointer variable, and
then immediately accessing <span class='texttt'>A</span> in the receiving thread<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic.weak-2.sentence-4' class='sentence'>This results in undefined behavior<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:store,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,store'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> store<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3161'>#</a></div><div id='util.smartptr.atomic.weak-3.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, nor
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-3.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3168'>#</a></div><div id='util.smartptr.atomic.weak-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by <span class='texttt'><span class='keyword'>this</span></span> with
the value of <span class='texttt'>desired</span> as if by <span class='texttt'>p<span class='operator'>.</span>swap<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-4.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-4.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,operator='></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3181'>#</a></div><div id='util.smartptr.atomic.weak-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to <span class='texttt'>store<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:load,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,load'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:5'>🔗</a></div><code class='itemdeclcode'>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3192'>#</a></div><div id='util.smartptr.atomic.weak-6.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3197'>#</a></div><div id='util.smartptr.atomic.weak-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-7.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3201'>#</a></div><div id='util.smartptr.atomic.weak-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.atomic.weak-8.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator_weak_ptr<T>,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,operator_weak_ptr<T>'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:6'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3212'>#</a></div><div id='util.smartptr.atomic.weak-9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'><span class='keyword'>return</span> load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div><span class='indexparent'><a class='index' id='lib:exchange,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,exchange'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:7'>🔗</a></div><code class='itemdeclcode'>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> exchange<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3223'>#</a></div><div id='util.smartptr.atomic.weak-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces <span class='texttt'>p</span> with <span class='texttt'>desired</span>
as if by <span class='texttt'>p<span class='operator'>.</span>swap<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-10.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-10.sentence-3' class='sentence'>This is an atomic read-modify-write operation (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3230'>#</a></div><div id='util.smartptr.atomic.weak-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value of <span class='texttt'>p</span> immediately before the effects<a class='hidden_link' href='#util.smartptr.atomic.weak-11.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,compare_exchange_weak'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:8'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3244'>#</a></div><div id='util.smartptr.atomic.weak-12.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>failure</span> is neither
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-12.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3249'>#</a></div><div id='util.smartptr.atomic.weak-13.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If <span class='texttt'>p</span> is equivalent to <span class='texttt'>expected</span>,
assigns <span class='texttt'>desired</span> to <span class='texttt'>p</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>success</span>,
otherwise assigns <span class='texttt'>p</span> to <span class='texttt'>expected</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#util.smartptr.atomic.weak-13.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3257'>#</a></div><div id='util.smartptr.atomic.weak-14.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'><span class='literal'>true</span></span> if <span class='texttt'>p</span> was equivalent to <span class='texttt'>expected</span>,
<span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#util.smartptr.atomic.weak-14.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3262'>#</a></div><div id='util.smartptr.atomic.weak-15.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
Two <span class='texttt'>weak_&shy;ptr</span> objects are equivalent if
they store the same pointer value and
either share ownership or are both empty<a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-15.sentence-2' class='sentence'>The weak form may fail spuriously<a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-15.sentence-3' class='sentence'>See <a href='#types.operations'>[atomics.types.operations]</a><a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3269'>#</a></div><div id='util.smartptr.atomic.weak-16.sentence-1' class='sentence'>If the operation returns <span class='texttt'><span class='literal'>true</span></span>,
<span class='texttt'>expected</span> is not accessed after the atomic update and
the operation is an atomic read-modify-write operation (<a href='intro.multithread'>[intro.multithread]</a>)
on the memory pointed to by <span class='texttt'><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-2' class='sentence'>Otherwise, the operation is an atomic load operation on that memory, and
<span class='texttt'>expected</span> is updated with the existing value
read from the atomic object in the attempted atomic update<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-3' class='sentence'>The <span class='texttt'>use_&shy;count</span> update corresponding to the write to <span class='texttt'>expected</span>
is part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-3'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-4' class='sentence'>The write to <span class='texttt'>expected</span> itself
is not required to be part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-4'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<weak_ptr<T>>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,compare_exchange_weak_'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:9'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:9'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3290'>#</a></div><div id='util.smartptr.atomic.weak-17.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
<span class='keyword'>return</span> compare_exchange_weak<span class='parenthesis'>(</span>expected, desired, order, fail_order<span class='parenthesis'>)</span>;
</pre>
where <span class='texttt'>fail_&shy;order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.weak-17.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,compare_exchange_strong'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:10'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:10'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3310'>#</a></div><div id='util.smartptr.atomic.weak-18.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
<span class='keyword'>return</span> compare_exchange_strong<span class='parenthesis'>(</span>expected, desired, order, fail_order<span class='parenthesis'>)</span>;
</pre>
where <span class='texttt'>fail_&shy;order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.weak-18.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:wait,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,wait'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:11'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:11'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> wait<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-19'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3329'>#</a></div><div id='util.smartptr.atomic.weak-19.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is
neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-19.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-20'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3334'>#</a></div><div id='util.smartptr.atomic.weak-20.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='util.smartptr.atomic.weak-20.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.atomic.weak-20.1'>(20.1)</a></div>Evaluates <span class='texttt'>load<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span> and compares it to <span class='texttt'>old</span>.</li><li id='util.smartptr.atomic.weak-20.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.atomic.weak-20.2'>(20.2)</a></div>If the two are not equivalent, returns.</li><li id='util.smartptr.atomic.weak-20.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.atomic.weak-20.3'>(20.3)</a></div>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously.</li></ul></div></div></div><div class='para' id='util.smartptr.atomic.weak-21'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3347'>#</a></div><div id='util.smartptr.atomic.weak-21.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
Two <span class='texttt'>weak_&shy;ptr</span> objects are equivalent
if they store the same pointer and either share ownership or are both empty<a class='hidden_link' href='#util.smartptr.atomic.weak-21.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-21.sentence-2' class='sentence'>This function is an atomic waiting operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-21.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:notify_one,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,notify_one'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:12'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:12'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-22'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3361'>#</a></div><div id='util.smartptr.atomic.weak-22.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of at least one atomic waiting operation
that is eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#util.smartptr.atomic.weak-22.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-23'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3367'>#</a></div><div id='util.smartptr.atomic.weak-23.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-23.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:notify_all,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,notify_all'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:13'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:13'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-24'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3378'>#</a></div><div id='util.smartptr.atomic.weak-24.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of all atomic waiting operations
that are eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call<a class='hidden_link' href='#util.smartptr.atomic.weak-24.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-25'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3383'>#</a></div><div id='util.smartptr.atomic.weak-25.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-25.sentence-1'>.</a></div></div></div></div></div></div><div id='nonmembers' class='section'><h2 ><a class='secnum' href='#nonmembers' style='min-width:88pt'>31.9</a> Non-member functions <a class='abbr_ref' href='atomics.nonmembers'>[atomics.nonmembers]</a></h2><div class='para' id='nonmembers-1'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3391'>#</a></div><div id='nonmembers-1.sentence-1' class='sentence'>A non-member function template whose name matches the pattern
<span class='texttt'>atomic_&shy;<span class='textit'>f</span></span> or the pattern <span class='texttt'>atomic_&shy;<span class='textit'>f</span>_&shy;explicit</span>
invokes the member function <span class='texttt'><span class='textit'>f</span></span>, with the value of the
first parameter as the object expression and the values of the remaining parameters
(if any) as the arguments of the member function call, in order<a class='hidden_link' href='#nonmembers-1.sentence-1'>.</a></div> <div id='nonmembers-1.sentence-2' class='sentence'>An argument
for a parameter of type <span class='texttt'>atomic<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>value_&shy;type<span class='operator'>*</span></span> is dereferenced when
passed to the member function call<a class='hidden_link' href='#nonmembers-1.sentence-2'>.</a></div> <div id='nonmembers-1.sentence-3' class='sentence'>If no such member function exists, the program is ill-formed<a class='hidden_link' href='#nonmembers-1.sentence-3'>.</a></div></div><div class='para' id='nonmembers-2'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3401'>#</a></div><div id='nonmembers-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#nonmembers-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='nonmembers-2.sentence-1' class='sentence'>The non-member functions enable programmers to write code that can be
compiled as either C or C++, for example in a shared header file<a class='hidden_link' href='#nonmembers-2.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='flag' class='section'><h2 ><a class='secnum' href='#flag' style='min-width:88pt'>31.10</a> Flag type and operations <a class='abbr_ref' href='atomics.flag'>[atomics.flag]</a></h2><pre class='codeblock'>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> atomic_flag <span class='curlybracket'>{</span>
    <span class='keyword'>constexpr</span> atomic_flag<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_flag<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic_flag<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic_flag<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>bool</span> test<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> test<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> test_and_set<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> test_and_set<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> clear<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> clear<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><span class='keyword'>bool</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><span class='keyword'>bool</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><div class='para' id='flag-1'><div class='marginalizedparent'><a class='marginalized' href='#flag-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3434'>#</a></div><div id='flag-1.sentence-1' class='sentence'>The <span class='texttt'>atomic_&shy;flag</span> type provides the classic test-and-set functionality<a class='hidden_link' href='#flag-1.sentence-1'>.</a></div> <div id='flag-1.sentence-2' class='sentence'>It has two states, set and clear<a class='hidden_link' href='#flag-1.sentence-2'>.</a></div></div><div class='para' id='flag-2'><div class='marginalizedparent'><a class='marginalized' href='#flag-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3437'>#</a></div><div id='flag-2.sentence-1' class='sentence'>Operations on an object of type <span class='texttt'>atomic_&shy;flag</span> shall be lock-free<a class='hidden_link' href='#flag-2.sentence-1'>.</a></div> <div id='flag-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#flag-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='flag-2.sentence-2' class='sentence'>Hence
the operations should also be address-free<a class='hidden_link' href='#flag-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='flag-3'><div class='marginalizedparent'><a class='marginalized' href='#flag-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3444'>#</a></div><div id='flag-3.sentence-1' class='sentence'>The <span class='texttt'>atomic_&shy;flag</span> type is a standard-layout struct<a class='hidden_link' href='#flag-3.sentence-1'>.</a></div> <div id='flag-3.sentence-2' class='sentence'>It has a trivial destructor<a class='hidden_link' href='#flag-3.sentence-2'>.</a></div> <span class='indexparent'><a class='index' id='lib:atomic_flag,constructor'></a></span></div><div class='itemdecl' id='flag-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#flag-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic_flag<span class='operator'>::</span>atomic_flag<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='flag-4'><div class='marginalizedparent'><a class='marginalized' href='#flag-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3454'>#</a></div><div id='flag-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> to the clear state<a class='hidden_link' href='#flag-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_flag_test'></a></span><span class='indexparent'><a class='index' id='lib:atomic_flag_test_explicit'></a></span><span class='indexparent'><a class='index' id='lib:test,atomic_flag'></a></span><span class='indexparent'><a class='index' id='lib:atomic_flag,test'></a></span><div class='itemdecl' id='flag-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#flag-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> atomic_flag_test<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag_test<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag_test_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object,
                               memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag_test_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>*</span> object,
                               memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag<span class='operator'>::</span>test<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag<span class='operator'>::</span>test<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='flag-5'><div class='marginalizedparent'><a class='marginalized' href='#flag-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3474'>#</a></div><div id='flag-5.sentence-1' class='sentence'>For <span class='texttt'>atomic_&shy;flag_&shy;test</span>, let <span class='texttt'>order</span> be <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span><a class='hidden_link' href='#flag-5.sentence-1'>.</a></div></div></div><div class='para' id='flag-6'><div class='marginalizedparent'><a class='marginalized' href='#flag-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3477'>#</a></div><div id='flag-6.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is
neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#flag-6.sentence-1'>.</a></div></div></div><div class='para' id='flag-7'><div class='marginalizedparent'><a class='marginalized' href='#flag-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3482'>#</a></div><div id='flag-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#flag-7.sentence-1'>.</a></div></div></div><div class='para' id='flag-8'><div class='marginalizedparent'><a class='marginalized' href='#flag-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3486'>#</a></div><div id='flag-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value pointed to by <span class='texttt'>object</span> or <span class='texttt'><span class='keyword'>this</span></span><a class='hidden_link' href='#flag-8.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_flag_test_and_set'></a></span><span class='indexparent'><a class='index' id='lib:atomic_flag_test_and_set_explicit'></a></span><span class='indexparent'><a class='index' id='lib:test_and_set,atomic_flag'></a></span><span class='indexparent'><a class='index' id='lib:atomic_flag,test_and_set'></a></span><div class='itemdecl' id='flag-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#flag-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> atomic_flag_test_and_set<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag_test_and_set<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag_test_and_set_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object, memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag_test_and_set_explicit<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span> object, memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag<span class='operator'>::</span>test_and_set<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> atomic_flag<span class='operator'>::</span>test_and_set<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='flag-9'><div class='marginalizedparent'><a class='marginalized' href='#flag-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3504'>#</a></div><div id='flag-9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically sets the value pointed to by <span class='texttt'>object</span> or by <span class='texttt'><span class='keyword'>this</span></span> to <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#flag-9.sentence-1'>.</a></div> <div id='flag-9.sentence-2' class='sentence'>Memory is affected according to the value of
<span class='texttt'>order</span><a class='hidden_link' href='#flag-9.sentence-2'>.</a></div> <div id='flag-9.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#flag-9.sentence-3'>.</a></div></div></div><div class='para' id='flag-10'><div class='marginalizedparent'><a class='marginalized' href='#flag-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3509'>#</a></div><div id='flag-10.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically, the value of the object immediately before the effects<a class='hidden_link' href='#flag-10.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_flag_clear'></a></span><span class='indexparent'><a class='index' id='lib:atomic_flag_clear_explicit'></a></span><span class='indexparent'><a class='index' id='lib:clear,atomic_flag'></a></span><span class='indexparent'><a class='index' id='lib:atomic_flag,clear'></a></span><div class='itemdecl' id='flag-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#flag-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> atomic_flag_clear<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag_clear<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag_clear_explicit<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object, memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag_clear_explicit<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span> object, memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag<span class='operator'>::</span>clear<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag<span class='operator'>::</span>clear<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='flag-11'><div class='marginalizedparent'><a class='marginalized' href='#flag-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3527'>#</a></div><div id='flag-11.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
The <span class='texttt'>order</span> argument is neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#flag-11.sentence-1'>.</a></div></div></div><div class='para' id='flag-12'><div class='marginalizedparent'><a class='marginalized' href='#flag-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3532'>#</a></div><div id='flag-12.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically sets the value pointed to by <span class='texttt'>object</span> or by <span class='texttt'><span class='keyword'>this</span></span> to
<span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#flag-12.sentence-1'>.</a></div> <div id='flag-12.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#flag-12.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_flag_wait'></a></span><span class='indexparent'><a class='index' id='lib:atomic_flag_wait_explicit'></a></span><span class='indexparent'><a class='index' id='lib:wait,atomic_flag'></a></span><span class='indexparent'><a class='index' id='lib:atomic_flag,wait'></a></span><div class='itemdecl' id='flag-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#flag-itemdecl:5'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> atomic_flag_wait<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object, <span class='keyword'>bool</span> old<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag_wait<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>*</span> object, <span class='keyword'>bool</span> old<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag_wait_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object,
                               <span class='keyword'>bool</span> old, memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag_wait_explicit<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_flag<span class='operator'>*</span> object,
                               <span class='keyword'>bool</span> old, memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag<span class='operator'>::</span>wait<span class='parenthesis'>(</span><span class='keyword'>bool</span> old, memory_order order <span class='operator'>=</span>
                                   memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag<span class='operator'>::</span>wait<span class='parenthesis'>(</span><span class='keyword'>bool</span> old, memory_order order <span class='operator'>=</span>
                                   memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='flag-13'><div class='marginalizedparent'><a class='marginalized' href='#flag-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3555'>#</a></div><div id='flag-13.sentence-1' class='sentence'>For <span class='texttt'>atomic_&shy;flag_&shy;wait</span>,
let <span class='texttt'>order</span> be <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span><a class='hidden_link' href='#flag-13.sentence-1'>.</a></div> <div id='flag-13.sentence-2' class='sentence'>Let <span class='texttt'>flag</span> be <span class='texttt'>object</span> for the non-member functions and
<span class='texttt'><span class='keyword'>this</span></span> for the member functions<a class='hidden_link' href='#flag-13.sentence-2'>.</a></div></div></div><div class='para' id='flag-14'><div class='marginalizedparent'><a class='marginalized' href='#flag-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3561'>#</a></div><div id='flag-14.sentence-1' class='sentence'><span class='textit'>Preconditions:</span> 
<span class='texttt'>order</span> is
neither <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span><a class='hidden_link' href='#flag-14.sentence-1'>.</a></div></div></div><div class='para' id='flag-15'><div class='marginalizedparent'><a class='marginalized' href='#flag-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3566'>#</a></div><div id='flag-15.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='flag-15.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#flag-15.1'>(15.1)</a></div>Evaluates <span class='texttt'>flag<span class='operator'>-</span><span class='anglebracket'>&gt;</span>test<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> old</span>.</li><li id='flag-15.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#flag-15.2'>(15.2)</a></div>If the result of that evaluation is <span class='texttt'><span class='literal'>true</span></span>, returns.</li><li id='flag-15.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#flag-15.3'>(15.3)</a></div>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously.</li></ul></div></div></div><div class='para' id='flag-16'><div class='marginalizedparent'><a class='marginalized' href='#flag-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3579'>#</a></div><div id='flag-16.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic waiting operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#flag-16.sentence-1'>.</a></div></div></div><div class='itemdecl' id='flag-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#flag-itemdecl:6'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> atomic_flag_notify_one<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag_notify_one<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag<span class='operator'>::</span>notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag<span class='operator'>::</span>notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='flag-17'><div class='marginalizedparent'><a class='marginalized' href='#flag-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3592'>#</a></div><div id='flag-17.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of at least one atomic waiting operation
that is eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#flag-17.sentence-1'>.</a></div></div></div><div class='para' id='flag-18'><div class='marginalizedparent'><a class='marginalized' href='#flag-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3598'>#</a></div><div id='flag-18.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#flag-18.sentence-1'>.</a></div></div></div><div class='itemdecl' id='flag-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#flag-itemdecl:7'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> atomic_flag_notify_all<span class='parenthesis'>(</span><span class='keyword'>volatile</span> atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag_notify_all<span class='parenthesis'>(</span>atomic_flag<span class='operator'>*</span> object<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag<span class='operator'>::</span>notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> atomic_flag<span class='operator'>::</span>notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='flag-19'><div class='marginalizedparent'><a class='marginalized' href='#flag-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3611'>#</a></div><div id='flag-19.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Unblocks the execution of all atomic waiting operations
that are eligible to be unblocked (<a href='#wait'>[atomics.wait]</a>) by this call<a class='hidden_link' href='#flag-19.sentence-1'>.</a></div></div></div><div class='para' id='flag-20'><div class='marginalizedparent'><a class='marginalized' href='#flag-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3616'>#</a></div><div id='flag-20.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This function is an atomic notifying operation (<a href='#wait'>[atomics.wait]</a>)<a class='hidden_link' href='#flag-20.sentence-1'>.</a></div></div></div></div><div id='fences' class='section'><h2 ><a class='secnum' href='#fences' style='min-width:88pt'>31.11</a> Fences <a class='abbr_ref' href='atomics.fences'>[atomics.fences]</a></h2><div class='para' id='fences-1'><div class='marginalizedparent'><a class='marginalized' href='#fences-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3623'>#</a></div><div id='fences-1.sentence-1' class='sentence'>This subclause introduces synchronization primitives called <a class='hidden_link' href='#def:fences' id='def:fences'><i>fences</i></a><a class='hidden_link' href='#fences-1.sentence-1'>.</a></div> <div id='fences-1.sentence-2' class='sentence'>Fences can have
acquire semantics, release semantics, or both<a class='hidden_link' href='#fences-1.sentence-2'>.</a></div> <div id='fences-1.sentence-3' class='sentence'>A fence with acquire semantics is called
an <a class='hidden_link' href='#def:acquire_fence' id='def:acquire_fence'><i>acquire fence</i></a><a class='hidden_link' href='#fences-1.sentence-3'>.</a></div> <div id='fences-1.sentence-4' class='sentence'>A fence with release semantics is called a <a class='hidden_link' href='#def:release_fence' id='def:release_fence'><i>release
fence</i></a><a class='hidden_link' href='#fences-1.sentence-4'>.</a></div></div><div class='para' id='fences-2'><div class='marginalizedparent'><a class='marginalized' href='#fences-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3629'>#</a></div><div id='fences-2.sentence-1' class='sentence'>A release fence <span class='math'><span class='mathalpha'>A</span></span> synchronizes with an acquire fence <span class='math'><span class='mathalpha'>B</span></span> if there exist
atomic operations <span class='math'><span class='mathalpha'>X</span></span> and <span class='math'><span class='mathalpha'>Y</span></span>, both operating on some atomic object
<span class='math'><span class='mathalpha'>M</span></span>, such that <span class='math'><span class='mathalpha'>A</span></span> is sequenced before <span class='math'><span class='mathalpha'>X</span></span>, <span class='math'><span class='mathalpha'>X</span></span> modifies
<span class='math'><span class='mathalpha'>M</span></span>, <span class='math'><span class='mathalpha'>Y</span></span> is sequenced before <span class='math'><span class='mathalpha'>B</span></span>, and <span class='math'><span class='mathalpha'>Y</span></span> reads the value
written by <span class='math'><span class='mathalpha'>X</span></span> or a value written by any side effect in the hypothetical release
sequence <span class='math'><span class='mathalpha'>X</span></span> would head if it were a release operation<a class='hidden_link' href='#fences-2.sentence-1'>.</a></div></div><div class='para' id='fences-3'><div class='marginalizedparent'><a class='marginalized' href='#fences-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3637'>#</a></div><div id='fences-3.sentence-1' class='sentence'>A release fence <span class='math'><span class='mathalpha'>A</span></span> synchronizes with an atomic operation <span class='math'><span class='mathalpha'>B</span></span> that
performs an acquire operation on an atomic object <span class='math'><span class='mathalpha'>M</span></span> if there exists an atomic
operation <span class='math'><span class='mathalpha'>X</span></span> such that <span class='math'><span class='mathalpha'>A</span></span> is sequenced before <span class='math'><span class='mathalpha'>X</span></span>, <span class='math'><span class='mathalpha'>X</span></span>
modifies <span class='math'><span class='mathalpha'>M</span></span>, and <span class='math'><span class='mathalpha'>B</span></span> reads the value written by <span class='math'><span class='mathalpha'>X</span></span> or a value
written by any side effect in the hypothetical release sequence <span class='math'><span class='mathalpha'>X</span></span> would head if
it were a release operation<a class='hidden_link' href='#fences-3.sentence-1'>.</a></div></div><div class='para' id='fences-4'><div class='marginalizedparent'><a class='marginalized' href='#fences-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3645'>#</a></div><div id='fences-4.sentence-1' class='sentence'>An atomic operation <span class='math'><span class='mathalpha'>A</span></span> that is a release operation on an atomic object
<span class='math'><span class='mathalpha'>M</span></span> synchronizes with an acquire fence <span class='math'><span class='mathalpha'>B</span></span> if there exists some atomic
operation <span class='math'><span class='mathalpha'>X</span></span> on <span class='math'><span class='mathalpha'>M</span></span> such that <span class='math'><span class='mathalpha'>X</span></span> is sequenced before <span class='math'><span class='mathalpha'>B</span></span>
and reads the value written by <span class='math'><span class='mathalpha'>A</span></span> or a value written by any side effect in the
release sequence headed by <span class='math'><span class='mathalpha'>A</span></span><a class='hidden_link' href='#fences-4.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id='lib:atomic_thread_fence'></a></span></div><div class='itemdecl' id='fences-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#fences-itemdecl:1'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>void</span> atomic_thread_fence<span class='parenthesis'>(</span>memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='fences-5'><div class='marginalizedparent'><a class='marginalized' href='#fences-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3658'>#</a></div><div id='fences-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Depending on the value of <span class='texttt'>order</span>, this operation:
<ul class='itemize'><li id='fences-5.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#fences-5.1'>(5.1)</a></div>has no effects, if <span class='texttt'>order <span class='operator'>=</span><span class='operator'>=</span> memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span>;</li><li id='fences-5.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#fences-5.2'>(5.2)</a></div>is an acquire fence, if <span class='texttt'>order <span class='operator'>=</span><span class='operator'>=</span> memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> or <span class='texttt'>order <span class='operator'>=</span><span class='operator'>=</span> memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>;</li><li id='fences-5.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#fences-5.3'>(5.3)</a></div>is a release fence, if <span class='texttt'>order <span class='operator'>=</span><span class='operator'>=</span> memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>release</span>;</li><li id='fences-5.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#fences-5.4'>(5.4)</a></div>is both an acquire fence and a release fence, if <span class='texttt'>order <span class='operator'>=</span><span class='operator'>=</span> memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>acq_&shy;rel</span>;</li><li id='fences-5.5'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#fences-5.5'>(5.5)</a></div>is a sequentially consistent acquire and release fence, if <span class='texttt'>order <span class='operator'>=</span><span class='operator'>=</span> memory_&shy;order<span class='operator'>&#x200b;::&#x200b;</span>seq_&shy;cst</span><a class='hidden_link' href='#fences-5.sentence-1'>.</a></li></ul></div></div></div><span class='indexparent'><a class='index' id='lib:atomic_signal_fence'></a></span><div class='itemdecl' id='fences-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#fences-itemdecl:2'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>void</span> atomic_signal_fence<span class='parenthesis'>(</span>memory_order order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='fences-6'><div class='marginalizedparent'><a class='marginalized' href='#fences-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3680'>#</a></div><div id='fences-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to <span class='texttt'>atomic_&shy;thread_&shy;fence<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span>, except that
the resulting ordering constraints are established only between a thread and a
signal handler executed in the same thread<a class='hidden_link' href='#fences-6.sentence-1'>.</a></div></div></div><div class='para' id='fences-7'><div class='marginalizedparent'><a class='marginalized' href='#fences-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/atomics.tex#L3686'>#</a></div><div id='fences-7.note-1' class='note'>[&nbsp;<a class='note_link' href='#fences-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='fences-7.sentence-1' class='sentence'><span class='texttt'>atomic_&shy;signal_&shy;fence</span> can be used to specify the order in which actions
performed by the thread become visible to the signal handler<a class='hidden_link' href='#fences-7.sentence-1'>.</a></div> <div id='fences-7.sentence-2' class='sentence'>Compiler optimizations and reorderings of loads and stores are inhibited in
the same way as with <span class='texttt'>atomic_&shy;thread_&shy;fence</span>, but the hardware fence instructions
that <span class='texttt'>atomic_&shy;thread_&shy;fence</span> would have inserted are not emitted<a class='hidden_link' href='#fences-7.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div></div></div></body></html>