<!DOCTYPE html><html lang='en'><head><title>[expr.prim.req]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.5</a> Primary expressions <a class='abbr_ref' href='expr.prim#req'>[expr.prim]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>7.5.7</a> Requires expressions <a class='abbr_ref'>[expr.prim.req]</a></h3><span class='indexparent'><a class='index' id=':expression,requires'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2475'>#</a></div><div id='1.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> provides a concise way to express
requirements on template arguments
that can be checked by <a href='basic.lookup'>name lookup</a>
or by checking properties of types and expressions<a class='hidden_link' href='#1.sentence-1'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:requires-expression' id='nt:requires-expression'>requires-expression</a><span class='ntdefcolon'>:</span>
&#9;<span class='texttt'><span class='keyword'>requires</span></span><span class='indexparent'><a class='index' id=':requires'></a></span> <a class='grammarterm' href='#nt:requirement-parameter-list'>requirement-parameter-list</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='#nt:requirement-body'>requirement-body</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requirement-parameter-list' id='nt:requirement-parameter-list'>requirement-parameter-list</a><span class='ntdefcolon'>:</span>
&#9;<span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requirement-body' id='nt:requirement-body'>requirement-body</a><span class='ntdefcolon'>:</span>
&#9;<span class='terminal'><span class='curlybracket'>{</span></span> <a class='grammarterm' href='#nt:requirement-seq'>requirement-seq</a> <span class='terminal'><span class='curlybracket'>}</span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requirement-seq' id='nt:requirement-seq'>requirement-seq</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='#nt:requirement'>requirement</a>
&#9;<a class='grammarterm' href='#nt:requirement-seq'>requirement-seq</a> <a class='grammarterm' href='#nt:requirement'>requirement</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requirement' id='nt:requirement'>requirement</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='#nt:simple-requirement'>simple-requirement</a>
&#9;<a class='grammarterm' href='#nt:type-requirement'>type-requirement</a>
&#9;<a class='grammarterm' href='#nt:compound-requirement'>compound-requirement</a>
&#9;<a class='grammarterm' href='#nt:nested-requirement'>nested-requirement</a>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2510'>#</a></div><div id='2.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> is a prvalue of type <span class='texttt'><span class='keyword'>bool</span></span>
whose value is described below<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Expressions appearing within a <a class='grammarterm' href='#nt:requirement-body'>requirement-body</a>
are <a href='expr.prop#def:unevaluated_operand'>unevaluated operands</a><a class='hidden_link' href='#2.sentence-2'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2516'>#</a></div><div id='3.example-1' class='example'>[&nbsp;<a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='3.sentence-1' class='sentence'>A common use of <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a>s is to define
requirements in concepts such as the one below:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>concept</span> R <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>typename</span> T<span class='operator'>::</span>type;
    <span class='curlybracket'>{</span><span class='operator'>*</span>i<span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span>convertible_to<span class='indexparent'><a class='index' id=':convertible_to'></a></span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>type<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>;
  <span class='curlybracket'>}</span>;
</pre></div> <div id='3.sentence-2' class='sentence'>
A <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> can also be used in a
<a class='grammarterm' href='temp.pre#nt:requires-clause'>requires-clause</a> as a way of writing ad hoc
constraints on template arguments such as the one below:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> x <span class='operator'>+</span> x; <span class='curlybracket'>}</span>
    T add<span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a <span class='operator'>+</span> b; <span class='curlybracket'>}</span>
</pre></div> <div id='3.sentence-3' class='sentence'>
The first <span class='texttt'><span class='keyword'>requires</span></span> introduces the
<a class='grammarterm' href='temp.pre#nt:requires-clause'>requires-clause</a>, and the second
introduces the <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a><a class='hidden_link' href='#3.sentence-3'>.</a></div> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2540'>#</a></div><div id='4.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> may introduce local parameters using a
<a class='grammarterm' href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>A local parameter of a <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> shall not have a
default argument<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>Each name introduced by a local parameter is in scope from the point
of its declaration until the closing brace of the
<a class='grammarterm' href='#nt:requirement-body'>requirement-body</a><a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>These parameters have no linkage, storage, or lifetime; they are only used
as notation for the purpose of defining <a class='grammarterm' href='#nt:requirement'>requirement</a>s<a class='hidden_link' href='#4.sentence-4'>.</a></div> <div id='4.sentence-5' class='sentence'>The <a class='grammarterm' href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a> of a
<a class='grammarterm' href='#nt:requirement-parameter-list'>requirement-parameter-list</a>
shall not terminate with an ellipsis<a class='hidden_link' href='#4.sentence-5'>.</a></div> <div id='4.example-1' class='example'>[&nbsp;<a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T t, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>    <span class='comment'>// error: terminates with an ellipsis</span>
  t;
<span class='curlybracket'>}</span>;
</pre> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2562'>#</a></div><div id='5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':requirement'></a></span>The <a class='grammarterm' href='#nt:requirement-body'>requirement-body</a> contains
a sequence of <a class='grammarterm' href='#nt:requirement'>requirement</a>s<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>These <a class='grammarterm' href='#nt:requirement'>requirement</a>s may refer to local
parameters, template parameters, and any other declarations visible from the
enclosing context<a class='hidden_link' href='#5.sentence-2'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2570'>#</a></div><div id='6.sentence-1' class='sentence'>The substitution of template arguments into a <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a>
may result in the formation of invalid types or expressions in its
<a class='grammarterm' href='#nt:requirement'>requirement</a>s or the violation of the semantic constraints of those <a class='grammarterm' href='#nt:requirement'>requirement</a>s<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>In such cases, the <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> evaluates to <span class='texttt'><span class='literal'>false</span></span>;
it does not cause the program to be ill-formed<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>The substitution and semantic constraint checking
proceeds in lexical order and stops when a condition that
determines the result of the <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> is encountered<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>If substitution (if any) and semantic constraint checking succeed,
the <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> evaluates to <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#6.sentence-4'>.</a></div> <div id='6.note-1' class='note'>[&nbsp;<a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-5' class='sentence'>If a <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> contains invalid types or expressions in
its <a class='grammarterm' href='#nt:requirement'>requirement</a>s, and it does not appear within the declaration of a templated
entity, then the program is ill-formed<a class='hidden_link' href='#6.sentence-5'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='6.sentence-6' class='sentence'>
If the substitution of template arguments into a <a class='grammarterm' href='#nt:requirement'>requirement</a>
would always result in a substitution failure, the program is ill-formed;
no diagnostic required<a class='hidden_link' href='#6.sentence-6'>.</a></div> <div id='6.example-1' class='example'>[&nbsp;<a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span>
<span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='keyword'>new</span> <span class='keyword'>int</span><span class='squarebracket'>[</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='squarebracket'>]</span>;     <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>;
</pre> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div id='simple' class='section'><h4 ><a class='secnum' href='#simple' style='min-width:118pt'>7.5.7.1</a> Simple requirements <a class='abbr_ref' href='expr.prim.req.simple'>[expr.prim.req.simple]</a></h4><span class='indexparent'><a class='index' id=':requirement,simple'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:simple-requirement' id='nt:simple-requirement'>simple-requirement</a><span class='ntdefcolon'>:</span>
&#9;<a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'>;</span>
</pre><div class='para' id='simple-1'><div class='marginalizedparent'><a class='marginalized' href='#simple-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2606'>#</a></div><div id='simple-1.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:simple-requirement'>simple-requirement</a> asserts
the validity of an <a class='grammarterm' href='expr.comma#nt:expression'>expression</a><a class='hidden_link' href='#simple-1.sentence-1'>.</a></div> <div id='simple-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#simple-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='simple-1.sentence-2' class='sentence'>The enclosing <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> will evaluate to <span class='texttt'><span class='literal'>false</span></span>
if substitution of template arguments into the <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> fails<a class='hidden_link' href='#simple-1.sentence-2'>.</a></div> <div id='simple-1.sentence-3' class='sentence'>The <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> is an <a href='expr.prop#def:unevaluated_operand'>unevaluated operand</a><a class='hidden_link' href='#simple-1.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='simple-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#simple-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span>
  <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    a <span class='operator'>+</span> b;          <span class='comment'>// <span class='tcode_in_codeblock'>C&lt;T&gt;</span> is <span class='tcode_in_codeblock'>true</span> if <span class='tcode_in_codeblock'>a + b</span> is a valid expression</span>
  <span class='curlybracket'>}</span>;
</pre> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='simple-2'><div class='marginalizedparent'><a class='marginalized' href='#simple-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2623'>#</a></div><div id='simple-2.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:requirement'>requirement</a> that starts with a <span class='texttt'><span class='keyword'>requires</span></span><span class='indexparent'><a class='index' id=':requires_'></a></span> token
is never interpreted as a <a class='grammarterm' href='#nt:simple-requirement'>simple-requirement</a><a class='hidden_link' href='#simple-2.sentence-1'>.</a></div> <div id='simple-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#simple-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='simple-2.sentence-2' class='sentence'>This simplifies distinguishing between a <a class='grammarterm' href='#nt:simple-requirement'>simple-requirement</a>
and a <a class='grammarterm' href='#nt:nested-requirement'>nested-requirement</a><a class='hidden_link' href='#simple-2.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='type' class='section'><h4 ><a class='secnum' href='#type' style='min-width:118pt'>7.5.7.2</a> Type requirements <a class='abbr_ref' href='expr.prim.req.type'>[expr.prim.req.type]</a></h4><span class='indexparent'><a class='index' id=':requirement,type'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:type-requirement' id='nt:type-requirement'>type-requirement</a><span class='ntdefcolon'>:</span>
&#9;<span class='texttt'><span class='keyword'>typename</span></span><span class='indexparent'><a class='index' id=':typename'></a></span> <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a> <span class='terminal'>;</span>
</pre><div class='para' id='type-1'><div class='marginalizedparent'><a class='marginalized' href='#type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2639'>#</a></div><div id='type-1.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:type-requirement'>type-requirement</a> asserts the validity of a type<a class='hidden_link' href='#type-1.sentence-1'>.</a></div> <div id='type-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#type-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='type-1.sentence-2' class='sentence'>The enclosing <a class='grammarterm' href='#nt:requires-expression'>requires-expression</a> will evaluate to <span class='texttt'><span class='literal'>false</span></span>
if substitution of template arguments fails<a class='hidden_link' href='#type-1.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='type-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#type-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> T<span class='operator'>::</span>type <span class='operator'>=</span> <span class='literal'>0</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> Ref <span class='operator'>=</span> T<span class='operator'>&amp;</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='operator'>::</span>inner;    <span class='comment'>// required nested member name</span>
  <span class='keyword'>typename</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;        <span class='comment'>// required class template specialization</span>
  <span class='keyword'>typename</span> Ref<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;      <span class='comment'>// required alias template substitution, fails if <span class='tcode_in_codeblock'>T</span> is void</span>
<span class='curlybracket'>}</span>;
</pre> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='type-2'><div class='marginalizedparent'><a class='marginalized' href='#type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2658'>#</a></div><div id='type-2.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:type-requirement'>type-requirement</a> that names a class template specialization
does not require that type to be complete (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#type-2.sentence-1'>.</a></div></div></div><div id='compound' class='section'><h4 ><a class='secnum' href='#compound' style='min-width:118pt'>7.5.7.3</a> Compound requirements <a class='abbr_ref' href='expr.prim.req.compound'>[expr.prim.req.compound]</a></h4><span class='indexparent'><a class='index' id=':requirement,compound'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:compound-requirement' id='nt:compound-requirement'>compound-requirement</a><span class='ntdefcolon'>:</span>
&#9;<span class='terminal'><span class='curlybracket'>{</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='curlybracket'>}</span></span> <span class='texttt'><span class='keyword'>noexcept</span></span><span class='indexparent'><a class='index' id=':noexcept'></a></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='#nt:return-type-requirement'>return-type-requirement</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>;</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:return-type-requirement' id='nt:return-type-requirement'>return-type-requirement</a><span class='ntdefcolon'>:</span>
&#9;<span class='terminal'><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span> <a class='grammarterm' href='temp.param#nt:type-constraint'>type-constraint</a>
</pre><div class='para' id='compound-1'><div class='marginalizedparent'><a class='marginalized' href='#compound-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2675'>#</a></div><div id='compound-1.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:compound-requirement'>compound-requirement</a> asserts properties
of the <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#compound-1.sentence-1'>.</a></div> <div id='compound-1.sentence-2' class='sentence'>Substitution
of template arguments (if any) and verification of
semantic properties proceed in the following order:</div><ul class='itemize'><li id='compound-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#compound-1.1'>(1.1)</a></div><div id='compound-1.1.sentence-1' class='sentence'>Substitution of template arguments (if any)
into the <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> is performed<a class='hidden_link' href='#compound-1.1.sentence-1'>.</a></div></li><li id='compound-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#compound-1.2'>(1.2)</a></div><div id='compound-1.2.sentence-1' class='sentence'>If the <span class='texttt'><span class='keyword'>noexcept</span></span> specifier is present,
<span class='math'><span class='mathalpha'>E</span></span> shall not be a potentially-throwing expression (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#compound-1.2.sentence-1'>.</a></div></li><li id='compound-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#compound-1.3'>(1.3)</a></div><div id='compound-1.3.sentence-1' class='sentence'>If the <a class='grammarterm' href='#nt:return-type-requirement'>return-type-requirement</a> is present, then:</div><ul class='itemize'><li id='compound-1.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#compound-1.3.1'>(1.3.1)</a></div><div id='compound-1.3.1.sentence-1' class='sentence'>Substitution of template arguments (if any)
into the <a class='grammarterm' href='#nt:return-type-requirement'>return-type-requirement</a> is performed<a class='hidden_link' href='#compound-1.3.1.sentence-1'>.</a></div></li><li id='compound-1.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#compound-1.3.2'>(1.3.2)</a></div><div id='compound-1.3.2.sentence-1' class='sentence'>The immediately-declared constraint (<a href='temp.param'>[temp.param]</a>)
of the <a class='grammarterm' href='temp.param#nt:type-constraint'>type-constraint</a> for <span class='texttt'><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
shall be satisfied<a class='hidden_link' href='#compound-1.3.2.sentence-1'>.</a></div> <div id='compound-1.3.2.example-1' class='example'>[&nbsp;<a class='example_link' href='#compound-1.3.2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='compound-1.3.2.sentence-2' class='sentence'>Given concepts <span class='texttt'>C</span> and <span class='texttt'>D</span>,
<pre class='codeblock'>
<span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> E1 <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> C;
  <span class='curlybracket'>{</span> E2 <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> D<span class='anglebracket'>&lt;</span>A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>â‹¯</span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</pre>
is equivalent to
<pre class='codeblock'>
<span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  E1; <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E1<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>;
  E2; <span class='keyword'>requires</span> D<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E2<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>â‹¯</span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</pre>
(including in the case where <span class='math'><span class='mathalpha'>n</span></span> is zero)<a class='hidden_link' href='#compound-1.3.2.sentence-2'>.</a></div> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </li></ul></li></ul></div><div class='para' id='compound-2'><div class='marginalizedparent'><a class='marginalized' href='#compound-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2722'>#</a></div><div id='compound-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#compound-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span>x<span class='operator'>+</span><span class='operator'>+</span><span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
</pre> <div id='compound-2.sentence-1' class='sentence'>
The <a class='grammarterm' href='#nt:compound-requirement'>compound-requirement</a> in <span class='texttt'>C1</span>
requires that <span class='texttt'>x<span class='operator'>+</span><span class='operator'>+</span></span> is a valid expression<a class='hidden_link' href='#compound-2.sentence-1'>.</a></div> <div id='compound-2.sentence-2' class='sentence'>It is equivalent to the <a class='grammarterm' href='#nt:simple-requirement'>simple-requirement</a>
<span class='texttt'>x<span class='operator'>+</span><span class='operator'>+</span>;</span><a class='hidden_link' href='#compound-2.sentence-2'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span><span class='operator'>*</span>x<span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span>same_as<span class='indexparent'><a class='index' id=':same_as'></a></span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='operator'>::</span>inner<span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</pre><div id='compound-2.sentence-3' class='sentence'>The <a class='grammarterm' href='#nt:compound-requirement'>compound-requirement</a> in <span class='texttt'>C2</span>
requires that <span class='texttt'><span class='operator'>*</span>x</span> is a valid expression,
that <span class='texttt'><span class='keyword'>typename</span> T<span class='operator'>&#x200b;::&#x200b;</span>inner</span> is a valid type, and
that <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span><span class='texttt'>same_&shy;as</span><span class='indexparent'><a class='index' id=':same_as_'></a></span><span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='operator'>*</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, <span class='keyword'>typename</span> T<span class='operator'>&#x200b;::&#x200b;</span>inner<span class='anglebracket'>&gt;</span></span> is satisfied<a class='hidden_link' href='#compound-2.sentence-3'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C3 <span class='operator'>=</span>
  <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='curlybracket'>{</span>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='curlybracket'>}</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
</pre><div id='compound-2.sentence-4' class='sentence'>The <a class='grammarterm' href='#nt:compound-requirement'>compound-requirement</a> in <span class='texttt'>C3</span>
requires that <span class='texttt'>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> is a valid expression and
that <span class='texttt'>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> is non-throwing<a class='hidden_link' href='#compound-2.sentence-4'>.</a></div> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='nested' class='section'><h4 ><a class='secnum' href='#nested' style='min-width:118pt'>7.5.7.4</a> Nested requirements <a class='abbr_ref' href='expr.prim.req.nested'>[expr.prim.req.nested]</a></h4><span class='indexparent'><a class='index' id=':requirement,nested'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:nested-requirement' id='nt:nested-requirement'>nested-requirement</a><span class='ntdefcolon'>:</span>
&#9;<span class='texttt'><span class='keyword'>requires</span></span><span class='indexparent'><a class='index' id=':requires__'></a></span> <a class='grammarterm' href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a> <span class='terminal'>;</span>
</pre><div class='para' id='nested-1'><div class='marginalizedparent'><a class='marginalized' href='#nested-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2765'>#</a></div><div id='nested-1.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:nested-requirement'>nested-requirement</a> can be used
to specify additional constraints in terms of local parameters<a class='hidden_link' href='#nested-1.sentence-1'>.</a></div> <div id='nested-1.sentence-2' class='sentence'>The <a class='grammarterm' href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a>
shall be satisfied (<a href='temp.constr.decl'>[temp.constr.decl]</a>)
by the substituted template arguments, if any<a class='hidden_link' href='#nested-1.sentence-2'>.</a></div> <div id='nested-1.sentence-3' class='sentence'>Substitution of template arguments into a <a class='grammarterm' href='#nt:nested-requirement'>nested-requirement</a>
does not result in substitution into the <a class='grammarterm' href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a>
other than as specified in <a href='temp.constr.constr'>[temp.constr.constr]</a><a class='hidden_link' href='#nested-1.sentence-3'>.</a></div> <div id='nested-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#nested-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='nested-1.sentence-4' class='sentence'><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span> <span class='parenthesis'>(</span><span class='operator'>+</span>t<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</pre>
<span class='texttt'>D<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is satisfied if <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>decltype</span> <span class='parenthesis'>(</span><span class='operator'>+</span>t<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span> (<a href='temp.constr.atomic'>[temp.constr.atomic]</a>)<a class='hidden_link' href='#nested-1.sentence-4'>.</a></div> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='nested-2'><div class='marginalizedparent'><a class='marginalized' href='#nested-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/expressions.tex#L2785'>#</a></div><div id='nested-2.sentence-1' class='sentence'>A local parameter shall only appear as an <a href='expr.prop#def:unevaluated_operand'>unevaluated operand</a>
within the <a class='grammarterm' href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a><a class='hidden_link' href='#nested-2.sentence-1'>.</a></div> <div id='nested-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#nested-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>requires</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>4</span>;      <span class='comment'>// OK</span>
  <span class='keyword'>requires</span> a <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span>;              <span class='comment'>// error: evaluation of a constraint variable</span>
<span class='curlybracket'>}</span>;
</pre> â€”&nbsp;<i>end example</i></div>&nbsp;]</div>  
</div></div></div></body></html>