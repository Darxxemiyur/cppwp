<!DOCTYPE html><html lang='en'><head><title>[concept.swappable]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>18</a> Concepts library <a class='abbr_ref' href='./#concepts'>[concepts]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>18.4</a> Language-related concepts <a class='abbr_ref' href='concepts.lang#concept.swappable'>[concepts.lang]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>18.4.9</a> Concept <span class='texttt'>swappable</span> <a class='abbr_ref'>[concept.swappable]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/concepts.tex#L567'>#</a></div><div id='1.sentence-1' class='sentence'>Let <span class='texttt'>t1</span> and <span class='texttt'>t2</span> be equality-preserving expressions that denote
distinct equal objects of type <span class='texttt'>T</span>, and let <span class='texttt'>u1</span> and <span class='texttt'>u2</span>
similarly denote distinct equal objects of type <span class='texttt'>U</span><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.note-1' class='note'>[&nbsp;<a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-2' class='sentence'><span class='texttt'>t1</span> and <span class='texttt'>u1</span> can denote distinct objects, or the same object<a class='hidden_link' href='#1.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='1.sentence-3' class='sentence'>
An operation
<a class='hidden_link' href='#def:exchanges_the_values' id='def:exchanges_the_values'><i>exchanges the values</i></a> denoted by <span class='texttt'>t1</span> and <span class='texttt'>u1</span> if and only
if the operation modifies neither <span class='texttt'>t2</span> nor <span class='texttt'>u2</span> and:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div>If <span class='texttt'>T</span> and <span class='texttt'>U</span> are the same type, the result of the operation
  is that <span class='texttt'>t1</span> equals <span class='texttt'>u2</span> and <span class='texttt'>u1</span> equals <span class='texttt'>t2</span>.</li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div>If <span class='texttt'>T</span> and <span class='texttt'>U</span> are different types and
  <span class='texttt'><span class='texttt'>common_&shy;reference_&shy;with</span><span class='indexparent'><a class='index' id=':common_reference_with'></a></span><span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>t1<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>u1<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span></span>
  is modeled,
  the result of the operation is that
  <span class='texttt'>C<span class='parenthesis'>(</span>t1<span class='parenthesis'>)</span></span> equals <span class='texttt'>C<span class='parenthesis'>(</span>u2<span class='parenthesis'>)</span></span>
  and
  <span class='texttt'>C<span class='parenthesis'>(</span>u1<span class='parenthesis'>)</span></span> equals <span class='texttt'>C<span class='parenthesis'>(</span>t2<span class='parenthesis'>)</span></span>
  where <span class='texttt'>C</span> is <span class='texttt'>common_&shy;reference_&shy;t<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>t1<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>u1<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span></span>.</li></ul></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/concepts.tex#L591'>#</a></div><div id='2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:swap'></a></span>The name <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap</span> denotes a customization point
object (<a href='customization.point.object'>[customization.point.object]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The expression
<span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap<span class='parenthesis'>(</span>E1, E2<span class='parenthesis'>)</span></span> for subexpressions <span class='texttt'>E1</span>
and <span class='texttt'>E2</span> is expression-equivalent to an expression
<span class='texttt'>S</span> determined as follows:</div><ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><div id='2.1.sentence-1' class='sentence'><span class='texttt'>S</span> is <span class='texttt'><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='parenthesis'>)</span>swap<span class='parenthesis'>(</span>E1, E2<span class='parenthesis'>)</span></span><a class='footnotenum' href='#footnote-218' id='footnoteref-218'>218</a> if <span class='texttt'>E1</span> or <span class='texttt'>E2</span>
  has class or enumeration type (<a href='basic.compound'>[basic.compound]</a>) and that expression is valid, with
  overload resolution performed in a context that includes the declaration
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
</pre>
  and does not include a declaration of <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap</span><a class='hidden_link' href='#2.1.sentence-1'>.</a></div> <div id='2.1.sentence-2' class='sentence'>If the function selected by overload resolution does not
  exchange the values denoted by
  <span class='texttt'>E1</span> and <span class='texttt'>E2</span>,
  the program is ill-formed, no diagnostic required<a class='hidden_link' href='#2.1.sentence-2'>.</a></div></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><div id='2.2.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>E1</span> and <span class='texttt'>E2</span>
  are lvalues of array types (<a href='basic.compound'>[basic.compound]</a>)
  with equal extent and <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span>E1, <span class='operator'>*</span>E2<span class='parenthesis'>)</span></span>
  is a valid expression,
  <span class='texttt'>S</span> is <span class='texttt'><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='parenthesis'>)</span>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap_&shy;ranges<span class='parenthesis'>(</span>E1, E2<span class='parenthesis'>)</span></span>,
  except that
  <span class='texttt'><span class='keyword'>noexcept</span><span class='parenthesis'>(</span>S<span class='parenthesis'>)</span></span> is equal to
  <span class='texttt'><span class='keyword'>noexcept</span><span class='parenthesis'>(</span>&#x200b;ranges<span class='operator'>&#x200b;::&#x200b;</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span>E1, <span class='operator'>*</span>E2<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#2.2.sentence-1'>.</a></div></li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div><div id='2.3.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>E1</span> and <span class='texttt'>E2</span> are lvalues of the
  same type <span class='texttt'>T</span> that models <span class='texttt'><span class='texttt'>move_&shy;constructible</span><span class='indexparent'><a class='index' id=':move_constructible'></a></span><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> and
  <span class='texttt'><span class='texttt'>assignable_&shy;from</span><span class='indexparent'><a class='index' id=':assignable_from'></a></span><span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, T<span class='anglebracket'>&gt;</span></span>,
  <span class='texttt'>S</span> is an expression that exchanges the denoted values<a class='hidden_link' href='#2.3.sentence-1'>.</a></div> <div id='2.3.sentence-2' class='sentence'><span class='texttt'>S</span> is a constant expression if
  <ul class='itemize'><li id='2.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.3.1'>(2.3.1)</a></div><span class='texttt'>T</span> is a literal type (<a href='basic.types'>[basic.types]</a>),</li><li id='2.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.3.2'>(2.3.2)</a></div>both <span class='texttt'>E1 <span class='operator'>=</span> std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>E2<span class='parenthesis'>)</span></span> and <span class='texttt'>E2 <span class='operator'>=</span> std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>E1<span class='parenthesis'>)</span></span> are
    constant subexpressions (<a href='defns.const.subexpr'>[defns.const.subexpr]</a>), and</li><li id='2.3.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.3.3'>(2.3.3)</a></div>the full-expressions of the initializers in the declarations
<pre class='codeblock'>
T t1<span class='parenthesis'>(</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>E1<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
T t2<span class='parenthesis'>(</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>E2<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre>
are constant subexpressions.</li></ul>
  <span class='texttt'><span class='keyword'>noexcept</span><span class='parenthesis'>(</span>S<span class='parenthesis'>)</span></span> is equal to
  <span class='texttt'>is_&shy;nothrow_&shy;move_&shy;constructible_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> is_&shy;nothrow_&shy;move_&shy;assignable_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#2.3.sentence-2'>.</a></div></li><li id='2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.4'>(2.4)</a></div><div id='2.4.sentence-1' class='sentence'>Otherwise, <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap<span class='parenthesis'>(</span>E1, E2<span class='parenthesis'>)</span></span> is ill-formed<a class='hidden_link' href='#2.4.sentence-1'>.</a></div> <div id='2.4.note-1' class='note'>[&nbsp;<a class='note_link' href='#2.4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.4.sentence-2' class='sentence'>This case can result in substitution failure when <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap<span class='parenthesis'>(</span>E1, E2<span class='parenthesis'>)</span></span>
  appears in the immediate context of a template instantiation<a class='hidden_link' href='#2.4.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </li></ul></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/concepts.tex#L653'>#</a></div><div id='3.note-1' class='note'>[&nbsp;<a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-1' class='sentence'>Whenever <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap<span class='parenthesis'>(</span>E1, E2<span class='parenthesis'>)</span></span> is a valid expression, it
exchanges the values denoted by
<span class='texttt'>E1</span> and <span class='texttt'>E2</span> and has type <span class='texttt'><span class='keyword'>void</span></span><a class='hidden_link' href='#3.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='itemdecl' id='itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>concept</span> <span class='texttt'>swappable</span><span class='indexparent'><a class='index' id='lib:swappable'></a></span><span class='indexparent'><a class='index' id=':swappable'></a></span> <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> a, T<span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> ranges<span class='operator'>::</span>swap<span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
</code></div><div class='itemdecl' id='itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  <span class='keyword'>concept</span> <span class='texttt'>swappable_&shy;with</span><span class='indexparent'><a class='index' id='lib:swappable_with'></a></span><span class='indexparent'><a class='index' id=':swappable_with'></a></span> <span class='operator'>=</span>
    common_reference_with<span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>
    <span class='keyword'>requires</span><span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> t, U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      ranges<span class='operator'>::</span>swap<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>t<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
      ranges<span class='operator'>::</span>swap<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
      ranges<span class='operator'>::</span>swap<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
      ranges<span class='operator'>::</span>swap<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>t<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
    <span class='curlybracket'>}</span>;
</code></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/concepts.tex#L677'>#</a></div><div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-1' class='sentence'>The semantics of the <span class='texttt'>swappable</span><span class='indexparent'><a class='index' id=':swappable'></a></span> and <span class='texttt'>swappable_&shy;with</span><span class='indexparent'><a class='index' id=':swappable_with'></a></span>
concepts are fully defined by the <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>swap</span> customization point object<a class='hidden_link' href='#4.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3a3350ee86fb2dbc86752af66d56102d237d8c4f/source/concepts.tex#L683'>#</a></div><div id='5.example-1' class='example'>[&nbsp;<a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='5.sentence-1' class='sentence'>User code can ensure that the evaluation of <span class='texttt'>swap</span> calls
is performed in an appropriate context under the various conditions as follows:
<pre class='codeblock'>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>cassert<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>concepts<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>utility<span class='anglebracket'>&gt;</span>

<span class='keyword'>namespace</span> ranges <span class='operator'>=</span> std<span class='operator'>::</span>ranges;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, std<span class='operator'>::</span>swappable_with<span class='indexparent'><a class='index' id=':swappable_with_'></a></span><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> U<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> value_swap<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> t, U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  ranges<span class='operator'>::</span>swap<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>swappable T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> lv_swap<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> t1, T<span class='operator'>&amp;</span> t2<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  ranges<span class='operator'>::</span>swap<span class='parenthesis'>(</span>t1, t2<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> m; <span class='curlybracket'>}</span>;
  <span class='keyword'>struct</span> Proxy <span class='curlybracket'>{</span>
    A<span class='operator'>*</span> a;
    Proxy<span class='parenthesis'>(</span>A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span> <span class='operator'>:</span> a<span class='curlybracket'>{</span><span class='operator'>&amp;</span>a<span class='curlybracket'>}</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>friend</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>Proxy x, Proxy y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      ranges<span class='operator'>::</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span>x<span class='operator'>.</span>a, <span class='operator'>*</span>y<span class='operator'>.</span>a<span class='parenthesis'>)</span>;
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;
  Proxy proxy<span class='parenthesis'>(</span>A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> Proxy<span class='curlybracket'>{</span> a <span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>1</span>, j <span class='operator'>=</span> <span class='literal'>2</span>;
  lv_swap<span class='parenthesis'>(</span>i, j<span class='parenthesis'>)</span>;
  assert<span class='parenthesis'>(</span>i <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>2</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> j <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span>;

  N<span class='operator'>::</span>A a1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>5</span> <span class='curlybracket'>}</span>, a2 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='operator'>-</span><span class='literal'>5</span> <span class='curlybracket'>}</span>;
  value_swap<span class='parenthesis'>(</span>a1, proxy<span class='parenthesis'>(</span>a2<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  assert<span class='parenthesis'>(</span>a1<span class='operator'>.</span>m <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>-</span><span class='literal'>5</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> a2<span class='operator'>.</span>m <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>5</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre></div> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-218'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-218'>218)</a></div><div id='footnote-218.sentence-1' class='sentence'>The name <span class='texttt'>swap</span> is used
  here unqualified<a class='hidden_link' href='#footnote-218.sentence-1'>.</a></div> <a href='#footnoteref-218'>â®¥</a></div></div></body></html>