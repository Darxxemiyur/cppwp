<!DOCTYPE html><html lang='en'><head><title>[fs.path.gen]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>29</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>29.11</a> File systems <a class='abbr_ref' href='filesystems#fs.path.gen'>[filesystems]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>29.11.7</a> Class <span class='texttt'>path</span> <a class='abbr_ref' href='fs.class.path#fs.path.gen'>[fs.class.path]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>29.11.7.4</a> Members <a class='abbr_ref' href='fs.path.member#fs.path.gen'>[fs.path.member]</a></h4><h4 ><a class='secnum' style='min-width:133pt'>29.11.7.4.11</a> Generation <a class='abbr_ref'>[fs.path.gen]</a></h4><span class='indexparent'><a class='index' id='lib:lexically_normal,path'></a></span><span class='indexparent'><a class='index' id='lib:path,lexically_normal'></a></span><div class='itemdecl' id='itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>path lexically_normal<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13264'>#</a></div><div id='1.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
A path whose pathname in the generic format is
the normal form (<a href='fs.path.generic'>[fs.path.generic]</a>) of the pathname
in the generic format of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13270'>#</a></div><div id='2.example-1' class='example'>[&nbsp;<a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
assert<span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>"foo/./bar/.."</span><span class='parenthesis'>)</span><span class='operator'>.</span>lexically_normal<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>"foo/"</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>"foo/.///bar/../"</span><span class='parenthesis'>)</span><span class='operator'>.</span>lexically_normal<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>"foo/"</span><span class='parenthesis'>)</span>;
</pre> <div id='2.sentence-1' class='sentence'>
The above assertions will succeed<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>On Windows, the returned path's <a class='grammarterm' href='fs.path.generic#nt:directory-separator'>directory-separator</a> characters
will be backslashes rather than slashes,
but that does not affect <span class='texttt'>path</span> equality<a class='hidden_link' href='#2.sentence-2'>.</a></div> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:lexically_relative,path'></a></span><span class='indexparent'><a class='index' id='lib:path,lexically_relative'></a></span><div class='itemdecl' id='itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>path lexically_relative<span class='parenthesis'>(</span><span class='keyword'>const</span> path<span class='operator'>&amp;</span> base<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div><div class='itemdescr'></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13289'>#</a></div><div id='3.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> made relative to <span class='texttt'>base</span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>Does not resolve (<a href='fs.class.path'>[fs.class.path]</a>) symlinks<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>Does not first normalize (<a href='fs.path.generic'>[fs.path.generic]</a>) <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> or <span class='texttt'>base</span><a class='hidden_link' href='#3.sentence-3'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13295'>#</a></div><div id='4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If:
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#4.1'>(4.1)</a></div><span class='texttt'>root_&shy;name<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> base<span class='operator'>.</span>root_&shy;name<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span>, or</li><li id='4.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#4.2'>(4.2)</a></div><span class='texttt'>is_&shy;absolute<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> base<span class='operator'>.</span>is_&shy;absolute<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span>, or</li><li id='4.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#4.3'>(4.3)</a></div><span class='texttt'><span class='operator'>!</span>has_&shy;root_&shy;directory<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> base<span class='operator'>.</span>has_&shy;root_&shy;directory<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span>, or</li><li id='4.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#4.4'>(4.4)</a></div>any <a class='grammarterm' href='fs.path.generic#nt:filename'>filename</a> in
<span class='texttt'>relative_&shy;path<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> or <span class='texttt'>base<span class='operator'>.</span>relative_&shy;path<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
can be interpreted as a <a class='grammarterm' href='fs.path.generic#nt:root-name'>root-name</a>,</li></ul>
returns <span class='texttt'>path<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-2' class='sentence'>On a POSIX implementation, no <a class='grammarterm' href='fs.path.generic#nt:filename'>filename</a> in a <a class='grammarterm' href='fs.path.generic#nt:relative-path'>relative-path</a> is acceptable as a <a class='grammarterm' href='fs.path.generic#nt:root-name'>root-name</a><a class='hidden_link' href='#4.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='4.sentence-3' class='sentence'>
Determines the first mismatched element of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> and <span class='texttt'>base</span>
as if by:
<pre class='codeblock'>
<span class='keyword'>auto</span> <span class='squarebracket'>[</span>a, b<span class='squarebracket'>]</span> <span class='operator'>=</span> mismatch<span class='parenthesis'>(</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, end<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, base<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, base<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</pre></div> <div id='4.sentence-4' class='sentence'>
Then,
<ul class='itemize'><li id='4.5'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#4.5'>(4.5)</a></div>if <span class='texttt'>a <span class='operator'>=</span><span class='operator'>=</span> end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and <span class='texttt'>b <span class='operator'>=</span><span class='operator'>=</span> base<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, returns <span class='texttt'>path<span class='parenthesis'>(</span><span class='literal'>"."</span><span class='parenthesis'>)</span></span>; otherwise</li><li id='4.6'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#4.6'>(4.6)</a></div>let <span class='texttt'>n</span> be the number of <a class='grammarterm' href='fs.path.generic#nt:filename'>filename</a> elements in <span class='texttt'>[</span><span class='texttt'>b, base<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><span class='texttt'>)</span>
  that are not dot or dot-dot or empty, minus the number that are dot-dot. If <span class='texttt'>n<span class='anglebracket'>&lt;</span><span class='literal'>0</span>,</span> returns <span class='texttt'>path<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>; otherwise</li><li id='4.7'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#4.7'>(4.7)</a></div>if <span class='texttt'>n <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span></span> and <span class='texttt'><span class='parenthesis'>(</span>a <span class='operator'>=</span><span class='operator'>=</span> end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>|</span><span class='operator'>|</span> a<span class='operator'>-</span><span class='anglebracket'>&gt;</span>empty<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>,
  returns <span class='texttt'>path<span class='parenthesis'>(</span><span class='literal'>"."</span><span class='parenthesis'>)</span></span>; otherwise</li><li id='4.8'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#4.8'>(4.8)</a></div>returns an object of class <span class='texttt'>path</span> that is default-constructed, followed by
<ul class='itemize'><li id='4.8.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#4.8.1'>(4.8.1)</a></div>application of <span class='texttt'><span class='keyword'>operator</span><span class='operator'>/</span><span class='operator'>=</span><span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>".."</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
  <span class='texttt'>n</span> times, and then</li><li id='4.8.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#4.8.2'>(4.8.2)</a></div>application of <span class='texttt'><span class='keyword'>operator</span><span class='operator'>/</span><span class='operator'>=</span></span>
  for each element in <span class='texttt'>[</span><span class='texttt'>a, end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><span class='texttt'>)</span>.</li></ul></li></ul></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13341'>#</a></div><div id='5.example-1' class='example'>[&nbsp;<a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
assert<span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>"/a/d"</span><span class='parenthesis'>)</span><span class='operator'>.</span>lexically_relative<span class='parenthesis'>(</span><span class='literal'>"/a/b/c"</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>"../../d"</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>"/a/b/c"</span><span class='parenthesis'>)</span><span class='operator'>.</span>lexically_relative<span class='parenthesis'>(</span><span class='literal'>"/a/d"</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>"../b/c"</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>"a/b/c"</span><span class='parenthesis'>)</span><span class='operator'>.</span>lexically_relative<span class='parenthesis'>(</span><span class='literal'>"a"</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>"b/c"</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>"a/b/c"</span><span class='parenthesis'>)</span><span class='operator'>.</span>lexically_relative<span class='parenthesis'>(</span><span class='literal'>"a/b/c/x/y"</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>"../.."</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>"a/b/c"</span><span class='parenthesis'>)</span><span class='operator'>.</span>lexically_relative<span class='parenthesis'>(</span><span class='literal'>"a/b/c"</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>"."</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>path<span class='parenthesis'>(</span><span class='literal'>"a/b"</span><span class='parenthesis'>)</span><span class='operator'>.</span>lexically_relative<span class='parenthesis'>(</span><span class='literal'>"c/d"</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>"../../a/b"</span><span class='parenthesis'>)</span>;
</pre> <div id='5.sentence-1' class='sentence'>
The above assertions will succeed<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>On Windows, the returned path's <a class='grammarterm' href='fs.path.generic#nt:directory-separator'>directory-separator</a> characters
will be backslashes rather than slashes,
but that does not affect <span class='texttt'>path</span> equality<a class='hidden_link' href='#5.sentence-2'>.</a></div> â€”&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13357'>#</a></div><div id='6.note-1' class='note'>[&nbsp;<a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-1' class='sentence'>If symlink following semantics are desired,
  use the operational function <span class='texttt'>relative<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13363'>#</a></div><div id='7.note-1' class='note'>[&nbsp;<a class='note_link' href='#7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='7.sentence-1' class='sentence'>If normalization (<a href='fs.path.generic'>[fs.path.generic]</a>) is needed
  to ensure consistent matching of elements,
  apply <span class='texttt'>lexically_&shy;normal<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> to
  <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>, <span class='texttt'>base</span>, or both<a class='hidden_link' href='#7.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:lexically_proximate,path'></a></span><span class='indexparent'><a class='index' id='lib:path,lexically_proximate'></a></span><div class='itemdecl' id='itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>path lexically_proximate<span class='parenthesis'>(</span><span class='keyword'>const</span> path<span class='operator'>&amp;</span> base<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div><div class='itemdescr'></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13378'>#</a></div><div id='8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
If the value of <span class='texttt'>lexically_&shy;relative<span class='parenthesis'>(</span>base<span class='parenthesis'>)</span></span> is not an empty path,
  return it<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>Otherwise return <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#8.sentence-2'>.</a></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13383'>#</a></div><div id='9.note-1' class='note'>[&nbsp;<a class='note_link' href='#9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='9.sentence-1' class='sentence'>If symlink following semantics are desired,
  use the operational function <span class='texttt'>proximate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#9.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0869f240e1b791a7c040d64ea44c435bfb67a237/source/iostreams.tex#L13389'>#</a></div><div id='10.note-1' class='note'>[&nbsp;<a class='note_link' href='#10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-1' class='sentence'>If normalization (<a href='fs.path.generic'>[fs.path.generic]</a>) is needed
  to ensure consistent matching of elements,
  apply <span class='texttt'>lexically_&shy;normal<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> to
  <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>, <span class='texttt'>base</span>, or both<a class='hidden_link' href='#10.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div></div></body></html>