<!DOCTYPE html><html lang='en'><head><title>[basic.link]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.6</a> Program and linkage <a class='abbr_ref'>[basic.link]</a></h2><span class='indexparent'><a class='index' id=':linkage'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2617'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':program'></a></span>A <a class='hidden_link' href='#def:program' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:program'><span class='textit'>program</span></span></a> consists of one or more <a href='lex.separate#def:translation_unit' title='5.1&emsp;Separate translation&emsp;[lex.separate]'>translation units</a>
linked together<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A translation unit consists
of a sequence of declarations<a class='hidden_link' href='#1.sentence-2'>.</a></div><div class='bnf' id='nt:translation-unit'>
<a class='hidden_link' href='#nt:translation-unit' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='nt:translation-unit'><span id=':translation-unit'>translation-unit<span class='textnormal'>:</span></span></span></a><br/><a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq'><span class='textsf'><span class='textit'>declaration-seq</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><a href='module.global.frag#nt:global-module-fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='ntref:global-module-fragment'><span class='textsf'><span class='textit'>global-module-fragment</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='module.unit#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration'><span class='textsf'><span class='textit'>module-declaration</span></span></span></a> <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq_'><span class='textsf'><span class='textit'>declaration-seq</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment'><span class='textsf'><span class='textit'>private-module-fragment</span></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2629'>#</a></div><div id='2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':translation_unit'></a></span>A name is said to have <a class='hidden_link' href='#def:linkage' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:linkage'><span class='textit'>linkage</span></span></a> when it might denote the same
object, reference, function, type, template, namespace or value as a
name introduced by a declaration in another scope:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><div id='2.1.sentence-1' class='sentence'>When a name has <a class='hidden_link' href='#def:linkage,external' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:linkage,external'><span class='textit'>external linkage</span></span></a>,
the entity it denotes
can be referred to by names from scopes of other translation units or
from other scopes of the same translation unit<a class='hidden_link' href='#2.1.sentence-1'>.</a></div></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><div id='2.2.sentence-1' class='sentence'>When a name has <a class='hidden_link' href='#def:linkage,module' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:linkage,module'><span class='textit'>module linkage</span></span></a>,
the entity it denotes
can be referred to by names from other scopes of the same <a href='module.unit#def:module_unit' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'>module unit</a> or
from scopes of other module units of that same module<a class='hidden_link' href='#2.2.sentence-1'>.</a></div></li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div><div id='2.3.sentence-1' class='sentence'>When a name has <a class='hidden_link' href='#def:linkage,internal' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:linkage,internal'><span class='textit'>internal linkage</span></span></a>,
the entity it denotes
can be referred to by names from other scopes in the same translation
unit<a class='hidden_link' href='#2.3.sentence-1'>.</a></div></li><li id='2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.4'>(2.4)</a></div><div id='2.4.sentence-1' class='sentence'>When a name has <span class='indexparent'><a class='index' id=':linkage,no'></a></span><a class='hidden_link' href='#def:no_linkage' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:no_linkage'><span class='textit'>no linkage</span></span></a>, the entity it denotes
cannot be referred to by names from other scopes<a class='hidden_link' href='#2.4.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2654'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':linkage,static_and'></a></span><span class='indexparent'><a class='index' id=':static,linkage_of'></a></span><span class='indexparent'><a class='index' id=':linkage,const_and'></a></span><span class='indexparent'><a class='index' id=':const,linkage_of'></a></span><span class='indexparent'><a class='index' id=':linkage,inline_and'></a></span><span class='indexparent'><a class='index' id=':inline,linkage_of'></a></span>A name having <a href='basic.scope.namespace' title='6.4.6&emsp;Namespace scope&emsp;[basic.scope.namespace]'>namespace scope</a> has internal
linkage if it is the name of
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div>a variable, variable template, function, or function template that is
  explicitly declared <span class='texttt'><span class='keyword'>static</span></span>; or</li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div>a non-template variable of non-volatile const-qualified type, unless
  <ul class='itemize'><li id='3.2.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#3.2.1'>(3.2.1)</a></div>it is explicitly declared <span class='texttt'><span class='keyword'>extern</span></span>, or</li><li id='3.2.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#3.2.2'>(3.2.2)</a></div>it is inline or exported, or</li><li id='3.2.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#3.2.3'>(3.2.3)</a></div>it was previously declared and the prior declaration did
  not have internal linkage; or</li></ul></li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div>a data member of an anonymous union<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div> <div id='3.note-1' class='note'>[<a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'>An instantiated variable template that has const-qualified type
can have external or module linkage, even if not declared <span class='texttt'><span class='keyword'>extern</span></span><a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2683'>#</a></div><div id='4.sentence-1' class='sentence'>An unnamed namespace or a namespace declared directly or indirectly within an
unnamed namespace has internal linkage<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>All other namespaces have external linkage<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>A name having namespace scope
that has not been given internal linkage above
and that is the name of
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div>a variable; or</li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div>a function; or</li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div><span class='indexparent'><a class='index' id=':class,linkage_of'></a></span>a named class (<a href='class.pre' title='11.1&emsp;Preamble'>[class.<span class='shy'></span>pre]</a>), or an unnamed class defined in a
typedef declaration in which the class has the typedef name for linkage
purposes (<a href='dcl.typedef' title='9.2.3&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>); or</li><li id='4.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.4'>(4.4)</a></div><span class='indexparent'><a class='index' id=':enumeration,linkage_of'></a></span>a named <a href='dcl.enum' title='9.7.1&emsp;Enumeration declarations&emsp;[dcl.enum]'>enumeration</a>, or an unnamed enumeration defined
in a typedef declaration in which the enumeration has the typedef name
for linkage purposes (<a href='dcl.typedef' title='9.2.3&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>); or</li><li id='4.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.5'>(4.5)</a></div>an unnamed enumeration
that has an enumerator as a name for linkage purposes (<a href='dcl.enum' title='9.7.1&emsp;Enumeration declarations'>[dcl.<span class='shy'></span>enum]</a>); or</li><li id='4.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.6'>(4.6)</a></div>a template</li></ul>
has its linkage determined as follows:
<ul class='itemize'><li id='4.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.7'>(4.7)</a></div>if the enclosing namespace has internal linkage,
the name has internal linkage;</li><li id='4.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.8'>(4.8)</a></div>otherwise,
if the declaration of the name is
attached to a named module (<a href='module.unit' title='10.1&emsp;Module units and purviews'>[module.<span class='shy'></span>unit]</a>)
and is not exported (<a href='module.interface' title='10.2&emsp;Export declaration'>[module.<span class='shy'></span>interface]</a>),
the name has module linkage;</li><li id='4.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.9'>(4.9)</a></div>otherwise,
the name has external linkage<a class='hidden_link' href='#4.sentence-3'>.</a></li></ul></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2722'>#</a></div><div id='5.sentence-1' class='sentence'>In addition, a member function, static data member, a named class or
enumeration of class scope, or an unnamed class or enumeration defined
in a class-scope typedef declaration such that the class or enumeration
has the typedef name for linkage purposes (<a href='dcl.typedef' title='9.2.3&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>), has
the same linkage, if any, as the name of the class of which it is a
member<a class='hidden_link' href='#5.sentence-1'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2730'>#</a></div><div id='6.sentence-1' class='sentence'>The name of a function declared in block scope and
the name of a variable declared by a block scope <span class='texttt'><span class='keyword'>extern</span></span> declaration
have linkage<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>If such a declaration is attached to a named module,
the program is ill-formed<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>If there is a visible declaration
of an entity with linkage, ignoring entities declared
outside the innermost enclosing namespace scope,
such that the block scope declaration would be
a (possibly ill-formed) redeclaration
if the two declarations appeared in the same declarative region,
the block scope declaration declares
that same entity and receives the linkage of the previous declaration<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>If there is more
than one such matching entity, the program is ill-formed<a class='hidden_link' href='#6.sentence-4'>.</a></div> <div id='6.sentence-5' class='sentence'>Otherwise, if no matching
entity is found, the block scope entity receives external linkage<a class='hidden_link' href='#6.sentence-5'>.</a></div> <div id='6.sentence-6' class='sentence'>If, within a translation unit, the same entity is declared with both
internal and external linkage, the program is ill-formed<a class='hidden_link' href='#6.sentence-6'>.</a></div> <div id='6.example-1' class='example'>[<a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>static</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>static</span> <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>0</span>;               <span class='comment'>// #1</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>extern</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// internal linkage</span>
  <span class='keyword'>extern</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// C language linkage</span>
  <span class='keyword'>int</span> i;                        <span class='comment'>// #2: <span class='tcode_in_codeblock'>i</span> has no linkage</span>
  <span class='curlybracket'>{</span>
    <span class='keyword'>extern</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// internal linkage</span>
    <span class='keyword'>extern</span> <span class='keyword'>int</span> i;               <span class='comment'>// #3: external linkage, ill-formed</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</pre> <div id='6.sentence-7' class='sentence'>
Without the declaration at line #2,
the declaration at line #3 would link with the declaration at line #1<a class='hidden_link' href='#6.sentence-7'>.</a></div> <div id='6.sentence-8' class='sentence'>Because the declaration with internal linkage is hidden, however,
#3 is given external linkage, making the program ill-formed<a class='hidden_link' href='#6.sentence-8'>.</a></div> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2769'>#</a></div><div id='7.sentence-1' class='sentence'>When a block scope declaration of an entity with linkage is not found to
refer to some other declaration, then that entity is a member of the
innermost enclosing namespace<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>However such a declaration does not
introduce the member name in its namespace scope<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.example-1' class='example'>[<a class='example_link' href='#7.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>namespace</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> p<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    q<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                        <span class='comment'>// error: <span class='tcode_in_codeblock'>q</span> not yet declared</span>
    <span class='keyword'>extern</span> <span class='keyword'>void</span> q<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>q</span> is a member of namespace <span class='tcode_in_codeblock'>X</span></span>
  <span class='curlybracket'>}</span>

  <span class='keyword'>void</span> middle<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    q<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                        <span class='comment'>// error: <span class='tcode_in_codeblock'>q</span> not yet declared</span>
  <span class='curlybracket'>}</span>

  <span class='keyword'>void</span> q<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>        <span class='comment'>// definition of <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;q</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> q<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>          <span class='comment'>// some other, unrelated <span class='tcode_in_codeblock'>q</span></span>
</pre> —&nbsp;<i>end example</i>]</div> </div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2793'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':linkage,no_'></a></span>Names not covered by these rules have no linkage<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>Moreover, except as
noted, a name declared at <a href='basic.scope.block#def:block_scope' title='6.4.3&emsp;Block scope&emsp;[basic.scope.block]'>block scope</a> has no
linkage<a class='hidden_link' href='#8.sentence-2'>.</a></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2799'>#</a></div><div id='9.sentence-1' class='sentence'>Two names that are the same (<a href='basic.pre' title='6.1&emsp;Preamble'>[basic.<span class='shy'></span>pre]</a>) and that are declared
in different scopes shall denote the same variable, function,
type, template or namespace if
<ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.1'>(9.1)</a></div>both names have external or module linkage
and are declared in declarations attached to the same module,
or else both names have internal linkage
and are declared in the same translation unit; and</li><li id='9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.2'>(9.2)</a></div>both names refer to members of the same namespace or to members,
not by inheritance, of the same class; and</li><li id='9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#9.3'>(9.3)</a></div>when both names denote functions or function templates,
the signatures (<a href='defns.signature' title='3.20&emsp;signature'>[defns.<span class='shy'></span>signature]</a>, <a href='defns.signature.templ' title='3.22&emsp;signature'>[defns.<span class='shy'></span>signature.<span class='shy'></span>templ]</a>)
are the same<a class='hidden_link' href='#9.sentence-1'>.</a></li></ul></div> <div id='9.sentence-2' class='sentence'>
If multiple declarations of the same name with external linkage
would declare the same entity except that
they are attached to different modules,
the program is ill-formed; no diagnostic is required<a class='hidden_link' href='#9.sentence-2'>.</a></div> <div id='9.note-1' class='note'>[<a class='note_link' href='#9.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='9.sentence-3' class='sentence'><a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><span class='textit'>using-declaration</span></span></span></a><span class='textit'>s</span>,
typedef declarations,
and <a href='dcl.pre#nt:alias-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:alias-declaration'><span class='textsf'><span class='textit'>alias-declaration</span></span></span></a><span class='textit'>s</span>
do not declare entities, but merely introduce synonyms<a class='hidden_link' href='#9.sentence-3'>.</a></div> <div id='9.sentence-4' class='sentence'>Similarly,
<a href='namespace.udir#nt:using-directive' title='9.8.3&emsp;Using namespace directive&emsp;[namespace.udir]'><span id='ntref:using-directive'><span class='textsf'><span class='textit'>using-directive</span></span></span></a><span class='textit'>s</span>
do not declare entities<a class='hidden_link' href='#9.sentence-4'>.</a></div> <div id='9.sentence-5' class='sentence'>Enumerators do not have linkage,
but may serve as the name of an enumeration with linkage (<a href='dcl.enum' title='9.7.1&emsp;Enumeration declarations'>[dcl.<span class='shy'></span>enum]</a>)<a class='hidden_link' href='#9.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2832'>#</a></div><div id='10.sentence-1' class='sentence'>If a declaration would redeclare a reachable declaration
attached to a different module, the program is ill-formed<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.example-1' class='example'>[<a class='example_link' href='#10.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <p><span class='texttt'><span class='literal'>"decls.h"</span></span>:<pre class='codeblock'>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// #1, attached to the global module</span>
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// #2, attached to the global module</span>
</pre><p>Module interface of <span class='texttt'>M</span>:<pre class='codeblock'>
<span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"decls.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>export</span> <span class='keyword'>using</span> <span class='operator'>::</span>f;   <span class='comment'>// OK: does not declare an entity, exports #1</span>
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// error: matches #2, but attached to <span class='tcode_in_codeblock'>M</span></span>
<span class='keyword'>export</span> <span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// #3</span>
<span class='keyword'>export</span> <span class='keyword'>int</span> k<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// #4</span>
</pre><p>Other translation unit:<pre class='codeblock'>
<span class='keyword'>import</span> M;
<span class='keyword'>static</span> <span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// error: matches #3</span>
<span class='keyword'>int</span> k<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// error: matches #4</span>
</pre> —&nbsp;<i>end example</i>]</div>  <div id='10.sentence-2' class='sentence'>
As a consequence of these rules,
all declarations of an entity are attached to the same module;
the entity is said to be <a class='hidden_link' href='#def:attached,entity' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:attached,entity'><span class='textit'>attached</span></span></a> to that module<a class='hidden_link' href='#10.sentence-2'>.</a></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2861'>#</a></div><div id='11.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':consistency,type_declaration'></a></span><span class='indexparent'><a class='index' id=':declaration,multiple'></a></span>After all adjustments of types (during which
<a href='dcl.typedef' title='9.2.3&emsp;The typedef specifier&emsp;[dcl.typedef]'>typedefs</a> are replaced by their definitions), the
types specified by all declarations referring to a given variable or
function shall be identical, except that declarations for an array
object can specify array types that differ by the presence or absence of
a major array bound (<a href='dcl.array' title='9.3.3.4&emsp;Arrays'>[dcl.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#11.sentence-1'>.</a></div> <div id='11.sentence-2' class='sentence'>A violation of this rule on type
identity does not require a diagnostic<a class='hidden_link' href='#11.sentence-2'>.</a></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2872'>#</a></div><div id='12.note-1' class='note'>[<a class='note_link' href='#12.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='12.sentence-1' class='sentence'>Linkage to non-C++ declarations can be achieved using a
<a href='dcl.link#nt:linkage-specification' title='9.11&emsp;Linkage specifications&emsp;[dcl.link]'><span id='ntref:linkage-specification'><span class='textsf'><span class='textit'>linkage-specification</span></span></span></a> (<a href='dcl.link' title='9.11&emsp;Linkage specifications'>[dcl.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#12.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div>  </div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2879'>#</a></div><div id='13.sentence-1' class='sentence'>A declaration <span class='math'><span class='mathalpha'>D</span></span> <a class='hidden_link' href='#def:name' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:name'><span class='textit'>names</span></span></a> an entity <span class='math'><span class='mathalpha'>E</span></span> if
<ul class='itemize'><li id='13.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.1'>(13.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> contains a <a href='expr.prim.lambda#nt:lambda-expression' title='7.5.5&emsp;Lambda expressions&emsp;[expr.prim.lambda]'><span id='ntref:lambda-expression'><span class='textsf'><span class='textit'>lambda-expression</span></span></span></a> whose closure type is <span class='math'><span class='mathalpha'>E</span></span>,</li><li id='13.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.2'>(13.2)</a></div><span class='math'><span class='mathalpha'>E</span></span> is not a function or function template and <span class='math'><span class='mathalpha'>D</span></span> contains an
<a href='expr.prim.id#nt:id-expression' title='7.5.4&emsp;Names&emsp;[expr.prim.id]'><span id='ntref:id-expression'><span class='textsf'><span class='textit'>id-expression</span></span></span></a>,
<a href='dcl.type#nt:type-specifier' title='9.2.8&emsp;Type specifiers&emsp;[dcl.type]'><span id='ntref:type-specifier'><span class='textsf'><span class='textit'>type-specifier</span></span></span></a>,
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.2&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><span class='textit'>nested-name-specifier</span></span></span></a>,
<a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><span class='textit'>template-name</span></span></span></a>, or
<a href='temp.concept#nt:concept-name' title='13.7.8&emsp;Concept definitions&emsp;[temp.concept]'><span id='ntref:concept-name'><span class='textsf'><span class='textit'>concept-name</span></span></span></a>
denoting <span class='math'><span class='mathalpha'>E</span></span>, or</li><li id='13.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#13.3'>(13.3)</a></div><span class='math'><span class='mathalpha'>E</span></span> is a function or function template and
<span class='math'><span class='mathalpha'>D</span></span> contains an expression that names <span class='math'><span class='mathalpha'>E</span></span> (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>) or
an <a href='expr.prim.id#nt:id-expression' title='7.5.4&emsp;Names&emsp;[expr.prim.id]'><span id='ntref:id-expression_'><span class='textsf'><span class='textit'>id-expression</span></span></span></a>
that refers to a set of overloads that contains <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#13.sentence-1'>.</a> <div id='13.3.note-1' class='note'>[<a class='note_link' href='#13.3.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='13.3.sentence-2' class='sentence'>Non-dependent names in an instantiated declaration
do not refer to a set of overloads (<a href='temp.nondep' title='13.8.3&emsp;Non-dependent names'>[temp.<span class='shy'></span>nondep]</a>)<a class='hidden_link' href='#13.3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </li></ul></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2903'>#</a></div><div id='14.sentence-1' class='sentence'>A declaration is an <a class='hidden_link' href='#def:exposure' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:exposure'><span class='textit'>exposure</span></span></a>
if it either names a TU-local entity (defined below), ignoring
<ul class='itemize'><li id='14.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#14.1'>(14.1)</a></div>the <a href='dcl.fct.def.general#nt:function-body' title='9.5.1&emsp;In general&emsp;[dcl.fct.def.general]'><span id='ntref:function-body'><span class='textsf'><span class='textit'>function-body</span></span></span></a>
for a non-inline function or function template
(but not the deduced return type
for a (possibly instantiated) definition of a function
with a declared return type that uses a placeholder type (<a href='dcl.spec.auto' title='9.2.8.5&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>)),</li><li id='14.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#14.2'>(14.2)</a></div>the <a href='dcl.init#nt:initializer' title='9.4&emsp;Initializers&emsp;[dcl.init]'><span id='ntref:initializer'><span class='textsf'><span class='textit'>initializer</span></span></span></a>
for a variable or variable template (but not the variable's type),</li><li id='14.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#14.3'>(14.3)</a></div>friend declarations in a class definition, and</li><li id='14.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#14.4'>(14.4)</a></div>any reference to a non-volatile const object or reference
with internal or no linkage initialized with a constant expression
that is not an odr-use (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>),</li></ul>
or defines a constexpr variable initialized to a TU-local value (defined below)<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='14.note-1' class='note'>[<a class='note_link' href='#14.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='14.sentence-2' class='sentence'>An inline function template can be an exposure even though
explicit specializations of it might be usable in other translation units<a class='hidden_link' href='#14.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2929'>#</a></div><div id='15.sentence-1' class='sentence'>An entity is <a class='hidden_link' href='#def:TU-local,entity' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:TU-local,entity'><span class='textit'>TU-local</span></span></a> if it is
<ul class='itemize'><li id='15.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.1'>(15.1)</a></div>a type, function, variable, or template that
<ul class='itemize'><li id='15.1.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#15.1.1'>(15.1.1)</a></div>has a name with internal linkage, or</li><li id='15.1.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#15.1.2'>(15.1.2)</a></div>does not have a name with linkage and is declared,
or introduced by a <a href='expr.prim.lambda#nt:lambda-expression' title='7.5.5&emsp;Lambda expressions&emsp;[expr.prim.lambda]'><span id='ntref:lambda-expression_'><span class='textsf'><span class='textit'>lambda-expression</span></span></span></a>,
within the definition of a TU-local entity,</li></ul></li><li id='15.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.2'>(15.2)</a></div>a type with no name that is defined outside a
<a href='class.pre#nt:class-specifier' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-specifier'><span class='textsf'><span class='textit'>class-specifier</span></span></span></a>,
function body, or
<a href='dcl.init#nt:initializer' title='9.4&emsp;Initializers&emsp;[dcl.init]'><span id='ntref:initializer_'><span class='textsf'><span class='textit'>initializer</span></span></span></a>
or is introduced by a <a href='dcl.type#nt:defining-type-specifier' title='9.2.8&emsp;Type specifiers&emsp;[dcl.type]'><span id='ntref:defining-type-specifier'><span class='textsf'><span class='textit'>defining-type-specifier</span></span></span></a>
that is used to declare only TU-local entities,</li><li id='15.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.3'>(15.3)</a></div>a specialization of a TU-local template,</li><li id='15.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.4'>(15.4)</a></div>a specialization of a template with any TU-local template argument, or</li><li id='15.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#15.5'>(15.5)</a></div>a specialization of a template
whose (possibly instantiated) declaration is an exposure<a class='hidden_link' href='#15.sentence-1'>.</a> <div id='15.5.note-1' class='note'>[<a class='note_link' href='#15.5.note-1'><span class='textit'>Note</span></a><span class='textit'>:</span> <div id='15.5.sentence-2' class='sentence'>The specialization might have been implicitly or explicitly instantiated<a class='hidden_link' href='#15.5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div> </li></ul></div></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2961'>#</a></div><div id='16.sentence-1' class='sentence'>A value or object is <a class='hidden_link' href='#def:TU-local,value_or_object' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='def:TU-local,value_or_object'><span class='textit'>TU-local</span></span></a> if either
<ul class='itemize'><li id='16.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.1'>(16.1)</a></div>it is, or is a pointer to,
a TU-local function or the object associated with a TU-local variable, or</li><li id='16.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#16.2'>(16.2)</a></div>it is an object of class or array type and
any of its subobjects or
any of the objects or functions
to which its non-static data members of reference type refer
is TU-local and is usable in constant expressions<a class='hidden_link' href='#16.sentence-1'>.</a></li></ul></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2975'>#</a></div><div id='17.sentence-1' class='sentence'>If a (possibly instantiated) declaration of, or a deduction guide for,
a non-TU-local entity in a module interface unit
(outside the <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment_'><span class='textsf'><span class='textit'>private-module-fragment</span></span></span></a>, if any) or
module partition (<a href='module.unit' title='10.1&emsp;Module units and purviews'>[module.<span class='shy'></span>unit]</a>) is an exposure,
the program is ill-formed<a class='hidden_link' href='#17.sentence-1'>.</a></div> <div id='17.sentence-2' class='sentence'>Such a declaration in any other context is deprecated (<a href='depr.local' title='D.7&emsp;Non-local use of TU-local entities'>[depr.<span class='shy'></span>local]</a>)<a class='hidden_link' href='#17.sentence-2'>.</a></div></div><div class='para' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2983'>#</a></div><div id='18.sentence-1' class='sentence'>If a declaration that appears in one translation unit
names a TU-local entity declared
in another translation unit that is not a header unit,
the program is ill-formed<a class='hidden_link' href='#18.sentence-1'>.</a></div> <div id='18.sentence-2' class='sentence'>A declaration instantiated for a template specialization (<a href='temp.spec' title='13.9&emsp;Template instantiation and specialization'>[temp.<span class='shy'></span>spec]</a>)
appears at the point of instantiation of the specialization (<a href='temp.point' title='13.8.4.1&emsp;Point of instantiation'>[temp.<span class='shy'></span>point]</a>)<a class='hidden_link' href='#18.sentence-2'>.</a></div></div><div class='para' id='19'><div class='marginalizedparent'><a class='marginalized' href='#19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0b54fd56b85dc886854b1297d620569582a82e63/source/basic.tex#L2991'>#</a></div><div id='19.example-1' class='example'>[<a class='example_link' href='#19.example-1'><span class='textit'>Example</span></a><span class='textit'>:</span> <p>Translation unit #1:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>static</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>inline</span> <span class='keyword'>void</span> it<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>           <span class='comment'>// error: is an exposure of <span class='tcode_in_codeblock'>f</span></span>
<span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> its<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>   <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> its<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>   <span class='comment'>// OK</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> g<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>decltype</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span> <span class='operator'>*</span>fp;                    <span class='comment'>// error: <span class='tcode_in_codeblock'>f</span> (though not its type) is TU-local</span>
<span class='keyword'>auto</span> <span class='operator'>&amp;</span>fr <span class='operator'>=</span> f;                       <span class='comment'>// OK</span>
<span class='keyword'>constexpr</span> <span class='keyword'>auto</span> <span class='operator'>&amp;</span>fr2 <span class='operator'>=</span> fr;           <span class='comment'>// error: is an exposure of <span class='tcode_in_codeblock'>f</span></span>
<span class='keyword'>constexpr</span> <span class='keyword'>static</span> <span class='keyword'>auto</span> fp2 <span class='operator'>=</span> fr;     <span class='comment'>// OK</span>

<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>ref<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span> s<span class='curlybracket'>{</span>f<span class='curlybracket'>}</span>;               <span class='comment'>// OK, value is TU-local</span>
<span class='keyword'>constexpr</span> <span class='keyword'>extern</span> <span class='keyword'>struct</span> W <span class='curlybracket'>{</span> S <span class='operator'>&amp;</span>s; <span class='curlybracket'>}</span> wrap<span class='curlybracket'>{</span>s<span class='curlybracket'>}</span>;    <span class='comment'>// OK, value is not TU-local</span>

<span class='keyword'>static</span> <span class='keyword'>auto</span> x <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;<span class='curlybracket'>}</span>;           <span class='comment'>// OK</span>
<span class='keyword'>auto</span> x2 <span class='operator'>=</span> x;                        <span class='comment'>// error: the closure type is TU-local</span>
<span class='keyword'>int</span> y <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;<span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>,<span class='literal'>0</span><span class='parenthesis'>)</span>;             <span class='comment'>// error: the closure type is not TU-local</span>
<span class='keyword'>int</span> y2 <span class='operator'>=</span> <span class='parenthesis'>(</span>x,<span class='literal'>0</span><span class='parenthesis'>)</span>;                     <span class='comment'>// OK</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>void</span> adl<span class='parenthesis'>(</span>A<span class='parenthesis'>)</span>;
  <span class='keyword'>static</span> <span class='keyword'>void</span> adl<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> adl<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;

<span class='keyword'>inline</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>auto</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> adl<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>   <span class='comment'>// OK, but a specialization might be an exposure</span>
</pre>
<p>Translation unit #2:<pre class='codeblock'>
<span class='keyword'>module</span> A;
<span class='keyword'>void</span> other<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                           <span class='comment'>// OK, specialization is explicitly instantiated</span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                           <span class='comment'>// error: instantiation uses TU-local <span class='tcode_in_codeblock'>its</span></span>
  h<span class='parenthesis'>(</span>N<span class='operator'>::</span>A<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                        <span class='comment'>// error: overload set contains TU-local <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;adl(int)</span></span>
  h<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                             <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>adl(double)</span></span>
  adl<span class='parenthesis'>(</span>N<span class='operator'>::</span>A<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK; <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;adl(int)</span> not found, calls <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;adl(N&#x200b;::&#x200b;A)</span></span>
  fr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                             <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>f</span></span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> ptr <span class='operator'>=</span> fr;          <span class='comment'>// error: <span class='tcode_in_codeblock'>fr</span> is not usable in constant expressions here</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i>]</div> </div></div></body></html>